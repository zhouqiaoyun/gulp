/*! MolView JavaScript Base libraries build on 2016-06-13 */
Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),function(a){for(var b,c,d={},e=function(){},f="memory".split(","),g="assert,clear,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profiles,profileEnd,show,table,time,timeEnd,timeline,timelineEnd,timeStamp,trace,warn".split(",");b=f.pop();)a[b]=a[b]||d;for(;c=g.pop();)a[c]=a[c]||e}(this.console=this.console||{}),!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b="length"in a&&a.length,c=_.type(a);return"function"===c||_.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if(_.isFunction(b))return _.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return _.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(ha.test(b))return _.filter(b,a,c);b=_.filter(b,a)}return _.grep(a,function(a){return U.call(b,a)>=0!==c})}function e(a,b){for(;(a=a[b])&&1!==a.nodeType;);return a}function f(a){var b=oa[a]={};return _.each(a.match(na)||[],function(a,c){b[c]=!0}),b}function g(){Z.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1),_.ready()}function h(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=_.expando+h.uid++}function i(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(ua,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:ta.test(c)?_.parseJSON(c):c}catch(e){}sa.set(a,b,c)}else c=void 0;return c}function j(){return!0}function k(){return!1}function l(){try{return Z.activeElement}catch(a){}}function m(a,b){return _.nodeName(a,"table")&&_.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function n(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function o(a){var b=Ka.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function p(a,b){for(var c=0,d=a.length;d>c;c++)ra.set(a[c],"globalEval",!b||ra.get(b[c],"globalEval"))}function q(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(ra.hasData(a)&&(f=ra.access(a),g=ra.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)_.event.add(b,e,j[e][c])}sa.hasData(a)&&(h=sa.access(a),i=_.extend({},h),sa.set(b,i))}}function r(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&_.nodeName(a,b)?_.merge([a],c):c}function s(a,b){var c=b.nodeName.toLowerCase();"input"===c&&ya.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}function t(b,c){var d,e=_(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:_.css(e[0],"display");return e.detach(),f}function u(a){var b=Z,c=Oa[a];return c||(c=t(a,b),"none"!==c&&c||(Na=(Na||_("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=Na[0].contentDocument,b.write(),b.close(),c=t(a,b),Na.detach()),Oa[a]=c),c}function v(a,b,c){var d,e,f,g,h=a.style;return c=c||Ra(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||_.contains(a.ownerDocument,a)||(g=_.style(a,b)),Qa.test(g)&&Pa.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function w(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}function x(a,b){if(b in a)return b;for(var c=b[0].toUpperCase()+b.slice(1),d=b,e=Xa.length;e--;)if(b=Xa[e]+c,b in a)return b;return d}function y(a,b,c){var d=Ta.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function z(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=_.css(a,c+wa[f],!0,e)),d?("content"===c&&(g-=_.css(a,"padding"+wa[f],!0,e)),"margin"!==c&&(g-=_.css(a,"border"+wa[f]+"Width",!0,e))):(g+=_.css(a,"padding"+wa[f],!0,e),"padding"!==c&&(g+=_.css(a,"border"+wa[f]+"Width",!0,e)));return g}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ra(a),g="border-box"===_.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=v(a,b,f),(0>e||null==e)&&(e=a.style[b]),Qa.test(e))return e;d=g&&(Y.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=ra.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&xa(d)&&(f[g]=ra.access(d,"olddisplay",u(d.nodeName)))):(e=xa(d),"none"===c&&e||ra.set(d,"olddisplay",e?c:_.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function C(a,b,c,d,e){return new C.prototype.init(a,b,c,d,e)}function D(){return setTimeout(function(){Ya=void 0}),Ya=_.now()}function E(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=wa[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function F(a,b,c){for(var d,e=(cb[b]||[]).concat(cb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function G(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},n=a.style,o=a.nodeType&&xa(a),p=ra.get(a,"fxshow");c.queue||(h=_._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,_.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[n.overflow,n.overflowX,n.overflowY],j=_.css(a,"display"),k="none"===j?ra.get(a,"olddisplay")||u(a.nodeName):j,"inline"===k&&"none"===_.css(a,"float")&&(n.display="inline-block")),c.overflow&&(n.overflow="hidden",l.always(function(){n.overflow=c.overflow[0],n.overflowX=c.overflow[1],n.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],$a.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(o?"hide":"show")){if("show"!==e||!p||void 0===p[d])continue;o=!0}m[d]=p&&p[d]||_.style(a,d)}else j=void 0;if(_.isEmptyObject(m))"inline"===("none"===j?u(a.nodeName):j)&&(n.display=j);else{p?"hidden"in p&&(o=p.hidden):p=ra.access(a,"fxshow",{}),f&&(p.hidden=!o),o?_(a).show():l.done(function(){_(a).hide()}),l.done(function(){var b;ra.remove(a,"fxshow");for(b in m)_.style(a,b,m[b])});for(d in m)g=F(o?p[d]:0,d,l),d in p||(p[d]=g.start,o&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function H(a,b){var c,d,e,f,g;for(c in a)if(d=_.camelCase(c),e=b[d],f=a[c],_.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=_.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function I(a,b,c){var d,e,f=0,g=bb.length,h=_.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Ya||D(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:_.extend({},b),opts:_.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Ya||D(),duration:c.duration,tweens:[],createTween:function(b,c){var d=_.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(H(k,j.opts.specialEasing);g>f;f++)if(d=bb[f].call(j,a,k,j.opts))return d;return _.map(k,F,j),_.isFunction(j.opts.start)&&j.opts.start.call(a,j),_.fx.timer(_.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(na)||[];if(_.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,_.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===tb;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=_.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&_.extend(!0,a,d),a}function M(a,b,c){for(var d,e,f,g,h=a.contents,i=a.dataTypes;"*"===i[0];)i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function N(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];for(f=k.shift();f;)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}function O(a,b,c,d){var e;if(_.isArray(b))_.each(b,function(b,e){c||yb.test(a)?d(a,e):O(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==_.type(b))d(a,b);else for(e in b)O(a+"["+e+"]",b[e],c,d)}function P(a){return _.isWindow(a)?a:9===a.nodeType&&a.defaultView}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y={},Z=a.document,$="2.1.4",_=function(a,b){return new _.fn.init(a,b)},aa=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ba=/^-ms-/,ca=/-([\da-z])/gi,da=function(a,b){return b.toUpperCase()};_.fn=_.prototype={jquery:$,constructor:_,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){var b=_.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return _.each(this,a,b)},map:function(a){return this.pushStack(_.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},_.extend=_.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||_.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(_.isPlainObject(d)||(e=_.isArray(d)))?(e?(e=!1,f=c&&_.isArray(c)?c:[]):f=c&&_.isPlainObject(c)?c:{},g[b]=_.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},_.extend({expando:"jQuery"+($+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===_.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!_.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==_.type(a)||a.nodeType||_.isWindow(a)?!1:!a.constructor||X.call(a.constructor.prototype,"isPrototypeOf")},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=_.trim(a),a&&(1===a.indexOf("use strict")?(b=Z.createElement("script"),b.text=a,Z.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(ba,"ms-").replace(ca,da)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length,h=c(a);if(d){if(h)for(;g>f&&(e=b.apply(a[f],d),e!==!1);f++);else for(f in a)if(e=b.apply(a[f],d),e===!1)break}else if(h)for(;g>f&&(e=b.call(a[f],f,a[f]),e!==!1);f++);else for(f in a)if(e=b.call(a[f],f,a[f]),e===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(aa,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?_.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){return null==b?-1:U.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,d){var e,f=0,g=a.length,h=c(a),i=[];if(h)for(;g>f;f++)e=b(a[f],f,d),null!=e&&i.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&i.push(e);return S.apply([],i)},guid:1,proxy:function(a,b){var c,d,e;return"string"==typeof b&&(c=a[b],b=a,a=c),_.isFunction(a)?(d=R.call(arguments,2),e=function(){return a.apply(b||this,d.concat(R.call(arguments)))},e.guid=a.guid=a.guid||_.guid++,e):void 0},now:Date.now,support:Y}),_.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var ea=function(a){function b(a,b,c,d){var e,f,g,h,i,j,l,n,o,p;if((b?b.ownerDocument||b:O)!==G&&F(b),b=b||G,c=c||[],h=b.nodeType,"string"!=typeof a||!a||1!==h&&9!==h&&11!==h)return c;if(!d&&I){if(11!==h&&(e=sa.exec(a)))if(g=e[1]){if(9===h){if(f=b.getElementById(g),!f||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&M(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return $.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&v.getElementsByClassName)return $.apply(c,b.getElementsByClassName(g)),c}if(v.qsa&&(!J||!J.test(a))){if(n=l=N,o=b,p=1!==h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(j=z(a),(l=b.getAttribute("id"))?n=l.replace(ua,"\\$&"):b.setAttribute("id",n),n="[id='"+n+"'] ",i=j.length;i--;)j[i]=n+m(j[i]);o=ta.test(a)&&k(b.parentNode)||b,p=j.join(",")}if(p)try{return $.apply(c,o.querySelectorAll(p)),c}catch(q){}finally{l||b.removeAttribute("id")}}}return B(a.replace(ia,"$1"),b,c,d)}function c(){function a(c,d){return b.push(c+" ")>w.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a}function d(a){return a[N]=!0,a}function e(a){var b=G.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function f(a,b){for(var c=a.split("|"),d=a.length;d--;)w.attrHandle[c[d]]=b}function g(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||V)-(~a.sourceIndex||V);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1}function h(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function i(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function j(a){return d(function(b){return b=+b,d(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function k(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}function l(){}function m(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function n(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Q++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[P,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[N]||(b[N]={}),(h=i[d])&&h[0]===P&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function o(a){return a.length>1?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]}function p(a,c,d){for(var e=0,f=c.length;f>e;e++)b(a,c[e],d);return d}function q(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function r(a,b,c,e,f,g){return e&&!e[N]&&(e=r(e)),f&&!f[N]&&(f=r(f,g)),d(function(d,g,h,i){var j,k,l,m=[],n=[],o=g.length,r=d||p(b||"*",h.nodeType?[h]:h,[]),s=!a||!d&&b?r:q(r,m,a,h,i),t=c?f||(d?a:o||e)?[]:g:s;if(c&&c(s,t,h,i),e)for(j=q(t,n),e(j,[],h,i),k=j.length;k--;)(l=j[k])&&(t[n[k]]=!(s[n[k]]=l));if(d){if(f||a){if(f){for(j=[],k=t.length;k--;)(l=t[k])&&j.push(s[k]=l);f(null,t=[],j,i)}for(k=t.length;k--;)(l=t[k])&&(j=f?aa(d,l):m[k])>-1&&(d[j]=!(g[j]=l))}}else t=q(t===g?t.splice(o,t.length):t),f?f(null,g,t,i):$.apply(g,t)})}function s(a){for(var b,c,d,e=a.length,f=w.relative[a[0].type],g=f||w.relative[" "],h=f?1:0,i=n(function(a){return a===b},g,!0),j=n(function(a){return aa(b,a)>-1},g,!0),k=[function(a,c,d){var e=!f&&(d||c!==C)||((b=c).nodeType?i(a,c,d):j(a,c,d));return b=null,e}];e>h;h++)if(c=w.relative[a[h].type])k=[n(o(k),c)];else{if(c=w.filter[a[h].type].apply(null,a[h].matches),c[N]){for(d=++h;e>d&&!w.relative[a[d].type];d++);return r(h>1&&o(k),h>1&&m(a.slice(0,h-1).concat({value:" "===a[h-2].type?"*":""})).replace(ia,"$1"),c,d>h&&s(a.slice(h,d)),e>d&&s(a=a.slice(d)),e>d&&m(a))}k.push(c)}return o(k)}function t(a,c){var e=c.length>0,f=a.length>0,g=function(d,g,h,i,j){var k,l,m,n=0,o="0",p=d&&[],r=[],s=C,t=d||f&&w.find.TAG("*",j),u=P+=null==s?1:Math.random()||.1,v=t.length;for(j&&(C=g!==G&&g);o!==v&&null!=(k=t[o]);o++){if(f&&k){for(l=0;m=a[l++];)if(m(k,g,h)){i.push(k);break}j&&(P=u)}e&&((k=!m&&k)&&n--,d&&p.push(k))}if(n+=o,e&&o!==n){for(l=0;m=c[l++];)m(p,r,g,h);if(d){if(n>0)for(;o--;)p[o]||r[o]||(r[o]=Y.call(i));r=q(r)}$.apply(i,r),j&&!d&&r.length>0&&n+c.length>1&&b.uniqueSort(i)}return j&&(P=u,C=s),p};return e?d(g):g}var u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N="sizzle"+1*new Date,O=a.document,P=0,Q=0,R=c(),S=c(),T=c(),U=function(a,b){return a===b&&(E=!0),0},V=1<<31,W={}.hasOwnProperty,X=[],Y=X.pop,Z=X.push,$=X.push,_=X.slice,aa=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},ba="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ca="[\\x20\\t\\r\\n\\f]",da="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ea=da.replace("w","w#"),fa="\\["+ca+"*("+da+")(?:"+ca+"*([*^$|!~]?=)"+ca+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ea+"))|)"+ca+"*\\]",ga=":("+da+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+fa+")*)|.*)\\)|)",ha=new RegExp(ca+"+","g"),ia=new RegExp("^"+ca+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ca+"+$","g"),ja=new RegExp("^"+ca+"*,"+ca+"*"),ka=new RegExp("^"+ca+"*([>+~]|"+ca+")"+ca+"*"),la=new RegExp("="+ca+"*([^\\]'\"]*?)"+ca+"*\\]","g"),ma=new RegExp(ga),na=new RegExp("^"+ea+"$"),oa={ID:new RegExp("^#("+da+")"),CLASS:new RegExp("^\\.("+da+")"),TAG:new RegExp("^("+da.replace("w","w*")+")"),ATTR:new RegExp("^"+fa),PSEUDO:new RegExp("^"+ga),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ca+"*(even|odd|(([+-]|)(\\d*)n|)"+ca+"*(?:([+-]|)"+ca+"*(\\d+)|))"+ca+"*\\)|)","i"),bool:new RegExp("^(?:"+ba+")$","i"),needsContext:new RegExp("^"+ca+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ca+"*((?:-\\d)?\\d*)"+ca+"*\\)|)(?=[^-]|$)","i")},pa=/^(?:input|select|textarea|button)$/i,qa=/^h\d$/i,ra=/^[^{]+\{\s*\[native \w/,sa=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ta=/[+~]/,ua=/'|\\/g,va=new RegExp("\\\\([\\da-f]{1,6}"+ca+"?|("+ca+")|.)","ig"),wa=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},xa=function(){F()};try{$.apply(X=_.call(O.childNodes),O.childNodes),X[O.childNodes.length].nodeType}catch(ya){$={apply:X.length?function(a,b){Z.apply(a,_.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}v=b.support={},y=b.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},F=b.setDocument=function(a){var b,c,d=a?a.ownerDocument||a:O;return d!==G&&9===d.nodeType&&d.documentElement?(G=d,H=d.documentElement,c=d.defaultView,c&&c!==c.top&&(c.addEventListener?c.addEventListener("unload",xa,!1):c.attachEvent&&c.attachEvent("onunload",xa)),I=!y(d),v.attributes=e(function(a){return a.className="i",!a.getAttribute("className")}),v.getElementsByTagName=e(function(a){return a.appendChild(d.createComment("")),!a.getElementsByTagName("*").length}),v.getElementsByClassName=ra.test(d.getElementsByClassName),v.getById=e(function(a){return H.appendChild(a).id=N,!d.getElementsByName||!d.getElementsByName(N).length}),v.getById?(w.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&I){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){return a.getAttribute("id")===b}}):(delete w.find.ID,w.filter.ID=function(a){var b=a.replace(va,wa);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),w.find.TAG=v.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):v.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},w.find.CLASS=v.getElementsByClassName&&function(a,b){return I?b.getElementsByClassName(a):void 0},K=[],J=[],(v.qsa=ra.test(d.querySelectorAll))&&(e(function(a){H.appendChild(a).innerHTML="<a id='"+N+"'></a><select id='"+N+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&J.push("[*^$]="+ca+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||J.push("\\["+ca+"*(?:value|"+ba+")"),a.querySelectorAll("[id~="+N+"-]").length||J.push("~="),a.querySelectorAll(":checked").length||J.push(":checked"),a.querySelectorAll("a#"+N+"+*").length||J.push(".#.+[+~]")}),e(function(a){var b=d.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&J.push("name"+ca+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||J.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),J.push(",.*:")})),(v.matchesSelector=ra.test(L=H.matches||H.webkitMatchesSelector||H.mozMatchesSelector||H.oMatchesSelector||H.msMatchesSelector))&&e(function(a){v.disconnectedMatch=L.call(a,"div"),L.call(a,"[s!='']:x"),K.push("!=",ga)}),J=J.length&&new RegExp(J.join("|")),K=K.length&&new RegExp(K.join("|")),b=ra.test(H.compareDocumentPosition),M=b||ra.test(H.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},U=b?function(a,b){if(a===b)return E=!0,0;var c=!a.compareDocumentPosition-!b.compareDocumentPosition;return c?c:(c=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&c||!v.sortDetached&&b.compareDocumentPosition(a)===c?a===d||a.ownerDocument===O&&M(O,a)?-1:b===d||b.ownerDocument===O&&M(O,b)?1:D?aa(D,a)-aa(D,b):0:4&c?-1:1)}:function(a,b){if(a===b)return E=!0,0;var c,e=0,f=a.parentNode,h=b.parentNode,i=[a],j=[b];if(!f||!h)return a===d?-1:b===d?1:f?-1:h?1:D?aa(D,a)-aa(D,b):0;if(f===h)return g(a,b);for(c=a;c=c.parentNode;)i.unshift(c);for(c=b;c=c.parentNode;)j.unshift(c);for(;i[e]===j[e];)e++;return e?g(i[e],j[e]):i[e]===O?-1:j[e]===O?1:0},d):G},b.matches=function(a,c){return b(a,null,null,c)},b.matchesSelector=function(a,c){if((a.ownerDocument||a)!==G&&F(a),c=c.replace(la,"='$1']"),!(!v.matchesSelector||!I||K&&K.test(c)||J&&J.test(c)))try{var d=L.call(a,c);if(d||v.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return b(c,G,null,[a]).length>0},b.contains=function(a,b){return(a.ownerDocument||a)!==G&&F(a),M(a,b)},b.attr=function(a,b){(a.ownerDocument||a)!==G&&F(a);var c=w.attrHandle[b.toLowerCase()],d=c&&W.call(w.attrHandle,b.toLowerCase())?c(a,b,!I):void 0;return void 0!==d?d:v.attributes||!I?a.getAttribute(b):(d=a.getAttributeNode(b))&&d.specified?d.value:null},b.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},b.uniqueSort=function(a){var b,c=[],d=0,e=0;if(E=!v.detectDuplicates,D=!v.sortStable&&a.slice(0),a.sort(U),E){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return D=null,a},x=b.getText=function(a){var b,c="",d=0,e=a.nodeType;if(e){if(1===e||9===e||11===e){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=x(a)}else if(3===e||4===e)return a.nodeValue}else for(;b=a[d++];)c+=x(b);return c},w=b.selectors={cacheLength:50,createPseudo:d,match:oa,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(va,wa),a[3]=(a[3]||a[4]||a[5]||"").replace(va,wa),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||b.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&b.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return oa.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&ma.test(c)&&(b=z(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(va,wa).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=R[a+" "];return b||(b=new RegExp("(^|"+ca+")"+a+"("+ca+"|$)"))&&R(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,c,d){return function(e){var f=b.attr(e,a);return null==f?"!="===c:c?(f+="","="===c?f===d:"!="===c?f!==d:"^="===c?d&&0===f.indexOf(d):"*="===c?d&&f.indexOf(d)>-1:"$="===c?d&&f.slice(-d.length)===d:"~="===c?(" "+f.replace(ha," ")+" ").indexOf(d)>-1:"|="===c?f===d||f.slice(0,d.length+1)===d+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){for(;p;){for(l=b;l=l[p];)if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){for(k=q[N]||(q[N]={}),j=k[a]||[],n=j[0]===P&&j[1],m=j[0]===P&&j[2],l=n&&q.childNodes[n];l=++n&&l&&l[p]||(m=n=0)||o.pop();)if(1===l.nodeType&&++m&&l===b){k[a]=[P,n,m];break}}else if(s&&(j=(b[N]||(b[N]={}))[a])&&j[0]===P)m=j[1];else for(;(l=++n&&l&&l[p]||(m=n=0)||o.pop())&&((h?l.nodeName.toLowerCase()!==r:1!==l.nodeType)||!++m||(s&&((l[N]||(l[N]={}))[a]=[P,m]),l!==b)););return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,c){var e,f=w.pseudos[a]||w.setFilters[a.toLowerCase()]||b.error("unsupported pseudo: "+a);return f[N]?f(c):f.length>1?(e=[a,a,"",c],w.setFilters.hasOwnProperty(a.toLowerCase())?d(function(a,b){for(var d,e=f(a,c),g=e.length;g--;)d=aa(a,e[g]),a[d]=!(b[d]=e[g])}):function(a){return f(a,0,e)}):f}},pseudos:{not:d(function(a){var b=[],c=[],e=A(a.replace(ia,"$1"));return e[N]?d(function(a,b,c,d){for(var f,g=e(a,null,d,[]),h=a.length;h--;)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,d,f){return b[0]=a,e(b,null,f,c),b[0]=null,!c.pop()}}),has:d(function(a){return function(c){return b(a,c).length>0}}),contains:d(function(a){return a=a.replace(va,wa),function(b){return(b.textContent||b.innerText||x(b)).indexOf(a)>-1}}),lang:d(function(a){return na.test(a||"")||b.error("unsupported lang: "+a),a=a.replace(va,wa).toLowerCase(),function(b){var c;do if(c=I?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===H},focus:function(a){return a===G.activeElement&&(!G.hasFocus||G.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!w.pseudos.empty(a)},header:function(a){return qa.test(a.nodeName)},input:function(a){return pa.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:j(function(){return[0]}),last:j(function(a,b){return[b-1]}),eq:j(function(a,b,c){return[0>c?c+b:c]}),even:j(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:j(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:j(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:j(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},w.pseudos.nth=w.pseudos.eq;for(u in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})w.pseudos[u]=h(u);for(u in{submit:!0,reset:!0})w.pseudos[u]=i(u);return l.prototype=w.filters=w.pseudos,w.setFilters=new l,z=b.tokenize=function(a,c){var d,e,f,g,h,i,j,k=S[a+" "];if(k)return c?0:k.slice(0);for(h=a,i=[],j=w.preFilter;h;){(!d||(e=ja.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),d=!1,(e=ka.exec(h))&&(d=e.shift(),f.push({value:d,type:e[0].replace(ia," ")}),h=h.slice(d.length));for(g in w.filter)!(e=oa[g].exec(h))||j[g]&&!(e=j[g](e))||(d=e.shift(),f.push({value:d,type:g,matches:e}),h=h.slice(d.length));if(!d)break}return c?h.length:h?b.error(a):S(a,i).slice(0)},A=b.compile=function(a,b){var c,d=[],e=[],f=T[a+" "];if(!f){for(b||(b=z(a)),c=b.length;c--;)f=s(b[c]),f[N]?d.push(f):e.push(f);f=T(a,t(e,d)),f.selector=a}return f},B=b.select=function(a,b,c,d){var e,f,g,h,i,j="function"==typeof a&&a,l=!d&&z(a=j.selector||a);if(c=c||[],1===l.length){if(f=l[0]=l[0].slice(0),f.length>2&&"ID"===(g=f[0]).type&&v.getById&&9===b.nodeType&&I&&w.relative[f[1].type]){if(b=(w.find.ID(g.matches[0].replace(va,wa),b)||[])[0],!b)return c;j&&(b=b.parentNode),a=a.slice(f.shift().value.length)}for(e=oa.needsContext.test(a)?0:f.length;e--&&(g=f[e],!w.relative[h=g.type]);)if((i=w.find[h])&&(d=i(g.matches[0].replace(va,wa),ta.test(f[0].type)&&k(b.parentNode)||b))){if(f.splice(e,1),a=d.length&&m(f),!a)return $.apply(c,d),c;break}}return(j||A(a,l))(d,b,!I,c,ta.test(a)&&k(b.parentNode)||b),c},v.sortStable=N.split("").sort(U).join("")===N,v.detectDuplicates=!!E,F(),v.sortDetached=e(function(a){return 1&a.compareDocumentPosition(G.createElement("div"))}),e(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||f("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),v.attributes&&e(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value");
})||f("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),e(function(a){return null==a.getAttribute("disabled")})||f(ba,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),b}(a);_.find=ea,_.expr=ea.selectors,_.expr[":"]=_.expr.pseudos,_.unique=ea.uniqueSort,_.text=ea.getText,_.isXMLDoc=ea.isXML,_.contains=ea.contains;var fa=_.expr.match.needsContext,ga=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ha=/^.[^:#\[\.,]*$/;_.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?_.find.matchesSelector(d,a)?[d]:[]:_.find.matches(a,_.grep(b,function(a){return 1===a.nodeType}))},_.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(_(a).filter(function(){for(b=0;c>b;b++)if(_.contains(e[b],this))return!0}));for(b=0;c>b;b++)_.find(a,e[b],d);return d=this.pushStack(c>1?_.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&fa.test(a)?_(a):a||[],!1).length}});var ia,ja=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ka=_.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:ja.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||ia).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof _?b[0]:b,_.merge(this,_.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:Z,!0)),ga.test(c[1])&&_.isPlainObject(b))for(c in b)_.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=Z.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=Z,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):_.isFunction(a)?"undefined"!=typeof ia.ready?ia.ready(a):a(_):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),_.makeArray(a,this))};ka.prototype=_.fn,ia=_(Z);var la=/^(?:parents|prev(?:Until|All))/,ma={children:!0,contents:!0,next:!0,prev:!0};_.extend({dir:function(a,b,c){for(var d=[],e=void 0!==c;(a=a[b])&&9!==a.nodeType;)if(1===a.nodeType){if(e&&_(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),_.fn.extend({has:function(a){var b=_(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(_.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=fa.test(a)||"string"!=typeof a?_(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&_.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?_.unique(f):f)},index:function(a){return a?"string"==typeof a?U.call(_(a),this[0]):U.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(_.unique(_.merge(this.get(),_(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),_.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return _.dir(a,"parentNode")},parentsUntil:function(a,b,c){return _.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return _.dir(a,"nextSibling")},prevAll:function(a){return _.dir(a,"previousSibling")},nextUntil:function(a,b,c){return _.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return _.dir(a,"previousSibling",c)},siblings:function(a){return _.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return _.sibling(a.firstChild)},contents:function(a){return a.contentDocument||_.merge([],a.childNodes)}},function(a,b){_.fn[a]=function(c,d){var e=_.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=_.filter(d,e)),this.length>1&&(ma[a]||_.unique(e),la.test(a)&&e.reverse()),this.pushStack(e)}});var na=/\S+/g,oa={};_.Callbacks=function(a){a="string"==typeof a?oa[a]||f(a):_.extend({},a);var b,c,d,e,g,h,i=[],j=!a.once&&[],k=function(f){for(b=a.memory&&f,c=!0,h=e||0,e=0,g=i.length,d=!0;i&&g>h;h++)if(i[h].apply(f[0],f[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,i&&(j?j.length&&k(j.shift()):b?i=[]:l.disable())},l={add:function(){if(i){var c=i.length;!function f(b){_.each(b,function(b,c){var d=_.type(c);"function"===d?a.unique&&l.has(c)||i.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),d?g=i.length:b&&(e=c,k(b))}return this},remove:function(){return i&&_.each(arguments,function(a,b){for(var c;(c=_.inArray(b,i,c))>-1;)i.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?_.inArray(a,i)>-1:!(!i||!i.length)},empty:function(){return i=[],g=0,this},disable:function(){return i=j=b=void 0,this},disabled:function(){return!i},lock:function(){return j=void 0,b||l.disable(),this},locked:function(){return!j},fireWith:function(a,b){return!i||c&&!j||(b=b||[],b=[a,b.slice?b.slice():b],d?j.push(b):k(b)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!c}};return l},_.extend({Deferred:function(a){var b=[["resolve","done",_.Callbacks("once memory"),"resolved"],["reject","fail",_.Callbacks("once memory"),"rejected"],["notify","progress",_.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return _.Deferred(function(c){_.each(b,function(b,f){var g=_.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&_.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?_.extend(a,d):d}},e={};return d.pipe=d.then,_.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&_.isFunction(a.promise)?g:0,i=1===h?a:_.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=arguments.length>1?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=new Array(g),c=new Array(g),d=new Array(g);g>e;e++)f[e]&&_.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var pa;_.fn.ready=function(a){return _.ready.promise().done(a),this},_.extend({isReady:!1,readyWait:1,holdReady:function(a){a?_.readyWait++:_.ready(!0)},ready:function(a){(a===!0?--_.readyWait:_.isReady)||(_.isReady=!0,a!==!0&&--_.readyWait>0||(pa.resolveWith(Z,[_]),_.fn.triggerHandler&&(_(Z).triggerHandler("ready"),_(Z).off("ready"))))}}),_.ready.promise=function(b){return pa||(pa=_.Deferred(),"complete"===Z.readyState?setTimeout(_.ready):(Z.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1))),pa.promise(b)},_.ready.promise();var qa=_.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===_.type(c)){e=!0;for(h in c)_.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,_.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(_(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};_.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType},h.uid=1,h.accepts=_.acceptData,h.prototype={key:function(a){if(!h.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=h.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,_.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(_.isEmptyObject(f))_.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,_.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{_.isArray(b)?d=b.concat(b.map(_.camelCase)):(e=_.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(na)||[])),c=d.length;for(;c--;)delete g[d[c]]}},hasData:function(a){return!_.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var ra=new h,sa=new h,ta=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ua=/([A-Z])/g;_.extend({hasData:function(a){return sa.hasData(a)||ra.hasData(a)},data:function(a,b,c){return sa.access(a,b,c)},removeData:function(a,b){sa.remove(a,b)},_data:function(a,b,c){return ra.access(a,b,c)},_removeData:function(a,b){ra.remove(a,b)}}),_.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=sa.get(f),1===f.nodeType&&!ra.get(f,"hasDataAttrs"))){for(c=g.length;c--;)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=_.camelCase(d.slice(5)),i(f,d,e[d])));ra.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){sa.set(this,a)}):qa(this,function(b){var c,d=_.camelCase(a);if(f&&void 0===b){if(c=sa.get(f,a),void 0!==c)return c;if(c=sa.get(f,d),void 0!==c)return c;if(c=i(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=sa.get(this,d);sa.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&sa.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){sa.remove(this,a)})}}),_.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=ra.get(a,b),c&&(!d||_.isArray(c)?d=ra.access(a,b,_.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=_.queue(a,b),d=c.length,e=c.shift(),f=_._queueHooks(a,b),g=function(){_.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return ra.get(a,c)||ra.access(a,c,{empty:_.Callbacks("once memory").add(function(){ra.remove(a,[b+"queue",c])})})}}),_.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?_.queue(this[0],a):void 0===b?this:this.each(function(){var c=_.queue(this,a,b);_._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&_.dequeue(this,a)})},dequeue:function(a){return this.each(function(){_.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=_.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)c=ra.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var va=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,wa=["Top","Right","Bottom","Left"],xa=function(a,b){return a=b||a,"none"===_.css(a,"display")||!_.contains(a.ownerDocument,a)},ya=/^(?:checkbox|radio)$/i;!function(){var a=Z.createDocumentFragment(),b=a.appendChild(Z.createElement("div")),c=Z.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),Y.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",Y.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var za="undefined";Y.focusinBubbles="onfocusin"in a;var Aa=/^key/,Ba=/^(?:mouse|pointer|contextmenu)|click/,Ca=/^(?:focusinfocus|focusoutblur)$/,Da=/^([^.]*)(?:\.(.+)|)$/;_.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.get(a);if(q)for(c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=_.guid++),(i=q.events)||(i=q.events={}),(g=q.handle)||(g=q.handle=function(b){return typeof _!==za&&_.event.triggered!==b.type?_.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(na)||[""],j=b.length;j--;)h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n&&(l=_.event.special[n]||{},n=(e?l.delegateType:l.bindType)||n,l=_.event.special[n]||{},k=_.extend({type:n,origType:p,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&_.expr.match.needsContext.test(e),namespace:o.join(".")},f),(m=i[n])||(m=i[n]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,o,g)!==!1||a.addEventListener&&a.addEventListener(n,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),_.event.global[n]=!0)},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=ra.hasData(a)&&ra.get(a);if(q&&(i=q.events)){for(b=(b||"").match(na)||[""],j=b.length;j--;)if(h=Da.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=_.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=i[n]||[],h=h[2]&&new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;f--;)k=m[f],!e&&p!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,o,q.handle)!==!1||_.removeEvent(a,n,q.handle),delete i[n])}else for(n in i)_.event.remove(a,n+b[j],c,d,!0);_.isEmptyObject(i)&&(delete q.handle,ra.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l,m=[d||Z],n=X.call(b,"type")?b.type:b,o=X.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||Z,3!==d.nodeType&&8!==d.nodeType&&!Ca.test(n+_.event.triggered)&&(n.indexOf(".")>=0&&(o=n.split("."),n=o.shift(),o.sort()),j=n.indexOf(":")<0&&"on"+n,b=b[_.expando]?b:new _.Event(n,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=o.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:_.makeArray(c,[b]),l=_.event.special[n]||{},e||!l.trigger||l.trigger.apply(d,c)!==!1)){if(!e&&!l.noBubble&&!_.isWindow(d)){for(i=l.delegateType||n,Ca.test(i+n)||(g=g.parentNode);g;g=g.parentNode)m.push(g),h=g;h===(d.ownerDocument||Z)&&m.push(h.defaultView||h.parentWindow||a)}for(f=0;(g=m[f++])&&!b.isPropagationStopped();)b.type=f>1?i:l.bindType||n,k=(ra.get(g,"events")||{})[b.type]&&ra.get(g,"handle"),k&&k.apply(g,c),k=j&&g[j],k&&k.apply&&_.acceptData(g)&&(b.result=k.apply(g,c),b.result===!1&&b.preventDefault());return b.type=n,e||b.isDefaultPrevented()||l._default&&l._default.apply(m.pop(),c)!==!1||!_.acceptData(d)||j&&_.isFunction(d[n])&&!_.isWindow(d)&&(h=d[j],h&&(d[j]=null),_.event.triggered=n,d[n](),_.event.triggered=void 0,h&&(d[j]=h)),b.result}},dispatch:function(a){a=_.event.fix(a);var b,c,d,e,f,g=[],h=R.call(arguments),i=(ra.get(this,"events")||{})[a.type]||[],j=_.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!j.preDispatch||j.preDispatch.call(this,a)!==!1){for(g=_.event.handlers.call(this,a,i),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,c=0;(f=e.handlers[c++])&&!a.isImmediatePropagationStopped();)(!a.namespace_re||a.namespace_re.test(f.namespace))&&(a.handleObj=f,a.data=f.data,d=((_.event.special[f.origType]||{}).handle||f.handler).apply(e.elem,h),void 0!==d&&(a.result=d)===!1&&(a.preventDefault(),a.stopPropagation()));return j.postDispatch&&j.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?_(e,this).index(i)>=0:_.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||Z,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[_.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];for(g||(this.fixHooks[e]=g=Ba.test(e)?this.mouseHooks:Aa.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new _.Event(f),b=d.length;b--;)c=d[b],a[c]=f[c];return a.target||(a.target=Z),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&_.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return _.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=_.extend(new _.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?_.event.trigger(e,null,b):_.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},_.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},_.Event=function(a,b){return this instanceof _.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?j:k):this.type=a,b&&_.extend(this,b),this.timeStamp=a&&a.timeStamp||_.now(),void(this[_.expando]=!0)):new _.Event(a,b)},_.Event.prototype={isDefaultPrevented:k,isPropagationStopped:k,isImmediatePropagationStopped:k,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=j,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=j,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=j,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},_.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){_.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!_.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),Y.focusinBubbles||_.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){_.event.simulate(b,a.target,_.event.fix(a),!0)};_.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=ra.access(d,b);e||d.addEventListener(a,c,!0),ra.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=ra.access(d,b)-1;e?ra.access(d,b,e):(d.removeEventListener(a,c,!0),ra.remove(d,b))}}}),_.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=k;else if(!d)return this;return 1===e&&(f=d,d=function(a){return _().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=_.guid++)),this.each(function(){_.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,_(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=k),this.each(function(){_.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){_.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?_.event.trigger(a,b,c,!0):void 0}});var Ea=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Fa=/<([\w:]+)/,Ga=/<|&#?\w+;/,Ha=/<(?:script|style|link)/i,Ia=/checked\s*(?:[^=]|=\s*.checked.)/i,Ja=/^$|\/(?:java|ecma)script/i,Ka=/^true\/(.*)/,La=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ma={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ma.optgroup=Ma.option,Ma.tbody=Ma.tfoot=Ma.colgroup=Ma.caption=Ma.thead,Ma.th=Ma.td,_.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=_.contains(a.ownerDocument,a);if(!(Y.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||_.isXMLDoc(a)))for(g=r(h),f=r(a),d=0,e=f.length;e>d;d++)s(f[d],g[d]);if(b)if(c)for(f=f||r(a),g=g||r(h),d=0,e=f.length;e>d;d++)q(f[d],g[d]);else q(a,h);return g=r(h,"script"),g.length>0&&p(g,!i&&r(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,n=a.length;n>m;m++)if(e=a[m],e||0===e)if("object"===_.type(e))_.merge(l,e.nodeType?[e]:e);else if(Ga.test(e)){for(f=f||k.appendChild(b.createElement("div")),g=(Fa.exec(e)||["",""])[1].toLowerCase(),h=Ma[g]||Ma._default,f.innerHTML=h[1]+e.replace(Ea,"<$1></$2>")+h[2],j=h[0];j--;)f=f.lastChild;_.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));for(k.textContent="",m=0;e=l[m++];)if((!d||-1===_.inArray(e,d))&&(i=_.contains(e.ownerDocument,e),f=r(k.appendChild(e),"script"),i&&p(f),c))for(j=0;e=f[j++];)Ja.test(e.type||"")&&c.push(e);return k},cleanData:function(a){for(var b,c,d,e,f=_.event.special,g=0;void 0!==(c=a[g]);g++){if(_.acceptData(c)&&(e=c[ra.expando],e&&(b=ra.cache[e]))){if(b.events)for(d in b.events)f[d]?_.event.remove(c,d):_.removeEvent(c,d,b.handle);ra.cache[e]&&delete ra.cache[e]}delete sa.cache[c[sa.expando]]}}}),_.fn.extend({text:function(a){return qa(this,function(a){return void 0===a?_.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=m(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?_.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||_.cleanData(r(c)),c.parentNode&&(b&&_.contains(c.ownerDocument,c)&&p(r(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(_.cleanData(r(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return _.clone(this,a,b)})},html:function(a){return qa(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!Ha.test(a)&&!Ma[(Fa.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(Ea,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(_.cleanData(r(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,_.cleanData(r(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g,h,i=0,j=this.length,k=this,l=j-1,m=a[0],p=_.isFunction(m);if(p||j>1&&"string"==typeof m&&!Y.checkClone&&Ia.test(m))return this.each(function(c){var d=k.eq(c);p&&(a[0]=m.call(this,c,d.html())),d.domManip(a,b)});if(j&&(c=_.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(e=_.map(r(c,"script"),n),f=e.length;j>i;i++)g=c,i!==l&&(g=_.clone(g,!0,!0),f&&_.merge(e,r(g,"script"))),b.call(this[i],g,i);if(f)for(h=e[e.length-1].ownerDocument,_.map(e,o),i=0;f>i;i++)g=e[i],Ja.test(g.type||"")&&!ra.access(g,"globalEval")&&_.contains(h,g)&&(g.src?_._evalUrl&&_._evalUrl(g.src):_.globalEval(g.textContent.replace(La,"")))}return this}}),_.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){_.fn[a]=function(a){for(var c,d=[],e=_(a),f=e.length-1,g=0;f>=g;g++)c=g===f?this:this.clone(!0),_(e[g])[b](c),T.apply(d,c.get());return this.pushStack(d)}});var Na,Oa={},Pa=/^margin/,Qa=new RegExp("^("+va+")(?!px)[a-z%]+$","i"),Ra=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};!function(){function b(){g.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",g.innerHTML="",e.appendChild(f);var b=a.getComputedStyle(g,null);c="1%"!==b.top,d="4px"===b.width,e.removeChild(f)}var c,d,e=Z.documentElement,f=Z.createElement("div"),g=Z.createElement("div");g.style&&(g.style.backgroundClip="content-box",g.cloneNode(!0).style.backgroundClip="",Y.clearCloneStyle="content-box"===g.style.backgroundClip,f.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",f.appendChild(g),a.getComputedStyle&&_.extend(Y,{pixelPosition:function(){return b(),c},boxSizingReliable:function(){return null==d&&b(),d},reliableMarginRight:function(){var b,c=g.appendChild(Z.createElement("div"));return c.style.cssText=g.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",g.style.width="1px",e.appendChild(f),b=!parseFloat(a.getComputedStyle(c,null).marginRight),e.removeChild(f),g.removeChild(c),b}}))}(),_.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Sa=/^(none|table(?!-c[ea]).+)/,Ta=new RegExp("^("+va+")(.*)$","i"),Ua=new RegExp("^([+-])=("+va+")","i"),Va={position:"absolute",visibility:"hidden",display:"block"},Wa={letterSpacing:"0",fontWeight:"400"},Xa=["Webkit","O","Moz","ms"];_.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=v(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=_.camelCase(b),i=a.style;return b=_.cssProps[h]||(_.cssProps[h]=x(i,h)),g=_.cssHooks[b]||_.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Ua.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(_.css(a,b)),f="number"),void(null!=c&&c===c&&("number"!==f||_.cssNumber[h]||(c+="px"),Y.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c))))}},css:function(a,b,c,d){var e,f,g,h=_.camelCase(b);return b=_.cssProps[h]||(_.cssProps[h]=x(a.style,h)),g=_.cssHooks[b]||_.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=v(a,b,d)),"normal"===e&&b in Wa&&(e=Wa[b]),""===c||c?(f=parseFloat(e),c===!0||_.isNumeric(f)?f||0:e):e}}),_.each(["height","width"],function(a,b){_.cssHooks[b]={get:function(a,c,d){return c?Sa.test(_.css(a,"display"))&&0===a.offsetWidth?_.swap(a,Va,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Ra(a);return y(a,c,d?z(a,b,d,"border-box"===_.css(a,"boxSizing",!1,e),e):0)}}}),_.cssHooks.marginRight=w(Y.reliableMarginRight,function(a,b){return b?_.swap(a,{display:"inline-block"},v,[a,"marginRight"]):void 0}),_.each({margin:"",padding:"",border:"Width"},function(a,b){_.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+wa[d]+b]=f[d]||f[d-2]||f[0];return e}},Pa.test(a)||(_.cssHooks[a+b].set=y)}),_.fn.extend({css:function(a,b){return qa(this,function(a,b,c){var d,e,f={},g=0;if(_.isArray(b)){for(d=Ra(a),e=b.length;e>g;g++)f[b[g]]=_.css(a,b[g],!1,d);return f}return void 0!==c?_.style(a,b,c):_.css(a,b)},a,b,arguments.length>1)},show:function(){return B(this,!0)},hide:function(){return B(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){xa(this)?_(this).show():_(this).hide()})}}),_.Tween=C,C.prototype={constructor:C,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(_.cssNumber[c]?"":"px")},cur:function(){var a=C.propHooks[this.prop];return a&&a.get?a.get(this):C.propHooks._default.get(this)},run:function(a){var b,c=C.propHooks[this.prop];return this.options.duration?this.pos=b=_.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):this.pos=b=a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):C.propHooks._default.set(this),this}},C.prototype.init.prototype=C.prototype,C.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=_.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){_.fx.step[a.prop]?_.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[_.cssProps[a.prop]]||_.cssHooks[a.prop])?_.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},C.propHooks.scrollTop=C.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},_.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},_.fx=C.prototype.init,_.fx.step={};var Ya,Za,$a=/^(?:toggle|show|hide)$/,_a=new RegExp("^(?:([+-])=|)("+va+")([a-z%]*)$","i"),ab=/queueHooks$/,bb=[G],cb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=_a.exec(b),f=e&&e[3]||(_.cssNumber[a]?"":"px"),g=(_.cssNumber[a]||"px"!==f&&+d)&&_a.exec(_.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,_.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};_.Animation=_.extend(I,{tweener:function(a,b){_.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],cb[c]=cb[c]||[],cb[c].unshift(b)},prefilter:function(a,b){b?bb.unshift(a):bb.push(a)}}),_.speed=function(a,b,c){var d=a&&"object"==typeof a?_.extend({},a):{complete:c||!c&&b||_.isFunction(a)&&a,duration:a,easing:c&&b||b&&!_.isFunction(b)&&b};return d.duration=_.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in _.fx.speeds?_.fx.speeds[d.duration]:_.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){_.isFunction(d.old)&&d.old.call(this),d.queue&&_.dequeue(this,d.queue)},d},_.fn.extend({fadeTo:function(a,b,c,d){return this.filter(xa).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=_.isEmptyObject(a),f=_.speed(b,c,d),g=function(){var b=I(this,_.extend({},a),f);
(e||ra.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=_.timers,g=ra.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&ab.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&_.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=ra.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=_.timers,g=d?d.length:0;for(c.finish=!0,_.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),_.each(["toggle","show","hide"],function(a,b){var c=_.fn[b];_.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(E(b,!0),a,d,e)}}),_.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){_.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),_.timers=[],_.fx.tick=function(){var a,b=0,c=_.timers;for(Ya=_.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||_.fx.stop(),Ya=void 0},_.fx.timer=function(a){_.timers.push(a),a()?_.fx.start():_.timers.pop()},_.fx.interval=13,_.fx.start=function(){Za||(Za=setInterval(_.fx.tick,_.fx.interval))},_.fx.stop=function(){clearInterval(Za),Za=null},_.fx.speeds={slow:600,fast:200,_default:400},_.fn.delay=function(a,b){return a=_.fx?_.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=Z.createElement("input"),b=Z.createElement("select"),c=b.appendChild(Z.createElement("option"));a.type="checkbox",Y.checkOn=""!==a.value,Y.optSelected=c.selected,b.disabled=!0,Y.optDisabled=!c.disabled,a=Z.createElement("input"),a.value="t",a.type="radio",Y.radioValue="t"===a.value}();var db,eb,fb=_.expr.attrHandle;_.fn.extend({attr:function(a,b){return qa(this,_.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){_.removeAttr(this,a)})}}),_.extend({attr:function(a,b,c){var d,e,f=a.nodeType;return a&&3!==f&&8!==f&&2!==f?typeof a.getAttribute===za?_.prop(a,b,c):(1===f&&_.isXMLDoc(a)||(b=b.toLowerCase(),d=_.attrHooks[b]||(_.expr.match.bool.test(b)?eb:db)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=_.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void _.removeAttr(a,b)):void 0},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(na);if(f&&1===a.nodeType)for(;c=f[e++];)d=_.propFix[c]||c,_.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!Y.radioValue&&"radio"===b&&_.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),eb={set:function(a,b,c){return b===!1?_.removeAttr(a,c):a.setAttribute(c,c),c}},_.each(_.expr.match.bool.source.match(/\w+/g),function(a,b){var c=fb[b]||_.find.attr;fb[b]=function(a,b,d){var e,f;return d||(f=fb[b],fb[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,fb[b]=f),e}});var gb=/^(?:input|select|textarea|button)$/i;_.fn.extend({prop:function(a,b){return qa(this,_.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[_.propFix[a]||a]})}}),_.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;return a&&3!==g&&8!==g&&2!==g?(f=1!==g||!_.isXMLDoc(a),f&&(b=_.propFix[b]||b,e=_.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||gb.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),Y.optSelected||(_.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),_.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){_.propFix[this.toLowerCase()]=this});var hb=/[\t\r\n\f]/g;_.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):" ")){for(f=0;e=b[f++];)d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=_.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(_.isFunction(a))return this.each(function(b){_(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(na)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(hb," "):"")){for(f=0;e=b[f++];)for(;d.indexOf(" "+e+" ")>=0;)d=d.replace(" "+e+" "," ");g=a?_.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(_.isFunction(a)?function(c){_(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c)for(var b,d=0,e=_(this),f=a.match(na)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else(c===za||"boolean"===c)&&(this.className&&ra.set(this,"__className__",this.className),this.className=this.className||a===!1?"":ra.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(hb," ").indexOf(b)>=0)return!0;return!1}});var ib=/\r/g;_.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=_.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,_(this).val()):a,null==e?e="":"number"==typeof e?e+="":_.isArray(e)&&(e=_.map(e,function(a){return null==a?"":a+""})),b=_.valHooks[this.type]||_.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))})):e?(b=_.valHooks[e.type]||_.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(ib,""):null==c?"":c)):void 0}}),_.extend({valHooks:{option:{get:function(a){var b=_.find.attr(a,"value");return null!=b?b:_.trim(_.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(Y.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&_.nodeName(c.parentNode,"optgroup"))){if(b=_(c).val(),f)return b;g.push(b)}return g},set:function(a,b){for(var c,d,e=a.options,f=_.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=_.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),_.each(["radio","checkbox"],function(){_.valHooks[this]={set:function(a,b){return _.isArray(b)?a.checked=_.inArray(_(a).val(),b)>=0:void 0}},Y.checkOn||(_.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),_.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){_.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),_.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var jb=_.now(),kb=/\?/;_.parseJSON=function(a){return JSON.parse(a+"")},_.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&_.error("Invalid XML: "+a),b};var lb=/#.*$/,mb=/([?&])_=[^&]*/,nb=/^(.*?):[ \t]*([^\r\n]*)$/gm,ob=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,pb=/^(?:GET|HEAD)$/,qb=/^\/\//,rb=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,sb={},tb={},ub="*/".concat("*"),vb=a.location.href,wb=rb.exec(vb.toLowerCase())||[];_.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vb,type:"GET",isLocal:ob.test(wb[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ub,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":_.parseJSON,"text xml":_.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,_.ajaxSettings),b):L(_.ajaxSettings,a)},ajaxPrefilter:J(sb),ajaxTransport:J(tb),ajax:function(a,b){function c(a,b,c,g){var i,k,r,s,u,w=b;2!==t&&(t=2,h&&clearTimeout(h),d=void 0,f=g||"",v.readyState=a>0?4:0,i=a>=200&&300>a||304===a,c&&(s=M(l,v,c)),s=N(l,s,v,i),i?(l.ifModified&&(u=v.getResponseHeader("Last-Modified"),u&&(_.lastModified[e]=u),u=v.getResponseHeader("etag"),u&&(_.etag[e]=u)),204===a||"HEAD"===l.type?w="nocontent":304===a?w="notmodified":(w=s.state,k=s.data,r=s.error,i=!r)):(r=w,(a||!w)&&(w="error",0>a&&(a=0))),v.status=a,v.statusText=(b||w)+"",i?o.resolveWith(m,[k,w,v]):o.rejectWith(m,[v,w,r]),v.statusCode(q),q=void 0,j&&n.trigger(i?"ajaxSuccess":"ajaxError",[v,l,i?k:r]),p.fireWith(m,[v,w]),j&&(n.trigger("ajaxComplete",[v,l]),--_.active||_.event.trigger("ajaxStop")))}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=_.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?_(m):_.event,o=_.Deferred(),p=_.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!g)for(g={};b=nb.exec(f);)g[b[1].toLowerCase()]=b[2];b=g[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return d&&d.abort(b),c(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||vb)+"").replace(lb,"").replace(qb,wb[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=_.trim(l.dataType||"*").toLowerCase().match(na)||[""],null==l.crossDomain&&(i=rb.exec(l.url.toLowerCase()),l.crossDomain=!(!i||i[1]===wb[1]&&i[2]===wb[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(wb[3]||("http:"===wb[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=_.param(l.data,l.traditional)),K(sb,l,b,v),2===t)return v;j=_.event&&l.global,j&&0===_.active++&&_.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!pb.test(l.type),e=l.url,l.hasContent||(l.data&&(e=l.url+=(kb.test(e)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=mb.test(e)?e.replace(mb,"$1_="+jb++):e+(kb.test(e)?"&":"?")+"_="+jb++)),l.ifModified&&(_.lastModified[e]&&v.setRequestHeader("If-Modified-Since",_.lastModified[e]),_.etag[e]&&v.setRequestHeader("If-None-Match",_.etag[e])),(l.data&&l.hasContent&&l.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+ub+"; q=0.01":""):l.accepts["*"]);for(k in l.headers)v.setRequestHeader(k,l.headers[k]);if(l.beforeSend&&(l.beforeSend.call(m,v,l)===!1||2===t))return v.abort();u="abort";for(k in{success:1,error:1,complete:1})v[k](l[k]);if(d=K(tb,l,b,v)){v.readyState=1,j&&n.trigger("ajaxSend",[v,l]),l.async&&l.timeout>0&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,d.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return _.get(a,b,c,"json")},getScript:function(a,b){return _.get(a,void 0,b,"script")}}),_.each(["get","post"],function(a,b){_[b]=function(a,c,d,e){return _.isFunction(c)&&(e=e||d,d=c,c=void 0),_.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),_._evalUrl=function(a){return _.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},_.fn.extend({wrapAll:function(a){var b;return _.isFunction(a)?this.each(function(b){_(this).wrapAll(a.call(this,b))}):(this[0]&&(b=_(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstElementChild;)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(_.isFunction(a)?function(b){_(this).wrapInner(a.call(this,b))}:function(){var b=_(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=_.isFunction(a);return this.each(function(c){_(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){_.nodeName(this,"body")||_(this).replaceWith(this.childNodes)}).end()}}),_.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},_.expr.filters.visible=function(a){return!_.expr.filters.hidden(a)};var xb=/%20/g,yb=/\[\]$/,zb=/\r?\n/g,Ab=/^(?:submit|button|image|reset|file)$/i,Bb=/^(?:input|select|textarea|keygen)/i;_.param=function(a,b){var c,d=[],e=function(a,b){b=_.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=_.ajaxSettings&&_.ajaxSettings.traditional),_.isArray(a)||a.jquery&&!_.isPlainObject(a))_.each(a,function(){e(this.name,this.value)});else for(c in a)O(c,a[c],b,e);return d.join("&").replace(xb,"+")},_.fn.extend({serialize:function(){return _.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=_.prop(this,"elements");return a?_.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!_(this).is(":disabled")&&Bb.test(this.nodeName)&&!Ab.test(a)&&(this.checked||!ya.test(a))}).map(function(a,b){var c=_(this).val();return null==c?null:_.isArray(c)?_.map(c,function(a){return{name:b.name,value:a.replace(zb,"\r\n")}}):{name:b.name,value:c.replace(zb,"\r\n")}}).get()}}),_.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Cb=0,Db={},Eb={0:200,1223:204},Fb=_.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Db)Db[a]()}),Y.cors=!!Fb&&"withCredentials"in Fb,Y.ajax=Fb=!!Fb,_.ajaxTransport(function(a){var b;return Y.cors||Fb&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Cb;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Db[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Eb[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Db[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),_.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return _.globalEval(a),a}}}),_.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),_.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=_("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),Z.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Gb=[],Hb=/(=)\?(?=&|$)|\?\?/;_.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Gb.pop()||_.expando+"_"+jb++;return this[a]=!0,a}}),_.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Hb.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Hb.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=_.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Hb,"$1"+e):b.jsonp!==!1&&(b.url+=(kb.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||_.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Gb.push(e)),g&&_.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),_.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||Z;var d=ga.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=_.buildFragment([a],b,e),e&&e.length&&_(e).remove(),_.merge([],d.childNodes))};var Ib=_.fn.load;_.fn.load=function(a,b,c){if("string"!=typeof a&&Ib)return Ib.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=_.trim(a.slice(h)),a=a.slice(0,h)),_.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&_.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?_("<div>").append(_.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},_.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){_.fn[b]=function(a){return this.on(b,a)}}),_.expr.filters.animated=function(a){return _.grep(_.timers,function(b){return a===b.elem}).length};var Jb=a.document.documentElement;_.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=_.css(a,"position"),l=_(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=_.css(a,"top"),i=_.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),_.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},_.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){_.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;return f?(b=f.documentElement,_.contains(b,d)?(typeof d.getBoundingClientRect!==za&&(e=d.getBoundingClientRect()),c=P(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e):void 0},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===_.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),_.nodeName(a[0],"html")||(d=a.offset()),d.top+=_.css(a[0],"borderTopWidth",!0),d.left+=_.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-_.css(c,"marginTop",!0),left:b.left-d.left-_.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Jb;a&&!_.nodeName(a,"html")&&"static"===_.css(a,"position");)a=a.offsetParent;return a||Jb})}}),_.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;_.fn[b]=function(e){return qa(this,function(b,e,f){var g=P(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),_.each(["top","left"],function(a,b){_.cssHooks[b]=w(Y.pixelPosition,function(a,c){return c?(c=v(a,b),Qa.test(c)?_(a).position()[b]+"px":c):void 0})}),_.each({Height:"height",Width:"width"},function(a,b){_.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){_.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return qa(this,function(b,c,d){var e;return _.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?_.css(b,c,g):_.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),_.fn.size=function(){return this.length},_.fn.andSelf=_.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return _});var Kb=a.jQuery,Lb=a.$;return _.noConflict=function(b){return a.$===_&&(a.$=Lb),b&&a.jQuery===_&&(a.jQuery=Kb),_},typeof b===za&&(a.jQuery=a.$=_),_}),function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){function c(a){var b=a.length,c=$.type(a);return"function"===c||$.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}function d(a,b,c){if($.isFunction(b))return $.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return $.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(xb.test(b))return $.filter(b,a,c);b=$.filter(b,a)}return $.grep(a,function(a){return 0<=$.inArray(a,b)!==c})}function e(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function f(){zb.addEventListener?(zb.removeEventListener("DOMContentLoaded",g,!1),a.removeEventListener("load",g,!1)):(zb.detachEvent("onreadystatechange",g),a.detachEvent("onload",g))}function g(){(zb.addEventListener||"load"===event.type||"complete"===zb.readyState)&&(f(),$.ready())}function h(a,b,c){if(void 0===c&&1===a.nodeType)if(c="data-"+b.replace(Lb,"-$1").toLowerCase(),c=a.getAttribute(c),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:Kb.test(c)?$.parseJSON(c):c}catch(d){}$.data(a,b,c)}else c=void 0;return c}function i(a){for(var b in a)if(("data"!==b||!$.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function j(a,b,c,d){if($.acceptData(a)){var e=$.expando,f=a.nodeType,g=f?$.cache:a,h=f?a[e]:a[e]&&e;if(h&&g[h]&&(d||g[h].data)||void 0!==c||"string"!=typeof b)return h||(h=f?a[e]=Q.pop()||$.guid++:e),g[h]||(g[h]=f?{}:{toJSON:$.noop}),"object"!=typeof b&&"function"!=typeof b||(d?g[h]=$.extend(g[h],b):g[h].data=$.extend(g[h].data,b)),a=g[h],d||(a.data||(a.data={}),a=a.data),void 0!==c&&(a[$.camelCase(b)]=c),"string"==typeof b?(c=a[b],null==c&&(c=a[$.camelCase(b)])):c=a,c}}function k(a,b,c){if($.acceptData(a)){var d,e,f=a.nodeType,g=f?$.cache:a,h=f?a[$.expando]:$.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){$.isArray(b)?b=b.concat($.map(b,$.camelCase)):b in d?b=[b]:(b=$.camelCase(b),b=b in d?[b]:b.split(" "));for(e=b.length;e--;)delete d[b[e]];if(c?!i(d):!$.isEmptyObject(d))return}if(!c&&(delete g[h].data,!i(g[h])))return;f?$.cleanData([a],!0):Z.deleteExpando||g!=g.window?delete g[h]:g[h]=null}}}function l(){return!0}function m(){return!1}function n(){try{return zb.activeElement}catch(a){}}function o(a){var b=bc.split("|");if(a=a.createDocumentFragment(),a.createElement)for(;b.length;)a.createElement(b.pop());return a}function p(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==Hb?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==Hb?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||$.nodeName(d,b)?f.push(d):$.merge(f,p(d,b));return void 0===b||b&&$.nodeName(a,b)?$.merge([a],f):f}function q(a){Qb.test(a.type)&&(a.defaultChecked=a.checked)}function r(a,b){return $.nodeName(a,"table")&&$.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function s(a){return a.type=(null!==$.find.attr(a,"type"))+"/"+a.type,a}function t(a){var b=mc.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function u(a,b){for(var c,d=0;null!=(c=a[d]);d++)$._data(c,"globalEval",!b||$._data(b[d],"globalEval"))}function v(a,b){if(1===b.nodeType&&$.hasData(a)){var c,d,e;d=$._data(a);var f=$._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;e>d;d++)$.event.add(b,c,g[c][d]);f.data&&(f.data=$.extend({},f.data))}}function w(b,c){var d=$(c.createElement(b)).appendTo(c.body),e=a.getDefaultComputedStyle?a.getDefaultComputedStyle(d[0]).display:$.css(d[0],"display");return d.detach(),e}function x(a){var b=zb,c=tc[a];return c||(c=w(a,b),"none"!==c&&c||(qc=(qc||$("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(qc[0].contentWindow||qc[0].contentDocument).document,b.write(),b.close(),c=w(a,b),qc.detach()),tc[a]=c),c}function y(a,b){return{get:function(){var c=a();if(null!=c){if(!c)return(this.get=b).apply(this,arguments);delete this.get}}}}function z(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Qc.length;e--;)if(b=Qc[e]+c,b in a)return b;return d}function A(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=$._data(d,"olddisplay"),c=d.style.display,b?(!f[g]&&"none"===c&&(d.style.display=""),""===d.style.display&&Ob(d)&&(f[g]=$._data(d,"olddisplay",x(d.nodeName)))):!f[g]&&(e=Ob(d),c&&"none"!==c||!e)&&$._data(d,"olddisplay",e?c:$.css(d,"display")));for(g=0;h>g;g++)d=a[g],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none");return a}function B(a,b,c){return(a=Mc.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function C(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=$.css(a,c+Nb[b],!0,e)),d?("content"===c&&(f-=$.css(a,"padding"+Nb[b],!0,e)),"margin"!==c&&(f-=$.css(a,"border"+Nb[b]+"Width",!0,e))):(f+=$.css(a,"padding"+Nb[b],!0,e),"padding"!==c&&(f+=$.css(a,"border"+Nb[b]+"Width",!0,e)));return f}function D(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=vc(a),g=Z.boxSizing()&&"border-box"===$.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=wc(a,b,f),(0>e||null==e)&&(e=a.style[b]),yc.test(e))return e;d=g&&(Z.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+C(a,b,c||(g?"border":"content"),d,f)+"px"}function E(a,b,c,d,e){return new E.prototype.init(a,b,c,d,e)}function F(){return setTimeout(function(){Rc=void 0}),Rc=$.now()}function G(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Nb[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function H(a,b,c){for(var d,e=(Xc[b]||[]).concat(Xc["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function I(a,b,c){var d,e,f=0,g=Wc.length,h=$.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Rc||F(),b=Math.max(0,j.startTime+j.duration-b),c=1-(b/j.duration||0),d=0,f=j.tweens.length;f>d;d++)j.tweens[d].run(c);return h.notifyWith(a,[j,c,b]),1>c&&f?b:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:$.extend({},b),opts:$.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Rc||F(),duration:c.duration,tweens:[],createTween:function(b,c){var d=$.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}});b=j.props,c=j.opts.specialEasing;var k,l,m,n;for(d in b)if(k=$.camelCase(d),l=c[k],m=b[d],$.isArray(m)&&(l=m[1],m=b[d]=m[0]),d!==k&&(b[k]=m,delete b[d]),(n=$.cssHooks[k])&&"expand"in n)for(d in m=n.expand(m),delete b[k],m)d in b||(b[d]=m[d],c[d]=l);else c[k]=l;for(;g>f;f++)if(d=Wc[f].call(j,a,b,j.opts))return d;return $.map(b,H,j),$.isFunction(j.opts.start)&&j.opts.start.call(a,j),$.fx.timer($.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function J(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(Db)||[];if($.isFunction(c))for(;d=f[e++];)"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function K(a,b,c,d){function e(h){var i;return f[h]=!0,$.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===xd;return e(b.dataTypes[0])||!f["*"]&&e("*")}function L(a,b){var c,d,e=$.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&$.extend(!0,a,c),a}function M(a,b,c,d){var e;if($.isArray(b))$.each(b,function(b,e){c||Bd.test(a)?d(a,e):M(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==$.type(b))d(a,b);else for(e in b)M(a+"["+e+"]",b[e],c,d)}function N(b){try{return b?new a.ActiveXObject("Microsoft.XMLHTTP"):new a.XMLHttpRequest}catch(c){}}function O(){try{return new a.XMLHttpRequest}catch(b){}}function P(a){return $.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var Q=[],R=Q.slice,S=Q.concat,T=Q.push,U=Q.indexOf,V={},W=V.toString,X=V.hasOwnProperty,Y="".trim,Z={},$=function(a,b){return new $.fn.init(a,b)},_=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,aa=/^-ms-/,ba=/-([\da-z])/gi,ca=function(a,b){return b.toUpperCase()};$.fn=$.prototype={jquery:"1.11.0",constructor:$,selector:"",length:0,toArray:function(){return R.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:R.call(this)},pushStack:function(a){return a=$.merge(this.constructor(),a),a.prevObject=this,a.context=this.context,a},each:function(a,b){return $.each(this,a,b)},map:function(a){return this.pushStack($.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(R.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;return a=+a+(0>a?b:0),this.pushStack(a>=0&&b>a?[this[a]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:T,sort:Q.sort,splice:Q.splice},$.extend=$.fn.extend=function(){var a,b,c,d,e,f=arguments[0]||{},g=1,h=arguments.length,i=!1;for("boolean"==typeof f&&(i=f,f=arguments[g]||{},g++),"object"!=typeof f&&!$.isFunction(f)&&(f={}),g===h&&(f=this,g--);h>g;g++)if(null!=(e=arguments[g]))for(d in e)a=f[d],c=e[d],f!==c&&(i&&c&&($.isPlainObject(c)||(b=$.isArray(c)))?(b?(b=!1,a=a&&$.isArray(a)?a:[]):a=a&&$.isPlainObject(a)?a:{},f[d]=$.extend(i,a,c)):void 0!==c&&(f[d]=c));return f},$.extend({expando:"jQuery"+("1.11.0"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw Error(a)},noop:function(){},isFunction:function(a){return"function"===$.type(a)},isArray:Array.isArray||function(a){return"array"===$.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return 0<=a-parseFloat(a)},isEmptyObject:function(a){for(var b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==$.type(a)||a.nodeType||$.isWindow(a))return!1;try{if(a.constructor&&!X.call(a,"constructor")&&!X.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(Z.ownLast)for(b in a)return X.call(a,b);for(b in a);return void 0===b||X.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?V[W.call(a)]||"object":typeof a},globalEval:function(b){b&&$.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(aa,"ms-").replace(ba,ca)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,d){var e,f=0,g=a.length;if(e=c(a),d){if(e)for(;g>f&&(e=b.apply(a[f],d),!(!1===e));f++);else for(f in a)if(e=b.apply(a[f],d),!1===e)break}else if(e)for(;g>f&&(e=b.call(a[f],f,a[f]),!(!1===e));f++);else for(f in a)if(e=b.call(a[f],f,a[f]),
!1===e)break;return a},trim:Y&&!Y.call("\ufeff")?function(a){return null==a?"":Y.call(a)}:function(a){return null==a?"":(a+"").replace(_,"")},makeArray:function(a,b){var d=b||[];return null!=a&&(c(Object(a))?$.merge(d,"string"==typeof a?[a]:a):T.call(d,a)),d},inArray:function(a,b,c){var d;if(b){if(U)return U.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;)a[e++]=b[d++];if(c!==c)for(;void 0!==b[d];)a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d=[],e=0,f=a.length,g=!c;f>e;e++)c=!b(a[e],e),c!==g&&d.push(a[e]);return d},map:function(a,b,d){var e,f=0,g=a.length,h=[];if(c(a))for(;g>f;f++)e=b(a[f],f,d),null!=e&&h.push(e);else for(f in a)e=b(a[f],f,d),null!=e&&h.push(e);return S.apply([],h)},guid:1,proxy:function(a,b){var c,d;return"string"==typeof b&&(d=a[b],b=a,a=d),$.isFunction(a)?(c=R.call(arguments,2),d=function(){return a.apply(b||this,c.concat(R.call(arguments)))},d.guid=a.guid=a.guid||$.guid++,d):void 0},now:function(){return+new Date},support:Z}),$.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){V["[object "+b+"]"]=b.toLowerCase()});var da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua=a,va=function(a,b,c,d){var e,f,g,h,i;if((b?b.ownerDocument||b:Oa)!==na&&ma(b),b=b||na,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(pa&&!d){if(e=pb.exec(a))if(g=e[1]){if(9===h){if(!(f=b.getElementById(g))||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&ta(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return _a.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&ea.getElementsByClassName&&b.getElementsByClassName)return _a.apply(c,b.getElementsByClassName(g)),c}if(ea.qsa&&(!qa||!qa.test(a))){if(f=e=Na,g=b,i=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(h=Ga(a),(e=b.getAttribute("id"))?f=e.replace(rb,"\\$&"):b.setAttribute("id",f),f="[id='"+f+"'] ",g=h.length;g--;)h[g]=f+Ha(h[g]);g=qb.test(a)&&Ea(b.parentNode)||b,i=h.join(",")}if(i)try{return _a.apply(c,g.querySelectorAll(i)),c}catch(j){}finally{e||b.removeAttribute("id")}}}var k;a:{if(a=a.replace(fb,"$1"),f=Ga(a),!d&&1===f.length){if(e=f[0]=f[0].slice(0),2<e.length&&"ID"===(k=e[0]).type&&ea.getById&&9===b.nodeType&&pa&&fa.relative[e[1].type]){if(b=(fa.find.ID(k.matches[0].replace(sb,tb),b)||[])[0],!b){k=c;break a}a=a.slice(e.shift().value.length)}for(h=lb.needsContext.test(a)?0:e.length;h--&&(k=e[h],!fa.relative[g=k.type]);)if((g=fa.find[g])&&(d=g(k.matches[0].replace(sb,tb),qb.test(e[0].type)&&Ea(b.parentNode)||b))){if(e.splice(h,1),a=d.length&&Ha(e),!a){_a.apply(c,d),k=c;break a}break}}ia(a,f)(d,b,!pa,c,qb.test(a)&&Ea(b.parentNode)||b),k=c}return k},wa=function(){function a(c,d){return b.push(c+" ")>fa.cacheLength&&delete a[b.shift()],a[c+" "]=d}var b=[];return a},xa=function(a){return a[Na]=!0,a},ya=function(a){var b=na.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}},za=function(a,b){for(var c=a.split("|"),d=a.length;d--;)fa.attrHandle[c[d]]=b},Aa=function(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||Wa)-(~a.sourceIndex||Wa);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1},Ba=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},Ca=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},Da=function(a){return xa(function(b){return b=+b,xa(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})},Ea=function(a){return a&&typeof a.getElementsByTagName!==Va&&a},Fa=function(){},Ga=function(a,b){var c,d,e,f,g,h,i;if(g=Sa[a+" "])return b?0:g.slice(0);for(g=a,h=[],i=fa.preFilter;g;){c&&!(d=gb.exec(g))||(d&&(g=g.slice(d[0].length)||g),h.push(e=[])),c=!1,(d=hb.exec(g))&&(c=d.shift(),e.push({value:c,type:d[0].replace(fb," ")}),g=g.slice(c.length));for(f in fa.filter)!(d=lb[f].exec(g))||i[f]&&!(d=i[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),g=g.slice(c.length));if(!c)break}return b?g.length:g?va.error(a):Sa(a,h).slice(0)},Ha=function(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d},Ia=function(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=Qa++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[Pa,f];if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e){if(i=b[Na]||(b[Na]={}),(h=i[d])&&h[0]===Pa&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}},Ja=function(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]},Ka=function(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g},La=function(a,b,c,d,e,f){return d&&!d[Na]&&(d=La(d)),e&&!e[Na]&&(e=La(e,f)),xa(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length;if(!(l=f)){l=b||"*";for(var p=h.nodeType?[h]:h,q=[],r=0,s=p.length;s>r;r++)va(l,p[r],q);l=q}if(l=!a||!f&&b?l:Ka(l,m,a,h,i),p=c?e||(f?a:o||d)?[]:g:l,c&&c(l,p,h,i),d)for(j=Ka(p,n),d(j,[],h,i),h=j.length;h--;)(k=j[h])&&(p[n[h]]=!(l[n[h]]=k));if(f){if(e||a){if(e){for(j=[],h=p.length;h--;)(k=p[h])&&j.push(l[h]=k);e(null,p=[],j,i)}for(h=p.length;h--;)(k=p[h])&&-1<(j=e?bb.call(f,k):m[h])&&(f[j]=!(g[j]=k))}}else p=Ka(p===g?p.splice(o,p.length):p),e?e(null,g,p,i):_a.apply(g,p)})},Ma=function(a){var b,c,d,e=a.length,f=fa.relative[a[0].type];c=f||fa.relative[" "];for(var g=f?1:0,h=Ia(function(a){return a===b},c,!0),i=Ia(function(a){return-1<bb.call(b,a)},c,!0),j=[function(a,c,d){return!f&&(d||c!==ja)||((b=c).nodeType?h(a,c,d):i(a,c,d))}];e>g;g++)if(c=fa.relative[a[g].type])j=[Ia(Ja(j),c)];else{if(c=fa.filter[a[g].type].apply(null,a[g].matches),c[Na]){for(d=++g;e>d&&!fa.relative[a[d].type];d++);return La(g>1&&Ja(j),g>1&&Ha(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(fb,"$1"),c,d>g&&Ma(a.slice(g,d)),e>d&&Ma(a=a.slice(d)),e>d&&Ha(a))}j.push(c)}return Ja(j)},Na="sizzle"+-new Date,Oa=ua.document,Pa=0,Qa=0,Ra=wa(),Sa=wa(),Ta=wa(),Ua=function(a,b){return a===b&&(la=!0),0},Va="undefined",Wa=-2147483648,Xa={}.hasOwnProperty,Ya=[],Za=Ya.pop,$a=Ya.push,_a=Ya.push,ab=Ya.slice,bb=Ya.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},cb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),db="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+cb+")|)|)[\\x20\\t\\r\\n\\f]*\\]",eb=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+db.replace(3,8)+")*)|.*)\\)|)",fb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),gb=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,hb=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,ib=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*?)[\\x20\\t\\r\\n\\f]*\\]","g"),jb=RegExp(eb),kb=RegExp("^"+cb+"$"),lb={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+db),PSEUDO:RegExp("^"+eb),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},mb=/^(?:input|select|textarea|button)$/i,nb=/^h\d$/i,ob=/^[^{]+\{\s*\[native \w/,pb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,qb=/[+~]/,rb=/'|\\/g,sb=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),tb=function(a,b,c){return a="0x"+b-65536,a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)};try{_a.apply(Ya=ab.call(Oa.childNodes),Oa.childNodes),Ya[Oa.childNodes.length].nodeType}catch(ub){_a={apply:Ya.length?function(a,b){$a.apply(a,ab.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}ea=va.support={},ha=va.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1},ma=va.setDocument=function(a){var b=a?a.ownerDocument||a:Oa;return a=b.defaultView,b!==na&&9===b.nodeType&&b.documentElement?(na=b,oa=b.documentElement,pa=!ha(b),a&&a!==a.top&&(a.addEventListener?a.addEventListener("unload",function(){ma()},!1):a.attachEvent&&a.attachEvent("onunload",function(){ma()})),ea.attributes=ya(function(a){return a.className="i",!a.getAttribute("className")}),ea.getElementsByTagName=ya(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),ea.getElementsByClassName=ob.test(b.getElementsByClassName)&&ya(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),ea.getById=ya(function(a){return oa.appendChild(a).id=Na,!b.getElementsByName||!b.getElementsByName(Na).length}),ea.getById?(fa.find.ID=function(a,b){if(typeof b.getElementById!==Va&&pa){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},fa.filter.ID=function(a){var b=a.replace(sb,tb);return function(a){return a.getAttribute("id")===b}}):(delete fa.find.ID,fa.filter.ID=function(a){var b=a.replace(sb,tb);return function(a){return(a=typeof a.getAttributeNode!==Va&&a.getAttributeNode("id"))&&a.value===b}}),fa.find.TAG=ea.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==Va?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},fa.find.CLASS=ea.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==Va&&pa?b.getElementsByClassName(a):void 0},ra=[],qa=[],(ea.qsa=ob.test(b.querySelectorAll))&&(ya(function(a){a.innerHTML="<select t=''><option selected=''></option></select>",a.querySelectorAll("[t^='']").length&&qa.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),a.querySelectorAll("[selected]").length||qa.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),a.querySelectorAll(":checked").length||qa.push(":checked")}),ya(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&qa.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),a.querySelectorAll(":enabled").length||qa.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),qa.push(",.*:")})),(ea.matchesSelector=ob.test(sa=oa.webkitMatchesSelector||oa.mozMatchesSelector||oa.oMatchesSelector||oa.msMatchesSelector))&&ya(function(a){ea.disconnectedMatch=sa.call(a,"div"),sa.call(a,"[s!='']:x"),ra.push("!=",eb)}),qa=qa.length&&RegExp(qa.join("|")),ra=ra.length&&RegExp(ra.join("|")),ta=(a=ob.test(oa.compareDocumentPosition))||ob.test(oa.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},Ua=a?function(a,c){if(a===c)return la=!0,0;var d=!a.compareDocumentPosition-!c.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(c.ownerDocument||c)?a.compareDocumentPosition(c):1,1&d||!ea.sortDetached&&c.compareDocumentPosition(a)===d?a===b||a.ownerDocument===Oa&&ta(Oa,a)?-1:c===b||c.ownerDocument===Oa&&ta(Oa,c)?1:ka?bb.call(ka,a)-bb.call(ka,c):0:4&d?-1:1)}:function(a,c){if(a===c)return la=!0,0;var d,e=0;d=a.parentNode;var f=c.parentNode,g=[a],h=[c];if(!d||!f)return a===b?-1:c===b?1:d?-1:f?1:ka?bb.call(ka,a)-bb.call(ka,c):0;if(d===f)return Aa(a,c);for(d=a;d=d.parentNode;)g.unshift(d);for(d=c;d=d.parentNode;)h.unshift(d);for(;g[e]===h[e];)e++;return e?Aa(g[e],h[e]):g[e]===Oa?-1:h[e]===Oa?1:0},b):na},va.matches=function(a,b){return va(a,null,null,b)},va.matchesSelector=function(a,b){if((a.ownerDocument||a)!==na&&ma(a),b=b.replace(ib,"='$1']"),ea.matchesSelector&&pa&&(!ra||!ra.test(b))&&(!qa||!qa.test(b)))try{var c=sa.call(a,b);if(c||ea.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<va(b,na,null,[a]).length},va.contains=function(a,b){return(a.ownerDocument||a)!==na&&ma(a),ta(a,b)},va.attr=function(a,b){(a.ownerDocument||a)!==na&&ma(a);var c=fa.attrHandle[b.toLowerCase()],c=c&&Xa.call(fa.attrHandle,b.toLowerCase())?c(a,b,!pa):void 0;return void 0!==c?c:ea.attributes||!pa?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null},va.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},va.uniqueSort=function(a){var b,c=[],d=0,e=0;if(la=!ea.detectDuplicates,ka=!ea.sortStable&&a.slice(0),a.sort(Ua),la){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return ka=null,a},ga=va.getText=function(a){var b,c="",d=0;if(b=a.nodeType){if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=ga(a)}else if(3===b||4===b)return a.nodeValue}else for(;b=a[d++];)c+=ga(b);return c},fa=va.selectors={cacheLength:50,createPseudo:xa,match:lb,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(sb,tb),a[3]=(a[4]||a[5]||"").replace(sb,tb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||va.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&va.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return lb.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&jb.test(c)&&(b=Ga(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(sb,tb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=Ra[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&Ra(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==Va&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){return d=va.attr(d,a),null==d?"!="===b:b?(d+="","="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.slice(-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n;c=f!==g?"nextSibling":"previousSibling";var o=b.parentNode,p=h&&b.nodeName.toLowerCase();if(i=!i&&!h,o){if(f){for(;c;){for(k=b;k=k[c];)if(h?k.nodeName.toLowerCase()===p:1===k.nodeType)return!1;n=c="only"===a&&!n&&"nextSibling"}return!0}if(n=[g?o.firstChild:o.lastChild],g&&i){for(i=o[Na]||(o[Na]={}),j=i[a]||[],m=j[0]===Pa&&j[1],l=j[0]===Pa&&j[2],k=m&&o.childNodes[m];k=++m&&k&&k[c]||(l=m=0)||n.pop();)if(1===k.nodeType&&++l&&k===b){i[a]=[Pa,m,l];break}}else if(i&&(j=(b[Na]||(b[Na]={}))[a])&&j[0]===Pa)l=j[1];else for(;(k=++m&&k&&k[c]||(l=m=0)||n.pop())&&((h?k.nodeName.toLowerCase()!==p:1!==k.nodeType)||!++l||(i&&((k[Na]||(k[Na]={}))[a]=[Pa,l]),k!==b)););return l-=e,l===d||0===l%d&&l/d>=0}}},PSEUDO:function(a,b){var c,d=fa.pseudos[a]||fa.setFilters[a.toLowerCase()]||va.error("unsupported pseudo: "+a);return d[Na]?d(b):1<d.length?(c=[a,a,"",b],fa.setFilters.hasOwnProperty(a.toLowerCase())?xa(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=bb.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:xa(function(a){var b=[],c=[],d=ia(a.replace(fb,"$1"));return d[Na]?xa(function(a,b,c,e){e=d(a,null,e,[]);for(var f=a.length;f--;)(c=e[f])&&(a[f]=!(b[f]=c))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:xa(function(a){return function(b){return 0<va(a,b).length}}),contains:xa(function(a){return function(b){return-1<(b.textContent||b.innerText||ga(b)).indexOf(a)}}),lang:xa(function(a){return kb.test(a||"")||va.error("unsupported lang: "+a),a=a.replace(sb,tb).toLowerCase(),function(b){var c;do if(c=pa?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=ua.location&&ua.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===oa},focus:function(a){return a===na.activeElement&&(!na.hasFocus||na.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(6>a.nodeType)return!1;return!0},parent:function(a){return!fa.pseudos.empty(a)},header:function(a){return nb.test(a.nodeName)},input:function(a){return mb.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:Da(function(){return[0]}),last:Da(function(a,b){return[b-1]}),eq:Da(function(a,b,c){return[0>c?c+b:c]}),even:Da(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:Da(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:Da(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:Da(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}},fa.pseudos.nth=fa.pseudos.eq;for(da in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})fa.pseudos[da]=Ba(da);for(da in{submit:!0,reset:!0})fa.pseudos[da]=Ca(da);Fa.prototype=fa.filters=fa.pseudos,fa.setFilters=new Fa,ia=va.compile=function(a,b){var c,d=[],e=[],f=Ta[a+" "];if(!f){for(b||(b=Ga(a)),c=b.length;c--;)f=Ma(b[c]),f[Na]?d.push(f):e.push(f);var g=0<d.length,h=0<e.length;c=function(a,b,c,f,i){var j,k,l,m=0,n="0",o=a&&[],p=[],q=ja,r=a||h&&fa.find.TAG("*",i),s=Pa+=null==q?1:Math.random()||.1,t=r.length;for(i&&(ja=b!==na&&b);n!==t&&null!=(j=r[n]);n++){if(h&&j){for(k=0;l=e[k++];)if(l(j,b,c)){f.push(j);break}i&&(Pa=s)}g&&((j=!l&&j)&&m--,a&&o.push(j))}if(m+=n,g&&n!==m){for(k=0;l=d[k++];)l(o,p,b,c);if(a){if(m>0)for(;n--;)!o[n]&&!p[n]&&(p[n]=Za.call(f));p=Ka(p)}_a.apply(f,p),i&&!a&&0<p.length&&1<m+d.length&&va.uniqueSort(f)}return i&&(Pa=s,ja=q),o},c=g?xa(c):c,f=Ta(a,c)}return f},ea.sortStable=Na.split("").sort(Ua).join("")===Na,ea.detectDuplicates=!!la,ma(),ea.sortDetached=ya(function(a){return 1&a.compareDocumentPosition(na.createElement("div"))}),ya(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||za("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),(!ea.attributes||!ya(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}))&&za("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ya(function(a){return null==a.getAttribute("disabled")})||za("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;return c?void 0:!0===a[b]?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),$.find=va,$.expr=va.selectors,$.expr[":"]=$.expr.pseudos,$.unique=va.uniqueSort,$.text=va.getText,$.isXMLDoc=va.isXML,$.contains=va.contains;var vb=$.expr.match.needsContext,wb=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,xb=/^.[^:#\[\.,]*$/;$.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?$.find.matchesSelector(d,a)?[d]:[]:$.find.matches(a,$.grep(b,function(a){return 1===a.nodeType}))},$.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack($(a).filter(function(){for(b=0;e>b;b++)if($.contains(d[b],this))return!0}));for(b=0;e>b;b++)$.find(a,d[b],c);return c=this.pushStack(e>1?$.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(d(this,a||[],!1))},not:function(a){return this.pushStack(d(this,a||[],!0))},is:function(a){return!!d(this,"string"==typeof a&&vb.test(a)?$(a):a||[],!1).length}});var yb,zb=a.document,Ab=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;($.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if((c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Ab.exec(a))&&(c[1]||!b)){if(c[1]){if(b=b instanceof $?b[0]:b,$.merge(this,$.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:zb,!0)),wb.test(c[1])&&$.isPlainObject(b))for(c in b)$.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c])}else{if((d=zb.getElementById(c[2]))&&d.parentNode){if(d.id!==c[2])return yb.find(a);this.length=1,this[0]=d}this.context=zb,this.selector=a}return this}return!b||b.jquery?(b||yb).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):$.isFunction(a)?"undefined"!=typeof yb.ready?yb.ready(a):a($):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),$.makeArray(a,this))}).prototype=$.fn,yb=$(zb);var Bb=/^(?:parents|prev(?:Until|All))/,Cb={children:!0,contents:!0,next:!0,prev:!0};$.extend({dir:function(a,b,c){var d=[];for(a=a[b];a&&9!==a.nodeType&&(void 0===c||1!==a.nodeType||!$(a).is(c));)1===a.nodeType&&d.push(a),a=a[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),$.fn.extend({has:function(a){var b,c=$(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if($.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=vb.test(a)||"string"!=typeof a?$(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?-1<g.index(c):1===c.nodeType&&$.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?$.unique(f):f)},index:function(a){return a?"string"==typeof a?$.inArray(this[0],$(a)):$.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack($.unique($.merge(this.get(),$(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),$.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return $.dir(a,"parentNode")},parentsUntil:function(a,b,c){return $.dir(a,"parentNode",c)},next:function(a){return e(a,"nextSibling")},prev:function(a){return e(a,"previousSibling")},nextAll:function(a){return $.dir(a,"nextSibling")},prevAll:function(a){return $.dir(a,"previousSibling")},nextUntil:function(a,b,c){return $.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return $.dir(a,"previousSibling",c)},siblings:function(a){return $.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return $.sibling(a.firstChild)},contents:function(a){return $.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:$.merge([],a.childNodes)}},function(a,b){$.fn[a]=function(c,d){var e=$.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=$.filter(d,e)),1<this.length&&(Cb[a]||(e=$.unique(e)),Bb.test(a)&&(e=e.reverse())),this.pushStack(e)}});var Db=/\S+/g,Eb={};$.Callbacks=function(a){var b;if("string"==typeof a){if(!(b=Eb[a])){b=a;var c=Eb[b]={};$.each(b.match(Db)||[],function(a,b){c[b]=!0}),b=c}}else b=$.extend({},a);a=b;var d,e,f,g,h,i,j=[],k=!a.once&&[],l=function(b){for(e=a.memory&&b,f=!0,h=i||0,i=0,g=j.length,d=!0;j&&g>h;h++)if(!1===j[h].apply(b[0],b[1])&&a.stopOnFalse){e=!1;break}d=!1,j&&(k?k.length&&l(k.shift()):e?j=[]:m.disable())},m={add:function(){if(j){var b=j.length;!function c(b){$.each(b,function(b,d){var e=$.type(d);"function"===e?(!a.unique||!m.has(d))&&j.push(d):d&&d.length&&"string"!==e&&c(d)})}(arguments),d?g=j.length:e&&(i=b,l(e))}return this},remove:function(){return j&&$.each(arguments,function(a,b){for(var c;-1<(c=$.inArray(b,j,c));)j.splice(c,1),d&&(g>=c&&g--,h>=c&&h--)}),this},has:function(a){return a?-1<$.inArray(a,j):!(!j||!j.length)},empty:function(){return j=[],g=0,this},disable:function(){return j=k=e=void 0,this},disabled:function(){return!j},lock:function(){return k=void 0,e||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||f&&!k||(b=b||[],b=[a,b.slice?b.slice():b],d?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!f}};return m},$.extend({Deferred:function(a){var b=[["resolve","done",$.Callbacks("once memory"),"resolved"],["reject","fail",$.Callbacks("once memory"),"rejected"],["notify","progress",$.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return $.Deferred(function(c){$.each(b,function(b,f){var g=$.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&$.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?$.extend(a,d):d}},e={};return d.pipe=d.then,$.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=R.call(arguments),g=f.length,h=1!==g||a&&$.isFunction(a.promise)?g:0,i=1===h?a:$.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=1<arguments.length?R.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&$.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var Fb;$.fn.ready=function(a){return $.ready.promise().done(a),this},$.extend({isReady:!1,readyWait:1,holdReady:function(a){a?$.readyWait++:$.ready(!0)},ready:function(a){if(!(!0===a?--$.readyWait:$.isReady)){if(!zb.body)return setTimeout($.ready);$.isReady=!0,!0!==a&&0<--$.readyWait||(Fb.resolveWith(zb,[$]),$.fn.trigger&&$(zb).trigger("ready").off("ready"))}}}),$.ready.promise=function(b){if(!Fb)if(Fb=$.Deferred(),"complete"===zb.readyState)setTimeout($.ready);else if(zb.addEventListener)zb.addEventListener("DOMContentLoaded",g,!1),a.addEventListener("load",g,!1);else{zb.attachEvent("onreadystatechange",g),a.attachEvent("onload",g);var c=!1;try{c=null==a.frameElement&&zb.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!$.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}f(),$.ready()}}()}return Fb.promise(b)};var Gb,Hb="undefined";for(Gb in $(Z))break;Z.ownLast="0"!==Gb,Z.inlineBlockNeedsLayout=!1,$(function(){var a,b,c=zb.getElementsByTagName("body")[0];c&&(a=zb.createElement("div"),a.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",b=zb.createElement("div"),c.appendChild(a).appendChild(b),typeof b.style.zoom!==Hb&&(b.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",Z.inlineBlockNeedsLayout=3===b.offsetWidth)&&(c.style.zoom=1),c.removeChild(a))});var Ib=zb.createElement("div");if(null==Z.deleteExpando){Z.deleteExpando=!0;try{delete Ib.test}catch(Jb){Z.deleteExpando=!1}}$.acceptData=function(a){var b=$.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||!0!==b&&a.getAttribute("classid")===b};var Kb=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Lb=/([A-Z])/g;$.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?$.cache[a[$.expando]]:a[$.expando],!!a&&!i(a)},data:function(a,b,c){return j(a,b,c)},removeData:function(a,b){return k(a,b)},_data:function(a,b,c){return j(a,b,c,!0)},_removeData:function(a,b){return k(a,b,!0)}}),$.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=$.data(f),1===f.nodeType&&!$._data(f,"parsedAttrs"))){for(c=g.length;c--;)d=g[c].name,0===d.indexOf("data-")&&(d=$.camelCase(d.slice(5)),h(f,d,e[d]));$._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){$.data(this,a)}):1<arguments.length?this.each(function(){$.data(this,a,b)}):f?h(f,a,$.data(f,a)):void 0},removeData:function(a){return this.each(function(){$.removeData(this,a)})}}),$.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=$._data(a,b),c&&(!d||$.isArray(c)?d=$._data(a,b,$.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=$.queue(a,b),d=c.length,e=c.shift(),f=$._queueHooks(a,b),g=function(){$.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return $._data(a,c)||$._data(a,c,{empty:$.Callbacks("once memory").add(function(){$._removeData(a,b+"queue"),$._removeData(a,c)})})}}),$.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?$.queue(this[0],a):void 0===b?this:this.each(function(){var c=$.queue(this,a,b);$._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&$.dequeue(this,a)})},dequeue:function(a){return this.each(function(){$.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=$.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};for("string"!=typeof a&&(b=a,a=void 0),a=a||"fx";g--;)(c=$._data(f[g],a+"queueHooks"))&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Mb=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Nb=["Top","Right","Bottom","Left"],Ob=function(a,b){return a=b||a,"none"===$.css(a,"display")||!$.contains(a.ownerDocument,a)},Pb=$.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===$.type(c))for(h in e=!0,c)$.access(a,b,h,c[h],!0,f,g);else if(void 0!==d&&(e=!0,$.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call($(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},Qb=/^(?:checkbox|radio)$/i,Rb=zb.createDocumentFragment(),Sb=zb.createElement("div"),Tb=zb.createElement("input");if(Sb.setAttribute("className","t"),Sb.innerHTML="  <link/><table></table><a href='/a'>a</a>",Z.leadingWhitespace=3===Sb.firstChild.nodeType,Z.tbody=!Sb.getElementsByTagName("tbody").length,Z.htmlSerialize=!!Sb.getElementsByTagName("link").length,Z.html5Clone="<:nav></:nav>"!==zb.createElement("nav").cloneNode(!0).outerHTML,Tb.type="checkbox",Tb.checked=!0,Rb.appendChild(Tb),Z.appendChecked=Tb.checked,Sb.innerHTML="<textarea>x</textarea>",Z.noCloneChecked=!!Sb.cloneNode(!0).lastChild.defaultValue,Rb.appendChild(Sb),Sb.innerHTML="<input type='radio' checked='checked' name='t'/>",Z.checkClone=Sb.cloneNode(!0).cloneNode(!0).lastChild.checked,Z.noCloneEvent=!0,Sb.attachEvent&&(Sb.attachEvent("onclick",function(){Z.noCloneEvent=!1}),Sb.cloneNode(!0).click()),null==Z.deleteExpando){Z.deleteExpando=!0;try{delete Sb.test}catch(Ub){
Z.deleteExpando=!1}}var Vb,Wb,Rb=Sb=Tb=null,Xb=zb.createElement("div");for(Vb in{submit:!0,change:!0,focusin:!0})Wb="on"+Vb,(Z[Vb+"Bubbles"]=Wb in a)||(Xb.setAttribute(Wb,"t"),Z[Vb+"Bubbles"]=!1===Xb.attributes[Wb].expando);var Yb=/^(?:input|select|textarea)$/i,Zb=/^key/,$b=/^(?:mouse|contextmenu)|click/,_b=/^(?:focusinfocus|focusoutblur)$/,ac=/^([^.]*)(?:\.(.+)|)$/;$.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n;if(h=$._data(a)){for(c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=$.guid++),(g=h.events)||(g=h.events={}),(j=h.handle)||(j=h.handle=function(a){return typeof $===Hb||a&&$.event.triggered===a.type?void 0:$.event.dispatch.apply(j.elem,arguments)},j.elem=a),b=(b||"").match(Db)||[""],h=b.length;h--;)f=ac.exec(b[h])||[],m=k=f[1],n=(f[2]||"").split(".").sort(),m&&(f=$.event.special[m]||{},m=(e?f.delegateType:f.bindType)||m,f=$.event.special[m]||{},k=$.extend({type:m,origType:k,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&$.expr.match.needsContext.test(e),namespace:n.join(".")},i),(l=g[m])||(l=g[m]=[],l.delegateCount=0,f.setup&&!1!==f.setup.call(a,d,n,j)||(a.addEventListener?a.addEventListener(m,j,!1):a.attachEvent&&a.attachEvent("on"+m,j))),f.add&&(f.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?l.splice(l.delegateCount++,0,k):l.push(k),$.event.global[m]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=$.hasData(a)&&$._data(a);if(q&&(k=q.events)){for(b=(b||"").match(Db)||[""],j=b.length;j--;)if(h=ac.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=$.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&((!l.teardown||!1===l.teardown.call(a,o,q.handle))&&$.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)$.event.remove(a,n+b[j],c,d,!0);$.isEmptyObject(k)&&(delete q.handle,$._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,j,k,l=[d||zb],m=X.call(b,"type")?b.type:b;if(j=X.call(b,"namespace")?b.namespace.split("."):[],h=f=d=d||zb,3!==d.nodeType&&8!==d.nodeType&&!_b.test(m+$.event.triggered)&&(0<=m.indexOf(".")&&(j=m.split("."),m=j.shift(),j.sort()),g=0>m.indexOf(":")&&"on"+m,b=b[$.expando]?b:new $.Event(m,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=j.join("."),b.namespace_re=b.namespace?RegExp("(^|\\.)"+j.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:$.makeArray(c,[b]),j=$.event.special[m]||{},e||!(j.trigger&&!1===j.trigger.apply(d,c)))){if(!e&&!j.noBubble&&!$.isWindow(d)){for(i=j.delegateType||m,_b.test(i+m)||(h=h.parentNode);h;h=h.parentNode)l.push(h),f=h;f===(d.ownerDocument||zb)&&l.push(f.defaultView||f.parentWindow||a)}for(k=0;(h=l[k++])&&!b.isPropagationStopped();)b.type=k>1?i:j.bindType||m,(f=($._data(h,"events")||{})[b.type]&&$._data(h,"handle"))&&f.apply(h,c),(f=g&&h[g])&&f.apply&&$.acceptData(h)&&(b.result=f.apply(h,c),!1===b.result&&b.preventDefault());if(b.type=m,!e&&!b.isDefaultPrevented()&&(!j._default||!1===j._default.apply(l.pop(),c))&&$.acceptData(d)&&g&&d[m]&&!$.isWindow(d)){(f=d[g])&&(d[g]=null),$.event.triggered=m;try{d[m]()}catch(n){}$.event.triggered=void 0,f&&(d[g]=f)}return b.result}},dispatch:function(a){a=$.event.fix(a);var b,c,d,e,f=[],g=R.call(arguments);b=($._data(this,"events")||{})[a.type]||[];var h=$.event.special[a.type]||{};if(g[0]=a,a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(f=$.event.handlers.call(this,a,b),b=0;(d=f[b++])&&!a.isPropagationStopped();)for(a.currentTarget=d.elem,e=0;(c=d.handlers[e++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(c.namespace)||(a.handleObj=c,a.data=c.data,c=(($.event.special[c.origType]||{}).handle||c.handler).apply(d.elem,g),void 0!==c&&!1===(a.result=c)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(!0!==i.disabled||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?0<=$(c,this).index(i):$.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[$.expando])return a;var b,c,d;b=a.type;var e=a,f=this.fixHooks[b];for(f||(this.fixHooks[b]=f=$b.test(b)?this.mouseHooks:Zb.test(b)?this.keyHooks:{}),d=f.props?this.props.concat(f.props):this.props,a=new $.Event(e),b=d.length;b--;)c=d[b],a[c]=e[c];return a.target||(a.target=e.srcElement||zb),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,e):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e=b.button,f=b.fromElement;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||zb,d=c.documentElement,c=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||c&&c.scrollLeft||0)-(d&&d.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||c&&c.scrollTop||0)-(d&&d.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&f&&(a.relatedTarget=f===a.target?b.toElement:f),!a.which&&void 0!==e&&(a.which=1&e?1:2&e?3:4&e?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==n()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===n()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return $.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return $.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=$.extend(new $.Event,c,{type:a,isSimulated:!0,originalEvent:{}}),d?$.event.trigger(a,null,b):$.event.dispatch.call(b,a),a.isDefaultPrevented()&&c.preventDefault()}},$.removeEvent=zb.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b,a.detachEvent&&(typeof a[b]===Hb&&(a[b]=null),a.detachEvent(b,c))},$.Event=function(a,b){return this instanceof $.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&(!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault())?l:m):this.type=a,b&&$.extend(this,b),this.timeStamp=a&&a.timeStamp||$.now(),void(this[$.expando]=!0)):new $.Event(a,b)},$.Event.prototype={isDefaultPrevented:m,isPropagationStopped:m,isImmediatePropagationStopped:m,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=l,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=l,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()}},$.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){$.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;return d&&(d===this||$.contains(this,d))||(a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b),c}}}),Z.submitBubbles||($.event.special.submit={setup:function(){return $.nodeName(this,"form")?!1:void $.event.add(this,"click._submit keypress._submit",function(a){a=a.target,(a=$.nodeName(a,"input")||$.nodeName(a,"button")?a.form:void 0)&&!$._data(a,"submitBubbles")&&($.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),$._data(a,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&$.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return $.nodeName(this,"form")?!1:void $.event.remove(this,"._submit")}}),Z.changeBubbles||($.event.special.change={setup:function(){return Yb.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||($.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),$.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),$.event.simulate("change",this,a,!0)})),!1):void $.event.add(this,"beforeactivate._change",function(a){a=a.target,Yb.test(a.nodeName)&&!$._data(a,"changeBubbles")&&($.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&$.event.simulate("change",this.parentNode,a,!0)}),$._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return $.event.remove(this,"._change"),!Yb.test(this.nodeName)}}),Z.focusinBubbles||$.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){$.event.simulate(b,a.target,$.event.fix(a),!0)};$.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=$._data(d,b);e||d.addEventListener(a,c,!0),$._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=$._data(d,b)-1;e?$._data(d,b,e):(d.removeEventListener(a,c,!0),$._removeData(d,b))}}}),$.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),!1===d)d=m;else if(!d)return this;return 1===e&&(g=d,d=function(a){return $().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=$.guid++)),this.each(function(){$.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,$(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(d in a)this.off(d,b,a[d]);return this}return!1!==b&&"function"!=typeof b||(c=b,b=void 0),!1===c&&(c=m),this.each(function(){$.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){$.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?$.event.trigger(a,b,c,!0):void 0}});var bc="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",cc=/ jQuery\d+="(?:null|\d+)"/g,dc=RegExp("<(?:"+bc+")[\\s/>]","i"),ec=/^\s+/,fc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,gc=/<([\w:]+)/,hc=/<tbody/i,ic=/<|&#?\w+;/,jc=/<(?:script|style|link)/i,kc=/checked\s*(?:[^=]|=\s*.checked.)/i,lc=/^$|\/(?:java|ecma)script/i,mc=/^true\/(.*)/,nc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,oc={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:Z.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},pc=o(zb).appendChild(zb.createElement("div"));oc.optgroup=oc.option,oc.tbody=oc.tfoot=oc.colgroup=oc.caption=oc.thead,oc.th=oc.td,$.extend({clone:function(a,b,c){var d,e,f,g,h,i=$.contains(a.ownerDocument,a);if(Z.html5Clone||$.isXMLDoc(a)||!dc.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(pc.innerHTML=a.outerHTML,pc.removeChild(f=pc.firstChild)),!(Z.noCloneEvent&&Z.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||$.isXMLDoc(a)))for(d=p(f),h=p(a),g=0;null!=(e=h[g]);++g)if(d[g]){var j=d[g],k=void 0,l=void 0,m=void 0;if(1===j.nodeType){if(k=j.nodeName.toLowerCase(),!Z.noCloneEvent&&j[$.expando]){m=$._data(j);for(l in m.events)$.removeEvent(j,l,m.handle);j.removeAttribute($.expando)}"script"===k&&j.text!==e.text?(s(j).text=e.text,t(j)):"object"===k?(j.parentNode&&(j.outerHTML=e.outerHTML),Z.html5Clone&&e.innerHTML&&!$.trim(j.innerHTML)&&(j.innerHTML=e.innerHTML)):"input"===k&&Qb.test(e.type)?(j.defaultChecked=j.checked=e.checked,j.value!==e.value&&(j.value=e.value)):"option"===k?j.defaultSelected=j.selected=e.defaultSelected:"input"!==k&&"textarea"!==k||(j.defaultValue=e.defaultValue)}}if(b)if(c)for(h=h||p(a),d=d||p(f),g=0;null!=(e=h[g]);g++)v(e,d[g]);else v(a,f);return d=p(f,"script"),0<d.length&&u(d,!i&&p(a,"script")),f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=a.length,l=o(b),m=[],n=0;k>n;n++)if((f=a[n])||0===f)if("object"===$.type(f))$.merge(m,f.nodeType?[f]:f);else if(ic.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(gc.exec(f)||["",""])[1].toLowerCase(),j=oc[h]||oc._default,g.innerHTML=j[1]+f.replace(fc,"<$1></$2>")+j[2],e=j[0];e--;)g=g.lastChild;if(!Z.leadingWhitespace&&ec.test(f)&&m.push(b.createTextNode(ec.exec(f)[0])),!Z.tbody)for(e=(f="table"!==h||hc.test(f)?"<table>"!==j[1]||hc.test(f)?0:g:g.firstChild)&&f.childNodes.length;e--;)$.nodeName(i=f.childNodes[e],"tbody")&&!i.childNodes.length&&f.removeChild(i);for($.merge(m,g.childNodes),g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=l.lastChild}else m.push(b.createTextNode(f));for(g&&l.removeChild(g),Z.appendChecked||$.grep(p(m,"input"),q),n=0;f=m[n++];)if((!d||-1===$.inArray(f,d))&&(a=$.contains(f.ownerDocument,f),g=p(l.appendChild(f),"script"),a&&u(g),c))for(e=0;f=g[e++];)lc.test(f.type||"")&&c.push(f);return l},cleanData:function(a,b){for(var c,d,e,f,g=0,h=$.expando,i=$.cache,j=Z.deleteExpando,k=$.event.special;null!=(c=a[g]);g++)if((b||$.acceptData(c))&&(f=(e=c[h])&&i[e])){if(f.events)for(d in f.events)k[d]?$.event.remove(c,d):$.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==Hb?c.removeAttribute(h):c[h]=null,Q.push(e))}}}),$.fn.extend({text:function(a){return Pb(this,function(a){return void 0===a?$.text(this):this.empty().append((this[0]&&this[0].ownerDocument||zb).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&r(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=r(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?$.filter(a,this):this,e=0;null!=(c=d[e]);e++)!b&&1===c.nodeType&&$.cleanData(p(c)),c.parentNode&&(b&&$.contains(c.ownerDocument,c)&&u(p(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&$.cleanData(p(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&$.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return $.clone(this,a,b)})},html:function(a){return Pb(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(cc,""):void 0;if("string"==typeof a&&!jc.test(a)&&(Z.htmlSerialize||!dc.test(a))&&(Z.leadingWhitespace||!ec.test(a))&&!oc[(gc.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(fc,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&($.cleanData(p(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,$.cleanData(p(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=S.apply([],a);var c,d,e,f,g=0,h=this.length,i=this,j=h-1,k=a[0],l=$.isFunction(k);if(l||h>1&&"string"==typeof k&&!Z.checkClone&&kc.test(k))return this.each(function(c){var d=i.eq(c);l&&(a[0]=k.call(this,c,d.html())),d.domManip(a,b)});if(h&&(f=$.buildFragment(a,this[0].ownerDocument,!1,this),c=f.firstChild,1===f.childNodes.length&&(f=c),c)){for(e=$.map(p(f,"script"),s),d=e.length;h>g;g++)c=f,g!==j&&(c=$.clone(c,!0,!0),d&&$.merge(e,p(c,"script"))),b.call(this[g],c,g);if(d)for(f=e[e.length-1].ownerDocument,$.map(e,t),g=0;d>g;g++)c=e[g],lc.test(c.type||"")&&!$._data(c,"globalEval")&&$.contains(f,c)&&(c.src?$._evalUrl&&$._evalUrl(c.src):$.globalEval((c.text||c.textContent||c.innerHTML||"").replace(nc,"")));f=c=null}return this}}),$.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){$.fn[a]=function(a){for(var c=0,d=[],e=$(a),f=e.length-1;f>=c;c++)a=c===f?this:this.clone(!0),$(e[c])[b](a),T.apply(d,a.get());return this.pushStack(d)}});var qc,rc,sc,tc={},uc=zb.createElement("div");uc.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",rc=uc.getElementsByTagName("a")[0],rc.style.cssText="float:left;opacity:.5",Z.opacity=/^0.5/.test(rc.style.opacity),Z.cssFloat=!!rc.style.cssFloat,uc.style.backgroundClip="content-box",uc.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===uc.style.backgroundClip,rc=uc=null,Z.shrinkWrapBlocks=function(){var a,b,c;if(null==sc){if(a=zb.getElementsByTagName("body")[0],!a)return;b=zb.createElement("div"),c=zb.createElement("div"),a.appendChild(b).appendChild(c),sc=!1,typeof c.style.zoom!==Hb&&(c.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0;width:1px;padding:1px;zoom:1",c.innerHTML="<div></div>",c.firstChild.style.width="5px",sc=3!==c.offsetWidth),a.removeChild(b)}return sc};var vc,wc,xc=/^margin/,yc=RegExp("^("+Mb+")(?!px)[a-z%]+$","i"),zc=/^(top|right|bottom|left)$/;a.getComputedStyle?(vc=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},wc=function(a,b,c){var d,e,f=a.style;return e=(c=c||vc(a))?c.getPropertyValue(b)||c[b]:void 0,c&&(""===e&&!$.contains(a.ownerDocument,a)&&(e=$.style(a,b)),yc.test(e)&&xc.test(b)&&(a=f.width,b=f.minWidth,d=f.maxWidth,f.minWidth=f.maxWidth=f.width=e,e=c.width,f.width=a,f.minWidth=b,f.maxWidth=d)),void 0===e?e:e+""}):zb.documentElement.currentStyle&&(vc=function(a){return a.currentStyle},wc=function(a,b,c){var d,e,f,g=a.style;return f=(c=c||vc(a))?c[b]:void 0,null==f&&g&&g[b]&&(f=g[b]),yc.test(f)&&!zc.test(b)&&(c=g.left,(e=(d=a.runtimeStyle)&&d.left)&&(d.left=a.currentStyle.left),g.left="fontSize"===b?"1em":f,f=g.pixelLeft+"px",g.left=c,e&&(d.left=e)),void 0===f?f:f+""||"auto"});var Ac,Bc,Cc,Dc,Ec,Fc,Gc=function(){var b,c,d=zb.getElementsByTagName("body")[0];d&&(b=zb.createElement("div"),c=zb.createElement("div"),b.style.cssText=Ic,d.appendChild(b).appendChild(c),c.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",$.swap(d,null!=d.style.zoom?{zoom:1}:{},function(){Cc=4===c.offsetWidth}),Dc=!0,Ec=!1,Fc=!0,a.getComputedStyle&&(Ec="1%"!==(a.getComputedStyle(c,null)||{}).top,Dc="4px"===(a.getComputedStyle(c,null)||{width:"4px"}).width),d.removeChild(b),c=d=null)},Hc=zb.createElement("div"),Ic="border:0;width:0;height:0;position:absolute;top:0;left:-9999px";Hc.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Ac=Hc.getElementsByTagName("a")[0],Ac.style.cssText="float:left;opacity:.5",Z.opacity=/^0.5/.test(Ac.style.opacity),Z.cssFloat=!!Ac.style.cssFloat,Hc.style.backgroundClip="content-box",Hc.cloneNode(!0).style.backgroundClip="",Z.clearCloneStyle="content-box"===Hc.style.backgroundClip,Ac=Hc=null,$.extend(Z,{reliableHiddenOffsets:function(){if(null!=Bc)return Bc;var a,b,c;b=zb.createElement("div");var d=zb.getElementsByTagName("body")[0];return d?(b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",a=zb.createElement("div"),a.style.cssText=Ic,d.appendChild(a).appendChild(b),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",b=b.getElementsByTagName("td"),b[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===b[0].offsetHeight,b[0].style.display="",b[1].style.display="none",Bc=c&&0===b[0].offsetHeight,d.removeChild(a),Bc):void 0},boxSizing:function(){return null==Cc&&Gc(),Cc},boxSizingReliable:function(){return null==Dc&&Gc(),Dc},pixelPosition:function(){return null==Ec&&Gc(),Ec},reliableMarginRight:function(){var b,c,d,e;if(null==Fc&&a.getComputedStyle){if(b=zb.getElementsByTagName("body")[0],!b)return;c=zb.createElement("div"),d=zb.createElement("div"),c.style.cssText=Ic,b.appendChild(c).appendChild(d),e=d.appendChild(zb.createElement("div")),e.style.cssText=d.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0",e.style.marginRight=e.style.width="0",d.style.width="1px",Fc=!parseFloat((a.getComputedStyle(e,null)||{}).marginRight),b.removeChild(c)}return Fc}}),$.swap=function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c};var Jc=/alpha\([^)]*\)/i,Kc=/opacity\s*=\s*([^)]*)/,Lc=/^(none|table(?!-c[ea]).+)/,Mc=RegExp("^("+Mb+")(.*)$","i"),Nc=RegExp("^([+-])=("+Mb+")","i"),Oc={position:"absolute",visibility:"hidden",display:"block"},Pc={letterSpacing:0,fontWeight:400},Qc=["Webkit","O","Moz","ms"];$.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=wc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":Z.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=$.camelCase(b),i=a.style;if(b=$.cssProps[h]||($.cssProps[h]=z(i,h)),g=$.cssHooks[b]||$.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Nc.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat($.css(a,b)),f="number"),null!=c&&c===c&&("number"===f&&!$.cssNumber[h]&&(c+="px"),!Z.clearCloneStyle&&""===c&&0===b.indexOf("background")&&(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]="",i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f;return f=$.camelCase(b),b=$.cssProps[f]||($.cssProps[f]=z(a.style,f)),(f=$.cssHooks[b]||$.cssHooks[f])&&"get"in f&&(e=f.get(a,!0,c)),void 0===e&&(e=wc(a,b,d)),"normal"===e&&b in Pc&&(e=Pc[b]),""===c||c?(a=parseFloat(e),!0===c||$.isNumeric(a)?a||0:e):e}}),$.each(["height","width"],function(a,b){$.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Lc.test($.css(a,"display"))?$.swap(a,Oc,function(){return D(a,b,d)}):D(a,b,d):void 0},set:function(a,c,d){var e=d&&vc(a);return B(a,c,d?C(a,b,d,Z.boxSizing()&&"border-box"===$.css(a,"boxSizing",!1,e),e):0)}}}),Z.opacity||($.cssHooks.opacity={get:function(a,b){return Kc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=$.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===$.trim(f.replace(Jc,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Jc.test(f)?f.replace(Jc,e):f+" "+e)}}),$.cssHooks.marginRight=y(Z.reliableMarginRight,function(a,b){return b?$.swap(a,{display:"inline-block"},wc,[a,"marginRight"]):void 0}),$.each({margin:"",padding:"",border:"Width"},function(a,b){$.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Nb[d]+b]=c[d]||c[d-2]||c[0];return e}},xc.test(a)||($.cssHooks[a+b].set=B)}),$.fn.extend({css:function(a,b){return Pb(this,function(a,b,c){var d,e={},f=0;if($.isArray(b)){for(c=vc(a),d=b.length;d>f;f++)e[b[f]]=$.css(a,b[f],!1,c);return e}return void 0!==c?$.style(a,b,c):$.css(a,b)},a,b,1<arguments.length)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){Ob(this)?$(this).show():$(this).hide()})}}),$.Tween=E,E.prototype={constructor:E,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||($.cssNumber[c]?"":"px")},cur:function(){var a=E.propHooks[this.prop];return a&&a.get?a.get(this):E.propHooks._default.get(this)},run:function(a){var b,c=E.propHooks[this.prop];return this.pos=b=this.options.duration?$.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=$.css(a.elem,a.prop,""),a&&"auto"!==a?a:0):a.elem[a.prop]},set:function(a){$.fx.step[a.prop]?$.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[$.cssProps[a.prop]]||$.cssHooks[a.prop])?$.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},$.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},$.fx=E.prototype.init,$.fx.step={};var Rc,Sc,Tc=/^(?:toggle|show|hide)$/,Uc=RegExp("^(?:([+-])=|)("+Mb+")([a-z%]*)$","i"),Vc=/queueHooks$/,Wc=[function(a,b,c){var d,e,f,g,h,i,j=this,k={},l=a.style,m=a.nodeType&&Ob(a),n=$._data(a,"fxshow");c.queue||(g=$._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,j.always(function(){j.always(function(){g.unqueued--,$.queue(a,"fx").length||g.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[l.overflow,l.overflowX,l.overflowY],e=$.css(a,"display"),i=x(a.nodeName),"none"===e&&(e=i),"inline"===e&&"none"===$.css(a,"float")&&(Z.inlineBlockNeedsLayout&&"inline"!==i?l.zoom=1:l.display="inline-block")),c.overflow&&(l.overflow="hidden",Z.shrinkWrapBlocks()||j.always(function(){l.overflow=c.overflow[0],l.overflowX=c.overflow[1],l.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Tc.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(m?"hide":"show")){if("show"!==e||!n||void 0===n[d])continue;m=!0}k[d]=n&&n[d]||$.style(a,d)}if(!$.isEmptyObject(k))for(d in n?"hidden"in n&&(m=n.hidden):n=$._data(a,"fxshow",{}),f&&(n.hidden=!m),m?$(a).show():j.done(function(){$(a).hide()}),j.done(function(){var b;$._removeData(a,"fxshow");for(b in k)$.style(a,b,k[b])}),k)b=H(m?n[d]:0,d,j),d in n||(n[d]=b.start,m&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],Xc={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Uc.exec(b),f=e&&e[3]||($.cssNumber[a]?"":"px"),g=($.cssNumber[a]||"px"!==f&&+d)&&Uc.exec($.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,$.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};$.Animation=$.extend(I,{tweener:function(a,b){$.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Xc[c]=Xc[c]||[],Xc[c].unshift(b)},prefilter:function(a,b){b?Wc.unshift(a):Wc.push(a)}}),$.speed=function(a,b,c){var d=a&&"object"==typeof a?$.extend({},a):{complete:c||!c&&b||$.isFunction(a)&&a,duration:a,easing:c&&b||b&&!$.isFunction(b)&&b};return d.duration=$.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in $.fx.speeds?$.fx.speeds[d.duration]:$.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){$.isFunction(d.old)&&d.old.call(this),d.queue&&$.dequeue(this,d.queue)},d},$.fn.extend({fadeTo:function(a,b,c,d){return this.filter(Ob).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=$.isEmptyObject(a),f=$.speed(b,c,d);return b=function(){var b=I(this,$.extend({},a),f);(e||$._data(this,"finish"))&&b.stop(!0)},b.finish=b,e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=$.timers,g=$._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Vc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&$.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=$._data(this),d=c[a+"queue"];b=c[a+"queueHooks"];var e=$.timers,f=d?d.length:0;for(c.finish=!0,$.queue(this,a,[]),b&&b.stop&&b.stop.call(this,!0),b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;f>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),$.each(["toggle","show","hide"],function(a,b){var c=$.fn[b];$.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(G(b,!0),a,d,e)}}),$.each({slideDown:G("show"),slideUp:G("hide"),slideToggle:G("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){$.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),$.timers=[],$.fx.tick=function(){var a,b=$.timers,c=0;for(Rc=$.now();c<b.length;c++)a=b[c],!a()&&b[c]===a&&b.splice(c--,1);b.length||$.fx.stop(),Rc=void 0},$.fx.timer=function(a){$.timers.push(a),a()?$.fx.start():$.timers.pop()},$.fx.interval=13,$.fx.start=function(){Sc||(Sc=setInterval($.fx.tick,$.fx.interval))},$.fx.stop=function(){clearInterval(Sc),Sc=null},$.fx.speeds={slow:600,fast:200,_default:400},$.fn.delay=function(a,b){return a=$.fx?$.fx.speeds[a]||a:a,this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})};var Yc,Zc,$c,_c,ad=zb.createElement("div");ad.setAttribute("className","t"),ad.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Yc=ad.getElementsByTagName("a")[0],$c=zb.createElement("select"),_c=$c.appendChild(zb.createElement("option")),Zc=ad.getElementsByTagName("input")[0],Yc.style.cssText="top:1px",Z.getSetAttribute="t"!==ad.className,Z.style=/top/.test(Yc.getAttribute("style")),Z.hrefNormalized="/a"===Yc.getAttribute("href"),Z.checkOn=!!Zc.value,Z.optSelected=_c.selected,Z.enctype=!!zb.createElement("form").enctype,$c.disabled=!0,Z.optDisabled=!_c.disabled,Zc=zb.createElement("input"),Zc.setAttribute("value",""),Z.input=""===Zc.getAttribute("value"),Zc.value="t",Zc.setAttribute("type","radio"),Z.radioValue="t"===Zc.value;var bd=/\r/g;$.fn.extend({val:function(a){var b,c,d,e=this[0];return arguments.length?(d=$.isFunction(a),this.each(function(c){1!==this.nodeType||(c=d?a.call(this,c,$(this).val()):a,null==c?c="":"number"==typeof c?c+="":$.isArray(c)&&(c=$.map(c,function(a){return null==a?"":a+""})),b=$.valHooks[this.type]||$.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,c,"value"))||(this.value=c)})):e?(b=$.valHooks[e.type]||$.valHooks[e.nodeName.toLowerCase()])&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bd,""):null==c?"":c):void 0;
}}),$.extend({valHooks:{option:{get:function(a){var b=$.find.attr(a,"value");return null!=b?b:$.text(a)}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e=(a="select-one"===a.type||0>d)?null:[],f=a?d+1:c.length,g=0>d?f:a?d:0;f>g;g++)if(b=c[g],(b.selected||g===d)&&(Z.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!$.nodeName(b.parentNode,"optgroup"))){if(b=$(b).val(),a)return b;e.push(b)}return e},set:function(a,b){for(var c,d,e=a.options,f=$.makeArray(b),g=e.length;g--;)if(d=e[g],0<=$.inArray($.valHooks.option.get(d),f))try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),$.each(["radio","checkbox"],function(){$.valHooks[this]={set:function(a,b){return $.isArray(b)?a.checked=0<=$.inArray($(a).val(),b):void 0}},Z.checkOn||($.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var cd,dd,ed=$.expr.attrHandle,fd=/^(?:checked|selected)$/i,gd=Z.getSetAttribute,hd=Z.input;$.fn.extend({attr:function(a,b){return Pb(this,$.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){$.removeAttr(this,a)})}}),$.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f){if(typeof a.getAttribute===Hb)return $.prop(a,b,c);if(1===f&&$.isXMLDoc(a)||(b=b.toLowerCase(),d=$.attrHooks[b]||($.expr.match.bool.test(b)?dd:cd)),void 0===c)return d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=$.find.attr(a,b),null==e?void 0:e);if(null!==c)return d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c);$.removeAttr(a,b)}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(Db);if(f&&1===a.nodeType)for(;c=f[e++];)d=$.propFix[c]||c,$.expr.match.bool.test(c)?hd&&gd||!fd.test(c)?a[d]=!1:a[$.camelCase("default-"+c)]=a[d]=!1:$.attr(a,c,""),a.removeAttribute(gd?c:d)},attrHooks:{type:{set:function(a,b){if(!Z.radioValue&&"radio"===b&&$.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),dd={set:function(a,b,c){return!1===b?$.removeAttr(a,c):hd&&gd||!fd.test(c)?a.setAttribute(!gd&&$.propFix[c]||c,c):a[$.camelCase("default-"+c)]=a[c]=!0,c}},$.each($.expr.match.bool.source.match(/\w+/g),function(a,b){var c=ed[b]||$.find.attr;ed[b]=hd&&gd||!fd.test(b)?function(a,b,d){var e,f;return d||(f=ed[b],ed[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,ed[b]=f),e}:function(a,b,c){return c?void 0:a[$.camelCase("default-"+b)]?b.toLowerCase():null}}),hd&&gd||($.attrHooks.value={set:function(a,b,c){return $.nodeName(a,"input")?void(a.defaultValue=b):cd&&cd.set(a,b,c)}}),gd||(cd={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},ed.id=ed.name=ed.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},$.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:cd.set},$.attrHooks.contenteditable={set:function(a,b,c){cd.set(a,""===b?!1:b,c)}},$.each(["width","height"],function(a,b){$.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),Z.style||($.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var id=/^(?:input|select|textarea|button|object)$/i,jd=/^(?:a|area)$/i;$.fn.extend({prop:function(a,b){return Pb(this,$.prop,a,b,1<arguments.length)},removeProp:function(a){return a=$.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),$.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f;return f=a.nodeType,a&&3!==f&&8!==f&&2!==f?((f=1!==f||!$.isXMLDoc(a))&&(b=$.propFix[b]||b,e=$.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]):void 0},propHooks:{tabIndex:{get:function(a){var b=$.find.attr(a,"tabindex");return b?parseInt(b,10):id.test(a.nodeName)||jd.test(a.nodeName)&&a.href?0:-1}}}}),Z.hrefNormalized||$.each(["href","src"],function(a,b){$.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),Z.optSelected||($.propHooks.selected={get:function(a){return(a=a.parentNode)&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}}),$.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){$.propFix[this.toLowerCase()]=this}),Z.enctype||($.propFix.enctype="encoding");var kd=/[\t\r\n\f]/g;$.fn.extend({addClass:function(a){var b,c,d,e,f,g=0,h=this.length;if(b="string"==typeof a&&a,$.isFunction(a))return this.each(function(b){$(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(Db)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(kd," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");d=$.trim(d),c.className!==d&&(c.className=d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length;if(b=0===arguments.length||"string"==typeof a&&a,$.isFunction(a))return this.each(function(b){$(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(Db)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(kd," "):"")){for(f=0;e=b[f++];)for(;0<=d.indexOf(" "+e+" ");)d=d.replace(" "+e+" "," ");d=a?$.trim(d):"",c.className!==d&&(c.className=d)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):$.isFunction(a)?this.each(function(c){$(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=$(this),f=a.match(Db)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==Hb&&"boolean"!==c||(this.className&&$._data(this,"__className__",this.className),this.className=this.className||!1===a?"":$._data(this,"__className__")||"")})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;c>b;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(kd," ").indexOf(a))return!0;return!1}}),$.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){$.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}}),$.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var ld=$.now(),md=/\?/,nd=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;$.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=$.trim(b+"");return e&&!$.trim(e.replace(nd,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():$.error("Invalid JSON: "+b)},$.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return(!c||!c.documentElement||c.getElementsByTagName("parsererror").length)&&$.error("Invalid XML: "+b),c};var od,pd,qd=/#.*$/,rd=/([?&])_=[^&]*/,sd=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,td=/^(?:GET|HEAD)$/,ud=/^\/\//,vd=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,wd={},xd={},yd="*/".concat("*");try{pd=location.href}catch(zd){pd=zb.createElement("a"),pd.href="",pd=pd.href}od=vd.exec(pd.toLowerCase())||[],$.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:pd,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(od[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":yd,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":$.parseJSON,"text xml":$.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?L(L(a,$.ajaxSettings),b):L($.ajaxSettings,a)},ajaxPrefilter:J(wd),ajaxTransport:J(xd),ajax:function(a,b){function c(a,b,c,d){var e,k,r,s;if(s=b,2!==t){if(t=2,h&&clearTimeout(h),j=void 0,g=d||"",v.readyState=a>0?4:0,d=a>=200&&300>a||304===a,c){r=l;for(var u,w,x,y,z=v,A=r.contents,B=r.dataTypes;"*"===B[0];)B.shift(),void 0===w&&(w=r.mimeType||z.getResponseHeader("Content-Type"));if(w)for(y in A)if(A[y]&&A[y].test(w)){B.unshift(y);break}if(B[0]in c)x=B[0];else{for(y in c){if(!B[0]||r.converters[y+" "+B[0]]){x=y;break}u||(u=y)}x=x||u}x?(x!==B[0]&&B.unshift(x),r=c[x]):r=void 0}a:{c=l,u=r,w=v,x=d;var C,D,E,z={},A=c.dataTypes.slice();if(A[1])for(D in c.converters)z[D.toLowerCase()]=c.converters[D];for(y=A.shift();y;)if(c.responseFields[y]&&(w[c.responseFields[y]]=u),!E&&x&&c.dataFilter&&(u=c.dataFilter(u,c.dataType)),E=y,y=A.shift())if("*"===y)y=E;else if("*"!==E&&E!==y){if(D=z[E+" "+y]||z["* "+y],!D)for(C in z)if(r=C.split(" "),r[1]===y&&(D=z[E+" "+r[0]]||z["* "+r[0]])){!0===D?D=z[C]:!0!==z[C]&&(y=r[0],A.unshift(r[1]));break}if(!0!==D)if(D&&c["throws"])u=D(u);else try{u=D(u)}catch(F){r={state:"parsererror",error:D?F:"No conversion from "+E+" to "+y};break a}}r={state:"success",data:u}}d?(l.ifModified&&((s=v.getResponseHeader("Last-Modified"))&&($.lastModified[f]=s),(s=v.getResponseHeader("etag"))&&($.etag[f]=s)),204===a||"HEAD"===l.type?s="nocontent":304===a?s="notmodified":(s=r.state,e=r.data,k=r.error,d=!k)):(k=s,(a||!s)&&(s="error",0>a&&(a=0))),v.status=a,v.statusText=(b||s)+"",d?o.resolveWith(m,[e,s,v]):o.rejectWith(m,[v,s,k]),v.statusCode(q),q=void 0,i&&n.trigger(d?"ajaxSuccess":"ajaxError",[v,l,d?e:k]),p.fireWith(m,[v,s]),i&&(n.trigger("ajaxComplete",[v,l]),--$.active||$.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=void 0),b=b||{};var d,e,f,g,h,i,j,k,l=$.ajaxSetup({},b),m=l.context||l,n=l.context&&(m.nodeType||m.jquery)?$(m):$.event,o=$.Deferred(),p=$.Callbacks("once memory"),q=l.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!k)for(k={};b=sd.exec(g);)k[b[1].toLowerCase()]=b[2];b=k[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?g:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(l.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){return a=a||u,j&&j.abort(a),c(0,a),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,l.url=((a||l.url||pd)+"").replace(qd,"").replace(ud,od[1]+"//"),l.type=b.method||b.type||l.method||l.type,l.dataTypes=$.trim(l.dataType||"*").toLowerCase().match(Db)||[""],null==l.crossDomain&&(d=vd.exec(l.url.toLowerCase()),l.crossDomain=!(!d||d[1]===od[1]&&d[2]===od[2]&&(d[3]||("http:"===d[1]?"80":"443"))===(od[3]||("http:"===od[1]?"80":"443")))),l.data&&l.processData&&"string"!=typeof l.data&&(l.data=$.param(l.data,l.traditional)),K(wd,l,b,v),2===t)return v;(i=l.global)&&0===$.active++&&$.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!td.test(l.type),f=l.url,l.hasContent||(l.data&&(f=l.url+=(md.test(f)?"&":"?")+l.data,delete l.data),!1===l.cache&&(l.url=rd.test(f)?f.replace(rd,"$1_="+ld++):f+(md.test(f)?"&":"?")+"_="+ld++)),l.ifModified&&($.lastModified[f]&&v.setRequestHeader("If-Modified-Since",$.lastModified[f]),$.etag[f]&&v.setRequestHeader("If-None-Match",$.etag[f])),(l.data&&l.hasContent&&!1!==l.contentType||b.contentType)&&v.setRequestHeader("Content-Type",l.contentType),v.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+("*"!==l.dataTypes[0]?", "+yd+"; q=0.01":""):l.accepts["*"]);for(e in l.headers)v.setRequestHeader(e,l.headers[e]);if(l.beforeSend&&(!1===l.beforeSend.call(m,v,l)||2===t))return v.abort();u="abort";for(e in{success:1,error:1,complete:1})v[e](l[e]);if(j=K(xd,l,b,v)){v.readyState=1,i&&n.trigger("ajaxSend",[v,l]),l.async&&0<l.timeout&&(h=setTimeout(function(){v.abort("timeout")},l.timeout));try{t=1,j.send(r,c)}catch(w){if(!(2>t))throw w;c(-1,w)}}else c(-1,"No Transport");return v},getJSON:function(a,b,c){return $.get(a,b,c,"json")},getScript:function(a,b){return $.get(a,void 0,b,"script")}}),$.each(["get","post"],function(a,b){$[b]=function(a,c,d,e){return $.isFunction(c)&&(e=e||d,d=c,c=void 0),$.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),$.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){$.fn[b]=function(a){return this.on(b,a)}}),$._evalUrl=function(a){return $.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},$.fn.extend({wrapAll:function(a){if($.isFunction(a))return this.each(function(b){$(this).wrapAll(a.call(this,b))});if(this[0]){var b=$(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return $.isFunction(a)?this.each(function(b){$(this).wrapInner(a.call(this,b))}):this.each(function(){var b=$(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=$.isFunction(a);return this.each(function(c){$(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){$.nodeName(this,"body")||$(this).replaceWith(this.childNodes)}).end()}}),$.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!Z.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||$.css(a,"display"))},$.expr.filters.visible=function(a){return!$.expr.filters.hidden(a)};var Ad=/%20/g,Bd=/\[\]$/,Cd=/\r?\n/g,Dd=/^(?:submit|button|image|reset|file)$/i,Ed=/^(?:input|select|textarea|keygen)/i;$.param=function(a,b){var c,d=[],e=function(a,b){b=$.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=$.ajaxSettings&&$.ajaxSettings.traditional),$.isArray(a)||a.jquery&&!$.isPlainObject(a))$.each(a,function(){e(this.name,this.value)});else for(c in a)M(c,a[c],b,e);return d.join("&").replace(Ad,"+")},$.fn.extend({serialize:function(){return $.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=$.prop(this,"elements");return a?$.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!$(this).is(":disabled")&&Ed.test(this.nodeName)&&!Dd.test(a)&&(this.checked||!Qb.test(a))}).map(function(a,b){var c=$(this).val();return null==c?null:$.isArray(c)?$.map(c,function(a){return{name:b.name,value:a.replace(Cd,"\r\n")}}):{name:b.name,value:c.replace(Cd,"\r\n")}}).get()}}),$.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&O()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:O,$.ajaxSettings.xhr=void 0===a.ActiveXObject?N:function(){return(this.url==zb.location||0==this.url.indexOf("http")||!this.isLocal)&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&N()||N(1)};var Fd=0,Gd={},Hd=$.ajaxSettings.xhr();a.ActiveXObject&&$(a).on("unload",function(){for(var a in Gd)Gd[a](void 0,!0)}),Z.cors=!!Hd&&"withCredentials"in Hd,(Hd=Z.ajax=!!Hd)&&$.ajaxTransport(function(a){if(!a.crossDomain||Z.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Fd;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Gd[g],b=void 0,f.onreadystatechange=$.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Gd[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}}),$.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return $.globalEval(a),a}}}),$.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),$.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=zb.head||$("head")[0]||zb.documentElement;return{send:function(d,e){b=zb.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var Id=[],Jd=/(=)\?(?=&|$)|\?\?/;$.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Id.pop()||$.expando+"_"+ld++;return this[a]=!0,a}}),$.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=!1!==b.jsonp&&(Jd.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Jd.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=$.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Jd,"$1"+e):!1!==b.jsonp&&(b.url+=(md.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||$.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Id.push(e)),g&&$.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),$.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||zb;var d=wb.exec(a);return c=!c&&[],d?[b.createElement(d[1])]:(d=$.buildFragment([a],b,c),c&&c.length&&$(c).remove(),$.merge([],d.childNodes))};var Kd=$.fn.load;$.fn.load=function(a,b,c){if("string"!=typeof a&&Kd)return Kd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=a.slice(h,a.length),a=a.slice(0,h)),$.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),0<g.length&&$.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?$("<div>").append($.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},$.expr.filters.animated=function(a){return $.grep($.timers,function(b){return a===b.elem}).length};var Ld=a.document.documentElement;$.offset={setOffset:function(a,b,c){var d,e,f,g=$.css(a,"position"),h=$(a),i={};"static"===g&&(a.style.position="relative"),f=h.offset(),e=$.css(a,"top"),d=$.css(a,"left"),("absolute"===g||"fixed"===g)&&-1<$.inArray("auto",[e,d])?(d=h.position(),e=d.top,d=d.left):(e=parseFloat(e)||0,d=parseFloat(d)||0),$.isFunction(b)&&(b=b.call(a,c,f)),null!=b.top&&(i.top=b.top-f.top+e),null!=b.left&&(i.left=b.left-f.left+d),"using"in b?b.using.call(a,i):h.css(i)}},$.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){$.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=(c=this[0])&&c.ownerDocument;return e?(b=e.documentElement,$.contains(b,c)?(typeof c.getBoundingClientRect!==Hb&&(d=c.getBoundingClientRect()),c=P(e),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d):void 0},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===$.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),$.nodeName(a[0],"html")||(c=a.offset()),c.top+=$.css(a[0],"borderTopWidth",!0),c.left+=$.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-$.css(d,"marginTop",!0),left:b.left-c.left-$.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||Ld;a&&!$.nodeName(a,"html")&&"static"===$.css(a,"position");)a=a.offsetParent;return a||Ld})}}),$.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);$.fn[a]=function(d){return Pb(this,function(a,d,e){var f=P(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?$(f).scrollLeft():e,c?e:$(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),$.each(["top","left"],function(a,b){$.cssHooks[b]=y(Z.pixelPosition,function(a,c){return c?(c=wc(a,b),yc.test(c)?$(a).position()[b]+"px":c):void 0})}),$.each({Height:"height",Width:"width"},function(a,b){$.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){$.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(!0===d||!0===e?"margin":"border");return Pb(this,function(b,c,d){return $.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(c=b.documentElement,Math.max(b.body["scroll"+a],c["scroll"+a],b.body["offset"+a],c["offset"+a],c["client"+a])):void 0===d?$.css(b,c,g):$.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),$.fn.size=function(){return this.length},$.fn.andSelf=$.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return $});var Md=a.jQuery,Nd=a.$;return $.noConflict=function(b){return a.$===$&&(a.$=Nd),b&&a.jQuery===$&&(a.jQuery=Md),$},typeof b===Hb&&(a.jQuery=a.$=$),$}),function(a){function b(a){try{return a?new window.ActiveXObject("Microsoft.XMLHTTP"):new window.XMLHttpRequest}catch(b){}}a.ajaxSettings.xhr=void 0===window.ActiveXObject?b:function(){return(this.url==document.location||0==this.url.indexOf("http")||!this.isLocal)&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&b()||b(1)},a.ajaxTransport("+script",function(a){var b,c=document.head||jQuery("head")[0]||document.documentElement;return{send:function(d,e){b=document.createElement("script"),a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}),a.extend(a.support,{iecors:!!window.XDomainRequest}),a.support.iecors?a.ajaxTransport(function(a){return{send:function(b,c){var d=new window.XDomainRequest;d.onload=function(){c(200,"OK",{text:d.responseText},{"Content-Type":d.contentType})},a.xhrFields&&(d.onerror=a.xhrFields.error,d.ontimeout=a.xhrFields.timeout),d.open(a.type,a.url),d.send(a.hasContent&&a.data||null)},abort:function(){xdr.abort()}}}):(a.ajaxSetup({accepts:{binary:"text/plain; charset=x-user-defined"},responseFields:{binary:"response"}}),a.ajaxTransport("binary",function(a){var b;return{send:function(c,d){var e=a.xhr();e.open(a.type,a.url,a.async);var f=!1;try{e.hasOwnProperty("responseType")&&(e.responseType="arraybuffer",f=!0)}catch(g){}try{!f&&e.overrideMimeType&&e.overrideMimeType("text/plain; charset=x-user-defined")}catch(h){}!a.crossDomain&&!c["X-Requested-With"]&&(c["X-Requested-With"]="XMLHttpRequest");try{for(var i in c)e.setRequestHeader(i,c[i])}catch(j){}e.send(a.hasContent&&a.data||null),b=function(){var c=e.status,f="",g=e.getAllResponseHeaders(),h={};try{if(b&&4===e.readyState){b=void 0;try{h.text="string"==typeof e.responseText?e.responseText:null}catch(i){}try{h.binary=e.response}catch(j){}try{f=e.statusText}catch(k){f=""}c||!a.isLocal||a.crossDomain?1223===c&&(c=204):c=h.text?200:404,d(c,f,h,g)}}catch(l){alert(l),d(-1,l)}},a.async?4===e.readyState?setTimeout(b):e.onreadystatechange=b:b()},abort:function(){}}}))}(jQuery),function(a,b,c,d){function e(c,e){function f(b){a(g).each(function(){self.Jmol&&(0<=e.indexOf("mouseup")||0<=e.indexOf("touchend"))&&Jmol._setMouseOwner(null);var c=a(this);this!==b.target&&!c.has(b.target).length&&c.triggerHandler(e,[b.target,b])})}e=e||c+d;var g=a(),h=c+"."+e+"-special-event";a.event.special[e]={setup:function(){g=g.add(this),1===g.length&&a(b).bind(h,f)},teardown:function(){self.Jmol&&Jmol._setMouseOwner(null),g=g.not(this),0===g.length&&a(b).unbind(h)},add:function(a){var b=a.handler;a.handler=function(a,c){a.target=c,b.apply(this,arguments)}}}}a.map(c.split(" "),function(a){e(a)}),e("focusin","focus"+d),e("focusout","blur"+d)}(jQuery,document,"click mousemove mouseup touchmove touchend","outjsmol"),"undefined"==typeof jQuery&&alert("Note -- JSmoljQuery is required for JSmol, but it's not defined."),self.Jmol||(Jmol={}),Jmol._version||(Jmol=function(a){var b=function(a){return{rear:a++,header:a++,main:a++,image:a++,front:a++,fileOpener:a++,coverImage:a++,dialog:a++,menu:a+9e4,console:a+91e3,consoleImage:a+91001,monitorZIndex:a+99999}},b={_version:"$Date: 2016-03-02 13:00:37 -0600 (Wed, 02 Mar 2016) $",_alertNoBinary:!0,_allowedJmolSize:[25,2048,300],_appletCssClass:"",_appletCssText:"",_fileCache:null,_jarFile:null,_j2sPath:null,_use:null,_j2sLoadMonitorOpacity:90,_applets:{},_asynchronous:!0,_ajaxQueue:[],_persistentMenu:!1,_getZOrders:b,_z:b(Jmol.z||9e3),_debugCode:!0,db:{_databasePrefixes:"$=:",_fileLoadScript:";if (_loadScript = '' && defaultLoadScript == '' && _filetype == 'Pdb') { select protein or nucleic;cartoons Only;color structure; select * };",_nciLoadScript:";n = ({molecule=1}.length < {molecule=2}.length ? 2 : 1); select molecule=n;display selected;center selected;",_pubChemLoadScript:"",_DirectDatabaseCalls:{"cactus.nci.nih.gov":null,"rruff.geo.arizona.edu":null,"www.rcsb.org":null,"cdn.rcsb.org":null,"ftp.wwpdb.org":null,"pdbe.org":null,"www.ebi.ac.uk":null,"wwwdev.ebi.ac.uk":null,"pubchem.ncbi.nlm.nih.gov":null,"http://www.nmrdb.org/tools/jmol/predict.php":null,$:"http://cactus.nci.nih.gov/chemical/structure/%FILENCI/file?format=sdf&get3d=True",$$:"http://cactus.nci.nih.gov/chemical/structure/%FILENCI/file?format=sdf","=":"http://www.rcsb.org/pdb/files/%FILE.pdb","*":"http://www.ebi.ac.uk/pdbe/entry-files/download/%FILE.cif","==":"http://www.rcsb.org/pdb/files/ligand/%FILE.cif",":":"http://pubchem.ncbi.nlm.nih.gov/rest/pug/compound/%FILE/SDF?record_type=3d"},_restQueryUrl:"http://www.rcsb.org/pdb/rest/search",_restQueryXml:"<orgPdbQuery><queryType>org.pdb.query.simple.AdvancedKeywordQuery</queryType><description>Text Search</description><keywords>QUERY</keywords></orgPdbQuery>",_restReportUrl:"http://www.pdb.org/pdb/rest/customReport?pdbids=IDLIST&customReportColumns=structureId,structureTitle"},_debugAlert:!1,_document:a,_isXHTML:!1,_lastAppletID:null,_mousePageX:null,_mouseOwner:null,_serverUrl:"http://your.server.here/jsmol.php",_syncId:(""+Math.random()).substring(3),_touching:!1,_XhtmlElement:null,_XhtmlAppendChild:!1};a=a.location.href.toLowerCase(),b._httpProto=0==a.indexOf("https")?"https://":"http://",b._isFile=0==a.indexOf("file:"),b._isFile&&$.ajaxSetup({mimeType:"text/plain"}),b._ajaxTestSite=b._httpProto+"google.com",a=b._isFile||0==a.indexOf("http://localhost")||0==a.indexOf("http://127."),b._tracker="http://"==b._httpProto&&!a&&"http://chemapps.stolaf.edu/jmol/JmolTracker.htm?id=UA-45940799-1",b._isChrome=0<=navigator.userAgent.toLowerCase().indexOf("chrome"),b._isSafari=!b._isChrome&&0<=navigator.userAgent.toLowerCase().indexOf("safari"),b._isMsie=void 0!==window.ActiveXObject,b._isEdge=0<=navigator.userAgent.indexOf("Edge/"),b._useDataURI=!b._isSafari&&!b._isMsie&&!b._isEdge,window.requestAnimationFrame||(window.requestAnimationFrame=window.setTimeout);for(var c in Jmol)b[c]=Jmol[c];return b}(document,Jmol)),function(a,m){a.__$=m,m(document).ready(function(){a._document=null}),a.$=function(a,b){return null==a&&alert(b+arguments.callee.caller.toString()),m(b?"#"+a._id+"_"+b:a)},a._$=function(a){return"string"==typeof a?m("#"+a):a},a.$ajax=function(b){return a._ajaxCall=b.url,b.cache="NO"!=b.cache,0==b.url.indexOf("http://pubchem.ncbi.nlm.nih")&&(b.url="https://"+b.url.substring(7)),m.ajax(b)},a._getNCIInfo=function(b,c){return a._getFileData("http://cactus.nci.nih.gov/chemical/structure/"+b+"/"+("name"==c?"names":c))},a.$appEvent=function(b,c,d,e){b=a.$(b,c),b.off(d)&&e&&b.on(d,e)},a.$resize=function(a){return m(window).resize(a)},a.$after=function(a,b){return m(a).after(b)},a.$append=function(a,b){return m(a).append(b)},a.$bind=function(a,b,c){return c?m(a).bind(b,c):m(a).unbind(b)},a.$closest=function(a,b){return m(a).closest(b)},a.$get=function(a,b){return m(a).get(b)},a.$documentOff=function(a,b){return m(document).off(a,"#"+b)},a.$documentOn=function(a,b,c){return m(document).on(a,"#"+b,c)},a.$getAncestorDiv=function(a,b){return m("div."+b+":has(#"+a+")")[0]},a.$supportsIECrossDomainScripting=function(){return m.support.iecors},a.$attr=function(b,c,d){return a._$(b).attr(c,d)},a.$css=function(b,c){return a._$(b).css(c)},a.$find=function(b,c){return a._$(b).find(c)},a.$focus=function(b){return a._$(b).focus()},a.$html=function(b,c){return a._$(b).html(c)},a.$offset=function(b){return a._$(b).offset()},a.$windowOn=function(a,b){return m(window).on(a,b)},a.$prop=function(b,c,d){var e=a._$(b);return 3==arguments.length?e.prop(c,d):e.prop(c)},a.$remove=function(b){return a._$(b).remove()},a.$scrollTo=function(b,c){var d=a._$(b);return d.scrollTop(0>c?d[0].scrollHeight:c)},a.$setEnabled=function(b,c){return a._$(b).attr("disabled",c?null:"disabled")},a.$getSize=function(b){return b=a._$(b),[b.width(),b.height()]},a.$setSize=function(b,c,d){return a._$(b).width(c).height(d)},a.$is=function(b,c){return a._$(b).is(c)},a.$setVisible=function(b,c){var d=a._$(b);return c?d.show():d.hide()},a.$submit=function(b){return a._$(b).submit()},a.$val=function(b,c){var d=a._$(b);return 1==arguments.length?d.val():d.val(c)},a._clearVars=function(){delete jQuery,delete m,delete a,delete SwingController,delete J,delete JM,delete JS,delete JSV,delete JU,delete JV,delete java,delete javajs,delete Clazz,delete c$};var l=document,j=window,e={};e.ua=navigator.userAgent.toLowerCase();var h;a:{h=["linux","unix","mac","win"];for(var t=h.length;t--;)if(-1!=e.ua.indexOf(h[t])){h=h[t];break a}h="unknown"}e.os=h,e.browser=function(){for(var a=e.ua,b="konqueror webkit omniweb opera webtv icab msie mozilla".split(" "),c=0;c<b.length;c++)if(0<=a.indexOf(b[c]))return b[c];return"unknown"},e.browserName=e.browser(),e.browserVersion=parseFloat(e.ua.substring(e.ua.indexOf(e.browserName)+e.browserName.length+1)),e.supportsXhr2=function(){return m.support.cors||m.support.iecors},e.allowDestroy="msie"!=e.browserName,e.allowHTML5="msie"!=e.browserName||0>navigator.appVersion.indexOf("MSIE 8"),e.getDefaultLanguage=function(){return navigator.language||navigator.userLanguage||"en-US"},e._webGLtest=0,e.supportsWebGL=function(){if(!a.featureDetection._webGLtest){var b;a.featureDetection._webGLtest=j.WebGLRenderingContext&&((b=l.createElement("canvas")).getContext("webgl")||b.getContext("experimental-webgl"))?1:-1}return 0<a.featureDetection._webGLtest},e.supportsLocalization=function(){for(var a=l.getElementsByTagName("meta"),b=a.length;0<=--b;)if(0<=a[b].outerHTML.toLowerCase().indexOf("utf-8"))return!0;return!1},e.supportsJava=function(){return a.featureDetection._javaEnabled||(a.featureDetection._javaEnabled=a._isMsie?navigator.javaEnabled()?1:-1:!navigator.javaEnabled()||navigator.mimeTypes&&!navigator.mimeTypes["application/x-java-applet"]?-1:1),0<a.featureDetection._javaEnabled},e.compliantBrowser=function(){var a=!!l.getElementById,b=e.os;return("opera"==e.browserName&&7.54>=e.browserVersion&&"mac"==b||"webkit"==e.browserName&&125.12>e.browserVersion||"msie"==e.browserName&&"mac"==b||"konqueror"==e.browserName&&3.3>=e.browserVersion)&&(a=!1),
a},e.isFullyCompliant=function(){return e.compliantBrowser()&&e.supportsJava()},e.useIEObject="win"==e.os&&"msie"==e.browserName&&5.5<=e.browserVersion,e.useHtml4Object="mozilla"==e.browserName&&5<=e.browserVersion||"opera"==e.browserName&&8<=e.browserVersion||"webkit"==e.browserName,e.hasFileReader=j.File&&j.FileReader,a.featureDetection=e,a._ajax=function(b){return b.async?(a._ajaxQueue.push(b),void(1==a._ajaxQueue.length&&a._ajaxDone())):a.$ajax(b).responseText},a._ajaxDone=function(){var b=a._ajaxQueue.shift();b&&a.$ajax(b)},a._grabberOptions=[["$","NCI(small molecules)"],[":","PubChem(small molecules)"],["=","RCSB(macromolecules)"],["*","PDBe(macromolecules)"]],a._getGrabberOptions=function(b){if(0==a._grabberOptions.length)return"";var c='<input type="text" id="ID_query" onfocus="jQuery(this).select()" onkeypress="if(13==event.which){Jmol._applets[\'ID\']._search();return false}" size="32" value="" />',d='<button id="ID_submit" onclick="Jmol._applets[\'ID\']._search()">Search</button></nobr>';1==a._grabberOptions.length?(c="<nobr>"+c+'<span style="display:none">',d="</span>"+d):c+="<br /><nobr>";for(var c=c+'<select id="ID_select">',e=0;e<a._grabberOptions.length;e++)var f=a._grabberOptions[e],c=c+('<option value="'+f[0]+'" '+(0==e?"selected":"")+">"+f[1]+"</option>");return c=(c+"</select>"+d).replace(/ID/g,b._id),"<br />"+c},a._getScriptForDatabase=function(b){return"$"==b?a.db._nciLoadScript:":"==b?a.db._pubChemLoadScript:a.db._fileLoadScript},a._setInfo=function(a,b,c){var d=[],e="";if(0==c.indexOf("ERROR"))e=c;else switch(b){case"=":for(b=c.split("<dimStructure.structureId>"),d=["<table>"],c=1;c<b.length;c++)d.push('<tr><td valign=top><a href="javascript:Jmol.search('+a._id+",'="+b[c].substring(0,4)+"')\">"+b[c].substring(0,4)+"</a></td>"),d.push("<td>"+b[c].split("Title>")[1].split("</")[0]+"</td></tr>");d.push("</table>"),e=b.length-1+" matches";break;case"$":case":":break;default:return}a._infoHeader=e,a._info=d.join(""),a._showInfo(!0)},a._loadSuccess=function(b,c){c&&(a._ajaxDone(),c(b))},a._loadError=function(b){a._ajaxDone(),a.say("Error connecting to server: "+a._ajaxCall),null!=b&&b()},a._isDatabaseCall=function(b){return 0<=a.db._databasePrefixes.indexOf(b.substring(0,1))},a._getDirectDatabaseCall=function(b,c){if(c&&!a.featureDetection.supportsXhr2())return b;var d=2,e=b.substring(0,d),f=a.db._DirectDatabaseCalls[e]||a.db._DirectDatabaseCalls[e=b.substring(0,--d)];return f&&(":"==e?(e=b.toLowerCase(),isNaN(parseInt(b.substring(1)))?0==e.indexOf(":smiles:")?(f+="?POST?smiles="+b.substring(8),b="smiles"):0==e.indexOf(":cid:")?b="cid/"+b.substring(5):(0==e.indexOf(":name:")?b=b.substring(5):0==e.indexOf(":cas:")&&(b=b.substring(4)),b="name/"+encodeURIComponent(b.substring(d))):b="cid/"+b.substring(1)):b=encodeURIComponent(b.substring(d)),0<=f.indexOf("FILENCI")?(b=b.replace(/\%2F/g,"/"),b=f.replace(/\%FILENCI/,b)):b=f.replace(/\%FILE/,b)),b},a._getRawDataFromServer=function(b,c,d,e,f,g){return b="?call=getRawDataFromDatabase&database="+b+(0<=c.indexOf("?POST?")?"?POST?":"")+"&query="+encodeURIComponent(c)+(f?"&encoding=base64":"")+(g?"":"&script="+encodeURIComponent(a._getScriptForDatabase(b))),a._contactServer(b,d,e)},a._checkFileName=function(b,c,d){return a._isDatabaseCall(c)&&(d&&a._setQueryTerm(b,c),c=a._getDirectDatabaseCall(c,!0),a._isDatabaseCall(c)&&(c=a._getDirectDatabaseCall(c,!1),d&&(d[0]=!0))),c},a._checkCache=function(b,c,d){if(b._cacheFiles&&a._fileCache&&!c.endsWith(".js")){if(b=a._fileCache[c])return System.out.println("using "+b.length+" bytes of cached data for "+c),d(b),null;d=function(b,c){d(a._fileCache[b]=c)}}return d},a._loadFileData=function(b,c,d,e){var f=[];c=a._checkFileName(b,c,f),d=a._checkCache(b,c,d),f[0]?a._getRawDataFromServer("_",c,d,e):(b={type:"GET",dataType:"text",url:c,async:a._asynchronous,success:function(b){a._loadSuccess(b,d)},error:function(){a._loadError(e)}},a._checkAjaxPost(b),a._ajax(b))},a._getInfoFromDatabase=function(b,c,d){if("===="==c){var e=a.db._restQueryXml.replace(/QUERY/,d),e={dataType:"text",type:"POST",contentType:"application/x-www-form-urlencoded",url:a.db._restQueryUrl,data:encodeURIComponent(e)+"&req=browser",success:function(e){a._ajaxDone(),a._extractInfoFromRCSB(b,c,d,e)},error:function(){a._loadError(null)},async:a._asynchronous};return a._ajax(e)}return d="?call=getInfoFromDatabase&database="+c+"&query="+encodeURIComponent(d),a._contactServer(d,function(d){a._setInfo(b,c,d)})},a._extractInfoFromRCSB=function(b,c,d,e){var f=e.length/5;if(0!=f&&4==d.length&&1!=f){d=d.toUpperCase();var g=e.indexOf(d);g>0&&0<="123456789".indexOf(d.substring(0,1))&&(e=d+","+e.substring(0,g)+e.substring(g+5)),f>50&&(e=e.substring(0,250)),e=e.replace(/\n/g,","),e=a._restReportUrl.replace(/IDLIST/,e),a._loadFileData(b,e,function(d){a._setInfo(b,c,d)})}},a._checkAjaxPost=function(a){var b=a.url.indexOf("?POST?");b>0&&(a.data=a.url.substring(b+6),a.url=a.url.substring(0,b),a.type="POST",a.contentType="application/x-www-form-urlencoded")},a._contactServer=function(b,c,d){return b={dataType:"text",type:"GET",url:a._serverUrl+b,success:function(b){a._loadSuccess(b,c)},error:function(){a._loadError(d)},async:c?a._asynchronous:!1},a._checkAjaxPost(b),a._ajax(b)},a._setQueryTerm=function(b,c){if(c&&b._hasOptions&&"http://"!=c.substring(0,7)){if(a._isDatabaseCall(c)){var d=c.substring(0,1);c=c.substring(1),c.substring(0,1)==d&&0<="=$".indexOf(d)&&(c=c.substring(1));var e=a._getElement(b,"select");if(e&&e.options)for(var f=0;f<e.options.length;f++)e[f].value==d&&(e[f].selected=!0)}a.$val(a.$(b,"query"),c)}},a._search=function(b,c,d){1<arguments.length||(c=null),a._setQueryTerm(b,c),c||(c=a.$val(a.$(b,"query"))),0==c.indexOf("!")?b._script(c.substring(1)):(c&&(c=c.replace(/\"/g,"")),b._showInfo(!1),a._searchMol(b,c,d,!0))},a._searchMol=function(b,c,d,e){var f;a._isDatabaseCall(c)?(f=c.substring(0,1),c=c.substring(1)):f=b._hasOptions?a.$val(a.$(b,"select")):"$","="==f&&3==c.length&&(c="="+c);var g=f+c;if(c&&!(0>g.indexOf("?")&&g==b._thisJmolModel)){b._thisJmolModel=g;var h;e&&null!=b._viewSet&&null!=(h=a.View.__findView(b._viewSet,{chemID:g}))?a.View.__setView(h,b,!1):("$"==f||":"==f?b._jmolFileType="MOL":"="==f&&(b._jmolFileType="PDB"),b._searchDatabase(c,f,d))}},a._searchDatabase=function(b,c,d,e){return b._showInfo(!1),0<=c.indexOf("?")?(a._getInfoFromDatabase(b,d,c.split("?")[0]),!0):a.db._DirectDatabaseCalls[d]?(b._loadFile(d+c,e),!0):!1},a._syncBinaryOK="?",a._canSyncBinary=function(b){if(a._isAsync)return!0;if(self.VBArray)return a._syncBinaryOK=!1;if("?"!=a._syncBinaryOK)return a._syncBinaryOK;a._syncBinaryOK=!0;try{var c=new window.XMLHttpRequest;c.open("text",a._ajaxTestSite,!1),c.hasOwnProperty("responseType")?c.responseType="arraybuffer":c.overrideMimeType&&c.overrideMimeType("text/plain; charset=x-user-defined")}catch(d){return System.out.println("JSmolCore.js: synchronous binary file transfer is requested but not available"),a._alertNoBinary&&!b&&alert("JSmolCore.js: synchronous binary file transfer is requested but not available"),a._syncBinaryOK=!1}return!0},a._binaryTypes=".gz .jpg .gif .png .zip .jmol .bin .smol .spartan .mrc .map .ccp4 .dn6 .delphi .omap .pse .dcd".split(" "),a._isBinaryUrl=function(b){for(var c=a._binaryTypes.length;0<=--c;)if(0<=b.indexOf(a._binaryTypes[c]))return!0;return!1},a._getFileData=function(b,c,d){var e=a._isBinaryUrl(b),f=0<=b.indexOf("pdb.gz")&&0==b.indexOf("http://www.rcsb.org/pdb/files/"),g=e&&!a._canSyncBinary(f);g&&f&&(b=b.replace(/pdb\.gz/,"pdb"),g=e=!1),f=0<=b.indexOf("?POST?"),0==b.indexOf("file:/")&&0!=b.indexOf("file:///")&&(b="file://"+b.substring(5));var h=0>b.indexOf("://")||0==b.indexOf(document.location.protocol)&&0<=b.indexOf(document.location.host),i="https://"==a._httpProto&&0==b.indexOf("http://"),j=a._isDirectCall(b);!j&&0<=b.indexOf("?ALLOWSORIGIN?")&&(j=!0,b=b.replace(/\?ALLOWSORIGIN\?/,""));var k=!h&&a.$supportsIECrossDomainScripting(),l=null;if(i||g||!h&&!j||!c&&k)l=a._getRawDataFromServer("_",b,c,c,g,!0);else{b=b.replace(/file:\/\/\/\//,"file://");var m={dataType:e?"binary":"text",async:!!c};f?(m.type="POST",m.url=b.split("?POST?")[0],m.data=b.split("?POST?")[1]):(m.type="GET",m.url=b),c&&(m.success=function(){c(a._xhrReturn(m.xhr))},m.error=function(){c(m.xhr.statusText)}),m.xhr=a.$ajax(m),c||(l=a._xhrReturn(m.xhr))}return d?(null==l&&(l="",e=!1),e&&(e=a._canSyncBinary(!0)),e?a._strToBytes(l):JU.SB.newS(l)):l},a._xhrReturn=function(a){return!a.responseText||self.Clazz&&Clazz.instanceOf(a.response,self.ArrayBuffer)?a.response||a.statusText:a.responseText},a._isDirectCall=function(b){if(0<=b.indexOf("?ALLOWSORIGIN?"))return!0;for(var c in a.db._DirectDatabaseCalls)if(0<=c.indexOf(".")&&0<=b.indexOf(c))return!0;return!1},a._cleanFileData=function(a){return 0<=a.indexOf("\r")&&0<=a.indexOf("\n")?a.replace(/\r\n/g,"\n"):0<=a.indexOf("\r")?a.replace(/\r/g,"\n"):a},a._getFileType=function(a){var b=a.substring(0,1);return"$"==b||":"==b?"MOL":"="==b?"="==a.substring(1,2)?"LCIF":"PDB":(a=a.split(".").pop().toUpperCase(),a.substring(0,Math.min(a.length,3)))},a._getZ=function(b,c){return b&&b._z&&b._z[c]||a._z[c]},a._incrZ=function(b,c){return b&&b._z&&++b._z[c]||++a._z[c]},a._hideLocalFileReader=function(b,c){b._localReader&&a.$setVisible(b._localReader,!1),b._readingLocal=!1,a._setCursor(b,c||0)},a._loadFileAsynchronously=function(b,c,d,e){if(0!=d.indexOf("?")){var f=d;d=a._checkFileName(c,d);var g=function(c){a._setData(b,d,f,c,e)},g=a._checkCache(c,d,g);return 0<=d.indexOf("|")&&(d=d.split("|")[0]),null==g?null:a._getFileData(d,g)}return a.featureDetection.hasFileReader?(c._localReader||(g='<div id="ID" style="z-index:'+a._getZ(c,"fileOpener")+';position:absolute;background:#E0E0E0;left:10px;top:10px"><div style="margin:5px 5px 5px 5px;"><input type="file" id="ID_files" /><button id="ID_loadfile">load</button><button id="ID_cancel">cancel</button></div><div>',a.$after("#"+c._id+"_appletdiv",g.replace(/ID/g,c._id+"_localReader")),c._localReader=a.$(c,"localReader")),a.$appEvent(c,"localReader_loadfile","click"),a.$appEvent(c,"localReader_loadfile","click",function(){var d=a.$(c,"localReader_files")[0].files[0],f=new FileReader;f.onloadend=function(f){f.target.readyState==FileReader.DONE&&(a._hideLocalFileReader(c,3),a._setData(b,d.name,d.name,f.target.result,e))};try{f.readAsArrayBuffer(d)}catch(g){alert("You must select a file first.")}}),a.$appEvent(c,"localReader_cancel","click"),a.$appEvent(c,"localReader_cancel","click",function(){a._hideLocalFileReader(c),b.setData("#CANCELED#",null,null,e)}),a.$setVisible(c._localReader,!0),void(c._readingLocal=!0)):b.setData("Local file reading is not enabled in your browser",null,null,e)},a._setData=function(b,c,d,e,f){e=a._strToBytes(e),0<=c.indexOf(".jdx")&&a.Cache.put("cache://"+c,e),b.setData(c,d,e,f)},a._doAjax=function(b,c,d){return b=b.toString(),null!=d?a._saveFile(b,d):(c&&(b+="?POST?"+c),a._getFileData(b,null,!0))},a._saveFile=function(b,c,d,e){if(a._localFileSaveFunction&&a._localFileSaveFunction(b,c))return"OK";b=b.substring(b.lastIndexOf("/")+1),d||(d=0<=b.indexOf(".pdf")?"application/pdf":0<=b.indexOf(".png")?"image/png":0<=b.indexOf(".gif")?"image/gif":0<=b.indexOf(".jpg")?"image/jpg":"");var f="string"==typeof c;return f||(c=(JU?JU:J.util).Base64.getBase64(c).toString()),e||(e=f?"":"base64"),(f=a._serverUrl)&&0<=f.indexOf("your.server")&&(f=""),a._useDataURI||!f?(e||(c=btoa(c)),e=document.createElement("a"),e.href="data:"+d+";base64,"+c,e.type=d||"text/plain",e.download=b,e.target="_blank",m("body").append(e),e.click(),e.remove()):(a._formdiv||(a.$after("body",'<div id="__jsmolformdiv__" style="display:none">						<form id="__jsmolform__" method="post" target="_blank" action="">						<input name="call" value="saveFile"/>						<input id="__jsmolmimetype__" name="mimetype" value=""/>						<input id="__jsmolencoding__" name="encoding" value=""/>						<input id="__jsmolfilename__" name="filename" value=""/>						<textarea id="__jsmoldata__" name="data"></textarea>						</form>						</div>'),a._formdiv="__jsmolform__"),a.$attr(a._formdiv,"action",f+"?"+(new Date).getMilliseconds()),a.$val("__jsmoldata__",c),a.$val("__jsmolfilename__",b),a.$val("__jsmolmimetype__",d),a.$val("__jsmolencoding__",e),a.$submit("__jsmolform__"),a.$val("__jsmoldata__",""),a.$val("__jsmolfilename__","")),"OK"},a._strToBytes=function(a){if(Clazz.instanceOf(a,self.ArrayBuffer))return Clazz.newByteArray(-1,a);for(var b=Clazz.newByteArray(a.length,0),c=a.length;0<=--c;)b[c]=255&a.charCodeAt(c);return b},a._setConsoleDiv=function(a){self.Clazz&&Clazz.setConsoleDiv(a)},a._registerApplet=function(b,c){return window[b]=a._applets[b]=a._applets[b+"__"+a._syncId+"__"]=c},a._readyCallback=function(b,c,d,e,f){b=b.split("_object")[0];var g=a._applets[b];(d=d.booleanValue?d.booleanValue():d)&&(g._appletPanel=f||e,g._applet=e),a._track(g._readyCallback(b,c,d))},a._getWrapper=function(b,c){var d;if(c){var e="";if(b._coverImage)var e=' onclick="Jmol.coverApplet(ID, false)" title="'+b._coverTitle+'"',f='<image id="ID_coverclickgo" src="'+b._makeLiveImage+'" style="width:25px;height:25px;position:absolute;bottom:10px;left:10px;z-index:'+a._getZ(b,"coverImage")+';opacity:0.5;"'+e+" />",e='<div id="ID_coverdiv" style="background-color:red;z-index:'+a._getZ(b,"coverImage")+';width:100%;height:100%;display:inline;position:absolute;top:0px;left:0px"><image id="ID_coverimage" src="'+b._coverImage+'" style="width:100%;height:100%"'+e+"/>"+f+"</div>";f=b._isJava?"":'<image id="ID_waitimage" src="'+b._j2sPath+'/img/cursor_wait.gif" style="display:none;position:absolute;bottom:10px;left:10px;z-index:'+a._getZ(b,"coverImage")+';" />',d=a._appletCssText.replace(/\'/g,'"');var g=b._getSpinner&&b._getSpinner();b._spinner=g=g&&"none"!=g?"background-image:url("+g+"); background-repeat:no-repeat; background-position:center;":"",d=g+(0<=d.indexOf('style="')?d.split('style="')[1]:'" '+d),d='...<div id="ID_appletinfotablediv" style="width:Wpx;height:Hpx;position:relative;font-size:14px;text-align:left">IMG WAIT......<div id="ID_appletdiv" style="z-index:'+a._getZ(b,"header")+";width:100%;height:100%;position:absolute;top:0px;left:0px;"+d+">";var g=b._height,h=b._width;("string"!=typeof g||0>g.indexOf("%"))&&(g+="px"),("string"!=typeof h||0>h.indexOf("%"))&&(h+="px"),d=d.replace(/IMG/,e).replace(/WAIT/,f).replace(/Hpx/g,g).replace(/Wpx/g,h)}else d='......</div>......<div id="ID_2dappletdiv" style="position:absolute;width:100%;height:100%;overflow:hidden;display:none"></div>......<div id="ID_infotablediv" style="width:100%;height:100%;position:absolute;top:0px;left:0px">.........<div id="ID_infoheaderdiv" style="height:20px;width:100%;background:yellow;display:none"><span id="ID_infoheaderspan"></span><span id="ID_infocheckboxspan" style="position:absolute;text-align:right;right:1px;"><a href="javascript:Jmol.showInfo(ID,false)">[x]</a></span></div>.........<div id="ID_infodiv" style="position:absolute;top:20px;bottom:0px;width:100%;height:100%;overflow:auto"></div>......</div>...</div>';return d.replace(/\.\.\./g,"").replace(/[\n\r]/g,"").replace(/ID/g,b._id)},a._hideLoadingSpinner=function(b){b._spinner&&a.$css(a.$(b,"appletdiv"),{"background-image":""})},a._documentWrite=function(b){if(a._document){if(a._isXHTML&&!a._XhtmlElement){var c=document.getElementsByTagName("script");a._XhtmlElement=c.item(c.length-1),a._XhtmlAppendChild=!1}a._XhtmlElement?a._domWrite(b):a._document.write(b)}return b},a._domWrite=function(b){for(var c=[0];c[0]<b.length;){var d=a._getDomElement(b,c);if(!d)break;a._XhtmlAppendChild?a._XhtmlElement.appendChild(d):a._XhtmlElement.parentNode.insertBefore(d,_jmol.XhtmlElement)}},a._getDomElement=function(a,b){var c=document.createElement("span");return c.innerHTML=a,b[0]=a.length,c},a._setObject=function(b,c,d){b._id=c,b.__Info={},d.z&&d.zIndexBase&&(a._z=a._getZOrders(d.zIndexBase));for(var e in d)b.__Info[e]=d[e];(b._z=d.z)||d.zIndexBase&&(b._z=b.__Info.z=a._getZOrders(d.zIndexBase)),b._width=d.width,b._height=d.height,b._noscript=!b._isJava&&d.noscript,b._console=d.console,b._cacheFiles=!!d.cacheFiles,b._viewSet=null==d.viewSet||b._isJava?null:"Set"+d.viewSet,null!=b._viewSet&&(a.View.__init(b),b._currentView=null),!a._fileCache&&b._cacheFiles&&(a._fileCache={}),b._console||(b._console=b._id+"_infodiv"),"none"==b._console&&(b._console=null),b._color=d.color?d.color.replace(/0x/,"#"):"#FFFFFF",b._disableInitialConsole=d.disableInitialConsole,b._noMonitor=d.disableJ2SLoadMonitor,a._j2sPath&&(d.j2sPath=a._j2sPath),b._j2sPath=d.j2sPath,b._coverImage=d.coverImage,b._makeLiveImage=d.makeLiveImage||d.j2sPath+"/img/play_make_live.jpg",b._isCovered=!!b._coverImage,b._deferApplet=d.deferApplet||b._isCovered&&b._isJava,b._deferUncover=d.deferUncover&&!b._isJava,b._coverScript=d.coverScript,b._coverTitle=d.coverTitle,b._coverTitle||(b._coverTitle=b._deferApplet?"activate 3D model":"3D model is loading..."),b._containerWidth=b._width+(b._width==parseFloat(b._width)?"px":""),b._containerHeight=b._height+(b._height==parseFloat(b._height)?"px":""),b._info="",b._infoHeader=b._jmolType+' "'+b._id+'"',b._hasOptions=d.addSelectionOptions,b._defaultModel=d.defaultModel,b._readyScript=d.script?d.script:"",b._readyFunction=d.readyFunction,b._coverImage&&!b._deferApplet&&(b._readyScript+=";javascript "+c+"._displayCoverImage(false)"),b._src=d.src},a._addDefaultInfo=function(b,c){for(var d in c)"undefined"==typeof b[d]&&(b[d]=c[d]);a._use&&(b.use=a._use),0<=b.use.indexOf("SIGNED")&&(0>b.jarFile.indexOf("Signed")&&(b.jarFile=b.jarFile.replace(/Applet/,"AppletSigned")),b.use=b.use.replace(/SIGNED/,"JAVA"),b.isSigned=!0)},a._syncedApplets=[],a._syncedCommands=[],a._syncedReady=[],a._syncReady=!1,a._isJmolJSVSync=!1,a._setReady=function(b){a._syncedReady[b]=1;for(var c=0,d=0;d<a._syncedApplets.length;d++){if(a._syncedApplets[d]==b._id)a._syncedApplets[d]=b,a._syncedReady[d]=1;else if(!a._syncedReady[d])continue;c++}c==a._syncedApplets.length&&a._setSyncReady()},a._setDestroy=function(b){a.featureDetection.allowDestroy&&a.$windowOn("beforeunload",function(){a._destroy(b)})},a._destroy=function(b){try{b._appletPanel&&b._appletPanel.destroy(),b._applet=null,a._unsetMouse(b._canvas),b._canvas=null;for(var c=0,d=0;d<a._syncedApplets.length;d++)a._syncedApplets[d]==b&&(a._syncedApplets[d]=null),a._syncedApplets[d]&&c++;c>0||a._clearVars()}catch(e){}},a._setSyncReady=function(){a._syncReady=!0;for(var b="",c=0;c<a._syncedApplets.length;c++)a._syncedCommands[c]&&(b+="Jmol.script(Jmol._syncedApplets["+c+"], Jmol._syncedCommands["+c+"]);");setTimeout(b,50)},a._mySyncCallback=function(b,c){if(app=a._applets[b],!app._viewSet){if(!a._syncReady||!a._isJmolJSVSync)return 1;for(var d=0;d<a._syncedApplets.length;d++)0<=c.indexOf(a._syncedApplets[d]._syncKeyword)&&a._syncedApplets[d]._syncScript(c);return 0}a.View.updateFromSync(app,c)},a._getElement=function(a,b){return document.getElementById(a._id+"_"+b)||{}},a._evalJSON=function(a,b){if(a+="",!a)return[];if("{"!=a.charAt(0))return 0<=a.indexOf(" | ")&&(a=a.replace(/\ \|\ /g,"\n")),a;var c=new Function("return "+a)();return c?b&&void 0!=c[b]?c[b]:c:null},a._sortMessages=function(a){function b(a,b){return a[0]<b[0]?1:a[0]>b[0]?-1:0}if(!a||"object"!=typeof a)return[];for(var c=[],d=a.length-1;d>=0;d--)for(var e=0,f=a[d].length;f>e;e++)c[c.length]=a[d][e];return 0!=c.length?c=c.sort(b):void 0},a._setMouseOwner=function(b,c){null==b||c?a._mouseOwner=b:a._mouseOwner==b&&(a._mouseOwner=null)},a._jsGetMouseModifiers=function(a){var b=0;switch(a.button){case 0:b=16;break;case 1:b=8;break;case 2:b=4}return a.shiftKey&&(b+=1),a.altKey&&(b+=8),a.ctrlKey&&(b+=2),b},a._jsGetXY=function(b,c){if(!b.applet._ready||a._touching&&0>c.type.indexOf("touch"))return!1;var d,e=a.$offset(b.id),f=c.originalEvent;return c.pageX||(c.pageX=f.pageX),c.pageY||(c.pageY=f.pageY),a._mousePageX=c.pageX,a._mousePageY=c.pageY,f.targetTouches&&f.targetTouches[0]?(d=f.targetTouches[0].pageX-e.left,e=f.targetTouches[0].pageY-e.top):f.changedTouches?(d=f.changedTouches[0].pageX-e.left,e=f.changedTouches[0].pageY-e.top):(d=c.pageX-e.left,e=c.pageY-e.top),void 0==d?null:[Math.round(d),Math.round(e),a._jsGetMouseModifiers(c)]},a._setCursor=function(b,c){if(!b._isJava&&!b._readingLocal){var d;switch(c){case 1:d="crosshair";break;case 3:d="wait",a.$setVisible(a.$(b,"waitimage"),!0);break;case 8:d="ns-resize";break;case 12:d="grab";break;case 13:d="move";break;default:a.$setVisible(a.$(b,"waitimage"),!1),d="default"}b._canvas.style.cursor=d}},a._gestureUpdate=function(b,c){c.stopPropagation(),c.preventDefault();var d=c.originalEvent;switch(c.type){case"touchstart":a._touching=!0;break;case"touchend":a._touching=!1}if(!d.touches||2!=d.touches.length)return!1;switch(c.type){case"touchstart":b._touches=[[],[]];break;case"touchmove":var e=a.$offset(b.id),f=b._touches[0],g=b._touches[1];f.push([d.touches[0].pageX-e.left,d.touches[0].pageY-e.top]),g.push([d.touches[1].pageX-e.left,d.touches[1].pageY-e.top]),d=f.length,d>3&&(f.shift(),g.shift()),d>=2&&b.applet._processGesture(b._touches)}return!0},a._jsSetMouse=function(b){var c=function(a){return!a.target||0<=(""+a.target.className).indexOf("swingjs-ui")};a.$bind(b,"mousedown touchstart",function(d){if(c(d))return!0;a._setMouseOwner(b,!0),d.stopPropagation();var e=d.target["data-UI"];if((!e||!e.handleJSEvent(b,501,d))&&d.preventDefault(),b.isDragging=!0,"touchstart"==d.type&&a._gestureUpdate(b,d))return!!e;a._setConsoleDiv(b.applet._console);var f=a._jsGetXY(b,d);return f&&(2!=d.button&&a.Swing.hideMenus(b.applet),b.applet._processEvent(501,f)),!!e}),a.$bind(b,"mouseup touchend",function(d){if(c(d))return!0;a._setMouseOwner(null),d.stopPropagation();var e=d.target["data-UI"];return(!e||!e.handleJSEvent(b,502,d))&&d.preventDefault(),b.isDragging=!1,"touchend"==d.type&&a._gestureUpdate(b,d)?!!e:((d=a._jsGetXY(b,d))&&b.applet._processEvent(502,d),!!e)}),a.$bind(b,"mousemove touchmove",function(d){return c(d)?!0:a._mouseOwner&&a._mouseOwner!=b&&a._mouseOwner.isDragging?a._mouseOwner.mouseMove?(a._mouseOwner.mouseMove(d),!1):!0:a._drag(b,d)}),a._drag=function(b,c){if(c.stopPropagation(),c.preventDefault(),"touchmove"==c.type&&a._gestureUpdate(b,c))return!1;var d=a._jsGetXY(b,c);if(!d)return!1;b.isDragging||(d[2]=0);var e=c.target["data-UI"];return b.isdragging&&(!e||e.handleJSEvent(b,506,c)),b.applet._processEvent(b.isDragging?506:503,d),!!e},a.$bind(b,"DOMMouseScroll mousewheel",function(d){if(c(d))return!0;d.stopPropagation(),d.preventDefault(),b.isDragging=!1;var e=d.originalEvent,e=e.detail?e.detail:("mac"==a.featureDetection.os?1:-1)*e.wheelDelta;return d=a._jsGetMouseModifiers(d),b.applet._processEvent(-1,[0>e?-1:1,0,d]),!1}),a.$bind(b,"contextmenu",function(){return!1}),a.$bind(b,"mouseout",function(d){return c(d)?!0:(a._mouseOwner&&!a._mouseOwner.mouseMove&&a._setMouseOwner(null),b.applet._appletPanel&&b.applet._appletPanel.startHoverWatcher(!1),a._jsGetXY(b,d),!1)}),a.$bind(b,"mouseenter",function(d){return c(d)?!0:(b.applet._appletPanel&&b.applet._appletPanel.startHoverWatcher(!0),0===d.buttons||0===d.which?(b.isDragging=!1,(d=a._jsGetXY(b,d))?(b.applet._processEvent(504,d),b.applet._processEvent(502,d),!1):!1):void 0)}),a.$bind(b,"mousemoveoutjsmol",function(d,e,f){return c(f)?!0:b==a._mouseOwner&&b.isDragging?a._drag(b,f):void 0}),b.applet._is2D&&a.$resize(function(){b.applet&&b.applet._resize()}),a.$bind("body","mouseup touchend",function(d){return c(d)?!0:(b.applet&&(b.isDragging=!1),void a._setMouseOwner(null))})},a._jsUnsetMouse=function(b){b.applet=null,a.$bind(b,"mousedown touchstart mousemove touchmove mouseup touchend DOMMouseScroll mousewheel contextmenu mouseout mouseenter",null),a._setMouseOwner(null)},a.Swing={count:0,menuInitialized:0,menuCounter:0,htDialogs:{}};var s=a.Swing;SwingController=s,s.setDraggable=function(b){b=b.prototype,b.setContainer||(b.setContainer=function(b){this.container=b,b.obj=this,this.ignoreMouse=this.isDragging=!1;var c=this;b.bind("mousedown touchstart",function(b){return c.ignoreMouse?(c.ignoreMouse=!1,!0):(a._setMouseOwner(c,!0),c.isDragging=!0,c.pageX=b.pageX,c.pageY=b.pageY,!1)}),b.bind("mousemove touchmove",function(b){return c.isDragging&&a._mouseOwner==c?(c.mouseMove(b),!1):void 0}),b.bind("mouseup touchend",function(b){c.mouseUp(b),a._setMouseOwner(null)})},b.mouseUp=function(b){return this.isDragging&&a._mouseOwner==this?(this.pageX0+=b.pageX-this.pageX,this.pageY0+=b.pageY-this.pageY,this.isDragging=!1):void a._setMouseOwner(null)},b.setPosition=function(){if(null===a._mousePageX){var b=a.$offset(this.applet._id+"_"+(this.applet._is2D?"canvas2d":"canvas"));a._mousePageX=b.left,a._mousePageY=b.top}this.pageX0=a._mousePageX,this.pageY0=a._mousePageY,this.container.css({top:a._mousePageY+"px",left:a._mousePageX+"px"})},b.mouseMove=function(b){if(this.isDragging&&a._mouseOwner==this){this.timestamp=System.currentTimeMillis();var c=this.pageX0+(b.pageX-this.pageX);b=this.pageY0+(b.pageY-this.pageY),a._mousePageX=c,a._mousePageY=b,this.container.css({top:b+"px",left:c+"px"})}},b.dragBind=function(b){if(this.applet._ignoreMouse=!b,this.container.unbind("mousemoveoutjsmol"),this.container.unbind("touchmoveoutjsmol"),this.container.unbind("mouseupoutjsmol"),this.container.unbind("touchendoutjsmol"),a._setMouseOwner(null),b){var c=this;this.container.bind("mousemoveoutjsmol touchmoveoutjsmol",function(a,b,d){c.mouseMove(d)}),this.container.bind("mouseupoutjsmol touchendoutjsmol",function(a,b,d){c.mouseUp(d)})}})},s.JSDialog=function(){},s.setDraggable(s.JSDialog),s.getScreenDimensions=function(a){a.width=m(window).width(),a.height=m(window).height()},s.dispose=function(b){a.$remove(b.id+"_mover"),delete s.htDialogs[b.id],b.container.obj.dragBind(!1)},s.register=function(a,b){a.id=b+ ++s.count,s.htDialogs[a.id]=a},s.setDialog=function(b){a._setMouseOwner(null),a.$remove(b.id);var c,d=b.id+"_mover",e=a._$(d);e[0]?(e.html(b.html),c=e[0].jd):(a.$after("body","<div id='"+d+"' style='position:absolute;left:0px;top:0px;'>"+b.html+"</div>"),c=new s.JSDialog,e=a._$(d),b.container=e,c.applet=b.manager.vwr.html5Applet,c.setContainer(e),c.dialog=b,c.setPosition(),c.dragBind(!0),e[0].jd=c),a.$bind("#"+b.id+" .JButton","mousedown touchstart",function(){c.ignoreMouse=!0}),a.$bind("#"+b.id+" .JComboBox","mousedown touchstart",function(){c.ignoreMouse=!0}),a.$bind("#"+b.id+" .JCheckBox","mousedown touchstart",function(){c.ignoreMouse=!0}),a.$bind("#"+b.id+" .JTextField","mousedown touchstart",function(){c.ignoreMouse=!0}),a.$bind("#"+b.id+" .JTable","mousedown touchstart",function(){c.ignoreMouse=!0}),a.$bind("#"+b.id+" .JScrollPane","mousedown touchstart",function(){c.ignoreMouse=!0}),a.$bind("#"+b.id+" .JEditorPane","mousedown touchstart",function(){c.ignoreMouse=!0})},s.setSelected=function(b){a.$prop(b.id,"checked",!!b.selected)},s.setSelectedIndex=function(b){a.$prop(b.id,"selectedIndex",b.selectedIndex)},s.setText=function(b){a.$prop(b.id,"value",b.text)},s.setVisible=function(b){a.$setVisible(b.id,b.visible)},s.setEnabled=function(b){a.$setEnabled(b.id,b.enabled)},s.click=function(b,c){var d=s.htDialogs[b.id];if(d){var e=d.toString();if(0<=e.indexOf("JCheck"))d.selected=b.checked;else if(0<=e.indexOf("JCombo"))d.selectedIndex=b.selectedIndex;else if(null!=d.text&&(d.text=b.value,c&&13!=(c.charCode||c.keyCode)))return}e=s.htDialogs[a.$getAncestorDiv(b.id,"JDialog").id],e.manager.actionPerformed(d?d.name:e.registryKey+"/"+b.id)},s.setFront=function(b){var c=b.manager.vwr.html5Applet;b.zIndex!=a._getZ(c,"dialog")&&(b.zIndex=a._incrZ(c,"dialog")),b.container&&((b.container[0]||b.container).style.zIndex=b.zIndex)},s.hideMenus=function(a){if(a=a._menus)for(var b in a)a[b].visible&&s.hideMenu(a[b])},s.windowClosing=function(b){b=s.htDialogs[a.$getAncestorDiv(b.id,"JDialog").id],b.registryKey?b.manager.processWindowClosing(b.registryKey):b.dispose()},a._track=function(b){if(a._tracker){try{var c='<iframe style="display:none" width="0" height="0" frameborder="0" tabindex="-1" src="'+(a._tracker+"&applet="+b._jmolType+"&version="+a._version+"&appver="+a.___JmolVersion+"&url="+encodeURIComponent(document.location.href))+'"></iframe>';a.$after("body",c)}catch(d){}delete a._tracker}return b};var w;a.getProfile=function(a){return self.Clazz&&self.JSON?(w||Clazz._startProfiling(w=0==arguments.length||a),Clazz.getProfile()):void 0},a._getInChIKey=function(a,b){0<=b.indexOf("MOL=")&&b.split("MOL=")[1].split('"')},a._getAttr=function(a,b){var c=a.indexOf(b+"=");return c>=0&&0<=(c=a.indexOf('"',c))?a.substring(c+1,a.indexOf('"',c+1)):null},a.User={viewUpdatedCallback:null},a.View={count:0,applets:{},sets:{}},function(b){b.updateView=function(c,d){null!=c._viewSet&&(d.chemID||(c._searchQuery=null),d.data||(d.data="N/A"),d.type=c._viewType,null==(c._currentView=b.__findView(c._viewSet,d))&&(c._currentView=b.__createViewSet(c._viewSet,d.chemID,d.viewID||d.chemID)),c._currentView[d.type].data=d.data,c._currentView[d.type].smiles=c._getSmiles(),a.User.viewUpdatedCallback&&a.User.viewUpdatedCallback(c,"updateView"),b.__setView(c._currentView,c,!1))},b.updateFromSync=function(c,d){c._updateMsg=d;var e=a._getAttr(d,"sourceID")||a._getAttr(d,"file");if(e){var h=b.__findView(c._viewSet,{viewID:e});if(null==h)return a.updateView(c,d);h!=c._currentView&&b.__setView(h,c,!0);var l=(e=a._getAttr(d,"atoms"))&&0<=d.indexOf("selectionhalos ON")?eval("["+e+"]"):[];setTimeout(function(){c._currentView==h&&b.updateAtomPick(c,l)},10),a.User.viewUpdatedCallback&&a.User.viewUpdatedCallback(c,"updateFromSync")}},b.updateAtomPick=function(b,c){var d=b._currentView;if(null!=d){for(var e in d)"info"!=e&&d[e].applet!=b&&d[e].applet._updateAtomPick(c);a.User.viewUpdatedCallback&&a.User.viewUpdatedCallback(b,"updateAtomPick")}},b.dumpViews=function(a){var c=b.sets[a];if(c){var d="View set "+a+":\n";a=b.applets[a];for(var e in a)d+="\napplet "+a[e]._id+" currentView="+(a[e]._currentView?a[e]._currentView.info.viewID:null);for(e=c.length;0<=--e;){a=c[e];var f,g,d=d+("\n\n<b>view="+e+" viewID="+a.info.viewID+" chemID="+a.info.chemID+"</b>\n");for(g in a)"info"!=g&&(d+="\nview="+e+" type="+g+" applet="+((f=a[g]).applet?f.applet._id:null)+" SMILES="+f.smiles+"\n atomMap="+JSON.stringify(f.atomMap)+"\n data=\n"+f.data+"\n")}return d}},b.__init=function(a){var c=a._viewSet,d=b.applets;d[c]||(d[c]={}),d[c][a._viewType]=a},b.__findView=function(a,c){var d=b.sets[a];null==d&&(d=b.sets[a]=[]);for(var e=d.length;0<=--e;){var f=d[e];if(c.viewID){if(f.info.viewID==c.viewID)return f}else{if(null!=c.chemID&&c.chemID==f.info.chemID)return f;for(var g in f)if("info"!=g&&(null!=c.data&&null!=f[g].data?c.data==f[g].data:c.type==g))return f}}return null},b.__createViewSet=function(c,d,e){b.count++,d={info:{chemID:d,viewID:e||"model_"+b.count}};for(var f in a._applets)e=a._applets[f],e._viewSet==c&&(d[e._viewType]={applet:e,data:null});return b.sets[c].push(d),d},b.__setView=function(a,b,c){for(var d in a)if("info"!=d){var e=a[d],f=e.applet,g=c||null!=f&&"<modified>"==f._molData;if(null!=f&&(f!=b||g)){var h=null==e.data,i=null!=f._currentView;if(f._currentView=a,(!i||!(a[d].data==e.data&&!h&!g))&&(f._loadModelFromView(a),h))break}}}}(a.View),a.Cache={fileCache:{}},a.Cache.get=function(b){return a.Cache.fileCache[b]},a.Cache.put=function(b,c){a.Cache.fileCache[b]=c},a.Cache.setDragDrop=function(b){a.$appEvent(b,"appletdiv","dragover",function(a){a=a.originalEvent,a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"}),a.$appEvent(b,"appletdiv","drop",function(c){var d=c.originalEvent;d.stopPropagation(),d.preventDefault();var e=d.dataTransfer.files[0];if(null==e)try{e=""+d.dataTransfer.getData("text"),(0==e.indexOf("file:/")||0==e.indexOf("http:/"))&&b._scriptLoad(e)}catch(f){}else d=new FileReader,d.onloadend=function(d){if(d.target.readyState==FileReader.DONE){var f="cache://DROP_"+e.name;d=Clazz.newByteArray(-1,d.target.result),f.endsWith(".spt")||b._appletPanel.cacheFileByName("cache://DROP_*",!1),"JSV"==b._viewType||f.endsWith(".jdx")?a.Cache.put(f,d):b._appletPanel.cachePut(f,d),(d=a._jsGetXY(b._canvas,c))&&(!b._appletPanel.setStatusDragDropped||b._appletPanel.setStatusDragDropped(0,d[0],d[1],f))&&b._appletPanel.openFileAsyncSpecial(f,1);
}},d.readAsArrayBuffer(e)})}}(Jmol,jQuery),Jmol._debugCode=!1,function(a){a._isAsync=!1,a._asyncCallbacks={},a._coreFiles=[];var b=!1,c=[],d=[],e=0,f=[],g=[],h=function(b){arguments.length||(b=!0),delete e;for(var f;0<d.length&&"done"==(f=d[0])[4];)d.shift();if(0!=d.length)if(a._isAsync||b){f.push("done");var g="JSmol exec "+f[0]._id+" "+f[3]+" "+f[2];self.System&&System.out.println(g),self.console&&void 0,c.push(g),f[1](f[0],f[2])}else setTimeout(h,10)},i=function(c){b?h():(b=!0,LoadClazz(),c._noMonitor&&(Clazz._LoaderProgressMonitor.showStatus=function(){}),LoadClazz=null,c.__Info.uncompressed&&Clazz.loadClass(),Clazz._Loader.onGlobalLoaded=function(){Clazz._LoaderProgressMonitor.showStatus("Application loaded.",!0),a._debugCode&&a.haveCore||(a.haveCore=!0,h())},Clazz._Loader.loadPackageClasspath("java",null,!0,h))},j=function(a,b){Clazz._Loader.loadClass(b,function(){h()})};a.showExecLog=function(){return c.join("\n")},a._addExec=function(a){a[1]||(a[1]=j);var b="JSmol load "+a[0]._id+" "+a[3];self.console&&void 0,c.push(b),d.push(a)},a._addCoreFile=function(b,c,d){if(b=b.toLowerCase().split(".")[0],!(0<=f.join("").indexOf(b))){if(f.push(b),f.sort(),a._coreFiles=[c+"/core/core"+f.join("")+".z.js"],d&&(d=d.split(" ")))for(b=0;b<d.length;b++)0>g.join("").indexOf(d[b])&&g.push(c+"/core/core"+d[b]+".z.js");for(b=0;b<g.length;b++)a._coreFiles.push(g[b])}},a._Canvas2D=function(b,c,d,e){return this._uniqueId=(""+Math.random()).substring(3),this._id=b,this._is2D=!0,this._isJava=!1,this._jmolType="Jmol._Canvas2D ("+d+")",this._isLayered=c._isLayered||!1,this._isSwing=c._isSwing||!1,this._isJSV=c._isJSV||!1,this._isAstex=c._isAstex||!1,this._platform=c._platform||"",e?this:(window[b]=this,this._createCanvas(b,c),!a._document||this._deferApplet?this:(this._init(),this))},a._setAppletParams=function(b,c,d,e){for(var f in d)(!b||0<=b.indexOf(";"+f.toLowerCase()+";"))&&(null==d[f]||"language"==f&&!a.featureDetection.supportsLocalization()||(e?c.put(f,!0===d[f]?Boolean.TRUE:!1===d[f]?Boolean.FALSE:d[f]):c[f]=d[f]))},a._jsSetPrototype=function(b){return b._init=function(){this._setupJS(),this._showInfo(!0),this._disableInitialConsole&&this._showInfo(!1)},b._createCanvas=function(b,c,d){a._setObject(this,b,c),d&&(this._GLmol=d,this._GLmol.applet=this,this._GLmol.id=this._id),d=a._getWrapper(this,!0),this._deferApplet||(a._document?(a._documentWrite(d),this._newCanvas(!1),d=""):(this._deferApplet=!0,d+='<script type="text/javascript">'+b+"._cover(false)</script>")),d+=a._getWrapper(this,!1),c.addSelectionOptions&&(d+=a._getGrabberOptions(this)),a._debugAlert&&!a._document&&alert(d),this._code=a._documentWrite(d)},b._newCanvas=function(a){this._is2D?this._createCanvas2d(a):this._GLmol.create()},b._getHtml5Canvas=function(){return this._canvas},b._getWidth=function(){return this._canvas.width},b._getHeight=function(){return this._canvas.height},b._getContentLayer=function(){return a.$(this,"contentLayer")[0]},b._repaintNow=function(){a._repaint(this,!1)},b._createCanvas2d=function(){var b=a.$(this,"appletdiv");try{b[0].removeChild(this._canvas),this._canvas.frontLayer&&b[0].removeChild(this._canvas.frontLayer),this._canvas.rearLayer&&b[0].removeChild(this._canvas.rearLayer),this._canvas.contentLayer&&b[0].removeChild(this._canvas.contentLayer),a._jsUnsetMouse(this._mouseInterface)}catch(c){}var d=Math.round(b.width()),e=Math.round(b.height()),f=document.createElement("canvas");if(f.applet=this,this._canvas=f,f.style.width="100%",f.style.height="100%",f.width=d,f.height=e,f.id=this._id+"_canvas2d",b.append(f),a._$(f.id).css({"z-index":a._getZ(this,"main")}),this._isLayered){var g=document.createElement("div");f.contentLayer=g,g.id=this._id+"_contentLayer",b.append(g),a._$(g.id).css({zIndex:a._getZ(this,"image"),position:"absolute",left:"0px",top:"0px",width:(this._isSwing?d:0)+"px",height:(this._isSwing?e:0)+"px",overflow:"hidden"}),this._isSwing?(b=document.createElement("div"),b.id=this._id+"_swingdiv",a._$(this._id+"_appletinfotablediv").append(b),a._$(b.id).css({zIndex:a._getZ(this,"rear"),position:"absolute",left:"0px",top:"0px",width:d+"px",height:e+"px",overflow:"hidden"}),this._mouseInterface=f.contentLayer,f.contentLayer.applet=this):this._mouseInterface=this._getLayer("front",b,d,e,!1)}else this._mouseInterface=f;a._jsSetMouse(this._mouseInterface)},b._getLayer=function(b,c,d,e,f){var g=document.createElement("canvas");return this._canvas[b+"Layer"]=g,g.style.width="100%",g.style.height="100%",g.id=this._id+"_"+b+"Layer",g.width=d,g.height=e,c.append(g),g.applet=this,a._$(g.id).css({background:f?"rgb(0,0,0,1)":"rgb(0,0,0,0.001)","z-index":a._getZ(this,b),position:"absolute",left:"0px",top:"0px",overflow:"hidden"}),g},b._setupJS=function(){window["j2s.lib"]={base:this._j2sPath+"/",alias:".",console:this._console,monitorZIndex:a._getZ(this,"monitorZIndex")},0==d.length&&a._addExec([this,i,null,"loadClazz"]),this._addCoreFiles(),a._addExec([this,this.__startAppletJS,null,"start applet"]),this._isSigned=!0,this._ready=!1,this._applet=null,this._canScript=function(){return!0},this._savedOrientations=[],e&&clearTimeout(e),e=setTimeout(h,100)},b.__startAppletJS=function(b){0==a._version.indexOf("$Date: ")&&(a._version=(a._version.substring(7)+" -").split(" -")[0]+" (JSmol/j2s)");var c=Clazz._4Name("java.util.Hashtable").newInstance();a._setAppletParams(b._availableParams,c,b.__Info,!0),c.put("appletReadyCallback","Jmol._readyCallback"),c.put("applet",!0),c.put("name",b._id),c.put("syncId",a._syncId),a._isAsync&&c.put("async",!0),b._color&&c.put("bgcolor",b._color),b._startupScript&&c.put("script",b._startupScript),a._syncedApplets.length&&c.put("synccallback","Jmol._mySyncCallback"),c.put("signedApplet","true"),c.put("platform",b._platform),b._is2D&&c.put("display",b._id+"_canvas2d"),c.put("documentBase",document.location.href);var d=b._j2sPath+"/";if(0>d.indexOf("://")){var e=document.location.href.split("#")[0].split("?")[0].split("/");0==d.indexOf("/")?e=[e[0],d.substring(1)]:e[e.length-1]=d,d=e.join("/")}c.put("codePath",d),a._registerApplet(b._id,b);try{b._newApplet(c)}catch(f){return void System.out.println((a._isAsync?"normal async abort from ":"")+f)}b._jsSetScreenDimensions(),h()},b._restoreState||(b._restoreState=function(){}),b._jsSetScreenDimensions=function(){if(this._appletPanel){var b=a._getElement(this,this._is2D?"canvas2d":"canvas");this._appletPanel.setScreenDimension(b.width,b.height)}},b._show=function(b){a.$setVisible(a.$(this,"appletdiv"),b),b&&a._repaint(this,!0)},b._canScript=function(){return!0},b.equals=function(a){return this==a},b.clone=function(){return this},b.hashCode=function(){return parseInt(this._uniqueId)},b._processGesture=function(a){return this._appletPanel.processTwoPointGesture(a)},b._processEvent=function(a,b){this._appletPanel.processMouseEvent(a,b[0],b[1],b[2],System.currentTimeMillis())},b._resize=function(){var b="__resizeTimeout_"+this._id;a[b]&&clearTimeout(a[b]);var c=this;a[b]=setTimeout(function(){a._repaint(c,!0),a[b]=null},100)},b},a._repaint=function(b,c){if(b&&b._appletPanel){var d=a.$(b,"appletdiv"),e=Math.round(d.width()),d=Math.round(d.height());!b._is2D||b._canvas.width==e&&b._canvas.height==d||(b._newCanvas(!0),b._appletPanel.setDisplay(b._canvas)),b._appletPanel.setScreenDimension(e,d),e=function(){b._appletPanel.paint?b._appletPanel.paint(null):b._appletPanel.update(null)},c?requestAnimationFrame(e):e()}},a._loadImage=function(b,c,d,e,f,g){var h="echo_"+c+d+(e?"_"+e.length:""),i=a._getHiddenCanvas(b.vwr.html5Applet,h,0,0,!1,!0);if(null==i){if(null==g){if(g=new Image,null==e)return g.onload=function(){a._loadImage(b,c,d,null,f,g)},g.src=d,null;System.out.println("Jsmol.js Jmol._loadImage using data URI for "+h),g.src="string"==typeof e?e:"data:"+JU.Rdr.guessMimeTypeForBytes(e)+";base64,"+JU.Base64.getBase64(e)}var j=g.width,k=g.height;"webgl"==c&&(j/=2,k/=2),i=a._getHiddenCanvas(b.vwr.html5Applet,h,j,k,!0,!1),i.imageWidth=j,i.imageHeight=k,i.id=h,i.image=g,a._setCanvasImage(i,j,k)}else System.out.println("Jsmol.js Jmol._loadImage reading cached image for "+h);return null==e?f(i,d):i},a._canvasCache={},a._getHiddenCanvas=function(b,c,d,e,f,g){return c=b._id+"_"+c,b=a._canvasCache[c],g?b:(!f&&b&&b.width==d&&b.height==e||(b=document.createElement("canvas"),b.width=b.style.width=d,b.height=b.style.height=e,b.id=c,a._canvasCache[c]=b),b)},a._setCanvasImage=function(a,b,c){a.buf32=null,a.width=b,a.height=c,a.getContext("2d").drawImage(a.image,0,0,a.image.width,a.image.height,0,0,b,c)},a._apply=function(a,b){return a(b)}}(Jmol),function(a,b){a._Applet=function(b,c,d){return window[b]=this,this._jmolType="Jmol._Applet"+(c.isSigned?" (signed)":""),this._viewType="Jmol",this._isJava=!0,this._syncKeyword="Select:",this._availableParams=";progressbar;progresscolor;boxbgcolor;boxfgcolor;allowjavascript;boxmessage;									;messagecallback;pickcallback;animframecallback;appletreadycallback;atommovedcallback;									;echocallback;evalcallback;hovercallback;language;loadstructcallback;measurecallback;									;minimizationcallback;resizecallback;scriptcallback;statusform;statustext;statustextarea;									;synccallback;usecommandthread;syncid;appletid;startupscript;menufile;",d?this:(this._isSigned=c.isSigned,this._readyFunction=c.readyFunction,this._ready=!1,this._isJava=!0,this._isInfoVisible=!1,this._applet=null,this._memoryLimit=c.memoryLimit||512,this._canScript=function(){return!0},this._savedOrientations=[],this._initialize=function(b,d){var e=!1;if(a._jarFile&&(d=a._jarFile),this._jarFile){var f=this._jarFile;0<=f.indexOf("/")?(alert("This web page URL is requesting that the applet used be "+f+". This is a possible security risk, particularly if the applet is signed, because signed applets can read and write files on your local machine or network."),"yes"==prompt("Do you want to use applet "+f+"? ","yes or no")?(b=f.substring(0,f.lastIndexOf("/")),d=f.substring(f.lastIndexOf("/")+1)):e=!0):d=f,this_isSigned=c.isSigned=0<=d.indexOf("Signed")}this._jarPath=c.jarPath=b||".",this._jarFile=c.jarFile="string"==typeof d?d:(d?"JmolAppletSigned":"JmolApplet")+"0.jar",e&&alert("The web page URL was ignored. Continuing using "+this._jarFile+' in directory "'+this._jarPath+'"'),void 0==a.controls||a.controls._onloadResetForms()},this._create(b,c),this)};var c=a._Applet,d=a._Applet.prototype;c._get=function(b,d,e){e||(e=!1),d||(d={}),a._addDefaultInfo(d,{color:"#FFFFFF",width:300,height:300,addSelectionOptions:!1,serverURL:"http://your.server.here/jsmol.php",defaultModel:"",script:null,src:null,readyFunction:null,use:"HTML5",jarPath:"java",jarFile:"JmolApplet0.jar",isSigned:!1,j2sPath:"j2s",coverImage:null,makeLiveImage:null,coverTitle:"",coverCommand:"",deferApplet:!1,deferUncover:!1,disableJ2SLoadMonitor:!1,disableInitialConsole:!0,debug:!1}),a._debugAlert=d.debug,d.serverURL&&(a._serverUrl=d.serverURL);for(var f=!1,g=null,h=d.use.toUpperCase().split("#")[0].split(" "),i=0;i<h.length;i++){switch(h[i]){case"JAVA":f=!0,a.featureDetection.supportsJava()&&(g=new c(b,d,e));break;case"WEBGL":g=c._getCanvas(b,d,e,!0);break;case"HTML5":a.featureDetection.allowHTML5?g=c._getCanvas(b,d,e,!1):h.push("JAVA")}if(null!=g)break}return null==g&&(e||!f?g={_jmolType:"none"}:f&&(g=new c(b,d))),e?g:a._registerApplet(b,g)},c._getCanvas=function(b,d,e,f){return d._isLayered=!1,d._platform="J.awtjs2d.Platform",f&&a.featureDetection.supportsWebGL()?(a._Canvas3D.prototype=a.GLmol.extendApplet(a._jsSetPrototype(new c(b,d,!0))),new a._Canvas3D(b,d,"Jmol",e)):f?null:(a._Canvas2D.prototype=a._jsSetPrototype(new c(b,d,!0)),new a._Canvas2D(b,d,"Jmol",e))},c._noJavaMsg="Either you do not have Java applets enabled in your web<br />browser or your browser is blocking this applet.<br />			Check the warning message from your browser and/or enable Java applets in<br />			your web browser preferences, or install the Java Runtime Environment from <a href='http://www.java.com'>www.java.com</a>",c._setCommonMethods=function(a){a._showInfo=d._showInfo,a._search=d._search,a._getName=d._getName,a._readyCallback=d._readyCallback},c._createApplet=function(d,e,f){d._initialize(e.jarPath,e.jarFile);var g=d._jarFile;a._isFile&&(g=g.replace(/0\.jar/,".jar"));var h=0<=d._containerWidth.indexOf("px")?d._containerWidth:"100%",i=0<=d._containerHeight.indexOf("px")?d._containerHeight:"100%",h=' style="width:'+h+";height:"+i+'" ',i="name='"+d._id+"_object' id='"+d._id+"_object' \n"+h+"\n";if(f.codebase=d._jarPath,f.codePath=f.codebase+"/",0>f.codePath.indexOf("://")){var j=b.location.href.split("#")[0].split("?")[0].split("/");j[j.length-1]=f.codePath,f.codePath=j.join("/")}f.archive=g,f.mayscript="true",f.java_arguments="-Xmx"+Math.round(e.memoryLimit||d._memoryLimit)+"m",f.permissions=d._isSigned?"all-permissions":"sandbox",f.documentLocation=b.location.href,f.documentBase=b.location.href.split("#")[0].split("?")[0],f.jarPath=e.jarPath,a._syncedApplets.length&&(f.synccallback="Jmol._mySyncCallback"),d._startupScript&&(f.script=d._startupScript);var k,j="\n";for(k in f)f[k]&&(j+="  <param name='"+k+"' value='"+f[k]+"' />\n");j=a.featureDetection.useIEObject||a.featureDetection.useHtml4Object?"<object "+i+(a.featureDetection.useIEObject?" classid='clsid:8AD9C840-044E-11D1-B3E9-00805F499D93' codebase='http://java.sun.com/update/1.6.0/jinstall-6u22-windows-i586.cab'>":" type='application/x-java-applet'>")+j+"<p style='background-color:yellow;"+h.split('"')[1]+";text-align:center;vertical-align:middle;'>\n"+c._noJavaMsg+"</p></object>\n":"<applet "+i+" code='"+f.code+"' codebase='"+d._jarPath+"' archive='"+g+"' mayscript='true'>\n"+j+"<table bgcolor='yellow'><tr><td align='center' valign='middle' "+h+">\n"+c._noJavaMsg+"</td></tr></table></applet>\n",d._deferApplet&&(d._javaCode=j,j=""),j=a._getWrapper(d,!0)+j+a._getWrapper(d,!1)+(e.addSelectionOptions?a._getGrabberOptions(d):""),a._debugAlert&&alert(j),d._code=a._documentWrite(j)},d._newApplet=function(a){return this._is2D||a.put("script",(a.get("script")||"")+";set multipleBondSpacing 0.35;"),this._viewerOptions=a,new J.appletjs.Jmol(a)},d._addCoreFiles=function(){a._addCoreFile("jmol",this._j2sPath,this.__Info.preloadCore),this._is2D||a._addExec([this,null,"J.export.JSExporter","load JSExporter"]),a._debugCode&&a._addExec([this,null,"J.appletjs.Jmol","load Jmol"])},d._create=function(b,d){a._setObject(this,b,d);var e={syncId:a._syncId,progressbar:"true",progresscolor:"blue",boxbgcolor:this._color||"black",boxfgcolor:"white",boxmessage:"Downloading JmolApplet ...",script:this._color?'background "'+this._color+'"':"",code:"JmolApplet.class"};a._setAppletParams(this._availableParams,e,d);var f;d.inlineModel?(f=d.inlineModel,f=f.replace(/\r|\n|\r\n/g,0<=f.indexOf("|")?"\\/n":"|").replace(/'/g,"&#39;"),a._debugAlert&&alert("inline model:\n"+f)):f="",e.loadInline=f,e.appletReadyCallback="Jmol._readyCallback",a._syncedApplets.length&&(e.synccallback="Jmol._mySyncCallback"),e.java_arguments="-Xmx"+Math.round(d.memoryLimit||this._memoryLimit)+"m",this._initialize(d.jarPath,d.jarFile),c._createApplet(this,d,e)},d._restoreState=function(b,c){System.out.println("\n\nasynchronous restore state for "+b+" "+c);var d=this,e=d._applet&&d._applet.viewer;switch(c){case"setOptions":return function(){d.__startAppletJS(d)};case"render":return function(){setTimeout(function(){e.refresh(2)},10)};default:switch(b){case"J.shape.Balls":case"J.shape.Sticks":case"J.shape.Frank":return null}if(e&&e.isScriptExecuting&&e.isScriptExecuting()){if(a._asyncCallbacks[b])return System.out.println("...ignored"),1;var f=e.getEvalContextAndHoldQueue(e.eval),g=f.pc-1;return f.asyncID=b,a._asyncCallbacks[b]=function(a){f.pc=a,System.out.println("sc.asyncID="+f.asyncID+" sc.pc = "+f.pc),e.eval.resumeEval(f)},e.eval.pc=e.eval.pcEnd,System.out.println("setting resume for pc="+f.pc+" "+b+" to "+a._asyncCallbacks[b]+"//"),function(){System.out.println("resuming "+b+" "+a._asyncCallbacks[b]),a._asyncCallbacks[b](g)}}return System.out.println(b+"?????????????????????"+c),function(){setTimeout(function(){e.refresh(2)},10)}}},d._readyCallback=function(b,c,d){d&&(a._setDestroy(this),this._ready=!0,b=this._readyScript,this._defaultModel?a._search(this,this._defaultModel,b?";"+b:""):b?this._script(b):this._src&&this._script('load "'+this._src+'"'),this._showInfo(!0),this._showInfo(!1),a.Cache.setDragDrop(this),this._readyFunction&&this._readyFunction(this),a._setReady(this),(b=this._2dapplet)&&b._isEmbedded&&b._ready&&b.__Info.visible&&this._show2d(!0),a._hideLoadingSpinner(this))},d._showInfo=function(b){if(b&&this._2dapplet&&this._2dapplet._show(!1),a.$html(a.$(this,"infoheaderspan"),this._infoHeader),this._info&&a.$html(a.$(this,"infodiv"),this._info),!this._isInfoVisible!=!b){if(this._isInfoVisible=b,this._isJava){var c=b?2:"100%";a.$setSize(a.$(this,"appletdiv"),c,c)}a.$setVisible(a.$(this,"infotablediv"),b),a.$setVisible(a.$(this,"infoheaderdiv"),b),this._show(!b)}},d._show2d=function(a){this._2dapplet._show2d(a),this._2dapplet._isEmbedded&&(this._showInfo(!1),this._show(!a),this._2dapplet.__showContainer(!0,!0))},d._getSpinner=function(){return this.__Info.appletLoadingImage||this._j2sPath+"/img/JSmol_spinner.gif"},d._getAtomCorrelation=function(a){this._loadMolData(a,"atommap = compare({1.1} {2.1} 'MAP' 'H'); zap 2.1",!0),a=this._evaluate("atommap");for(var b=this._evaluate("{*}.count"),c=[],d=[],e=0;e<a.length;e++){var f=a[e];c[f[0]+1]=f[1]-b+1,d[f[1]-b+1]=f[0]+1}return{fromJmol:c,toJmol:d}},d._show=function(b){var c=b?"100%":2;a.$setSize(a.$(this,"object"),c,c),this._isJava||a.$setVisible(a.$(this,"appletdiv"),b)},d._clearConsole=function(){this._console==this._id+"_infodiv"&&(this.info=""),self.Clazz&&(a._setConsoleDiv(this._console),Clazz.Console.clear())},d._addScript=function(a){return this._readyScript||(this.readyScript=""),this._readyScript&&(this._readyScript+=";"),this._readyScript+=a,!0},d._script=function(b){return this._ready?(a._setConsoleDiv(this._console),a._hideLocalFileReader(this),void this._applet.script(b)):this._addScript(b)},d._syncScript=function(a){this._applet.syncScript(a)},d._scriptCheck=function(a){return this._ready&&this._applet.scriptCheck(a)},d._scriptWait=function(a,b){var c=this._scriptWaitAsArray(a),d="";if(!b)for(var e=c.length;0<=--e;)for(var f=0,g=c[e].length;g>f;f++)d+=c[e][f]+"\n";return d},d._scriptEcho=function(a){a=this._scriptWaitAsArray(a);for(var b="",c=a.length;0<=--c;)for(var d=a[c].length;0<=--d;)"scriptEcho"==a[c][d][1]&&(b+=a[c][d][3]+"\n");return b.replace(/ \| /g,"\n")},d._scriptMessage=function(a){a=this._scriptWaitAsArray(a);for(var b="",c=a.length;0<=--c;)for(var d=a[c].length;0<=--d;)"scriptStatus"==a[c][d][1]&&(b+=a[c][d][3]+"\n");return b.replace(/ \| /g,"\n")},d._scriptWaitOutput=function(a){var b="";try{a&&(b+=this._applet.scriptWaitOutput(a))}catch(c){}return b},d._scriptWaitAsArray=function(b){var c="";try{if(this._getStatus("scriptEcho,scriptMessage,scriptStatus,scriptError"),b&&(c+=this._applet.scriptWait(b),c=a._evalJSON(c,"jmolStatus"),"object"==typeof c))return c}catch(d){}return[[c]]},d._getStatus=function(b){return a._sortMessages(this._getPropertyAsArray("jmolStatus",b))},d._getPropertyAsArray=function(b,c){return a._evalJSON(this._getPropertyAsJSON(b,c),b)},d._getPropertyAsString=function(a,b){return void 0==b&&(b=""),this._applet.getPropertyAsString(a,b)+""},d._getPropertyAsJSON=function(a,b){void 0==b&&(b="");try{return this._applet.getPropertyAsJSON(a,b)+""}catch(c){return""}},d._getPropertyAsJavaObject=function(a,b){return void 0==b&&(b=""),this._applet.getProperty(a,b)},d._evaluate=function(a){return null!=a||(a=""),this._getPropertyAsArray("variableInfo",a)},d._evaluateDEPRECATED=function(a){a=""+this._getPropertyAsJavaObject("evaluate",a);var b=a.replace(/\-*\d+/,"");return""!=b||isNaN(parseInt(a))?(b=a.replace(/\-*\d*\.\d*/,""),""!=b||isNaN(parseFloat(a))?a:parseFloat(a)):parseInt(a)},d._saveOrientation=function(a){return this._savedOrientations[a]=this._getPropertyAsArray("orientationInfo","info").moveTo},d._restoreOrientation=function(a){return a=this._savedOrientations[a],a&&""!=a?this._scriptWait(a):a.replace(/1\.0/,"0")},d._restoreOrientationDelayed=function(a,b){1>arguments.length&&(b=1);var c=this._savedOrientations[a];return c&&""!=c?this._scriptWait(c):c.replace(/1\.0/,b)},d._resizeApplet=function(b){function c(b,c){var d=""+b;return 0==d.length?c?"":a._allowedJmolSize[2]:d.indexOf("%")==d.length-1?d:1>=(b=parseFloat(b))&&b>0?100*b+"%":(isNaN(b=Math.floor(b))?a._allowedJmolSize[2]:b<a._allowedJmolSize[0]?a._allowedJmolSize[0]:b>a._allowedJmolSize[1]?a._allowedJmolSize[1]:b)+(c?c:"")}var d;"object"==typeof b&&null!=b?(d=b[0]||b.width,b=b[1]||b.height):d=b,d=[c(d,"px"),c(b,"px")],b=a._getElement(this,"appletinfotablediv"),b.style.width=d[0],b.style.height=d[1],this._containerWidth=d[0],this._containerHeight=d[1],this._is2D&&a._repaint(this,!0)},d._search=function(b,c){a._search(this,b,c)},d._searchDatabase=function(b,c,d){return this._2dapplet&&this._2dapplet._isEmbedded&&!a.$(this,"appletdiv:visible")[0]?this._2dapplet._searchDatabase(b,c,d):(this._showInfo(!1),void(0<=b.indexOf("?")?a._getInfoFromDatabase(this,c,b.split("?")[0]):(d||(d=a._getScriptForDatabase(c)),b=c+b,this._currentView=null,this._searchQuery=b,this._loadFile(b,d,b))))},d._loadFile=function(b,c,d){if(this._showInfo(!1),c||(c=""),this._thisJmolModel=""+Math.random(),this._fileName=b,!this._scriptLoad(b,c)){var e=this;a._loadFileData(this,b,function(a){e.__loadModel(a,c,d)},function(){e.__loadModel(null)})}},d._scriptLoad=function(a,b){b||(b="");var c=this._isJava||!this._noscript;return c&&this._script("zap;set echo middle center;echo Retrieving data..."),this._isSigned&&null==this._viewSet?(c?this._script('load async "'+a+'";'+b):this._applet.openFile(a),this._checkDeferred(""),!0):!1},d.__loadModel=function(b,c,d){null!=b&&(null!=this._viewSet&&(c||(c=""),c+=";if ({*}.molecule.max > 1 || {*}.modelindex.max > 0){ delete molecule > 1 or modelindex > 0;x = getProperty('extractModel',{*});load inline @x};"),!c&&this._noscript?this._applet.loadInlineString(b,"",!1):this._loadMolData(b,c,!1),null!=this._viewSet&&a.View.updateView(this,{chemID:d,data:b}))},d._loadMolData=function(a,b,c){b||(b=""),c=c?"append":"model",this._applet.scriptWait('load DATA "'+c+'"'+a+'\nEND "'+c+'" ;'+b)},d._loadModelFromView=function(b){this._currentView=b;var c=b.Jmol;null!=c.data?this.__loadModel(c.data,null,b.info.chemID):null!=b.info.chemID?a._searchMol(this,b.info.chemID,null,!1):(c=b.JME)&&c.applet._show2d(!1,this)},d._updateView=function(){null!=this._viewSet&&this._applet&&(chemID=""+this._getPropertyAsJavaObject("variableInfo","script('show chemical inchiKey')"),chemID=36>chemID.length()?null:chemID.substring(36).split("\n")[0],a.View.updateView(this,{chemID:chemID,data:""+this._getPropertyAsJavaObject("evaluate","extractModel","{visible}")}))},d._atomPickedCallback=function(b,c){if(!(0>c)){var d=[c+1];a.View.updateAtomPick(this,d),this._updateAtomPick(d)}},d._updateAtomPick=function(a){this._script(0==a.length?"select none":"select on visible and (@"+a.join(",@")+")")},d._isDeferred=function(){return!this._canvas&&this._cover&&this._isCovered&&this._deferApplet},d._checkDeferred=function(a){return this._isDeferred()?(this._coverScript=a,this._cover(!1),!0):!1},d._cover=function(b){b||!this._deferApplet?this._displayCoverImage(b):(b=this._coverScript?this._coverScript:"",this._coverScript="",this._deferUncover&&(b+=";refresh;javascript "+this._id+"._displayCoverImage(false)"),this._script(b,!0),this._deferUncover&&"activate 3D model"==this._coverTitle&&(a._getElement(this,"coverimage").title="3D model is loading..."),this._isJava||this._newCanvas(!1),this._defaultModel&&a._search(this,this._defaultModel),this._showInfo(!1),this._deferUncover||this._displayCoverImage(!1),this._isJava&&a.$html(a.$(this,"appletdiv"),this._javaCode),this._init&&this._init())},d._displayCoverImage=function(b){this._coverImage&&this._isCovered!=b&&(this._isCovered=b,a._getElement(this,"coverdiv").style.display=b?"block":"none")},d._getSmiles=function(){return this._evaluate("{visible}.find('SMILES')")},d._getMol=function(){return this._evaluate("getProperty('ExtractModel',{visible})")},d._getMol2D=function(){return jmol._evaluate("script('select visible;show chemical sdf')")},a.jmolSmiles=function(a){return a._getSmiles()}}(Jmol,document),function(a){var b=a.controls={_hasResetForms:!1,_scripts:[""],_checkboxMasters:{},_checkboxItems:{},_actions:{},_buttonCount:0,_checkboxCount:0,_radioGroupCount:0,_radioCount:0,_linkCount:0,_cmdCount:0,_menuCount:0,_previousOnloadHandler:null,_control:null,_element:null,_appletCssClass:null,_appletCssText:"",_buttonCssClass:null,_buttonCssText:"",_checkboxCssClass:null,_checkboxCssText:"",_radioCssClass:null,_radioCssText:"",_linkCssClass:null,_linkCssText:"",_menuCssClass:null,_menuCssText:""};b._addScript=function(a,c){var d=b._scripts.length;return b._scripts[d]=[a,c],d},b._getIdForControl=function(a,b){return"string"==typeof a?a:b&&a._canScript&&!a._canScript(b)?null:a._id},b._radio=function(a,c,d,e,f,g,h,i){var j=b._getIdForControl(a,c);return null==j?null:(++b._radioCount,void 0!=g&&null!=g||(g="jmolRadioGroup"+(b._radioGroupCount-1)),c?(void 0!=h&&null!=h||(h="jmolRadio"+(b._radioCount-1)),void 0!=d&&null!=d||(d=c.substring(0,32)),f||(f=""),a="</span>",b._actions[h]=b._addScript(j,c),c='<span id="span_'+h+'"'+(i?' title="'+i+'"':"")+"><input name='"+g+"' id='"+h+"' type='radio' onclick='Jmol.controls._click(this);return true;' onmouseover='Jmol.controls._mouseOver(this);return true;' onmouseout='Jmol.controls._mouseOut()' "+(e?"checked='true' ":"")+b._radioCssText+" />",0<=d.toLowerCase().indexOf("<td>")&&(c+=a,a=""),c+('<label for="'+h+'">'+d+"</label>"+a+f)):"")},b._scriptExecute=function(b,c){var d=a._applets[c[0]],e=c[1];"object"==typeof e?e[0](b,e,d):"function"==typeof e?e(d):a.script(d,e)},b.__checkScript=function(a,b){var c=0<=b.value.indexOf("JSCONSOLE ")||""===a._scriptCheck(b.value);return b.style.color=c?"black":"red",c},b.__getCmd=function(a,b){if(b._cmds&&b._cmds.length){var c=b._cmds[b._cmdpt=(b._cmdpt+b._cmds.length+a)%b._cmds.length];setTimeout(function(){b.value=c},10),b._cmdadd=1,b._cmddir=a}},b._commandKeyPress=function(c,d,e){c=13==c?13:window.event?window.event.keyCode:c?c.keyCode||c.which:0;var f=document.getElementById(d),g=a._applets[e];switch(c){case 13:return d=f.value,b._scriptExecute(f,[e,d]),f._cmds||(f._cmds=[],f._cmddir=0,f._cmdpt=-1,f._cmdadd=0),d&&0==f._cmdadd?(++f._cmdpt,f._cmds.splice(f._cmdpt,0,d),f._cmdadd=0,f._cmddir=0):f._cmdadd=0,f.value="",!1;case 27:return setTimeout(function(){f.value=""},20),!1;case 38:b.__getCmd(-1,f);break;case 40:b.__getCmd(1,f);break;default:f._cmdadd=0}return setTimeout(function(){b.__checkScript(g,f)},20),!0},b._click=function(a,c){b._element=a,1==arguments.length&&(c=b._actions[a.id]),b._scriptExecute(a,b._scripts[c])},b._menuSelected=function(a){var c=a.value;if(void 0!=c)b._scriptExecute(a,b._scripts[c]);else{if(c=a.length,"number"==typeof c)for(var d=0;c>d;++d)if(a[d].selected)return void b._click(a[d],a[d].value);alert("?Que? menu selected bug #8734")}},b._cbNotifyMaster=function(a){var c,d,e=!0,f=!0,g=!1;for(d in a.chkGroup)c=a.chkGroup[d],c.checked?f=!1:e=!1,c.indeterminate&&(g=!0);c=a.chkMaster,e?c.checked=!0:f?c.checked=!1:g=!0,c.indeterminate=g,(a=b._checkboxItems[c.id])&&(c=a.chkMaster)&&b._cbNotifyMaster(b._checkboxMasters[c.id])},b._cbNotifyGroup=function(a,c){for(var d in a.chkGroup){var e=a.chkGroup[d];e.checked!=c&&(e.checked=c,b._cbClick(e)),b._checkboxMasters[e.id]&&b._cbNotifyGroup(b._checkboxMasters[e.id],c)}},b._cbSetCheckboxGroup=function(a,c,d){var e=a;"number"==typeof e&&(e="jmolCheckbox"+e),(a=document.getElementById(e))||alert("jmolSetCheckboxGroup: master checkbox not found: "+e);var f=b._checkboxMasters[e]={};for(f.chkMaster=a,f.chkGroup={},"string"==typeof c?(c=d,e=1):e=0,a=e;a<c.length;a++)e=c[a],"number"==typeof e&&(e="jmolCheckbox"+e),(d=document.getElementById(e))||alert("jmolSetCheckboxGroup: group checkbox not found: "+e),f.chkGroup[e]=d,b._checkboxItems[e]=f},b._cbClick=function(a){b._control=a;var c=b._actions[a.id][0],d=b._actions[a.id][1];b._click(a,a.checked?c:d),b._checkboxMasters[a.id]&&b._cbNotifyGroup(b._checkboxMasters[a.id],a.checked),b._checkboxItems[a.id]&&b._cbNotifyMaster(b._checkboxItems[a.id])},b._cbOver=function(a){var c=b._actions[a.id][0],d=b._actions[a.id][1];window.status=b._scripts[a.checked?d:c]},b._mouseOver=function(a,c){1==arguments.length&&(c=b._actions[a.id]),window.status=b._scripts[c]},b._mouseOut=function(){return window.status=" ",!0},b._onloadResetForms=function(){b._hasResetForms||(b._hasResetForms=!0,b._previousOnloadHandler=window.onload,window.onload=function(){if(0<b._buttonCount+b._checkboxCount+b._menuCount+b._radioCount+b._radioGroupCount)for(var a=document.forms,c=a.length;0<=--c;)a[c].reset();b._previousOnloadHandler&&b._previousOnloadHandler()})},b._getButton=function(c,d,e,f,g){return c=b._getIdForControl(c,d),null==c?"":(void 0!=f&&null!=f||(f="jmolButton"+b._buttonCount),void 0!=e&&null!=e||(e=d.substring(0,32)),++b._buttonCount,b._actions[f]=b._addScript(c,d),d='<span id="span_'+f+'"'+(g?' title="'+g+'"':"")+"><input type='button' name='"+f+"' id='"+f+"' value='"+e+"' onclick='Jmol.controls._click(this)' onmouseover='Jmol.controls._mouseOver(this);return true' onmouseout='Jmol.controls._mouseOut()' "+b._buttonCssText+" /></span>",a._debugAlert&&alert(d),a._documentWrite(d))},b._getCheckbox=function(c,d,e,f,g,h,i){var j=b._getIdForControl(c,d);if(null!=j&&(j=b._getIdForControl(c,e)),null==j)return"";if(void 0!=h&&null!=h||(h="jmolCheckbox"+b._checkboxCount),++b._checkboxCount,void 0==d||null==d||void 0==e||null==e)alert("jmolCheckbox requires two scripts");else{if(void 0!=f&&null!=f)return b._actions[h]=[b._addScript(j,d),b._addScript(j,e)],c="</span>",g='<span id="span_'+h+'"'+(i?' title="'+i+'"':"")+"><input type='checkbox' name='"+h+"' id='"+h+"' onclick='Jmol.controls._cbClick(this)' onmouseover='Jmol.controls._cbOver(this);return true' onmouseout='Jmol.controls._mouseOut()' "+(g?"checked='true' ":"")+b._checkboxCssText+" />",0<=f.toLowerCase().indexOf("<td>")&&(g+=c,c=""),g+='<label for="'+h+'">'+f+"</label>"+c,a._debugAlert&&alert(g),a._documentWrite(g);alert("jmolCheckbox requires a label")}},b._getCommandInput=function(c,d,e,f,g,h){return c=b._getIdForControl(c,"x"),null==c?"":(void 0!=f&&null!=f||(f="jmolCmd"+b._cmdCount),void 0!=d&&null!=d||(d="Execute"),void 0!=e&&!isNaN(e)||(e=60),void 0!=h||(h="help"),++b._cmdCount,d='<span id="span_'+f+'"'+(g?' title="'+g+'"':"")+"><input name='"+f+"' id='"+f+"' size='"+e+"' onkeydown='return Jmol.controls._commandKeyPress(event,\""+f+'","'+c+"\")' value='"+h+"'/><input  type='button' name='"+f+"Btn' id='"+f+"Btn' value = '"+d+"' onclick='Jmol.controls._commandKeyPress(13,\""+f+'","'+c+"\")' /></span>",a._debugAlert&&alert(d),a._documentWrite(d))},b._getLink=function(c,d,e,f,g){return c=b._getIdForControl(c,d),null==c?"":(void 0!=f&&null!=f||(f="jmolLink"+b._linkCount),void 0!=e&&null!=e||(e=d.substring(0,32)),++b._linkCount,d=b._addScript(c,d),e='<span id="span_'+f+'"'+(g?' title="'+g+'"':"")+"><a name='"+f+"' id='"+f+"' href='javascript:Jmol.controls._click(null,"+d+");' onmouseover='Jmol.controls._mouseOver(null,"+d+");return true;' onmouseout='Jmol.controls._mouseOut()' "+b._linkCssText+">"+e+"</a></span>",a._debugAlert&&alert(e),a._documentWrite(e))},b._getMenu=function(c,d,e,f,g){var h=b._getIdForControl(c,null);if(void 0!=f&&null!=f||(f="jmolMenu"+b._menuCount),++b._menuCount,h=typeof d,null!=h&&"object"==h&&d.length){var i=d.length;for("number"!=typeof e||1==e?e=null:0>e&&(e=i),e='<span id="span_'+f+'"'+(g?' title="'+g+'"':"")+"><select name='"+f+"' id='"+f+"' onChange='Jmol.controls._menuSelected(this)'"+(e?" size='"+e+"' ":"")+b._menuCssText+">",f=0;i>f;++f){var j=d[f],h=typeof j,k=null,l=g=null;if("object"==h&&null!=j?(k=j[0],g=j[1],l=j[2]):k=g=j,h=b._getIdForControl(c,k),null==h)return"";null==g&&(g=k),"#optgroup"==k?e+="<optgroup label='"+g+"'>":"#optgroupEnd"==k?e+="</optgroup>":(h=b._addScript(h,k),
e+="<option value='"+h+(l?"' selected='true'>":"'>")+g+"</option>")}return e+="</select></span>",a._debugAlert&&alert(e),a._documentWrite(e)}},b._getRadio=function(c,d,e,f,g,h,i,j){return 0==b._radioGroupCount&&++b._radioGroupCount,h||(h="jmolRadioGroup"+(b._radioGroupCount-1)),c=b._radio(c,d,e,f,g,h,i?i:h+"_"+b._radioCount,j?j:0),null==c?"":(a._debugAlert&&alert(c),a._documentWrite(c))},b._getRadioGroup=function(c,d,e,f,g,h){var i=typeof d;if("object"==i&&null!=i&&d.length){void 0!=e&&null!=e||(e="&#xa0; ");var j=d.length;++b._radioGroupCount,f||(f="jmolRadioGroup"+(b._radioGroupCount-1));for(var k="<span id='"+(g?g:f)+"'>",l=0;j>l;++l){l==j-1&&(e="");var m=d[l],i=typeof m,n=null,k="object"==i?k+(n=b._radio(c,m[0],m[1],m[2],e,f,3<m.length?m[3]:(g?g:f)+"_"+l,4<m.length?m[4]:0,h)):k+(n=b._radio(c,m,null,null,e,f,(g?g:f)+"_"+l,h));if(null==n)return""}return k+="</span>",a._debugAlert&&alert(k),a._documentWrite(k)}alert("invalid arrayOfRadioButtons")}}(Jmol),function(a){var b=function(a){return a="&"+a+"=",decodeURI(("&"+document.location.search.substring(1)+a).split(a)[1].split("&")[0])};a._j2sPath=b("_J2S"),a._jarFile=b("_JAR"),a._use=b("_USE"),a.getVersion=function(){return a._jmolInfo.version},a.getApplet=function(b,c,d){return a._Applet._get(b,c,d)},a.getJMEApplet=function(b,c,d,e){return a._JMEApplet._get(b,c,d,e)},a.getJSVApplet=function(b,c,d){return a._JSVApplet._get(b,c,d)},a.loadFile=function(a,b,c){a._loadFile(b,c)},a.script=function(a,b){a._checkDeferred(b)||a._script(b)},a.scriptCheck=function(a,b){return a&&a._scriptCheck&&a._ready&&a._scriptCheck(b)},a.scriptWait=function(a,b){return a._scriptWait(b)},a.scriptEcho=function(a,b){return a._scriptEcho(b)},a.scriptMessage=function(a,b){return a._scriptMessage(b)},a.scriptWaitOutput=function(a,b){return a._scriptWait(b)},a.scriptWaitAsArray=function(a,b){return a._scriptWaitAsArray(b)},a.search=function(a,b,c){a._search(b,c)},a.evaluateVar=function(a,b){return a._evaluate(b)},a.evaluate=function(a,b){return a._evaluateDEPRECATED(b)},a.getAppletHtml=function(b,c){if(c){var d=a._document;a._document=null,b=a.getApplet(b,c),a._document=d}return b._code},a.getPropertyAsArray=function(a,b,c){return a._getPropertyAsArray(b,c)},a.getPropertyAsJavaObject=function(a,b,c){return a._getPropertyAsJavaObject(b,c)},a.getPropertyAsJSON=function(a,b,c){return a._getPropertyAsJSON(b,c)},a.getPropertyAsString=function(a,b,c){return a._getPropertyAsString(b,c)},a.getStatus=function(a,b){return a._getStatus(b)},a.resizeApplet=function(a,b){return a._resizeApplet(b)},a.restoreOrientation=function(a,b){return a._restoreOrientation(b)},a.restoreOrientationDelayed=function(a,b,c){return a._restoreOrientationDelayed(b,c)},a.saveOrientation=function(a,b){return a._saveOrientation(b)},a.say=function(a){alert(a)},a.clearConsole=function(a){a._clearConsole()},a.getInfo=function(a){return a._info},a.setInfo=function(a,b,c){a._info=b,2<arguments.length&&a._showInfo(c)},a.showInfo=function(a,b){a._showInfo(b)},a.show2d=function(a,b){a._show2d(b)},a.jmolBr=function(){return a._documentWrite("<br />")},a.jmolButton=function(b,c,d,e,f){return a.controls._getButton(b,c,d,e,f)},a.jmolCheckbox=function(b,c,d,e,f,g,h){return a.controls._getCheckbox(b,c,d,e,f,g,h)},a.jmolCommandInput=function(b,c,d,e,f,g){return a.controls._getCommandInput(b,c,d,e,f,g)},a.jmolHtml=function(b){return a._documentWrite(b)},a.jmolLink=function(b,c,d,e,f){return a.controls._getLink(b,c,d,e,f)},a.jmolMenu=function(b,c,d,e,f){return a.controls._getMenu(b,c,d,e,f)},a.jmolRadio=function(b,c,d,e,f,g,h,i){return a.controls._getRadio(b,c,d,e,f,g,h,i)},a.jmolRadioGroup=function(b,c,d,e,f,g){return a.controls._getRadioGroup(b,c,d,e,f,g)},a.setCheckboxGroup=function(b,c){a.controls._cbSetCheckboxGroup(b,c,arguments)},a.setDocument=function(b){a._document=b},a.setXHTML=function(b){a._isXHTML=!0,a._XhtmlElement=null,a._XhtmlAppendChild=!1,b&&(a._XhtmlElement=document.getElementById(b),a._XhtmlAppendChild=!0)},a.setAppletCss=function(b,c){null!=b&&(a._appletCssClass=b),a._appletCssText=c?c+" ":b?'class="'+b+'" ':""},a.setButtonCss=function(b,c){null!=b&&(a.controls._buttonCssClass=b),a.controls._buttonCssText=c?c+" ":b?'class="'+b+'" ':""},a.setCheckboxCss=function(b,c){null!=b&&(a.controls._checkboxCssClass=b),a.controls._checkboxCssText=c?c+" ":b?'class="'+b+'" ':""},a.setRadioCss=function(b,c){null!=b&&(a.controls._radioCssClass=b),a.controls._radioCssText=c?c+" ":b?'class="'+b+'" ':""},a.setLinkCss=function(b,c){null!=b&&(a.controls._linkCssClass=b),a.controls._linkCssText=c?c+" ":b?'class="'+b+'" ':""},a.setMenuCss=function(b,c){null!=b&&(a.controls._menuCssClass=b),a.controls._menuCssText=c?c+" ":b?'class="'+b+'" ':""},a.setAppletSync=function(b,c,d){a._syncedApplets=b,a._syncedCommands=c,a._syncedReady={},a._isJmolJSVSync=d},a.setGrabberOptions=function(b){a._grabberOptions=b},a.setAppletHtml=function(b,c){b._code&&(a.$html(c,b._code),b._init&&!b._deferApplet&&b._init())},a.coverApplet=function(a,b){a._cover&&a._cover(b)},a.setFileCaching=function(b,c){b?b._cacheFiles=c:a.fileCache=c?{}:null},a.updateView=function(a,b,c){a._updateView(b,c)},a.getChemicalInfo=function(b,c,d){return c||(c="name"),"string"!=typeof applet_or_Identifier&&(b=b._getSmiles()),a._getNCIInfo(b,c,d)},a.saveImage=function(a){switch(a._viewType){case"Jmol":a._script('write PNGJ "'+a._id+'.png"');break;case"JSV":a._script("write PDF");break;case"JME":a._script("print")}}}(Jmol),LoadClazz=function(){c$=null,window["j2s.clazzloaded"]||(window["j2s.clazzloaded"]=!1),window["j2s.clazzloaded"]||(window["j2s.clazzloaded"]=!0,window["j2s.object.native"]=!0,Clazz={_isQuiet:!1,_debugging:!1},function(a,m){try{a._debugging=0<=document.location.href.indexOf("j2sdebug")}catch(l){}var j=["j2s.clazzloaded","j2s.object.native"];a.setGlobal=function(a,b){j.push(a),window[a]=b},a.getGlobals=function(){return j.sort().join("\n")},a.setConsoleDiv=function(a){window["j2s.lib"]&&(window["j2s.lib"].console=a)};var e=null;a._startProfiling=function(a){e=a&&self.JSON?{}:null},NullObject=function(){},a._supportsNativeObject=window["j2s.object.native"],a._supportsNativeObject?(a._O=function(){},a._O.__CLASS_NAME__="Object",a._O.getClass=function(){return a._O}):a._O=Object,a.Console={},a.dateToString=Date.prototype.toString,a._hashCode=0;var h=a._O.prototype;h.equals=function(a){return this==a},h.hashCode=function(){return this._$hashcode||(this._$hashcode=++a._hashCode)},h.getClass=function(){return a.getClass(this)},h.clone=function(){return a.clone(this)},a.clone=function(a){var b,c=new a.constructor;for(b in a)c[b]=a[b];return c},h.finalize=function(){},h.notify=function(){},h.notifyAll=function(){},h.wait=function(){},h.to$tring=Object.prototype.toString,h.toString=function(){return this.__CLASS_NAME__?"["+this.__CLASS_NAME__+" object]":this.to$tring.apply(this,arguments)},a._extendedObjectMethods="equals hashCode getClass clone finalize notify notifyAll wait to$tring toString".split(" "),a.extendJO=function(b,c){if(c&&(b.__CLASS_NAME__=b.prototype.__CLASS_NAME__=c),a._supportsNativeObject)for(var d=0;d<a._extendedObjectMethods.length;d++){var e=a._extendedObjectMethods[d];b.prototype[e]=a._O.prototype[e]}},a.extractClassName=function(a){return a=a.substring(1,a.length-1),0<=a.indexOf("Array")?"Array":0<=a.indexOf("object ")?a.substring(7):a},a.getClassName=function(b,c){if(null==b)return"NullObject";if(b instanceof a.CastedNull)return b.clazzName;switch(typeof b){case"number":return"n";case"boolean":return"b";case"string":return"String";case"function":if(b.__CLASS_NAME__)return c?b.__CLASS_NAME__:"Class";var d=b.toString(),e=d.indexOf("function");if(0>e)return"["==d.charAt(0)?a.extractClassName(d):d.replace(/[^a-zA-Z0-9]/g,"");var e=e+8,f=d.indexOf("(",e);if(0>f)break;return d=d.substring(e,f),0<=d.indexOf("Array")?"Array":(d=d.replace(/^\s+/,"").replace(/\s+$/,""),"anonymous"==d||""==d?"Function":d);case"object":if(b.__CLASS_NAME__)return b.__CLASS_NAME__;if(!b.constructor)break;if(!b.constructor.__CLASS_NAME__){if(b instanceof Number)return"Number";if(b instanceof Boolean)return"Boolean";if(b instanceof Array||b.BYTES_PER_ELEMENT)return"Array";if(d=b.toString(),"["==d.charAt(0))return a.extractClassName(d)}return a.getClassName(b.constructor,!0)}return"Object"},a.getClass=function(b){if(!b)return a._O;if("function"==typeof b)return b;if(b instanceof a.CastedNull)b=b.clazzName;else switch(typeof b){case"string":return String;case"object":if(!b.__CLASS_NAME__)return b.constructor||a._O;b=b.__CLASS_NAME__;break;default:return b.constructor}return a.evalType(b,!0)};var t=function(b,c){for(var d=0;d<a.innerFunctionNames.length;d++)if(c==a.innerFunctionNames[d]&&a._innerFunctions[c]===b[c])return!0;return!1},s=function(){};a.inheritArgs=new s,a.inheritClass=function(b,c,d){for(var e in c)"b$"!=e&&"prototype"!=e&&"superClazz"!=e&&"__CLASS_NAME__"!=e&&"implementz"!=e&&!t(c,e)&&(b[e]=c[e]);a.unloadedClasses[a.getClassName(b,!0)]||(b.prototype=d?d:c!==Number?new c(a.inheritArgs):new Number),b.superClazz=c,b.prototype.__CLASS_NAME__=b.__CLASS_NAME__},a.implementOf=function(a,b){if(2<=arguments.length){a.implementz||(a.implementz=[]);var c=a.implementz;if(2==arguments.length){if("function"==typeof b)c.push(b),w(a,b);else if(b instanceof Array)for(var d=0;d<b.length;d++)c.push(b[d]),w(a,b[d])}else for(d=1;d<arguments.length;d++)c.push(arguments[d]),w(a,arguments[d])}};var w=function(a,b){for(var c in b)"b$"==c||"prototype"==c||"superClazz"==c||"__CLASS_NAME__"==c||"implementz"==c||"function"==typeof b[c]&&t(b,c)||(a[c]=a.prototype[c]=b[c])};a.extendInterface=a.implementOf,a.equalsOrExtendsLevel=function(b,c){if(b===c)return 0;if(b.implementz)for(var d=b.implementz,e=0;e<d.length;e++){var f=a.equalsOrExtendsLevel(d[e],c);if(f>=0)return f+1}return-1},a.getInheritedLevel=function(b,c){if(b===c)return 0;var d="string"==typeof b;if(d&&("void"==b||"unknown"==b))return-1;var e="string"==typeof c;if(e&&("void"==c||"unknown"==c))return-1;if(b===(d?"NullObject":NullObject))switch(c){case"n":case"b":return-1;case Number:case Boolean:case NullObject:break;default:return 0}if(d&&(b=a.evalType(b)),e&&(c=a.evalType(c)),!c||!b)return-1;for(d=0,e=b;e!==c&&10>d;){if(e.implementz)for(var f=e.implementz,g=0;g<f.length;g++){var h=a.equalsOrExtendsLevel(f[g],c);if(h>=0)return d+h+1}if(e=e.superClazz,!e)return c===Object||c===a._O?d+1.5:-1;d++}return d},a.instanceOf=function(b,c){return null!=b&&c&&(b==c||b instanceof c||0<=a.getInheritedLevel(a.getClassName(b),c))},a.superCall=function(b,c,d,e){var f=null,g=-1,h=b[d];if(h)if(h.claxxOwner)h.claxxOwner!==c&&(f=h);else if(h.stacks||h.lastClaxxRef&&h.lastClaxxRef.prototype[d]&&h.lastClaxxRef.prototype[d].stacks){var i=h.stacks;for(i||(i=h.lastClaxxRef.prototype[d].stacks),g=i.length;0<=--g;){if(c===i[g]){f=g>0?i[--g].prototype[d]:i[0].prototype[d]["\\unknown"];break}if(0<a.getInheritedLevel(c,i[g])){f=i[g].prototype[d];break}}}else f=h;return f?(0==g&&"construct"==d&&(c=h.stacks)&&!c[0].superClazz&&c[0].con$truct&&c[0].con$truct.apply(b,[]),f.apply(b,e||[])):void("construct"!=d&&(a.alert(["j2slib","no class found",e.typeString]),gb(b,c,d,a.getParamsType(e).typeString)))},a.superConstructor=function(b,c,d){a.superCall(b,c,"construct",d),c.con$truct&&c.con$truct.apply(b,[])},a.CastedNull=function(b){this.clazzName=b?b instanceof String?b:b instanceof Function?a.getClassName(b,!0):""+b:"Object",this.toString=function(){return null},this.valueOf=function(){return null}},a.castNullAs=function(b){return new a.CastedNull(b)},a._initializingException=!1,a._callingStackTraces=[];var b=function(){this.toString=function(){return"J2S MethodException"}},c;try{null.hello()}catch(d){if(h=function(a,b,c){c||(c="[^\\s]+");var d=a.indexOf(b);return a=a.substring(0,d)+c+a.substring(d+b.length),RegExp("^"+a+"$")},/Opera[\/\s](\d+\.\d+)/.test(navigator.userAgent)){var h=d.message.indexOf(":"),q=d.message.indexOf(":",h+2),E=d.message.substr(h+1,q-h-20);c=function(a){return-1!=a.message.indexOf(E)}}else if(-1!=navigator.userAgent.toLowerCase().indexOf("webkit")){var T=h(d.message,"hello");c=function(a){return T.test(a.message)}}else T=h(d.message,"$$o$$"),c=function(a){return T.test(a.message)}}a.exceptionOf=function(b,d){return b.__CLASS_NAME__?a.instanceOf(b,d):(b.getMessage||(b.getMessage=function(){return""+b+(b.stack?"\n"+b.stack:"")}),b.printStackTrace||(b.printStackTrace=function(){}),d==Error?0>(""+b).indexOf("Error")?!1:(System.out.println(a.getStackTrace()),!0):d==Exception||d==Throwable||d==NullPointerException&&c(b))},a.getStackTrace=function(a){a||(a=25);var b="\n",c=arguments.callee,d=0>a;d&&(a=-a);for(var e=0;a>e&&(c=c.caller);e++){var f=c.toString?c.toString().substring(0,c.toString().indexOf("{")):"<native method>",b=b+(e+" "+(c.exName?(c.claxxOwner?c.claxxOwner.__CLASS_NAME__+".":"")+c.exName+f.replace(/function /,""):f)+"\n");if(c==c.caller){b+="<recursing>\n";break}if(d)for(var f=c.arguments,g=0;g<f.length;g++){var h=""+f[g];60<h.length&&(h=h.substring(0,60)+"..."),b+=" args["+g+"]="+h.replace(/\s+/g," ")+"\n"}}return b},a.makeConstructor=function(b,c,d){a.defineMethod(b,"construct",c,d),b.con$truct&&(b.con$truct.index=b.con$truct.stacks.length)},a.overrideConstructor=function(b,c,d){a.overrideMethod(b,"construct",c,d),b.con$truct&&(b.con$truct.index=b.con$truct.stacks.length)},a.defineMethod=function(c,d,f,g){f.exName=d,g=Ea(g);var h=c.prototype,i=h[d];if(a._Loader._checkLoad&&K(c,d,g),!i||i.claxxOwner===c&&i.funParams==g)return f.funParams=g,f.claxxOwner=c,f.exClazz=c,h[d]=f;var j=null,k=i.stacks;if(k||(k=[],j=i,i.claxxOwner&&(k[0]=j.claxxOwner)),!i.stacks||i.claxxReference!==c){for(++P,i=function(){var c;a:{var d=arguments.callee.claxxReference,f=arguments.callee.methodName;c=arguments,fx=this[f];var g=a.getParamsType(c);if(!fx)try{System.out.println(a.getStackTrace(5))}catch(h){}if(e){var i=d.__CLASS_NAME__+" "+f+" ";0>U.indexOf(i)&&(U+=i+"\n"),e[i]||(e[i]=0),e[i]++}if(fx.lastParams==g.typeString&&fx.lastClaxxRef===d){if(g.hasCastedNull)for(d=[],f=0;f<c.length;f++)d[f]=c[f]instanceof a.CastedNull?null:c[f];else d=c;c=fx.lastMethod?fx.lastMethod.apply(this,d):null}else{fx.lastParams=g.typeString,fx.lastClaxxRef=d,i=fx.stacks,i||(i=d.prototype[f].stacks);for(var j=!1,k=i.length;0<=--k;)if(j||i[k]===d){var l=i[k].prototype[f],m=g,j=c,n=fx,o=[],p=!0,q=void 0;for(q in l)if(92==q.charCodeAt(0)){var r=q.substring(1).split("\\");r.length==m.length&&o.push(r),p=!1}else if(p&&"funParams"==q&&l.funParams){q=l.funParams,r=q.substring(1).split("\\"),r.length==m.length&&(o[0]=r);break}if(q=void 0,!(q=0==o.length)){q=void 0;for(var q=[],s=o.length,r=0;s>r;r++){for(var t=[],u=!0,v=o[r].length,w=0;v>w;w++)if(t[w]=a.getInheritedLevel(m[w],o[r][w]),0>t[w]){u=!1;break}u&&(t[m.length]=r,q.push(t))}if(0==q.length)q=null;else{for(s=q[0],r=1;r<q.length;r++){for(t=!0,w=0;w<m.length;w++)if(s[w]<q[r][w]){t=!1;break}t&&(s=q[r])}q=o[s[m.length]].join("\\")}q=!(o=q)}if(q)j=new b;else{if(l=p?l:l["\\"+o],p=null,m.hasCastedNull)for(p=[],m=0;m<j.length;m++)p[m]=j[m]instanceof a.CastedNull?null:j[m];else p=j;n.lastMethod=l,j=l.apply(this,p)}if(!(j instanceof b)){c=j;break a}j=!0}"construct"!=f&&gb(this,d,f,g.typeString),c=void 0}}return c},i.methodName=d,i.claxxReference=c,i=h[d]=i,d=[],h=0;h<k.length;h++)d[h]=k[h];i.stacks=d}return k=i.stacks,0>sb(k,c)&&k.push(c),j&&(j.claxxOwner===c?(i[j.funParams]=j,j.claxxOwner=null,j.funParams=null):j.claxxOwner||(i["\\unknown"]=j)),f.exClazz=c,i[g]=f,i},duplicatedMethods={};var K=function(b,c,d){var e=b.prototype[c];e&&(e.claxxOwner||e.claxxReference)===b&&(key=b.__CLASS_NAME__+"."+c+d,(b=duplicatedMethods[key])?(c="Warning! Duplicate method found for "+key,System.out.println(c),a.alert(c),duplicatedMethods[key]=b+1):duplicatedMethods[key]=1)};a.showDuplicates=function(a){var b,c="",d=duplicatedMethods,e=0;for(b in d)1<d[b]&&(c+=d[b]+"	"+b+"\n",e++);c="Duplicates: "+e+"\n\n"+c,System.out.println(c),a||alert(c)};var sb=function(a,b){if(a&&b)for(var c=a.length;0<=--c;)if(a[c]===b)return c;return-1},Za=function(a,b){var c=sb(a,b);if(c>=0){for(var d=a.length-1;d>c;c++)a[c]=a[c+1];return a.length--,!0}},Ea=function(a){return a?a.replace(/~([NABSO])/g,function(a,b){switch(b){case"N":return"n";case"B":return"b";case"S":return"String";case"O":return"Object";case"A":return"Array"}return"Unknown"}).replace(/\s+/g,"").replace(/^|,/g,"\\").replace(/\$/g,"org.eclipse.s"):"\\void"};a.overrideMethod=function(b,c,d,e){return d.exName=c,e=Ea(e),a._Loader._checkLoad&&K(b,c,e),d.funParams=e,d.claxxOwner=b,b.prototype[c]=d};var U="";a.getProfile=function(){var a="";if(e){var b,a=[];for(b in e){var c=""+e[b];a.push("        ".substring(c.length)+c+"	"+b)}a=a.sort().reverse().join("\r\n"),e={}}return a},a.getParamsType=function(b){var c=b.length;switch(c){case 0:var d=["void"];return d.typeString="\\void",d;case 1:switch(typeof obj){case"number":return d=["n"],d.typeString="\\n",d;case"boolean":return d=["b"],d.typeString="\\b",d}}if(d=[],d.hasCastedNull=!1,b)for(var e=0;c>e;e++)d[e]=a.getClassName(b[e]),b[e]instanceof a.CastedNull&&(d.hasCastedNull=!0);return d.typeString="\\"+d.join("\\"),d};var P=0;a.allPackage={},a.allClasses={},a.lastPackageName=null,a.lastPackage=null,a.unloadedClasses=[],a.declarePackage=function(b){if(a.lastPackageName==b)return a.lastPackage;if(b&&b.length){for(var c=b.split(/\./),d=a.allPackage,e=0;e<c.length;e++)d[c[e]]||(d[c[e]]={__PKG_NAME__:d.__PKG_NAME__?d.__PKG_NAME__+"."+c[e]:c[e]},0==e&&a.setGlobal(c[e],d[c[e]])),d=d[c[e]];return a.lastPackageName=b,a.lastPackage=d}},a.evalType=function(b,c){var d=b.lastIndexOf(".");if(-1!=d){var e=b.substring(0,d),e=a.declarePackage(e),d=b.substring(d+1);return e[d]}if(c)return window[b];switch(b){case"string":return String;case"number":return Number;case"object":return a._O;case"boolean":return Boolean;case"function":return Function;case"void":case"undefined":case"unknown":return b;case"NullObject":return NullObject;default:return window[b]}},a.defineType=function(b,c,d,e){var f=a.unloadedClasses[b];if(f&&(c=f),f=b.lastIndexOf("."),-1!=f){var g=b.substring(0,f),g=a.declarePackage(g),f=b.substring(f+1);if(g[f])return g[f];g[f]=c}else{if(window[b])return window[b];a.setGlobal(b,c)}return a.decorateAsType(c,b,d,e),b=a._innerFunctions,c.defineMethod=b.defineMethod,c.defineStaticMethod=b.defineStaticMethod,c.makeConstructor=b.makeConstructor,c};var Fa=!1;-1!=navigator.userAgent.indexOf("Safari")&&(h=navigator.userAgent,q=h.indexOf("Version/"),-1!=q&&(h=h.substring(q+8),Fa=4<=parseFloat(h))),a.instantialize=function(a,b){if(!b||!(1==b.length&&b[0]&&b[0]instanceof s)){if(a instanceof Number&&(a.valueOf=function(){return this}),Fa){for(var c=[],d=0;d<b.length;d++)c[d]=b[d];b=c}(c=a.construct)?a.con$truct?a.getClass().superClazz?c.claxxOwner&&c.claxxOwner===a.getClass()||c.stacks&&c.stacks[c.stacks.length-1]==a.getClass()?c.apply(a,b):(c.claxxOwner&&!c.claxxOwner.superClazz&&c.claxxOwner.con$truct?c.claxxOwner.con$truct.apply(a,[]):c.stacks&&1==c.stacks.length&&!c.stacks[0].superClazz&&c.stacks[0].con$truct.apply(a,[]),c.apply(a,b),a.con$truct.apply(a,[])):(a.con$truct.apply(a,[]),c.apply(a,b)):c.apply(a,b):a.con$truct&&a.con$truct.apply(a,[])}},a.innerFunctionNames="isInstance equals hashCode getName getCanonicalName getClassLoader getResource getResourceAsStream defineMethod defineStaticMethod makeConstructor".split(" "),a._innerFunctions={isInstance:function(b){return a.instanceOf(b,this)},equals:function(a){return this===a},hashCode:function(){return this.getName().hashCode()},toString:function(){return"class "+this.getName()},getName:function(){return a.getClassName(this,!0)},getCanonicalName:function(){return this.__CLASS_NAME__},getClassLoader:function(){var b=this.__CLASS_NAME__,c=a._Loader.getClasspathFor(b),d=c.lastIndexOf(b.replace(/\./g,"/")),c=-1!=d?c.substring(0,d):a._Loader.getClasspathFor(b,!0),b=a._Loader.requireLoaderByBase(c);return b.getResourceAsStream=a._innerFunctions.getResourceAsStream,b.getResource=a._innerFunctions.getResource,b},getResource:function(a){return(a=this.getResourceAsStream(a))?a.url:null},getResourceAsStream:function(b){if(!b)return null;b=b.replace(/\\/g,"/");var c=null,d=b,d=this.__CLASS_NAME__;if(2==arguments.length&&0!=b.indexOf("/")&&(b="/"+b),0==b.indexOf("/"))if(2==arguments.length?(c=arguments[1])||(c=a.binaryFolders[0]):a._Loader&&(c=a._Loader.getClasspathFor(d,!0)),c){var c=c.replace(/\\/g,"/"),e=c.length,e=c.charAt(e-1);"/"!=e&&(c+="/"),d=c+b.substring(1)}else d=b.substring(1);else{if(this.base)c=this.base;else if(a._Loader)if(c=a._Loader.getClasspathFor(d),e=c.lastIndexOf(d.replace(/\./g,"/")),-1!=e)c=c.substring(0,e);else if(e=-1,c.indexOf(".z.js")==c.length-5&&-1!=(e=c.lastIndexOf("/")))for(var c=c.substring(0,e+1),e=d.split(/\./),f=1;f<e.length;f++){for(var g="/",h=0;f>h;h++)g+=e[h]+"/";if(g.length>c.length)break;if(c.indexOf(g)==c.length-g.length){c=c.substring(0,c.length-g.length+1);break}}else c=a._Loader.getClasspathFor(d,!0);else(e=a.binaryFolders)&&e.length&&(c=e[0]);c||(c="j2s/"),c=c.replace(/\\/g,"/"),e=c.length,e=c.charAt(e-1),"/"!=e&&(c+="/"),this.base?d=c+b:(e=d.lastIndexOf("."),d=-1==e||this.base?c+b:c+d.substring(0,e).replace(/\./g,"/")+"/"+b)}c=null;try{if(0>d.indexOf(":/")){var i=document.location.href.split("?")[0].split("/");i[i.length-1]=d,d=i.join("/")}c=new java.net.URL(d)}catch(j){}return i=null==c?null:m._getFileData(d.toString()),i&&"error"!=i&&0!=i.indexOf("[Exception")?(i=new java.lang.String(i).getBytes(),i=new java.io.BufferedInputStream(new java.io.ByteArrayInputStream(i)),i.url=c,i):null},defineMethod:function(b,c,d){a.defineMethod(this,b,c,d)},defineStaticMethod:function(b,c,d){a.defineMethod(this,b,c,d),this[b]=this.prototype[b]},makeConstructor:function(b,c){a.makeConstructor(this,b,c)}};var Pa=[];a.pu$h=function(a){a||(a=self.c$),a&&Pa.push(a)},a.p0p=function(){return Pa.pop()},a.decorateAsClass=function(b,c,d,e,f,g){var h=null;c&&(h=c.__PKG_NAME__,h||(h=c.__CLASS_NAME__));var i=(h?h+".":"")+d;return a._Loader._classPending[i]&&(delete a._Loader._classPending[i],a._Loader._classCountOK++,a._Loader._classCountPending--),a._Loader&&a._Loader._checkLoad&&System.out.println("decorating class "+h+"."+d),(h=a.unloadedClasses[i])&&(b=h),eb(b,c,d),g?a.inheritClass(b,e,g):e&&a.inheritClass(b,e),f&&a.implementOf(b,f),b};var eb=function(b,c,d){var e;for(c?c.__PKG_NAME__?(e=c.__PKG_NAME__+"."+d,c[d]=b,c===java.lang&&a.setGlobal(d,b)):(e=c.__CLASS_NAME__+"."+d,c[d]=b):(e=d,a.setGlobal(d,b)),a.extendJO(b,e),c=a.innerFunctionNames,d=0;d<c.length;d++)b[c[d]]=a._innerFunctions[c[d]];a._Loader&&a._Loader.updateNodeForFunctionDecoration(e)};a.declareInterface=function(b,c,d){var e=function(){};return eb(e,b,c),d&&a.implementOf(e,d),e},a.declareType=function(b,c,d,e,f){return a.decorateAsClass(function(){a.instantialize(this,arguments)},b,c,d,e,f)},a.declareAnonymous=function(b,c,d,e,f){return a.decorateAsClass(function(){a.prepareCallback(this,arguments),a.instantialize(this,arguments)},b,c,d,e,f)},a.decorateAsType=function(b,c,d,e,f,g){if(a.extendJO(b,c),b.equals=a._innerFunctions.equals,b.getName=a._innerFunctions.getName,g)for(c=0;c<a.innerFunctionNames.length;c++)g=a.innerFunctionNames[c],b[g]=a._innerFunctions[g];return f?a.inheritClass(b,d,f):d&&a.inheritClass(b,d),e&&a.implementOf(b,e),b},Number.prototype._numberToString=Number.prototype.toString,a.declarePackage("java.io"),a.declarePackage("java.lang.annotation"),a.declarePackage("java.lang.instrument"),a.declarePackage("java.lang.management"),a.declarePackage("java.lang.reflect"),a.declarePackage("java.lang.ref"),java.lang.ref.reflect=java.lang.reflect,a.declarePackage("java.util"),a.declarePackage("java.security"),a.declareInterface(java.io,"Closeable"),a.declareInterface(java.io,"DataInput"),a.declareInterface(java.io,"DataOutput"),a.declareInterface(java.io,"Externalizable"),a.declareInterface(java.io,"Flushable"),a.declareInterface(java.io,"Serializable"),a.declareInterface(java.lang,"Iterable"),a.declareInterface(java.lang,"CharSequence"),a.declareInterface(java.lang,"Cloneable"),a.declareInterface(java.lang,"Appendable"),a.declareInterface(java.lang,"Comparable"),a.declareInterface(java.lang,"Runnable"),a.declareInterface(java.util,"Comparator"),java.lang.ClassLoader={__CLASS_NAME__:"ClassLoader"};var gb=function(b,c,d,e){throw b="",e&&(b=e.substring(1).replace(/\\/g,",")),c=(d&&"construct"!=d?"Method":"Constructor")+" "+a.getClassName(c,!0)+"."+d+"("+b+") is not found!",new java.lang.NoSuchMethodException(c)};a.prepareCallback=function(b,c){var d=c[0];if(b&&d&&d!==window){var e=a.getClassName(d,!0),f={};if(b.b$)for(var g in b.b$)f[g]=b.b$[g];for(b.b$=f,f[e]=d,e=a.getClass(d);e.superClazz;)e=e.superClazz,f[a.getClassName(e,!0)]=d;if(d=d.b$)for(g in d)f[g]=d[g]}for(f=0;f<c.length-1;f++)c[f]=c[f+1];c.length--},a.innerTypeInstance=function(b,c,d){b||(b=arguments.callee.caller);var e;if(d||c.$finals)if(e=new b(c,a.inheritArgs),d)if(c.f$){var f,g={};for(f in c.f$)g[f]=c.f$[f];for(f in d)g[f]=d[f];e.f$=g}else e.f$=d;else c.f$&&(e.f$=c.f$);else switch(arguments.length){case 3:return new b(c);case 4:return c.__CLASS_NAME__==b.__CLASS_NAME__&&arguments[3]===a.inheritArgs?c:new b(c,arguments[3]);case 5:return new b(c,arguments[3],arguments[4]);case 6:return new b(c,arguments[3],arguments[4],arguments[5]);case 7:return new b(c,arguments[3],arguments[4],arguments[5],arguments[6]);case 8:return new b(c,arguments[3],arguments[4],arguments[5],arguments[6],arguments[7]);case 9:return new b(c,arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8]);case 10:return new b(c,arguments[3],arguments[4],arguments[5],arguments[6],arguments[7],arguments[8],arguments[9]);default:e=new b(c,a.inheritArgs)}for(f=arguments.length-3,g=Array(f);0<=--f;)g[f]=arguments[f+3];return a.instantialize(e,g),e},a.cloneFinals=function(){for(var a={},b=arguments.length/2;0<=--b;)a[arguments[b+b]]=arguments[b+b+1];return a},a.isClassDefined=a.isDefinedClass=function(b){if(!b)return!1;if(a.allClasses[b])return!0;for(var c=b.split(/\./),d=null,e=0;e<c.length;e++)if(!(d=d?d[c[e]]:a.allPackage[c[0]]))return!1;return d&&(a.allClasses[b]=!0)},a.defineEnumConstant=function(a,b,c,d,e){return e=e?new e:new a,e.$name=b,e.$ordinal=c,d&&d.length&&e.construct.apply(e,d),a[b]=e,a.prototype[b]=e,a["$ values"]||(a["$ values"]=[],a.values=function(){return this["$ values"]}),a["$ values"].push(e),e},a.floatToInt=function(a){return isNaN(a)?0:0>a?Math.ceil(a):Math.floor(a)},a.floatToByte=a.floatToShort=a.floatToLong=a.floatToInt,a.doubleToByte=a.doubleToShort=a.doubleToLong=a.doubleToInt=a.floatToInt,a.floatToChar=function(a){return String.fromCharCode(0>a?Math.ceil(a):Math.floor(a))},a.doubleToChar=a.floatToChar;var hb=function(a,b){if(a||(a=0),"object"==typeof a)var c=a;else for(var c=Array(a),d=0;a>d;d++)c[d]=0;return c.BYTES_PER_ELEMENT=b>>3,c._fake=!0,c},va=function(a,b){if(a||(a=0),b||(b=this.length),this._fake){var c=new this.constructor(b-a);return System.arraycopy(this,a,c,0,b-a),c}return new this.constructor(this.buffer.slice(a*this.BYTES_PER_ELEMENT,b*this.BYTES_PER_ELEMENT))};1==(a.haveInt32=!(!self.Int32Array||self.Int32Array==Array))?Int32Array.prototype.sort||(Int32Array.prototype.sort=Array.prototype.sort):(Int32Array=function(a){return hb(a,32)},Int32Array.prototype.sort=Array.prototype.sort,Int32Array.prototype.toString=function(){return"[object Int32Array]"}),Int32Array.prototype.slice||(Int32Array.prototype.slice=function(){return va.apply(this,arguments)}),Int32Array.prototype.clone=function(){var a=this.slice();return a.BYTES_PER_ELEMENT=4,a},1==(a.haveFloat64=!(!self.Float64Array||self.Float64Array==Array))?Float64Array.prototype.sort||(Float64Array.prototype.sort=Array.prototype.sort):(Float64Array=function(a){return hb(a,64)},Float64Array.prototype.sort=Array.prototype.sort,Float64Array.prototype.toString=function(){return"[object Float64Array]"}),Float64Array.prototype.slice||(Float64Array.prototype.slice=function(){return va.apply(this,arguments)}),Float64Array.prototype.clone=function(){return this.slice()},a.newArray=function(a,b,c,d){return-1!=a||2==arguments.length?ma(arguments,0):(a=b.slice(c,d),a.BYTES_PER_ELEMENT=b.BYTES_PER_ELEMENT,a)};var ma=function(a,b){var c=a[0];"string"==typeof c&&(c=c.charCodeAt(0));var d=a.length-1,e=a[d];if(d>1){for(var e=Array(d),f=0;d>f;f++)e[f]=a[f+1];for(d=Array(c),f=0;c>f;f++)d[f]=ma(e,b);return d}switch(b>0&&0>c&&(c=e),b){case 8:return d=new Int8Array(c),d.BYTES_PER_ELEMENT=1,d;case 32:return d=new Int32Array(c),d.BYTES_PER_ELEMENT=4,d;case 64:return d=new Float64Array(c),d.BYTES_PER_ELEMENT=8,d;default:if(d=0>c?e:Array(c),d.BYTES_PER_ELEMENT=0,c>0&&null!=e)for(f=c;0<=--f;)d[f]=e;return d}};for(a.newByteArray=function(){return ma(arguments,8)},a.newIntArray=function(){return ma(arguments,32)},a.newFloatArray=function(){return ma(arguments,64)},a.newDoubleArray=a.newFloatArray,a.newLongArray=a.newShortArray=a.newIntArray,a.newCharArray=a.newBooleanArray=a.newArray,1==(a.haveInt8=!!self.Int8Array)?(Int8Array.prototype.sort||(Int8Array.prototype.sort=Array.prototype.sort),Int8Array.prototype.slice||(Int8Array.prototype.slice=function(){return va.apply(this,arguments)})):a.newByteArray=a.newIntArray,Int8Array.prototype.clone=function(){var a=this.slice();return a.BYTES_PER_ELEMENT=1,a},a.isAB=function(a){return a&&"object"==typeof a&&1==a.BYTES_PER_ELEMENT},a.isAI=function(a){return a&&"object"==typeof a&&4==a.BYTES_PER_ELEMENT},a.isAF=function(a){return a&&"object"==typeof a&&8==a.BYTES_PER_ELEMENT},a.isAS=function(a){return a&&"object"==typeof a&&a.constructor==Array&&("string"==typeof a[0]||"undefined"==typeof a[0])},a.isAII=function(b){return b&&"object"==typeof b&&a.isAI(b[0])},a.isAFF=function(b){return b&&"object"==typeof b&&a.isAF(b[0])},a.isAFFF=function(b){return b&&"object"==typeof b&&a.isAFF(b[0])},a.isASS=function(b){return b&&"object"==typeof b&&a.isAS(b[0])},a.isAFloat=function(b){return b&&"object"==typeof b&&b.constructor==Array&&a.instanceOf(b[0],Float)},a.isAP=function(b){return b&&"JU.P3"==a.getClassName(b[0])},a.defineStatics=function(a){for(var b=arguments.length,c=(b-1)/2;0<=--c;){var d=arguments[--b],e=arguments[--b];a[e]=a.prototype[e]=d}},a.prepareFields=function(a,b){var c=[];if(a.con$truct)for(var d=a.con$truct.stacks,e=0;e<d.length;e++)c[e]=d[e];d=a.con$truct=function(){var a=arguments.callee.stacks;if(a)for(var b=0;b<a.length;b++)a[b].apply(this,[])},a.prototype.con$truct=d,c.push(b),a.con$truct.stacks=c,a.con$truct.index=0},a.checkPrivateMethod=function(){me=arguments.callee.caller,caller=arguments.callee.caller.caller;var b="\\"+a.getParamsType(arguments[0]).join("\\");return me.privateNote||(me.privateNote="You are seeing this note because the method "+me.exName+b+" in class "+me.exClazz.__CLASS_NAME__+" has a superclass method by the same name (possibly with the same parameters) that is private and  therefore might be called improperly from this class. If your  code does not run properly, or you want to make it run faster, change the name of this method to something else.",System.out.println(me.privateNote),alert(me.privateNote)),null},java.lang.Object=a._O,a._O.getName=a._innerFunctions.getName,java.lang.System=System={props:null,$props:{},arraycopy:function(a,b,c,d,e){if(a!==c||b>d)for(;0<=--e;)c[d++]=a[b++];else for(d+=e,b+=e;0<=--e;)a[--d]=a[--b]},currentTimeMillis:function(){return(new Date).getTime()},gc:function(){},getProperties:function(){return System.props},getProperty:function(a,b){if(System.props)return System.props.getProperty(a,b);var c=System.$props[a];if("undefined"!=typeof c)return c;if(0<a.indexOf(".")){switch(c=null,a){case"java.version":case"file.separator":case"path.separator":c="/";break;case"line.separator":c=0<=navigator.userAgent.indexOf("Windows")?"\r\n":"\n";break;case"os.name":case"os.version":c=navigator.userAgent}if(c)return System.$props[a]=c}return 1==arguments.length?null:null==b?a:b},getSecurityManager:function(){return null},setProperties:function(a){System.props=a},lineSeparator:function(){return"\n"},setProperty:function(a,b){return System.props?void System.props.setProperty(a,b):System.$props[a]=b;
}},System.identityHashCode=function(b){return null==b?0:b._$hashcode||(b._$hashcode=++a._hashCode)},System.out=new a._O,System.out.__CLASS_NAME__="java.io.PrintStream",System.out.print=function(){},System.out.printf=function(){},System.out.println=function(){},System.out.write=function(){},System.err=new a._O,System.err.__CLASS_NAME__="java.io.PrintStream",System.err.print=function(){},System.err.printf=function(){},System.err.println=function(){},System.err.write=function(){},a.popup=a.assert=a.log=a.error=window.alert,Thread=function(){},Thread.J2S_THREAD=Thread.prototype.J2S_THREAD=new Thread,Thread.currentThread=Thread.prototype.currentThread=function(){return this.J2S_THREAD},a.innerFunctionNames=a.innerFunctionNames.concat("getSuperclass isAssignableFrom getConstructor getDeclaredMethod getDeclaredMethods getMethod getMethods getModifiers newInstance".split(" ")),a._innerFunctions.getSuperclass=function(){return this.superClazz},a._innerFunctions.isAssignableFrom=function(b){return 0<=a.getInheritedLevel(b,this)},a._innerFunctions.getConstructor=function(){return new java.lang.reflect.Constructor(this,[],[],java.lang.reflect.Modifier.PUBLIC)},a._innerFunctions.getDeclaredMethods=a._innerFunctions.getMethods=function(){var a,b=[],c=this.prototype;for(a in c)"function"==typeof c[a]&&!c[a].__CLASS_NAME__&&b.push(new java.lang.reflect.Method(this,a,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC));c=this;for(a in c)"function"==typeof c[a]&&!c[a].__CLASS_NAME__&&b.push(new java.lang.reflect.Method(this,a,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC|java.lang.reflect.Modifier.STATIC));return b},a._innerFunctions.getDeclaredMethod=a._innerFunctions.getMethod=function(a){var b,c=this.prototype;for(b in c)if(a==b&&"function"==typeof c[b]&&!c[b].__CLASS_NAME__)return new java.lang.reflect.Method(this,b,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC);c=this;for(b in c)if(a==b&&"function"==typeof c[b]&&!c[b].__CLASS_NAME__)return new java.lang.reflect.Method(this,b,[],java.lang.Void,[],java.lang.reflect.Modifier.PUBLIC|java.lang.reflect.Modifier.STATIC);return null},a._innerFunctions.getModifiers=function(){return java.lang.reflect.Modifier.PUBLIC},a._innerFunctions.newInstance=function(a){switch(null==a?0:a.length){case 0:return new this;case 1:return new this(a[0]);case 2:return new this(a[0],a[1]);case 3:return new this(a[0],a[1],a[2]);case 4:return new this(a[0],a[1],a[2],a[3]);default:for(var b="new "+this.__CLASS_NAME__+"(",c=0;c<a.length;c++)b+=(0==c?"":",")+"a["+c+"]";return eval(b+")")}},h=a.innerFunctionNames,q=0;q<h.length;q++)a._O[h[q]]=a._innerFunctions[h[q]],Array[h[q]]=a._innerFunctions[h[q]];a._Loader=a.ClazzLoader=function(){};var y=function(){this.parents=[],this.musts=[],this.optionals=[],this.onLoaded=this.path=this.name=this.declaration=null,this.status=0,this.random=.13412};!function(a,b){b._checkLoad=m._checkLoad,b.updateNodeForFunctionDecoration=function(a){(a=H(a))&&a.status==y.STATUS_KNOWN&&window.setTimeout(function(a){return function(){updateNode(a)}}(a),1)},y.prototype.toString=function(){return this.name||this.path||"ClazzNode"},y.STATUS_UNKNOWN=0,y.STATUS_KNOWN=1,y.STATUS_CONTENT_LOADED=2,y.STATUS_MUSTS_LOADED=3,y.STATUS_DECLARED=4,y.STATUS_LOAD_COMPLETE=5;var c=[];b.requireLoaderByBase=function(a){for(var d=0;d<c.length;d++)if(c[d].base==a)return c[d];return d=new b,d.base=a,c.push(d),d};var d=new y,e={},h=0,j=6,l=navigator.userAgent.toLowerCase(),q=-1!=l.indexOf("opera"),s=-1!=l.indexOf("msie")&&!q,g=-1!=l.indexOf("gecko");if(q&&(j=1,q=l.indexOf("opera/"),-1!=q)){var t=9;try{t=parseFloat(l.subString(q+6))}catch(w){}t>=9.6&&(j=6)}var C;self.Clazz&&a.isClassDefined?isClassDefined=a.isClassDefined:(C={},isClassDefined=function(a){return 1==C[a]});var K=function(a){if(!a||0==a.length)return[];for(var b=null,c=0;c<a.length;c++)if(a[c]){if("$"==a[c].charAt(0))if("."==a[c].charAt(1)){if(!b)continue;var d=b.lastIndexOf(".");-1!=d&&(b=b.substring(0,d),a[c]=b+a[c].substring(1))}else a[c]="org.eclipse.s"+a[c].substring(1);b=a[c]}return a},E=[],D={},L=0;b.loadPackageClasspath=function(a,c,d,e,f,g){f||(f=0),e||(e=null),g||(g=0);var h=d&&D["@"+a];if(0!=f||!d||D["@java"]||0==a.indexOf("java")||null==window["java.registered"]||D["@java"]||(b.loadPackage("java",e?function(){b.loadPackageClasspath(a,c,d,e,1)}:null),!e))if(a instanceof Array)if(K(a),e)g<a.length?b.loadPackageClasspath(a[g],c,d,function(){b.loadPackageClasspath(a,c,d,e,1,g+1)},1):e();else for(h=0;h<a.length;h++)b.loadPackageClasspath(a[h],c,d,null);else{switch(a){case"java.*":a="java";case"java":c&&(f="@net.sf.j2s.ajax",D[f]||(D[f]=c),f="@net.sf.j2s",D[f]||(D[f]=c));break;case"swt":a="org.eclipse.swt";break;case"ajax":a="net.sf.j2s.ajax";break;case"j2s":a="net.sf.j2s";break;default:a.lastIndexOf(".*")==a.length-2&&(a=a.substring(0,a.length-2))}c&&(D["@"+a]=c),!d||h||window[a+".registered"]?e&&e():(L++,"java"==a&&(a="core"),b.loadClass(a+".package",function(){0==--L&&ca()},!0,!0,1))}},a.loadClass=function(c,d,e){return self.Class||(Class=a,Class.forName=a._4Name,JavaObject=a._O),c&&b.loadClass(c,d,!0,e,1)},b.loadClass=function(c,f,g,h,i){if(i||(i=0),null==h&&(h=!1),"boolean"==typeof f)return a.evalType(c);if(null!=window["java.registered"]&&!D["@java"]&&b.loadPackage("java"),b.keepOnLoading=!0,!g&&(L&&c.lastIndexOf(".package")!=c.length-8||0!=c.indexOf("java.")&&!isClassDefined(ea)))La.push([c,f]),System.out.println("loadclass-queuing"+c+ea+" "+isClassDefined(ea));else if((i=isClassDefined(c))||O["@"+c])i&&f&&(g=H(c),!g||g.status>=y.STATUS_LOAD_COMPLETE)&&(h?window.setTimeout(f,25):f());else{var j=b.getClasspathFor(c);if(i=e[j],!i)for(h=E.length;0<=--h;)if(E[h].path==j||E[h].name==c){i=!0;break}if(i){if(f&&(i=H(c)))if(i.onLoaded){if(f!=i.onLoaded){var k=i.onLoaded,l=f;i.onLoaded=function(){k(),l()}}}else i.onLoaded=f}else{for(i=a.unloadedClasses[c]&&H(c)||new y,i.name=c,i.path=j,i.isPackage=j.lastIndexOf("package.js")==j.length-10,Z(j,c,i),i.onLoaded=f,i.status=y.STATUS_KNOWN,c=!1,h=E.length;0<=--h;)if(E[h].status!=y.STATUS_LOAD_COMPLETE){c=!0;break}if(i.isPackage){for(h=E.length;0<=--h&&!E[h].isPackage;)E[h+1]=E[h];E[++h]=i}else c&&E.push(i);if(!c){var m=!1;f&&(m=ha,ha=!0),g&&(f=null),Ja(d,i,!0),W(i,i.path,i.requiredBy,!1,f?function(){ha=m,f()}:null)}}}},b.loadPackage=function(a,c){c||(c=null),window[a+".registered"]=!1,b.loadPackageClasspath(a,b.J2SLibBase||(b.J2SLibBase=b.getJ2SLibBase()||"j2s/"),!0,c)},b.jarClasspath=function(a,b){b instanceof Array||(b=[b]),K(b);for(var c=b.length;0<=--c;)D["#"+b[c]]=a;D["$"+a]=b},b.registerPackages=function(c,d){for(var e=b.getClasspathFor(c+".*",!0),f=0;f<d.length;f++)window.Clazz&&a.declarePackage(c+"."+d[f]),b.loadPackageClasspath(c+"."+d[f],e)},b.getClasspathFor=function(c,d,e){var f=D["#"+c];if(!f||d||e){var g,h;if(f)c=c.replace(/\./g,"/"),(0<=(h=f.lastIndexOf(c))||0<=(h=c.lastIndexOf("/"))&&0<=(h=f.lastIndexOf(c.substring(0,h))))&&(g=f.substring(0,h));else{for(h=c.length+2;0<=(h=c.lastIndexOf(".",h-2))&&!(g=D["@"+c.substring(0,h)]););d||(c=c.replace(/\./g,"/"))}null==g&&(g=window.Clazz&&a.binaryFolders&&a.binaryFolders.length?a.binaryFolders[0]:b.binaryFolders&&b.binaryFolders.length?b.binaryFolders[0]:"j2s"),f=(g.lastIndexOf("/")==g.length-1?g:g+"/")+(d?"":c.lastIndexOf("/*")==c.length-2?c.substring(0,h+1):c+(e?"."!=e.charAt(0)?"."+e:e:".js"))}return f},b.ignore=function(){var a=1==arguments.length&&arguments[0]instanceof Array?a=arguments[0]:null,b=a?a.length:arguments.length;if(!a)for(var a=Array(b),c=0;b>c;c++)a[c]=arguments[c];for(K(a),c=0;b>c;c++)O["@"+a[c]]=1},b.onScriptLoading=function(){},b.onScriptLoaded=function(){},b.onScriptInitialized=function(){},b.onScriptCompleted=function(){},b.onClassUnloaded=function(){},b.onGlobalLoaded=function(){},b.keepOnLoading=!0;var S={},O={},T=function(c,d,e,g){if(!g)try{eval(e+";//# sourceURL="+c)}catch(h){if(a._isQuiet)return;throw c="[Java2Script] The required class file \n\n"+c+(0==e.indexOf("[Exception")&&e.indexOf("data: no")?"\nwas not found.\n":"\ncould not be loaded. Script error: "+h.message+" \n\ndata:\n\n"+e)+"\n\n"+a.getStackTrace(),alert(c),a.alert(c),h}b.onScriptLoaded(c,!1),sa(d)},U=function(a){return function(){if("interactive"!=a.readyState){try{a.parentNode&&a.parentNode.removeChild(a)}catch(b){}a=null}}},X=function(a){window["j2s.script.debugging"]||window.setTimeout(U(a),1)};a._4Name=function(c,d,e){return a.isClassDefined(c)?a.evalType(c):(d=m._isAsync&&d?d._restoreState(c,e):null,1==d?null:b.setLoadingMode(d?b.MODE_SCRIPT:"xhr.sync")?(b.loadClass(c,d,!1,!0,1),null):(b.loadClass(c),a.evalType(c)))},a.currentPath="";var W=function(c,d,f,g,i){if(a.currentPath=d,g&&alert("WHY>>"),g=e[d],e[d]=!0,Za(E,d),M=!0,ra=!1,b._checkLoad&&System.out.println("	"+d+(f?"\n -- required by "+f:"")+"  ajax="+M+" async="+ra),f=d,a._debugging&&(d=d.replace(/\.z\.js/,".js")),g||System.out.println("loadScript "+d),b.onScriptLoading(d),M&&!ra){var j=m._getFileData(d);try{T(d,f,j,g)}catch(k){alert(k+" loading file "+d+" "+c.name+" "+a.getStackTrace())}i&&i()}else c={dataType:"script",async:!0,type:"GET",url:d,success:ba(d,!1,i),error:ba(d,!0,i)},h++,g?setTimeout(c.success,0):m.$ajax(c)},ba=function(c,d,e){return a.getStackTrace(),function(){g&&this.timeoutHandle&&(window.clearTimeout(this.timeoutHandle),this.timeoutHandle=null),h>0&&h--,this.onerror=this.onload=null,d&&alert("There was a problem loading "+c),b.onScriptLoaded(c,!0);var a,f=this;a=e?function(){X(f),sa(c,e)}:function(){X(f),sa(c)},Y>=0?window.setTimeout(function(){sa(c,a)},Y):sa(c,a)}},ha=!0,ga=!1,sa=function(c,f){var g=S["@"+c];if(g){var i,k=D["$"+c];if(k)for(var l=0;l<k.length;l++){var m=k[l];if(m!=g.name&&(i=H(m)))i.status<y.STATUS_CONTENT_LOADED&&(i.status=y.STATUS_CONTENT_LOADED,updateNode(i));else{i=new y,i.name=m;var n=D["#"+m];n||(alert(m+" J2S error in tryToLoadNext"),error("Java2Script implementation error! Please report this bug!")),i.path=n,Z(i.path,m,i),i.status=y.STATUS_CONTENT_LOADED,Ja(d,i,!1),updateNode(i)}}if(g instanceof Array)for(l=0;l<g.length;l++)g[l].status<y.STATUS_CONTENT_LOADED&&(g[l].status=y.STATUS_CONTENT_LOADED,updateNode(g[l]));else if(g.status<y.STATUS_CONTENT_LOADED){for(i=!1,k=document.getElementsByTagName("SCRIPT"),l=0;l<k.length;l++)if(s){if(k[l].onreadystatechange&&k[l].onreadystatechange.path==g.path&&"interactive"==k[l].readyState){i=!0;break}}else if(k[l].onload&&k[l].onload.path==g.path){i=!0;break}i||(g.status=y.STATUS_CONTENT_LOADED,updateNode(g))}if(b.keepOnLoading){if(l=!0,i=Ka(y.STATUS_KNOWN))for(R(i);j>h&&(i=Ka(y.STATUS_KNOWN));)R(i);else if(0!=E.length)i=E.shift(),!e[i.path]||0!=E.length||!ha||i.musts.length||i.optionals.length?(Ja(d,i,!0),W(i,i.path,i.requiredBy,!1)):ha&&(ha=!1);else if(i=G(y.STATUS_KNOWN))for(R(i);j>h&&(i=G(y.STATUS_KNOWN));)R(i);else l=!1;if(!(l||h>0)){for(g=[Ka,G],k=null,l=0;2>l;l++)for(;i=g[l](y.STATUS_CONTENT_LOADED);)1==l&&k===i&&(i.status=y.STATUS_LOAD_COMPLETE),updateNode(i),k=i;for(;ma=[],!!na(d,c););for(l=0;2>l;l++)for(k=null;(i=g[l](y.STATUS_DECLARED))&&k!==i;)updateNode(k=i);for(k=[],l=0;2>l;l++)for(;i=g[l](y.STATUS_DECLARED);)k.push(i),i.status=y.STATUS_LOAD_COMPLETE;if(k.length){for(l=0;l<k.length;l++)Da(k[l]);for(l=0;l<k.length;l++)(g=k[l].onLoaded)&&(k[l].onLoaded=null,g())}if(f)f();else if(b._classCountPending){for(m in b._classPending)if(i=H(m),System.out.println("class left pending "+m+" "+i),i){updateNode(i);break}}else b._checkLoad&&(System.out.println("I think I'm done: SAEM call count: "+P),a.showDuplicates(!0));b.onGlobalLoaded()}}}},ma=[],na=function(a,c){var d=ma,e=d.length;d.push(a);for(var f=e;0<=--f&&!(d[f]===a&&d[f].status>=y.STATUS_DECLARED););if(f>=0){if(b._checkLoad){var g;System.out.println("cycle found loading "+c+" for "+a)}for(;e>f;f++){var h=d[f];for(h.status=y.STATUS_LOAD_COMPLETE,Da(h),g=0;g<h.parents.length;g++)updateNode(h.parents[g]);h.parents=[];var i=h.onLoaded;b._checkLoad&&(g="cycle setting status to LOAD_COMPLETE for "+h.name+(i?" firing "+i.toString():""),System.out.println(g)),i&&(h.onLoaded=null,i())}return d.length=0,!0}for(h=[a.musts,a.optionals],g=0;2>g;g++)for(i=h[g],f=i.length;0<=--f;)if(i[f].status==y.STATUS_DECLARED&&na(i[f],c))return!0;return d.length=e,!1};b._classCountPending=0,b._classCountOK=0,b._classPending={},b.showPending=function(){var a,c=[];for(a in b._classPending){var d=H(a);d?(c.push(d),System.out.println(va("","",d,"",0))):alert("No node for "+a)}return c};var va=function(a,b,c,d,e){if(b+="--"+c.name,a+=b+"\n",e>5)return a+(d+" ...\n");if(d+="	",a+=d+"status: "+c.status+"\n",c.parents&&c.parents.length&&c.parents[0]&&c.parents[0].name){a+=d+"parents: "+c.parents.length+"\n";for(var f=0;f<c.parents.length;f++)a=va(a,b,c.parents[f],d+"	",e+1);a+="\n"}return a};updateNode=function(a){if(!a.name||a.status>=y.STATUS_LOAD_COMPLETE)Da(a);else{var c=!0;if(a.musts.length&&a.declaration)for(var d=a.musts.length,e=d;0<=--e;){var f=a.musts[e];if(f.requiredBy=a,f.status<y.STATUS_DECLARED&&isClassDefined(f.name)){var g=[];if(f.status=y.STATUS_LOAD_COMPLETE,Da(f),f.declaration&&f.declaration.clazzList){for(var h=0,i=f.declaration.clazzList,j=i.length;j>h;h++){var k=H(i[h]);k&&k.status!=y.STATUS_LOAD_COMPLETE&&k!==f&&(k.status=f.status,k.declaration=null,Da(k),k.onLoaded&&g.push(k))}f.declaration=null}for(f.onLoaded&&g.push(f),h=0;h<g.length;h++)(i=g[h].onLoaded)&&(g[h].onLoaded=null,i())}else f.status==y.STATUS_CONTENT_LOADED&&updateNode(f),f.status<y.STATUS_DECLARED&&(c=!1);a.musts.length!=d&&(e=d=a.musts.length,c=!0)}if(c){if(a.status<y.STATUS_DECLARED&&((e=a.declaration)&&(e(),e.executed=!0),b._checkLoad&&b._classPending[a.name]&&(delete b._classPending[a.name],b._classCountOK,b._classCountPending--),a.status=y.STATUS_DECLARED,C&&(C[a.name]=!0),b.onScriptInitialized(a.path),a.declaration&&a.declaration.clazzList))for(h=0,i=a.declaration.clazzList,j=i.length;j>h;h++)(k=H(i[h]))&&k.status!=y.STATUS_DECLARED&&k!==a&&(k.status=y.STATUS_DECLARED,C&&(C[k.name]=!0),b.onScriptInitialized(k.path));if(c=y.STATUS_DECLARED,0==a.optionals.length&&0==a.musts.length||a.status>y.STATUS_KNOWN&&!a.declaration||Ua(a.musts,y.STATUS_LOAD_COMPLETE)&&Ua(a.optionals,y.STATUS_LOAD_COMPLETE)){if(c=y.STATUS_LOAD_COMPLETE,!wa(a,c))return!1;if(a.declaration&&a.declaration.clazzList)for(h=0,i=a.declaration.clazzList,j=i.length;j>h;h++)if((k=H(i[h]))&&k.status!=c&&k!==a&&(k.declaration=null,!wa(k,c)))return!1}if(a.parents&&a.parents.length){for(e=0;e<a.parents.length;e++)h=a.parents[e],h.status<c&&updateNode(h,h.name);c==y.STATUS_LOAD_COMPLETE&&(a.parents=[])}}}};var Ua=function(a,b){for(var c=a.length;0<=--c;)if(a[c].status<b)return!1;return!0},wa=function(a,c){a.status=c,b.onScriptCompleted(a.path);var d=a.onLoaded;return d&&(a.onLoaded=null,d(),!b.keepOnLoading)?!1:(Da(a),!0)},ya={"r0.13412":1},Ba=function(){for(;;){var a=Math.random(),b="r"+a;if(!ya[b])return ya[b]=1,d.random=a}},H=function(a){return Ba(),Ea(a,d)},G=function(a){return Ba(),Ca(d,a)},Ka=function(a){return qa(d,a)},Ea=function(a,b){var c;return b.name==a?b:(c=ab(a,b.musts))||(c=ab(a,b.optionals))?c:null},ab=function(a,b){for(var c=d.random,e=b.length;0<=--e;){var f=b[e];if(f.name==a||f.random!=c&&(f.random=c,f=Ea(a,f)))return f}return null},Aa=function(a,b){return!(a.status!=b||b==y.STATUS_KNOWN&&e[a.path]||b!=y.STATUS_DECLARED&&isClassDefined(a.name))},qa=function(a,b){for(var c=a.musts.length;0<=--c;){var d=a.musts[c];if(Aa(d,b)||(d=qa(d,b)))return d}return Aa(a,b)?a:null},Ca=function(a,b){var c;return(c=oa(a.musts,b))||(c=oa(a.optionals,b))||Aa(c=a,b)?c:null},oa=function(a,b){if(a)for(var c=d.random,e=0;e<a.length;e++){var f=a[e];if(Aa(f,b)||f.random!=c&&(f.random=c,f=Ca(f,b)))return f}return null},Q=function(a,c,e,f){if(c instanceof Array){K(c);for(var g=0;g<c.length;g++)Q(a,c[g],e,f,c)}else b._checkLoad&&!b._classPending[c]&&(b._classPending[c]=1,0==b._classCountPending++&&(b._classCountOK=0),System.out.println("Loading class "+c)),g=S["#"+c],g||(g=(g=H(c))?g:new y,g.name=c,g.path=D["#"+c]||"unknown",Z(g.path,c,g),g.status=y.STATUS_KNOWN,Ja(d,g,!1)),ja(g,a,!0),5==arguments.length&&f&&(f.status=g.status,f.clazzList=arguments[4]),(g.declaration=f)&&(g.status=y.STATUS_CONTENT_LOADED),ja(g,e,!1)},ja=function(a,b,c){if(b&&b.length){K(b);for(var d=0;d<b.length;d++){var e=b[d];if(e&&!isClassDefined(e)&&!O["@"+e]){var f=H(e);f||(f=new y,f.name=e,f.status=y.STATUS_KNOWN),f.requiredBy=a,Ja(a,f,c)}}}};window.Clazz?a.load=Q:b.load=Q;var Z=function(a,b,c){var d="@"+a;if(a=S[d])if(a instanceof Array){for(var d=!1,e=0;e<a.length;e++)if(a[e].name==b){d=!0;break}d||a.push(c)}else S[d]=[a,c];else S[d]=c;S["#"+b]=c},R=function(a){var c=a.name;if(!isClassDefined(c)&&!O["@"+c]){var d=b.getClasspathFor(c);if(a.path=d,Z(d,c,a),!e[d])return W(a,d,a.requiredBy,!1),!0}return!1},ea=b.runtimeKeyClass="java.lang.String",La=[];b.getJ2SLibBase=function(){var a=window["j2s.lib"];return a?a.base+("."==a.alias?"":(a.alias?a.alias:a.version?a.version:"1.0.0")+"/"):null};var ra=!0,M=!1,Y=-1;b.MODE_SCRIPT=4,b.MODE_XHR=2,b.MODE_SYNC=1,b.setLoadingMode=function(a,c){var d=!0,e=!0;return"string"==typeof a?(a=a.toLowerCase(),0<=a.indexOf("script")?e=!1:a.indexOf("async"),d=!1):a&b.MODE_SCRIPT?e=!1:d=!(a&b.MODE_SYNC),M=e,Y=(ra=d)&&c>=0?c:-1,d};var ca=function(){if(!L&&isClassDefined(ea)){for(var a=La,c=0;c<a.length;c++)b.loadClass(a[c][0],a[c][1]);La=[]}};b.loadZJar=function(a,c){var d=null,e=c instanceof Array;e?c=c[c.length-1]:d=c==ea?ca:null,b.jarClasspath(a,e?c:[c]),b.loadClass(c,d,!0)};var Fa={},Pa=[],Ja=function(a,b,c){var e=!1;c?(c=a.musts,b.requiredBy||(b.requiredBy=a)):c=a.optionals,Fa[b.name]||(Pa.push(b),Fa[b.name]=b);for(var f=0;f<c.length;f++)if(c[f].name==b.name){e=!0;break}e||(c.push(b),ha&&0!=b.name.indexOf("java")&&0!=b.name.indexOf("net.sf.j2s.ajax")&&(ga&&(ha=!1),ga=!0));a:{if(a.name&&a!=d&&a!=b)for(e=0;e<b.parents.length;e++)if(b.parents[e].name==a.name)break a;b.parents.push(a)}},Da=function(a){var b=a.parents;if(b)for(var c=b.length;0<=--c;)Za(b[c].musts,a)||Za(b[c].optionals,a)};a.binaryFolders=b.binaryFolders=[b.getJ2SLibBase()]}(a,a._Loader),a._LoaderProgressMonitor={};var W=a._LoaderProgressMonitor,L=null,ga=0,O=null,wa=0;W.DEFAULT_OPACITY=m&&m._j2sLoadMonitorOpacity?m._j2sLoadMonitorOpacity:55,W.hideMonitor=function(){O.style.display="none"},W.showStatus=function(a,b){if(!O){var c=document.createElement("DIV");c.id="_Loader-status",c.style.cssText="position:absolute;bottom:4px;left:4px;padding:2px 8px;z-index:"+(window["j2s.lib"].monitorZIndex||1e4)+";background-color:#8e0000;color:yellow;font-family:Arial, sans-serif;font-size:10pt;white-space:nowrap;",c.onmouseover=vb,O=c,document.body.appendChild(c),ya||(ya=!0)}if(kb(O),null==a)b?na():W.hideMonitor();else{O.appendChild(document.createTextNode(""+a)),"none"==O.style.display&&(O.style.display=""),lb(W.DEFAULT_OPACITY);var d,c=navigator.userAgent;d=document.body;var e=d.parentNode,f=e.clientHeight;d=d.scrollTop+d.offsetTop;var g=e.scrollTop+e.offsetTop,c=0>c.indexOf("Opera")&&document.all?0==f?d:g:0>c.indexOf("Gecko")?f==e.offsetHeight&&f==e.scrollHeight?d:g:d;wa!=c&&(wa=c,O.style.bottom=wa+4+"px"),b&&na()}};var kb=function(a){if(a)for(var b=a.childNodes.length;0<=--b;){var c=a.childNodes[b];if(c){c.childNodes&&c.childNodes.length&&kb(c);try{a.removeChild(c)}catch(d){}}}},lb=function(a){L&&a==W.DEFAULT_OPACITY&&(window.clearTimeout(L),L=null),ga=a,navigator.userAgent.toLowerCase(),O.style.filter="Alpha(Opacity="+a+")",O.style.opacity=a/100},vb=function(){W.hideMonitor()},ya=!1,na=function(){"none"!=O.style.display&&(ga==W.DEFAULT_OPACITY?(L=window.setTimeout(function(){na()},750),ga-=5):ga-10>=0?(lb(ga-10),L=window.setTimeout(function(){na()},40)):O.style.display="none")},C=a.Console,X=System;C.maxTotalLines=1e4,C.setMaxTotalLines=function(a){C.maxTotalLines=a>0?a:999999},C.maxLatency=40,C.setMaxLatency=function(a){C.maxLatency=a>0?a:40},C.pinning=!1,C.enablePinning=function(a){C.pinning=a},C.linesCount=0,C.metLineBreak=!1,C.createConsoleWindow=function(){var a=document.createElement("DIV");return a.style.cssText="font-family:monospace, Arial, sans-serif;",document.body.appendChild(a),a};var ba=String.fromCharCode(160),ba=ba+(ba+ba+ba);C.consoleOutput=function(a,b){var c=window["j2s.lib"];if((c=c&&c.console)&&"string"==typeof c&&(c=document.getElementById(c)),!c)return!1;if(C.linesCount>C.maxTotalLines){for(var d=0;d<C.linesCount-C.maxTotalLines;d++)c&&0<c.childNodes.length&&c.removeChild(c.childNodes[0]);C.linesCount=C.maxTotalLines}var e=!1;if(a=("undefined"==typeof a?"":null==a?"null":""+a).replace(/\t/g,ba),0<a.length)switch(a.charAt(a.length-1)){case"\n":case"\r":a=1<a.length?a.substring(0,a.length-("\r"==a.charAt(a.length-2)?2:1)):"",e=!0}var f=null;a=a.replace(/\t/g,ba);for(var f=a.split(/\r\n|\r|\n/g),d=0,g=f.length-1;g>=d;d++){var h=null;if(C.metLineBreak||0==C.linesCount||1>c.childNodes.length)h=document.createElement("DIV"),c.appendChild(h),h.style.whiteSpace="nowrap",C.linesCount++;else try{h=c.childNodes[c.childNodes.length-1]}catch(i){h=document.createElement("DIV"),c.appendChild(h),h.style.whiteSpace="nowrap",C.linesCount++}var j=document.createElement("SPAN");h.appendChild(j),j.style.whiteSpace="nowrap",b&&(j.style.color=b),h=f[d],0==h.length&&(h=ba),j.appendChild(document.createTextNode(h)),C.pinning||(c.scrollTop+=100),C.metLineBreak=d!=g||e}d=c.parentNode.className,!C.pinning&&d&&-1!=d.indexOf("composite")&&(c.parentNode.scrollTop=c.parentNode.scrollHeight),C.lastOutputTime=(new Date).getTime()},C.clear=function(){try{C.metLineBreak=!0;var a=window["j2s.lib"],b=a&&a.console;if(b&&(b=document.getElementById(b))){for(var c=b.childNodes,d=c.length;0<=--d;)b.removeChild(c[d]);C.linesCount=0}}catch(e){}},a.alert=function(a){C.consoleOutput(a+"\r\n")},X.out.print=function(a){C.consoleOutput(a)},X.out.println=function(a){C.consoleOutput("undefined"==typeof a?"\r\n":null==a?"null\r\n":a+"\r\n")},X.out.write=function(a,b,c){X.out.print(String.instantialize(a).substring(b,b+c))},X.err.__CLASS_NAME__="java.io.PrintStream",X.err.print=function(a){C.consoleOutput(a,"red")},X.err.println=function(a){C.consoleOutput("undefined"==typeof a?"\r\n":null==a?"null\r\n":a+"\r\n","red")},X.err.write=function(a,b,c){X.err.print(String.instantialize(a).substring(b,b+c))}}(Clazz,Jmol))},Jmol.___JmolDate="$Date: 2016-03-02 09:52:17 -0600 (Wed, 02 Mar 2016) $",Jmol.___fullJmolProperties="src/org/jmol/viewer/Jmol.properties",Jmol.___JmolVersion="14.4.3_2016.03.02";var Detector={canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{return!!window.WebGLRenderingContext&&!!document.createElement("canvas").getContext("experimental-webgl")}catch(a){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var a="Your browser supports WebGL";return this.webgl||(a=window.WebGLRenderingContext?'Your graphics card does not seem to support <a class="link" href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">WebGL</a>. Find out how to get it <a class="link" href="http://get.webgl.org/">here</a>.':'Your browser does not seem to support <a class="link" href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation">WebGL</a>. Find out how to get it <a class="link" href="http://get.webgl.org/">here</a>.'),a}},THREE=THREE||{REVISION:"49"};self.Int32Array||(self.Int32Array=Array,self.Float32Array=Array),function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b){var c=Date.now(),d=Math.max(0,16-(c-a)),e=window.setTimeout(function(){b(c+d)},d);return a=c+d,e}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}(),THREE.Clock=function(a){this.autoStart=void 0!==a?a:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1},THREE.Clock.prototype.start=function(){this.oldTime=this.startTime=Date.now(),this.running=!0},THREE.Clock.prototype.stop=function(){this.getElapsedTime(),this.running=!1},THREE.Clock.prototype.getElapsedTime=function(){return this.elapsedTime=this.elapsedTime+this.getDelta()},THREE.Clock.prototype.getDelta=function(){var a=0;if(this.autoStart&&!this.running&&this.start(),this.running){var b=Date.now(),a=.001*(b-this.oldTime);this.oldTime=b,this.elapsedTime=this.elapsedTime+a}return a},THREE.Color=function(a){return void 0!==a&&this.setHex(a),this},THREE.Color.prototype={constructor:THREE.Color,r:1,g:1,b:1,copy:function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this},copyGammaToLinear:function(a){return this.r=a.r*a.r,this.g=a.g*a.g,this.b=a.b*a.b,this},copyLinearToGamma:function(a){return this.r=Math.sqrt(a.r),this.g=Math.sqrt(a.g),this.b=Math.sqrt(a.b),this},convertGammaToLinear:function(){var a=this.r,b=this.g,c=this.b;return this.r=a*a,this.g=b*b,this.b=c*c,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},setRGB:function(a,b,c){return this.r=a,this.g=b,this.b=c,this},setHSV:function(a,b,c){var d,e,f;if(0===c)this.r=this.g=this.b=0;else switch(d=Math.floor(6*a),e=6*a-d,a=c*(1-b),f=c*(1-b*e),b=c*(1-b*(1-e)),d){case 1:this.r=f,this.g=c,this.b=a;break;case 2:this.r=a,this.g=c,this.b=b;break;case 3:this.r=a,this.g=f,this.b=c;break;case 4:this.r=b,this.g=a,this.b=c;break;case 5:this.r=c,this.g=a,this.b=f;break;case 6:case 0:this.r=c,this.g=b,this.b=a}return this},setHex:function(a){return a=Math.floor(a),this.r=(a>>16&255)/255,this.g=(a>>8&255)/255,this.b=(255&a)/255,this},lerpSelf:function(a,b){return this.r=this.r+(a.r-this.r)*b,this.g=this.g+(a.g-this.g)*b,this.b=this.b+(a.b-this.b)*b,this},getHex:function(){return Math.floor(255*this.r)<<16^Math.floor(255*this.g)<<8^Math.floor(255*this.b)},getContextStyle:function(){return"rgb("+Math.floor(255*this.r)+","+Math.floor(255*this.g)+","+Math.floor(255*this.b)+")"},clone:function(){return(new THREE.Color).setRGB(this.r,this.g,this.b)}},THREE.Vector2=function(a,b){this.x=a||0,this.y=b||0},THREE.Vector2.prototype={constructor:THREE.Vector2,set:function(a,b){return this.x=a,this.y=b,this},copy:function(a){return this.x=a.x,this.y=a.y,this},add:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this},addSelf:function(a){return this.x=this.x+a.x,this.y=this.y+a.y,this},sub:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this},subSelf:function(a){return this.x=this.x-a.x,this.y=this.y-a.y,this},multiplyScalar:function(a){return this.x=this.x*a,this.y=this.y*a,this},divideScalar:function(a){return a?(this.x=this.x/a,this.y=this.y/a):this.set(0,0),this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,a=this.y-a.y;return b*b+a*a},setLength:function(a){return this.normalize().multiplyScalar(a)},lerpSelf:function(a,b){return this.x=this.x+(a.x-this.x)*b,this.y=this.y+(a.y-this.y)*b,this},equals:function(a){return a.x===this.x&&a.y===this.y},isZero:function(){return this.lengthSq()<1e-4},clone:function(){return new THREE.Vector2(this.x,this.y)}},THREE.Vector3=function(a,b,c){this.x=a||0,this.y=b||0,this.z=c||0},THREE.Vector3.prototype={constructor:THREE.Vector3,set:function(a,b,c){return this.x=a,this.y=b,this.z=c,this},setX:function(a){return this.x=a,this},setY:function(a){return this.y=a,this},setZ:function(a){return this.z=a,this},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this},add:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this},addSelf:function(a){return this.x=this.x+a.x,this.y=this.y+a.y,this.z=this.z+a.z,this},addScalar:function(a){return this.x=this.x+a,this.y=this.y+a,this.z=this.z+a,this},sub:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this},subSelf:function(a){return this.x=this.x-a.x,this.y=this.y-a.y,this.z=this.z-a.z,this},multiply:function(a,b){return this.x=a.x*b.x,this.y=a.y*b.y,this.z=a.z*b.z,this},multiplySelf:function(a){return this.x=this.x*a.x,this.y=this.y*a.y,this.z=this.z*a.z,this},multiplyScalar:function(a){return this.x=this.x*a,this.y=this.y*a,this.z=this.z*a,this},divideSelf:function(a){return this.x=this.x/a.x,this.y=this.y/a.y,this.z=this.z/a.z,this},divideScalar:function(a){return a?(this.x=this.x/a,this.y=this.y/a,this.z=this.z/a):this.z=this.y=this.x=0,this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.lengthSq())},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.normalize().multiplyScalar(a)},lerpSelf:function(a,b){return this.x=this.x+(a.x-this.x)*b,this.y=this.y+(a.y-this.y)*b,this.z=this.z+(a.z-this.z)*b,this},cross:function(a,b){return this.x=a.y*b.z-a.z*b.y,this.y=a.z*b.x-a.x*b.z,this.z=a.x*b.y-a.y*b.x,this},crossSelf:function(a){var b=this.x,c=this.y,d=this.z;return this.x=c*a.z-d*a.y,this.y=d*a.x-b*a.z,this.z=b*a.y-c*a.x,this},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){return(new THREE.Vector3).sub(this,a).lengthSq()},getPositionFromMatrix:function(a){return this.x=a.elements[12],this.y=a.elements[13],this.z=a.elements[14],this},getRotationFromMatrix:function(a,b){var c=b?b.x:1,d=b?b.y:1,e=b?b.z:1,f=a.elements[0]/c,g=a.elements[4]/d,c=a.elements[1]/c,d=a.elements[5]/d,h=a.elements[9]/e,i=a.elements[10]/e;return this.y=Math.asin(a.elements[8]/e),e=Math.cos(this.y),Math.abs(e)>1e-5?(this.x=Math.atan2(-h/e,i/e),this.z=Math.atan2(-g/e,f/e)):(this.x=0,this.z=Math.atan2(c,d)),this},getScaleFromMatrix:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length(),a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b,this.y=c,this.z=a},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z},isZero:function(){return this.lengthSq()<1e-4},clone:function(){return new THREE.Vector3(this.x,this.y,this.z)}},THREE.Vector4=function(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.w=void 0!==d?d:1},THREE.Vector4.prototype={constructor:THREE.Vector4,set:function(a,b,c,d){return this.x=a,this.y=b,this.z=c,this.w=d,this},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=void 0!==a.w?a.w:1,this},add:function(a,b){return this.x=a.x+b.x,this.y=a.y+b.y,this.z=a.z+b.z,this.w=a.w+b.w,this},addSelf:function(a){return this.x=this.x+a.x,this.y=this.y+a.y,this.z=this.z+a.z,this.w=this.w+a.w,this},sub:function(a,b){return this.x=a.x-b.x,this.y=a.y-b.y,this.z=a.z-b.z,this.w=a.w-b.w,this},subSelf:function(a){return this.x=this.x-a.x,this.y=this.y-a.y,this.z=this.z-a.z,this.w=this.w-a.w,this},multiplyScalar:function(a){return this.x=this.x*a,this.y=this.y*a,this.z=this.z*a,this.w=this.w*a,this},divideScalar:function(a){return a?(this.x=this.x/a,this.y=this.y/a,this.z=this.z/a,this.w=this.w/a):(this.z=this.y=this.x=0,this.w=1),this},negate:function(){return this.multiplyScalar(-1)},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.dot(this)},length:function(){return Math.sqrt(this.lengthSq())},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){return this.normalize().multiplyScalar(a)},lerpSelf:function(a,b){return this.x=this.x+(a.x-this.x)*b,this.y=this.y+(a.y-this.y)*b,this.z=this.z+(a.z-this.z)*b,this.w=this.w+(a.w-this.w)*b,this},clone:function(){return new THREE.Vector4(this.x,this.y,this.z,this.w)}},THREE.Frustum=function(){this.planes=[new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4,new THREE.Vector4];
},THREE.Frustum.prototype.setFromMatrix=function(a){var b,c=this.planes,d=a.elements,a=d[0];b=d[1];var e=d[2],f=d[3],g=d[4],h=d[5],i=d[6],j=d[7],k=d[8],l=d[9],m=d[10],n=d[11],o=d[12],p=d[13],q=d[14],d=d[15];for(c[0].set(f-a,j-g,n-k,d-o),c[1].set(f+a,j+g,n+k,d+o),c[2].set(f+b,j+h,n+l,d+p),c[3].set(f-b,j-h,n-l,d-p),c[4].set(f-e,j-i,n-m,d-q),c[5].set(f+e,j+i,n+m,d+q),a=0;6>a;a++)b=c[a],b.divideScalar(Math.sqrt(b.x*b.x+b.y*b.y+b.z*b.z))},THREE.Frustum.prototype.contains=function(a){for(var b=this.planes,c=a.matrixWorld,d=c.elements,c=-a.geometry.boundingSphere.radius*c.getMaxScaleOnAxis(),e=0;6>e;e++)if(a=b[e].x*d[12]+b[e].y*d[13]+b[e].z*d[14]+b[e].w,c>=a)return!1;return!0},THREE.Frustum.__v1=new THREE.Vector3,THREE.Ray=function(a,b){function c(a,b,c){return z.sub(c,a),o=z.dot(b),p=A.add(a,B.copy(b).multiplyScalar(o)),q=c.distanceTo(p)}function d(a,b,c,d){return z.sub(d,b),A.sub(c,b),B.sub(a,b),r=z.dot(z),s=z.dot(A),t=z.dot(B),u=A.dot(A),v=A.dot(B),w=1/(r*u-s*s),x=(u*t-s*v)*w,y=(r*v-s*t)*w,x>=0&&y>=0&&1>x+y}this.origin=a||new THREE.Vector3,this.direction=b||new THREE.Vector3;var e=1e-4;this.setPrecision=function(a){e=a};var f=new THREE.Vector3,g=new THREE.Vector3,h=new THREE.Vector3,i=new THREE.Vector3,j=new THREE.Vector3,k=new THREE.Vector3,l=new THREE.Vector3,m=new THREE.Vector3,n=new THREE.Vector3;this.intersectObject=function(a){var b,o=[];if(a instanceof THREE.Particle){var p=c(this.origin,this.direction,a.matrixWorld.getPosition());if(p>a.scale.x)return[];b={distance:p,point:a.position,face:null,object:a},o.push(b)}else if(a instanceof THREE.Mesh){var p=c(this.origin,this.direction,a.matrixWorld.getPosition()),q=THREE.Frustum.__v1.set(a.matrixWorld.getColumnX().length(),a.matrixWorld.getColumnY().length(),a.matrixWorld.getColumnZ().length());if(p>a.geometry.boundingSphere.radius*Math.max(q.x,Math.max(q.y,q.z)))return o;var r,s,t,u=a.geometry,v=u.vertices;for(a.matrixRotationWorld.extractRotation(a.matrixWorld),p=0,q=u.faces.length;q>p;p++)b=u.faces[p],j.copy(this.origin),k.copy(this.direction),t=a.matrixWorld,l=t.multiplyVector3(l.copy(b.centroid)).subSelf(j),m=a.matrixRotationWorld.multiplyVector3(m.copy(b.normal)),r=k.dot(m),Math.abs(r)<e||(s=m.dot(l)/r,0>s||!a.doubleSided&&!(a.flipSided?r>0:0>r)||(n.add(j,k.multiplyScalar(s)),b instanceof THREE.Face3?(f=t.multiplyVector3(f.copy(v[b.a])),g=t.multiplyVector3(g.copy(v[b.b])),h=t.multiplyVector3(h.copy(v[b.c])),d(n,f,g,h)&&(b={distance:j.distanceTo(n),point:n.clone(),face:b,object:a},o.push(b))):b instanceof THREE.Face4&&(f=t.multiplyVector3(f.copy(v[b.a])),g=t.multiplyVector3(g.copy(v[b.b])),h=t.multiplyVector3(h.copy(v[b.c])),i=t.multiplyVector3(i.copy(v[b.d])),(d(n,f,g,i)||d(n,g,h,i))&&(b={distance:j.distanceTo(n),point:n.clone(),face:b,object:a},o.push(b)))))}return o},this.intersectObjects=function(a){for(var b=[],c=0,d=a.length;d>c;c++)Array.prototype.push.apply(b,this.intersectObject(a[c]));return b.sort(function(a,b){return a.distance-b.distance}),b};var o,p,q,r,s,t,u,v,w,x,y,z=new THREE.Vector3,A=new THREE.Vector3,B=new THREE.Vector3},THREE.Rectangle=function(){function a(){f=d-b,g=e-c}var b,c,d,e,f,g,h=!0;this.getX=function(){return b},this.getY=function(){return c},this.getWidth=function(){return f},this.getHeight=function(){return g},this.getLeft=function(){return b},this.getTop=function(){return c},this.getRight=function(){return d},this.getBottom=function(){return e},this.set=function(f,g,i,j){h=!1,b=f,c=g,d=i,e=j,a()},this.addPoint=function(f,g){h?(h=!1,b=f,c=g,d=f,e=g):(b=f>b?b:f,c=g>c?c:g,d=d>f?d:f,e=e>g?e:g),a()},this.add3Points=function(f,g,i,j,k,l){h?(h=!1,b=i>f?k>f?f:k:k>i?i:k,c=j>g?l>g?g:l:l>j?j:l,d=f>i?f>k?f:k:i>k?i:k,e=g>j?g>l?g:l:j>l?j:l):(b=i>f?k>f?b>f?f:b:b>k?k:b:k>i?b>i?i:b:b>k?k:b,c=j>g?l>g?c>g?g:c:c>l?l:c:l>j?c>j?j:c:c>l?l:c,d=f>i?f>k?f>d?f:d:k>d?k:d:i>k?i>d?i:d:k>d?k:d,e=g>j?g>l?g>e?g:e:l>e?l:e:j>l?j>e?j:e:l>e?l:e),a()},this.addRectangle=function(f){h?(h=!1,b=f.getLeft(),c=f.getTop(),d=f.getRight(),e=f.getBottom()):(b=b<f.getLeft()?b:f.getLeft(),c=c<f.getTop()?c:f.getTop(),d=d>f.getRight()?d:f.getRight(),e=e>f.getBottom()?e:f.getBottom()),a()},this.inflate=function(f){b-=f,c-=f,d+=f,e+=f,a()},this.minSelf=function(f){b=b>f.getLeft()?b:f.getLeft(),c=c>f.getTop()?c:f.getTop(),d=d<f.getRight()?d:f.getRight(),e=e<f.getBottom()?e:f.getBottom(),a()},this.intersects=function(a){return!(d<a.getLeft()||b>a.getRight()||e<a.getTop()||c>a.getBottom())},this.empty=function(){h=!0,e=d=c=b=0,a()},this.isEmpty=function(){return h}},THREE.Math={clamp:function(a,b,c){return b>a?b:a>c?c:a},clampBottom:function(a,b){return b>a?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return a+Math.floor(Math.random()*(b-a+1))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(.5-Math.random())},sign:function(a){return 0>a?-1:a>0?1:0}},THREE.Matrix3=function(){this.elements=new Float32Array(9)},THREE.Matrix3.prototype={constructor:THREE.Matrix3,getInverse:function(a){var b=a.elements,a=b[10]*b[5]-b[6]*b[9],c=-b[10]*b[1]+b[2]*b[9],d=b[6]*b[1]-b[2]*b[5],e=-b[10]*b[4]+b[6]*b[8],f=b[10]*b[0]-b[2]*b[8],g=-b[6]*b[0]+b[2]*b[4],h=b[9]*b[4]-b[5]*b[8],i=-b[9]*b[0]+b[1]*b[8],j=b[5]*b[0]-b[1]*b[4],b=b[0]*a+b[1]*e+b[2]*h,b=1/b,k=this.elements;return k[0]=b*a,k[1]=b*c,k[2]=b*d,k[3]=b*e,k[4]=b*f,k[5]=b*g,k[6]=b*h,k[7]=b*i,k[8]=b*j,this},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[3],b[3]=a,a=b[2],b[2]=b[6],b[6]=a,a=b[5],b[5]=b[7],b[7]=a,this},transposeIntoArray:function(a){var b=this.m;return a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=b[5],a[8]=b[8],this}},THREE.Matrix4=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){this.elements=new Float32Array(16),this.set(void 0!==a?a:1,b||0,c||0,d||0,e||0,void 0!==f?f:1,g||0,h||0,i||0,j||0,void 0!==k?k:1,l||0,m||0,n||0,o||0,void 0!==p?p:1)},THREE.Matrix4.prototype={constructor:THREE.Matrix4,set:function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=this.elements;return q[0]=a,q[4]=b,q[8]=c,q[12]=d,q[1]=e,q[5]=f,q[9]=g,q[13]=h,q[2]=i,q[6]=j,q[10]=k,q[14]=l,q[3]=m,q[7]=n,q[11]=o,q[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(a){return a=a.elements,this.set(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15]),this},lookAt:function(a,b,c){var d=this.elements,e=THREE.Matrix4.__v1,f=THREE.Matrix4.__v2,g=THREE.Matrix4.__v3;return g.sub(a,b).normalize(),0===g.length()&&(g.z=1),e.cross(c,g).normalize(),0===e.length()&&(g.x=g.x+1e-4,e.cross(c,g).normalize()),f.cross(g,e),d[0]=e.x,d[4]=f.x,d[8]=g.x,d[1]=e.y,d[5]=f.y,d[9]=g.y,d[2]=e.z,d[6]=f.z,d[10]=g.z,this},multiply:function(a,b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],i=c[12],j=c[1],k=c[5],l=c[9],m=c[13],n=c[2],o=c[6],p=c[10],q=c[14],r=c[3],s=c[7],t=c[11],c=c[15],u=d[0],v=d[4],w=d[8],x=d[12],y=d[1],z=d[5],A=d[9],B=d[13],C=d[2],D=d[6],E=d[10],F=d[14],G=d[3],H=d[7],I=d[11],d=d[15];return e[0]=f*u+g*y+h*C+i*G,e[4]=f*v+g*z+h*D+i*H,e[8]=f*w+g*A+h*E+i*I,e[12]=f*x+g*B+h*F+i*d,e[1]=j*u+k*y+l*C+m*G,e[5]=j*v+k*z+l*D+m*H,e[9]=j*w+k*A+l*E+m*I,e[13]=j*x+k*B+l*F+m*d,e[2]=n*u+o*y+p*C+q*G,e[6]=n*v+o*z+p*D+q*H,e[10]=n*w+o*A+p*E+q*I,e[14]=n*x+o*B+p*F+q*d,e[3]=r*u+s*y+t*C+c*G,e[7]=r*v+s*z+t*D+c*H,e[11]=r*w+s*A+t*E+c*I,e[15]=r*x+s*B+t*F+c*d,this},multiplySelf:function(a){return this.multiply(this,a)},multiplyToArray:function(a,b,c){var d=this.elements;return this.multiply(a,b),c[0]=d[0],c[1]=d[1],c[2]=d[2],c[3]=d[3],c[4]=d[4],c[5]=d[5],c[6]=d[6],c[7]=d[7],c[8]=d[8],c[9]=d[9],c[10]=d[10],c[11]=d[11],c[12]=d[12],c[13]=d[13],c[14]=d[14],c[15]=d[15],this},multiplyScalar:function(a){var b=this.elements;return b[0]=b[0]*a,b[4]=b[4]*a,b[8]=b[8]*a,b[12]=b[12]*a,b[1]=b[1]*a,b[5]=b[5]*a,b[9]=b[9]*a,b[13]=b[13]*a,b[2]=b[2]*a,b[6]=b[6]*a,b[10]=b[10]*a,b[14]=b[14]*a,b[3]=b[3]*a,b[7]=b[7]*a,b[11]=b[11]*a,b[15]=b[15]*a,this},multiplyVector3:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=1/(b[3]*c+b[7]*d+b[11]*e+b[15]);return a.x=(b[0]*c+b[4]*d+b[8]*e+b[12])*f,a.y=(b[1]*c+b[5]*d+b[9]*e+b[13])*f,a.z=(b[2]*c+b[6]*d+b[10]*e+b[14])*f,a},multiplyVector4:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w;return a.x=b[0]*c+b[4]*d+b[8]*e+b[12]*f,a.y=b[1]*c+b[5]*d+b[9]*e+b[13]*f,a.z=b[2]*c+b[6]*d+b[10]*e+b[14]*f,a.w=b[3]*c+b[7]*d+b[11]*e+b[15]*f,a},rotateAxis:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z;return a.x=c*b[0]+d*b[4]+e*b[8],a.y=c*b[1]+d*b[5]+e*b[9],a.z=c*b[2]+d*b[6]+e*b[10],a.normalize(),a},crossVector:function(a){var b=this.elements,c=new THREE.Vector4;return c.x=b[0]*a.x+b[4]*a.y+b[8]*a.z+b[12]*a.w,c.y=b[1]*a.x+b[5]*a.y+b[9]*a.z+b[13]*a.w,c.z=b[2]*a.x+b[6]*a.y+b[10]*a.z+b[14]*a.w,c.w=a.w?b[3]*a.x+b[7]*a.y+b[11]*a.z+b[15]*a.w:1,c},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],i=a[13],j=a[2],k=a[6],l=a[10],m=a[14],n=a[3],o=a[7],p=a[11],a=a[15];return e*h*k*n-d*i*k*n-e*g*l*n+c*i*l*n+d*g*m*n-c*h*m*n-e*h*j*o+d*i*j*o+e*f*l*o-b*i*l*o-d*f*m*o+b*h*m*o+e*g*j*p-c*i*j*p-e*f*k*p+b*i*k*p+c*f*m*p-b*g*m*p-d*g*j*a+c*h*j*a+d*f*k*a-b*h*k*a-c*f*l*a+b*g*l*a},transpose:function(){var a,b=this.elements;return a=b[1],b[1]=b[4],b[4]=a,a=b[2],b[2]=b[8],b[8]=a,a=b[6],b[6]=b[9],b[9]=a,a=b[3],b[3]=b[12],b[12]=a,a=b[7],b[7]=b[13],b[13]=a,a=b[11],b[11]=b[14],b[14]=a,this},flattenToArray:function(a){var b=this.elements;return a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15],a},flattenToArrayOffset:function(a,b){var c=this.elements;return a[b]=c[0],a[b+1]=c[1],a[b+2]=c[2],a[b+3]=c[3],a[b+4]=c[4],a[b+5]=c[5],a[b+6]=c[6],a[b+7]=c[7],a[b+8]=c[8],a[b+9]=c[9],a[b+10]=c[10],a[b+11]=c[11],a[b+12]=c[12],a[b+13]=c[13],a[b+14]=c[14],a[b+15]=c[15],a},getPosition:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[12],a[13],a[14])},setPosition:function(a){var b=this.elements;return b[12]=a.x,b[13]=a.y,b[14]=a.z,this},getColumnX:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[0],a[1],a[2])},getColumnY:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[4],a[5],a[6])},getColumnZ:function(){var a=this.elements;return THREE.Matrix4.__v1.set(a[8],a[9],a[10])},getInverse:function(a){var b=this.elements,c=a.elements,d=c[0],e=c[4],f=c[8],g=c[12],h=c[1],i=c[5],j=c[9],k=c[13],l=c[2],m=c[6],n=c[10],o=c[14],p=c[3],q=c[7],r=c[11],c=c[15];return b[0]=j*o*q-k*n*q+k*m*r-i*o*r-j*m*c+i*n*c,b[4]=g*n*q-f*o*q-g*m*r+e*o*r+f*m*c-e*n*c,b[8]=f*k*q-g*j*q+g*i*r-e*k*r-f*i*c+e*j*c,b[12]=g*j*m-f*k*m-g*i*n+e*k*n+f*i*o-e*j*o,b[1]=k*n*p-j*o*p-k*l*r+h*o*r+j*l*c-h*n*c,b[5]=f*o*p-g*n*p+g*l*r-d*o*r-f*l*c+d*n*c,b[9]=g*j*p-f*k*p-g*h*r+d*k*r+f*h*c-d*j*c,b[13]=f*k*l-g*j*l+g*h*n-d*k*n-f*h*o+d*j*o,b[2]=i*o*p-k*m*p+k*l*q-h*o*q-i*l*c+h*m*c,b[6]=g*m*p-e*o*p-g*l*q+d*o*q+e*l*c-d*m*c,b[10]=e*k*p-g*i*p+g*h*q-d*k*q-e*h*c+d*i*c,b[14]=g*i*l-e*k*l-g*h*m+d*k*m+e*h*o-d*i*o,b[3]=j*m*p-i*n*p-j*l*q+h*n*q+i*l*r-h*m*r,b[7]=e*n*p-f*m*p+f*l*q-d*n*q-e*l*r+d*m*r,b[11]=f*i*p-e*j*p-f*h*q+d*j*q+e*h*r-d*i*r,b[15]=e*j*l-f*i*l+f*h*m-d*j*m-e*h*n+d*i*n,this.multiplyScalar(1/a.determinant()),this},setRotationFromEuler:function(a,b){var c=this.elements,d=a.x,e=a.y,f=a.z,g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e),i=Math.cos(f),f=Math.sin(f);switch(b){case"YXZ":var j=h*i,k=h*f,l=e*i,m=e*f;c[0]=j+m*d,c[4]=l*d-k,c[8]=g*e,c[1]=g*f,c[5]=g*i,c[9]=-d,c[2]=k*d-l,c[6]=m+j*d,c[10]=g*h;break;case"ZXY":j=h*i,k=h*f,l=e*i,m=e*f,c[0]=j-m*d,c[4]=-g*f,c[8]=l+k*d,c[1]=k+l*d,c[5]=g*i,c[9]=m-j*d,c[2]=-g*e,c[6]=d,c[10]=g*h;break;case"ZYX":j=g*i,k=g*f,l=d*i,m=d*f,c[0]=h*i,c[4]=l*e-k,c[8]=j*e+m,c[1]=h*f,c[5]=m*e+j,c[9]=k*e-l,c[2]=-e,c[6]=d*h,c[10]=g*h;break;case"YZX":j=g*h,k=g*e,l=d*h,m=d*e,c[0]=h*i,c[4]=m-j*f,c[8]=l*f+k,c[1]=f,c[5]=g*i,c[9]=-d*i,c[2]=-e*i,c[6]=k*f+l,c[10]=j-m*f;break;case"XZY":j=g*h,k=g*e,l=d*h,m=d*e,c[0]=h*i,c[4]=-f,c[8]=e*i,c[1]=j*f+m,c[5]=g*i,c[9]=k*f-l,c[2]=l*f-k,c[6]=d*i,c[10]=m*f+j;break;default:j=g*i,k=g*f,l=d*i,m=d*f,c[0]=h*i,c[4]=-h*f,c[8]=e,c[1]=k+l*e,c[5]=j-m*e,c[9]=-d*h,c[2]=m-j*e,c[6]=l+k*e,c[10]=g*h}return this},setRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,i=e+e,a=c*g,j=c*h,c=c*i,k=d*h,d=d*i,e=e*i,g=f*g,h=f*h,f=f*i;return b[0]=1-(k+e),b[4]=j-f,b[8]=c+h,b[1]=j+f,b[5]=1-(a+e),b[9]=d-g,b[2]=c-h,b[6]=d+g,b[10]=1-(a+k),this},compose:function(a,b,c){var d=this.elements,e=THREE.Matrix4.__m1,f=THREE.Matrix4.__m2;return e.identity(),e.setRotationFromQuaternion(b),f.makeScale(c.x,c.y,c.z),this.multiply(e,f),d[12]=a.x,d[13]=a.y,d[14]=a.z,this},decompose:function(a,b,c){var d=this.elements,e=THREE.Matrix4.__v1,f=THREE.Matrix4.__v2,g=THREE.Matrix4.__v3;return e.set(d[0],d[1],d[2]),f.set(d[4],d[5],d[6]),g.set(d[8],d[9],d[10]),a=a instanceof THREE.Vector3?a:new THREE.Vector3,b=b instanceof THREE.Quaternion?b:new THREE.Quaternion,c=c instanceof THREE.Vector3?c:new THREE.Vector3,c.x=e.length(),c.y=f.length(),c.z=g.length(),a.x=d[12],a.y=d[13],a.z=d[14],d=THREE.Matrix4.__m1,d.copy(this),d.elements[0]=d.elements[0]/c.x,d.elements[1]=d.elements[1]/c.x,d.elements[2]=d.elements[2]/c.x,d.elements[4]=d.elements[4]/c.y,d.elements[5]=d.elements[5]/c.y,d.elements[6]=d.elements[6]/c.y,d.elements[8]=d.elements[8]/c.z,d.elements[9]=d.elements[9]/c.z,d.elements[10]=d.elements[10]/c.z,b.setFromRotationMatrix(d),[a,b,c]},extractPosition:function(a){var b=this.elements,a=a.elements;return b[12]=a[12],b[13]=a[13],b[14]=a[14],this},extractRotation:function(a){var b=this.elements,a=a.elements,c=THREE.Matrix4.__v1,d=1/c.set(a[0],a[1],a[2]).length(),e=1/c.set(a[4],a[5],a[6]).length(),c=1/c.set(a[8],a[9],a[10]).length();return b[0]=a[0]*d,b[1]=a[1]*d,b[2]=a[2]*d,b[4]=a[4]*e,b[5]=a[5]*e,b[6]=a[6]*e,b[8]=a[8]*c,b[9]=a[9]*c,b[10]=a[10]*c,this},translate:function(a){var b=this.elements,c=a.x,d=a.y,a=a.z;return b[12]=b[0]*c+b[4]*d+b[8]*a+b[12],b[13]=b[1]*c+b[5]*d+b[9]*a+b[13],b[14]=b[2]*c+b[6]*d+b[10]*a+b[14],b[15]=b[3]*c+b[7]*d+b[11]*a+b[15],this},rotateX:function(a){var b=this.elements,c=b[4],d=b[5],e=b[6],f=b[7],g=b[8],h=b[9],i=b[10],j=b[11],k=Math.cos(a),a=Math.sin(a);return b[4]=k*c+a*g,b[5]=k*d+a*h,b[6]=k*e+a*i,b[7]=k*f+a*j,b[8]=k*g-a*c,b[9]=k*h-a*d,b[10]=k*i-a*e,b[11]=k*j-a*f,this},rotateY:function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[8],h=b[9],i=b[10],j=b[11],k=Math.cos(a),a=Math.sin(a);return b[0]=k*c-a*g,b[1]=k*d-a*h,b[2]=k*e-a*i,b[3]=k*f-a*j,b[8]=k*g+a*c,b[9]=k*h+a*d,b[10]=k*i+a*e,b[11]=k*j+a*f,this},rotateZ:function(a){var b=this.elements,c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],i=b[6],j=b[7],k=Math.cos(a),a=Math.sin(a);return b[0]=k*c+a*g,b[1]=k*d+a*h,b[2]=k*e+a*i,b[3]=k*f+a*j,b[4]=k*g-a*c,b[5]=k*h-a*d,b[6]=k*i-a*e,b[7]=k*j-a*f,this},rotateByAxis:function(a,b){var c=this.elements;if(1===a.x&&0===a.y&&0===a.z)return this.rotateX(b);if(0===a.x&&1===a.y&&0===a.z)return this.rotateY(b);if(0===a.x&&0===a.y&&1===a.z)return this.rotateZ(b);var d=a.x,e=a.y,f=a.z,g=Math.sqrt(d*d+e*e+f*f),d=d/g,e=e/g,f=f/g,g=d*d,h=e*e,i=f*f,j=Math.cos(b),k=Math.sin(b),l=1-j,m=d*e*l,n=d*f*l,l=e*f*l,d=d*k,o=e*k,k=f*k,f=g+(1-g)*j,g=m+k,e=n-o,m=m-k,h=h+(1-h)*j,k=l+d,n=n+o,l=l-d,i=i+(1-i)*j,j=c[0],d=c[1],o=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7],u=c[8],v=c[9],w=c[10],x=c[11];return c[0]=f*j+g*q+e*u,c[1]=f*d+g*r+e*v,c[2]=f*o+g*s+e*w,c[3]=f*p+g*t+e*x,c[4]=m*j+h*q+k*u,c[5]=m*d+h*r+k*v,c[6]=m*o+h*s+k*w,c[7]=m*p+h*t+k*x,c[8]=n*j+l*q+i*u,c[9]=n*d+l*r+i*v,c[10]=n*o+l*s+i*w,c[11]=n*p+l*t+i*x,this},scale:function(a){var b=this.elements,c=a.x,d=a.y,a=a.z;return b[0]=b[0]*c,b[4]=b[4]*d,b[8]=b[8]*a,b[1]=b[1]*c,b[5]=b[5]*d,b[9]=b[9]*a,b[2]=b[2]*c,b[6]=b[6]*d,b[10]=b[10]*a,b[3]=b[3]*c,b[7]=b[7]*d,b[11]=b[11]*a,this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){return this.set(1,0,0,a,0,1,0,b,0,0,1,c,0,0,0,1),this},makeRotationX:function(a){var b=Math.cos(a),a=Math.sin(a);return this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1),this},makeRotationY:function(a){var b=Math.cos(a),a=Math.sin(a);return this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1),this},makeRotationZ:function(a){var b=Math.cos(a),a=Math.sin(a);return this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,i=e*f,j=e*g;return this.set(i*f+c,i*g-d*h,i*h+d*g,0,i*g+d*h,j*g+c,j*h-d*f,0,i*h-d*g,j*h+d*f,e*h*h+c,0,0,0,0,1),this},makeScale:function(a,b,c){return this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1),this},makeFrustum:function(a,b,c,d,e,f){var g=this.elements;return g[0]=2*e/(b-a),g[4]=0,g[8]=(b+a)/(b-a),g[12]=0,g[1]=0,g[5]=2*e/(d-c),g[9]=(d+c)/(d-c),g[13]=0,g[2]=0,g[6]=0,g[10]=-(f+e)/(f-e),g[14]=-2*f*e/(f-e),g[3]=0,g[7]=0,g[11]=-1,g[15]=0,this},makePerspective:function(a,b,c,d){var a=c*Math.tan(a*Math.PI/360),e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=b-a,i=c-d,j=f-e;return g[0]=2/h,g[4]=0,g[8]=0,g[12]=-((b+a)/h),g[1]=0,g[5]=2/i,g[9]=0,g[13]=-((c+d)/i),g[2]=0,g[6]=0,g[10]=-2/j,g[14]=-((f+e)/j),g[3]=0,g[7]=0,g[11]=0,g[15]=1,this},clone:function(){var a=this.elements;return new THREE.Matrix4(a[0],a[4],a[8],a[12],a[1],a[5],a[9],a[13],a[2],a[6],a[10],a[14],a[3],a[7],a[11],a[15])}},THREE.Matrix4.__v1=new THREE.Vector3,THREE.Matrix4.__v2=new THREE.Vector3,THREE.Matrix4.__v3=new THREE.Vector3,THREE.Matrix4.__m1=new THREE.Matrix4,THREE.Matrix4.__m2=new THREE.Matrix4,THREE.Object3D=function(){this.id=THREE.Object3DCount++,this.name="",this.parent=void 0,this.children=[],this.up=new THREE.Vector3(0,1,0),this.position=new THREE.Vector3,this.rotation=new THREE.Vector3,this.eulerOrder="XYZ",this.scale=new THREE.Vector3(1,1,1),this.flipSided=this.doubleSided=!1,this.renderDepth=null,this.rotationAutoUpdate=!0,this.matrix=new THREE.Matrix4,this.matrixWorld=new THREE.Matrix4,this.matrixRotationWorld=new THREE.Matrix4,this.matrixWorldNeedsUpdate=this.matrixAutoUpdate=!0,this.quaternion=new THREE.Quaternion,this.useQuaternion=!1,this.boundRadius=0,this.boundRadiusScale=1,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this._vector=new THREE.Vector3},THREE.Object3D.prototype={constructor:THREE.Object3D,applyMatrix:function(a){this.matrix.multiply(a,this.matrix),this.scale.getScaleFromMatrix(this.matrix),this.rotation.getRotationFromMatrix(this.matrix,this.scale),this.position.getPositionFromMatrix(this.matrix)},translate:function(a,b){this.matrix.rotateAxis(b),this.position.addSelf(b.multiplyScalar(a))},translateX:function(a){this.translate(a,this._vector.set(1,0,0))},translateY:function(a){this.translate(a,this._vector.set(0,1,0))},translateZ:function(a){this.translate(a,this._vector.set(0,0,1))},lookAt:function(a){this.matrix.lookAt(a,this.position,this.up),this.rotationAutoUpdate&&this.rotation.getRotationFromMatrix(this.matrix)},add:function(a){if(a===this);else if(a instanceof THREE.Object3D){void 0!==a.parent&&a.parent.remove(a),a.parent=this,this.children.push(a);for(var b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__addObject(a)}},remove:function(a){var b=this.children.indexOf(a);if(-1!==b){for(a.parent=void 0,this.children.splice(b,1),b=this;void 0!==b.parent;)b=b.parent;void 0!==b&&b instanceof THREE.Scene&&b.__removeObject(a)}},getChildByName:function(a,b){var c,d,e;for(c=0,d=this.children.length;d>c;c++){if(e=this.children[c],e.name===a)return e;if(b&&(e=e.getChildByName(a,b),void 0!==e))return e}},updateMatrix:function(){this.matrix.setPosition(this.position),this.useQuaternion?this.matrix.setRotationFromQuaternion(this.quaternion):this.matrix.setRotationFromEuler(this.rotation,this.eulerOrder),1===this.scale.x&&1===this.scale.y&&1===this.scale.z||(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,Math.max(this.scale.y,this.scale.z))),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(a){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||a)&&(this.parent?this.matrixWorld.multiply(this.parent.matrixWorld,this.matrix):this.matrixWorld.copy(this.matrix),this.matrixWorldNeedsUpdate=!1,a=!0);for(var b=0,c=this.children.length;c>b;b++)this.children[b].updateMatrixWorld(a)}},THREE.Object3DCount=0,THREE.Projector=function(){function a(){var a=p[g]=p[g]||new THREE.RenderableVertex;return g++,a}function b(a,b){return b.z-a.z}function c(a,b){var c=0,d=1,e=a.z+a.w,f=b.z+b.w,g=-a.z+a.w,h=-b.z+b.w;return e>=0&&f>=0&&g>=0&&h>=0?!0:0>e&&0>f||0>g&&0>h?!1:(0>e?c=Math.max(c,e/(e-f)):0>f&&(d=Math.min(d,e/(e-f))),0>g?c=Math.max(c,g/(g-h)):0>h&&(d=Math.min(d,g/(g-h))),c>d?!1:(a.lerpSelf(b,c),b.lerpSelf(a,1-d),!0))}var d,e,f,g,h,i,j,k,l,m,n,o=[],p=[],q=[],r=[],s=[],t=[],u={objects:[],sprites:[],lights:[],elements:[]},v=new THREE.Vector3,w=new THREE.Vector4,x=new THREE.Matrix4,y=new THREE.Matrix4,z=new THREE.Frustum,A=new THREE.Vector4,B=new THREE.Vector4;this.projectVector=function(a,b){return b.matrixWorldInverse.getInverse(b.matrixWorld),x.multiply(b.projectionMatrix,b.matrixWorldInverse),x.multiplyVector3(a),a},this.unprojectVector=function(a,b){return b.projectionMatrixInverse.getInverse(b.projectionMatrix),x.multiply(b.matrixWorld,b.projectionMatrixInverse),x.multiplyVector3(a),a},this.pickingRay=function(a,b){var c;return a.z=-1,c=new THREE.Vector3(a.x,a.y,1),this.unprojectVector(a,b),this.unprojectVector(c,b),c.subSelf(a).normalize(),new THREE.Ray(a,c)},this.projectGraph=function(a,c){e=0,u.objects.length=0,u.sprites.length=0,u.lights.length=0;var f=function(a){if(a.visible!==!1){if((a instanceof THREE.Mesh||a instanceof THREE.Line)&&(a.frustumCulled===!1||z.contains(a))){v.copy(a.matrixWorld.getPosition()),x.multiplyVector3(v);var b=o[e]=o[e]||new THREE.RenderableObject;e++,d=b,d.object=a,d.z=v.z,u.objects.push(d)}else a instanceof THREE.Light&&u.lights.push(a);for(var b=0,c=a.children.length;c>b;b++)f(a.children[b])}};return f(a),c&&u.objects.sort(b),u},this.projectScene=function(d,e,o){var v,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q=e.near,R=e.far,S=!1;for(n=l=j=i=0,u.elements.length=0,void 0===e.parent&&d.add(e),d.updateMatrixWorld(),e.matrixWorldInverse.getInverse(e.matrixWorld),x.multiply(e.projectionMatrix,e.matrixWorldInverse),z.setFromMatrix(x),u=this.projectGraph(d,!1),d=0,v=u.objects.length;v>d;d++)if(J=u.objects[d].object,K=J.matrixWorld,g=0,J instanceof THREE.Mesh){for(L=J.geometry,M=J.geometry.materials,E=L.vertices,N=L.faces,O=L.faceVertexUvs,L=J.matrixRotationWorld.extractRotation(K),C=0,D=E.length;D>C;C++)f=a(),f.positionWorld.copy(E[C]),K.multiplyVector3(f.positionWorld),f.positionScreen.copy(f.positionWorld),x.multiplyVector4(f.positionScreen),f.positionScreen.x=f.positionScreen.x/f.positionScreen.w,f.positionScreen.y=f.positionScreen.y/f.positionScreen.w,f.visible=f.positionScreen.z>Q&&f.positionScreen.z<R;for(E=0,C=N.length;C>E;E++){if(D=N[E],D instanceof THREE.Face3){if(F=p[D.a],G=p[D.b],H=p[D.c],!(F.visible&&G.visible&&H.visible))continue;if(S=(H.positionScreen.x-F.positionScreen.x)*(G.positionScreen.y-F.positionScreen.y)-(H.positionScreen.y-F.positionScreen.y)*(G.positionScreen.x-F.positionScreen.x)<0,!J.doubleSided&&S==J.flipSided)continue;I=q[i]=q[i]||new THREE.RenderableFace3,i++,h=I,h.v1.copy(F),h.v2.copy(G),h.v3.copy(H)}else if(D instanceof THREE.Face4){if(F=p[D.a],G=p[D.b],H=p[D.c],I=p[D.d],!(F.visible&&G.visible&&H.visible&&I.visible))continue;if(S=(I.positionScreen.x-F.positionScreen.x)*(G.positionScreen.y-F.positionScreen.y)-(I.positionScreen.y-F.positionScreen.y)*(G.positionScreen.x-F.positionScreen.x)<0||(G.positionScreen.x-H.positionScreen.x)*(I.positionScreen.y-H.positionScreen.y)-(G.positionScreen.y-H.positionScreen.y)*(I.positionScreen.x-H.positionScreen.x)<0,!J.doubleSided&&S==J.flipSided)continue;P=r[j]=r[j]||new THREE.RenderableFace4,j++,h=P,h.v1.copy(F),h.v2.copy(G),h.v3.copy(H),h.v4.copy(I)}for(h.normalWorld.copy(D.normal),!S&&(J.flipSided||J.doubleSided)&&h.normalWorld.negate(),L.multiplyVector3(h.normalWorld),h.centroidWorld.copy(D.centroid),K.multiplyVector3(h.centroidWorld),h.centroidScreen.copy(h.centroidWorld),x.multiplyVector3(h.centroidScreen),H=D.vertexNormals,F=0,G=H.length;G>F;F++)I=h.vertexNormalsWorld[F],I.copy(H[F]),!S&&(J.flipSided||J.doubleSided)&&I.negate(),L.multiplyVector3(I);for(F=0,G=O.length;G>F;F++)if(P=O[F][E])for(H=0,I=P.length;I>H;H++)h.uvs[F][H]=P[H];h.material=J.material,h.faceMaterial=null!==D.materialIndex?M[D.materialIndex]:null,h.z=h.centroidScreen.z,u.elements.push(h)}}else if(J instanceof THREE.Line)for(y.multiply(x,K),E=J.geometry.vertices,F=a(),F.positionScreen.copy(E[0]),y.multiplyVector4(F.positionScreen),K=J.type===THREE.LinePieces?2:1,C=1,D=E.length;D>C;C++)F=a(),F.positionScreen.copy(E[C]),y.multiplyVector4(F.positionScreen),(C+1)%K>0||(G=p[g-2],A.copy(F.positionScreen),B.copy(G.positionScreen),c(A,B)&&(A.multiplyScalar(1/A.w),B.multiplyScalar(1/B.w),M=s[l]=s[l]||new THREE.RenderableLine,l++,k=M,k.v1.positionScreen.copy(A),k.v2.positionScreen.copy(B),k.z=Math.max(A.z,B.z),k.material=J.material,u.elements.push(k)));for(d=0,v=u.sprites.length;v>d;d++)J=u.sprites[d].object,K=J.matrixWorld,J instanceof THREE.Particle&&(w.set(K.elements[12],K.elements[13],K.elements[14],1),x.multiplyVector4(w),w.z=w.z/w.w,w.z>0&&w.z<1&&(Q=t[n]=t[n]||new THREE.RenderableParticle,n++,m=Q,m.x=w.x/w.w,m.y=w.y/w.w,m.z=w.z,m.rotation=J.rotation.z,m.scale.x=J.scale.x*Math.abs(m.x-(w.x+e.projectionMatrix.elements[0])/(w.w+e.projectionMatrix.elements[12])),m.scale.y=J.scale.y*Math.abs(m.y-(w.y+e.projectionMatrix.elements[5])/(w.w+e.projectionMatrix.elements[13])),m.material=J.material,u.elements.push(m)));return o&&u.elements.sort(b),u}},THREE.Quaternion=function(a,b,c,d){this.x=a||0,this.y=b||0,this.z=c||0,this.w=void 0!==d?d:1},THREE.Quaternion.prototype={constructor:THREE.Quaternion,set:function(a,b,c,d){return this.x=a,this.y=b,this.z=c,this.w=d,this},copy:function(a){return this.x=a.x,this.y=a.y,this.z=a.z,this.w=a.w,this},setFromEuler:function(a){var b=Math.PI/360,c=a.x*b,d=a.y*b,e=a.z*b,a=Math.cos(d),d=Math.sin(d),b=Math.cos(-e),e=Math.sin(-e),f=Math.cos(c),c=Math.sin(c),g=a*b,h=d*e;return this.w=g*f-h*c,this.x=g*c+h*f,this.y=d*b*f+a*e*c,this.z=a*e*f-d*b*c,this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);return this.x=a.x*d,this.y=a.y*d,this.z=a.z*d,this.w=Math.cos(c),this},setFromRotationMatrix:function(a){var b=Math.pow(a.determinant(),1/3);return this.w=Math.sqrt(Math.max(0,b+a.elements[0]+a.elements[5]+a.elements[10]))/2,this.x=Math.sqrt(Math.max(0,b+a.elements[0]-a.elements[5]-a.elements[10]))/2,this.y=Math.sqrt(Math.max(0,b-a.elements[0]+a.elements[5]-a.elements[10]))/2,this.z=Math.sqrt(Math.max(0,b-a.elements[0]-a.elements[5]+a.elements[10]))/2,this.x=a.elements[6]-a.elements[9]<0?-Math.abs(this.x):Math.abs(this.x),this.y=a.elements[8]-a.elements[2]<0?-Math.abs(this.y):Math.abs(this.y),this.z=a.elements[1]-a.elements[4]<0?-Math.abs(this.z):Math.abs(this.z),this.normalize(),this},calculateW:function(){return this.w=-Math.sqrt(Math.abs(1-this.x*this.x-this.y*this.y-this.z*this.z)),this},inverse:function(){return this.x=-1*this.x,this.y=-1*this.y,this.z=-1*this.z,this},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},normalize:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===a?this.w=this.z=this.y=this.x=0:(a=1/a,this.x=this.x*a,this.y=this.y*a,this.z=this.z*a,this.w=this.w*a),this},multiply:function(a,b){return this.x=a.x*b.w+a.y*b.z-a.z*b.y+a.w*b.x,this.y=-a.x*b.z+a.y*b.w+a.z*b.x+a.w*b.y,this.z=a.x*b.y-a.y*b.x+a.z*b.w+a.w*b.z,this.w=-a.x*b.x-a.y*b.y-a.z*b.z+a.w*b.w,this},multiplySelf:function(a){var b=this.x,c=this.y,d=this.z,e=this.w,f=a.x,g=a.y,h=a.z,a=a.w;return this.x=b*a+e*f+c*h-d*g,this.y=c*a+e*g+d*f-b*h,this.z=d*a+e*h+b*g-c*f,this.w=e*a-b*f-c*g-d*h,this},multiplyVector3:function(a,b){b||(b=a);var c=a.x,d=a.y,e=a.z,f=this.x,g=this.y,h=this.z,i=this.w,j=i*c+g*e-h*d,k=i*d+h*c-f*e,l=i*e+f*d-g*c,c=-f*c-g*d-h*e;return b.x=j*i+c*-f+k*-h-l*-g,b.y=k*i+c*-g+l*-f-j*-h,b.z=l*i+c*-h+j*-g-k*-f,b},clone:function(){return new THREE.Quaternion(this.x,this.y,this.z,this.w)}},THREE.Quaternion.slerp=function(a,b,c,d){var e=a.w*b.w+a.x*b.x+a.y*b.y+a.z*b.z;if(0>e?(c.w=-b.w,c.x=-b.x,c.y=-b.y,c.z=-b.z,e=-e):c.copy(b),Math.abs(e)>=1)return c.w=a.w,c.x=a.x,c.y=a.y,c.z=a.z,c;var f=Math.acos(e),e=Math.sqrt(1-e*e);return Math.abs(e)<.001?(c.w=.5*(a.w+b.w),c.x=.5*(a.x+b.x),c.y=.5*(a.y+b.y),c.z=.5*(a.z+b.z),c):(b=Math.sin((1-d)*f)/e,d=Math.sin(d*f)/e,c.w=a.w*b+c.w*d,c.x=a.x*b+c.x*d,c.y=a.y*b+c.y*d,c.z=a.z*b+c.z*d,c)},THREE.Vertex=function(){},THREE.Face3=function(a,b,c,d,e,f){this.a=a,this.b=b,this.c=c,this.normal=d instanceof THREE.Vector3?d:new THREE.Vector3,this.vertexNormals=d instanceof Array?d:[],this.color=e instanceof THREE.Color?e:new THREE.Color,this.vertexColors=e instanceof Array?e:[],this.vertexTangents=[],this.materialIndex=f,this.centroid=new THREE.Vector3},THREE.Face3.prototype={constructor:THREE.Face3,clone:function(){var a=new THREE.Face3(this.a,this.b,this.c);a.normal.copy(this.normal),a.color.copy(this.color),a.centroid.copy(this.centroid),a.materialIndex=this.materialIndex;var b,c;for(b=0,c=this.vertexNormals.length;c>b;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();for(b=0,c=this.vertexColors.length;c>b;b++)a.vertexColors[b]=this.vertexColors[b].clone();for(b=0,c=this.vertexTangents.length;c>b;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();return a}},THREE.Face4=function(a,b,c,d,e,f,g){this.a=a,this.b=b,this.c=c,this.d=d,this.normal=e instanceof THREE.Vector3?e:new THREE.Vector3,this.vertexNormals=e instanceof Array?e:[],this.color=f instanceof THREE.Color?f:new THREE.Color,this.vertexColors=f instanceof Array?f:[],this.vertexTangents=[],this.materialIndex=g,this.centroid=new THREE.Vector3},THREE.Face4.prototype={constructor:THREE.Face4,clone:function(){var a=new THREE.Face4(this.a,this.b,this.c,this.d);a.normal.copy(this.normal),a.color.copy(this.color),a.centroid.copy(this.centroid),a.materialIndex=this.materialIndex;var b,c;for(b=0,c=this.vertexNormals.length;c>b;b++)a.vertexNormals[b]=this.vertexNormals[b].clone();for(b=0,c=this.vertexColors.length;c>b;b++)a.vertexColors[b]=this.vertexColors[b].clone();for(b=0,c=this.vertexTangents.length;c>b;b++)a.vertexTangents[b]=this.vertexTangents[b].clone();return a}},THREE.UV=function(a,b){this.u=a||0,this.v=b||0},THREE.UV.prototype={constructor:THREE.UV,set:function(a,b){return this.u=a,this.v=b,this},copy:function(a){return this.u=a.u,this.v=a.v,this},lerpSelf:function(a,b){return this.u=this.u+(a.u-this.u)*b,this.v=this.v+(a.v-this.v)*b,this},clone:function(){return new THREE.UV(this.u,this.v)}},THREE.Geometry=function(){this.id=THREE.GeometryCount++,this.vertices=[],this.colors=[],this.materials=[],this.faces=[],this.faceUvs=[[]],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphColors=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.dynamic=this.hasTangents=!1},THREE.Geometry.prototype={constructor:THREE.Geometry,applyMatrix:function(a){var b=new THREE.Matrix4;b.extractRotation(a);for(var c=0,d=this.vertices.length;d>c;c++)a.multiplyVector3(this.vertices[c]);for(c=0,d=this.faces.length;d>c;c++){var e=this.faces[c];b.multiplyVector3(e.normal);for(var f=0,g=e.vertexNormals.length;g>f;f++)b.multiplyVector3(e.vertexNormals[f]);a.multiplyVector3(e.centroid)}},computeCentroids:function(){var a,b,c;for(a=0,b=this.faces.length;b>a;a++)c=this.faces[a],c.centroid.set(0,0,0),c instanceof THREE.Face3?(c.centroid.addSelf(this.vertices[c.a]),c.centroid.addSelf(this.vertices[c.b]),c.centroid.addSelf(this.vertices[c.c]),c.centroid.divideScalar(3)):c instanceof THREE.Face4&&(c.centroid.addSelf(this.vertices[c.a]),c.centroid.addSelf(this.vertices[c.b]),c.centroid.addSelf(this.vertices[c.c]),c.centroid.addSelf(this.vertices[c.d]),c.centroid.divideScalar(4))},computeFaceNormals:function(){
var a,b,c,d,e,f,g=new THREE.Vector3,h=new THREE.Vector3;for(a=0,b=this.faces.length;b>a;a++)c=this.faces[a],d=this.vertices[c.a],e=this.vertices[c.b],f=this.vertices[c.c],g.sub(f,e),h.sub(d,e),g.crossSelf(h),g.isZero()||g.normalize(),c.normal.copy(g)},computeVertexNormals:function(){var a,b,c,d;if(void 0===this.__tmpVertices){for(d=this.__tmpVertices=Array(this.vertices.length),a=0,b=this.vertices.length;b>a;a++)d[a]=new THREE.Vector3;for(a=0,b=this.faces.length;b>a;a++)c=this.faces[a],c instanceof THREE.Face3?c.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3]:c instanceof THREE.Face4&&(c.vertexNormals=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3])}else for(d=this.__tmpVertices,a=0,b=this.vertices.length;b>a;a++)d[a].set(0,0,0);for(a=0,b=this.faces.length;b>a;a++)c=this.faces[a],c instanceof THREE.Face3?(d[c.a].addSelf(c.normal),d[c.b].addSelf(c.normal),d[c.c].addSelf(c.normal)):c instanceof THREE.Face4&&(d[c.a].addSelf(c.normal),d[c.b].addSelf(c.normal),d[c.c].addSelf(c.normal),d[c.d].addSelf(c.normal));for(a=0,b=this.vertices.length;b>a;a++)d[a].normalize();for(a=0,b=this.faces.length;b>a;a++)c=this.faces[a],c instanceof THREE.Face3?(c.vertexNormals[0].copy(d[c.a]),c.vertexNormals[1].copy(d[c.b]),c.vertexNormals[2].copy(d[c.c])):c instanceof THREE.Face4&&(c.vertexNormals[0].copy(d[c.a]),c.vertexNormals[1].copy(d[c.b]),c.vertexNormals[2].copy(d[c.c]),c.vertexNormals[3].copy(d[c.d]))},computeMorphNormals:function(){var a,b,c,d,e;for(c=0,d=this.faces.length;d>c;c++)for(e=this.faces[c],e.__originalFaceNormal?e.__originalFaceNormal.copy(e.normal):e.__originalFaceNormal=e.normal.clone(),e.__originalVertexNormals||(e.__originalVertexNormals=[]),a=0,b=e.vertexNormals.length;b>a;a++)e.__originalVertexNormals[a]?e.__originalVertexNormals[a].copy(e.vertexNormals[a]):e.__originalVertexNormals[a]=e.vertexNormals[a].clone();var f=new THREE.Geometry;for(f.faces=this.faces,a=0,b=this.morphTargets.length;b>a;a++){if(!this.morphNormals[a]){this.morphNormals[a]={},this.morphNormals[a].faceNormals=[],this.morphNormals[a].vertexNormals=[];var g,h,i=this.morphNormals[a].faceNormals,j=this.morphNormals[a].vertexNormals;for(c=0,d=this.faces.length;d>c;c++)e=this.faces[c],g=new THREE.Vector3,h=e instanceof THREE.Face3?{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3}:{a:new THREE.Vector3,b:new THREE.Vector3,c:new THREE.Vector3,d:new THREE.Vector3},i.push(g),j.push(h)}for(i=this.morphNormals[a],f.vertices=this.morphTargets[a].vertices,f.computeFaceNormals(),f.computeVertexNormals(),c=0,d=this.faces.length;d>c;c++)e=this.faces[c],g=i.faceNormals[c],h=i.vertexNormals[c],g.copy(e.normal),e instanceof THREE.Face3?(h.a.copy(e.vertexNormals[0]),h.b.copy(e.vertexNormals[1]),h.c.copy(e.vertexNormals[2])):(h.a.copy(e.vertexNormals[0]),h.b.copy(e.vertexNormals[1]),h.c.copy(e.vertexNormals[2]),h.d.copy(e.vertexNormals[3]))}for(c=0,d=this.faces.length;d>c;c++)e=this.faces[c],e.normal=e.__originalFaceNormal,e.vertexNormals=e.__originalVertexNormals},computeTangents:function(){function a(a,b,c,d,e,f,y){h=a.vertices[b],i=a.vertices[c],j=a.vertices[d],k=g[e],l=g[f],m=g[y],n=i.x-h.x,o=j.x-h.x,p=i.y-h.y,q=j.y-h.y,r=i.z-h.z,s=j.z-h.z,t=l.u-k.u,u=m.u-k.u,v=l.v-k.v,w=m.v-k.v,x=1/(t*w-u*v),B.set((w*n-v*o)*x,(w*p-v*q)*x,(w*r-v*s)*x),C.set((t*o-u*n)*x,(t*q-u*p)*x,(t*s-u*r)*x),z[b].addSelf(B),z[c].addSelf(B),z[d].addSelf(B),A[b].addSelf(C),A[c].addSelf(C),A[d].addSelf(C)}var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z=[],A=[],B=new THREE.Vector3,C=new THREE.Vector3,D=new THREE.Vector3,E=new THREE.Vector3,F=new THREE.Vector3;for(b=0,c=this.vertices.length;c>b;b++)z[b]=new THREE.Vector3,A[b]=new THREE.Vector3;for(b=0,c=this.faces.length;c>b;b++)f=this.faces[b],g=this.faceVertexUvs[0][b],f instanceof THREE.Face3?a(this,f.a,f.b,f.c,0,1,2):f instanceof THREE.Face4&&(a(this,f.a,f.b,f.d,0,1,3),a(this,f.b,f.c,f.d,1,2,3));var G=["a","b","c","d"];for(b=0,c=this.faces.length;c>b;b++)for(f=this.faces[b],d=0;d<f.vertexNormals.length;d++)F.copy(f.vertexNormals[d]),e=f[G[d]],y=z[e],D.copy(y),D.subSelf(F.multiplyScalar(F.dot(y))).normalize(),E.cross(f.vertexNormals[d],y),e=E.dot(A[e]),e=0>e?-1:1,f.vertexTangents[d]=new THREE.Vector4(D.x,D.y,D.z,e);this.hasTangents=!0},computeBoundingBox:function(){if(this.boundingBox||(this.boundingBox={min:new THREE.Vector3,max:new THREE.Vector3}),this.vertices.length>0){var a;a=this.vertices[0],this.boundingBox.min.copy(a),this.boundingBox.max.copy(a);for(var b=this.boundingBox.min,c=this.boundingBox.max,d=1,e=this.vertices.length;e>d;d++)a=this.vertices[d],a.x<b.x?b.x=a.x:a.x>c.x&&(c.x=a.x),a.y<b.y?b.y=a.y:a.y>c.y&&(c.y=a.y),a.z<b.z?b.z=a.z:a.z>c.z&&(c.z=a.z)}else this.boundingBox.min.set(0,0,0),this.boundingBox.max.set(0,0,0)},computeBoundingSphere:function(){this.boundingSphere||(this.boundingSphere={radius:0});for(var a,b=0,c=0,d=this.vertices.length;d>c;c++)a=this.vertices[c].length(),a>b&&(b=a);this.boundingSphere.radius=b},mergeVertices:function(){var a,b,c,d,e={},f=[],g=[],h=Math.pow(10,4);for(b=0,c=this.vertices.length;c>b;b++)a=this.vertices[b],a=[Math.round(a.x*h),Math.round(a.y*h),Math.round(a.z*h)].join("_"),void 0===e[a]?(e[a]=b,f.push(this.vertices[b]),g[b]=f.length-1):g[b]=g[e[a]];for(b=0,c=this.faces.length;c>b;b++)if(h=this.faces[b],h instanceof THREE.Face3)h.a=g[h.a],h.b=g[h.b],h.c=g[h.c];else if(h instanceof THREE.Face4)for(h.a=g[h.a],h.b=g[h.b],h.c=g[h.c],h.d=g[h.d],a=[h.a,h.b,h.c,h.d],e=3;e>0;e--)if(a.indexOf(h["abcd"[e]])!=e){for(a.splice(e,1),this.faces[b]=new THREE.Face3(a[0],a[1],a[2]),h=0,a=this.faceVertexUvs.length;a>h;h++)(d=this.faceVertexUvs[h][b])&&d.splice(e,1);break}return g=this.vertices.length-f.length,this.vertices=f,g}},THREE.GeometryCount=0,THREE.Spline=function(a){function b(a,b,c,d,e,f,g){return a=.5*(c-a),d=.5*(d-b),(2*(b-c)+a+d)*g+(-3*(b-c)-2*a-d)*f+a*e+b}this.points=a;var c,d,e,f,g,h,i,j,k,l=[],m={x:0,y:0,z:0};this.initFromArray=function(a){this.points=[];for(var b=0;b<a.length;b++)this.points[b]={x:a[b][0],y:a[b][1],z:a[b][2]}},this.getPoint=function(a){return c=(this.points.length-1)*a,d=Math.floor(c),e=c-d,l[0]=0===d?d:d-1,l[1]=d,l[2]=d>this.points.length-2?this.points.length-1:d+1,l[3]=d>this.points.length-3?this.points.length-1:d+2,h=this.points[l[0]],i=this.points[l[1]],j=this.points[l[2]],k=this.points[l[3]],f=e*e,g=e*f,m.x=b(h.x,i.x,j.x,k.x,e,f,g),m.y=b(h.y,i.y,j.y,k.y,e,f,g),m.z=b(h.z,i.z,j.z,k.z,e,f,g),m},this.getControlPointsArray=function(){var a,b,c=this.points.length,d=[];for(a=0;c>a;a++)b=this.points[a],d[a]=[b.x,b.y,b.z];return d},this.getLength=function(a){var b,c,d,e=b=b=0,f=new THREE.Vector3,g=new THREE.Vector3,h=[],i=0;for(h[0]=0,a||(a=100),c=this.points.length*a,f.copy(this.points[0]),a=1;c>a;a++)b=a/c,d=this.getPoint(b),g.copy(d),i+=g.distanceTo(f),f.copy(d),b=(this.points.length-1)*b,b=Math.floor(b),b!=e&&(h[b]=i,e=b);return h[h.length]=i,{chunks:h,total:i}},this.reparametrizeByArcLength=function(a){var b,c,d,e,f,g,h=[],i=new THREE.Vector3,j=this.getLength();for(h.push(i.copy(this.points[0]).clone()),b=1;b<this.points.length;b++){for(c=j.chunks[b]-j.chunks[b-1],g=Math.ceil(a*c/j.total),e=(b-1)/(this.points.length-1),f=b/(this.points.length-1),c=1;g-1>c;c++)d=e+c*(1/g)*(f-e),d=this.getPoint(d),h.push(i.copy(d).clone());h.push(i.copy(this.points[b]).clone())}this.points=h}},THREE.Camera=function(){THREE.Object3D.call(this),this.matrixWorldInverse=new THREE.Matrix4,this.projectionMatrix=new THREE.Matrix4,this.projectionMatrixInverse=new THREE.Matrix4},THREE.Camera.prototype=new THREE.Object3D,THREE.Camera.prototype.constructor=THREE.Camera,THREE.Camera.prototype.lookAt=function(a){this.matrix.lookAt(this.position,a,this.up),this.rotationAutoUpdate&&this.rotation.getRotationFromMatrix(this.matrix)},THREE.OrthographicCamera=function(a,b,c,d,e,f){THREE.Camera.call(this),this.left=a,this.right=b,this.top=c,this.bottom=d,this.near=void 0!==e?e:.1,this.far=void 0!==f?f:2e3,this.updateProjectionMatrix()},THREE.OrthographicCamera.prototype=new THREE.Camera,THREE.OrthographicCamera.prototype.constructor=THREE.OrthographicCamera,THREE.OrthographicCamera.prototype.updateProjectionMatrix=function(){this.projectionMatrix.makeOrthographic(this.left,this.right,this.top,this.bottom,this.near,this.far)},THREE.PerspectiveCamera=function(a,b,c,d){THREE.Camera.call(this),this.fov=void 0!==a?a:50,this.aspect=void 0!==b?b:1,this.near=void 0!==c?c:.1,this.far=void 0!==d?d:2e3,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype=new THREE.Camera,THREE.PerspectiveCamera.prototype.constructor=THREE.PerspectiveCamera,THREE.PerspectiveCamera.prototype.setLens=function(a,b){this.fov=2*Math.atan((void 0!==b?b:24)/(2*a))*(180/Math.PI),this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.setViewOffset=function(a,b,c,d,e,f){this.fullWidth=a,this.fullHeight=b,this.x=c,this.y=d,this.width=e,this.height=f,this.updateProjectionMatrix()},THREE.PerspectiveCamera.prototype.updateProjectionMatrix=function(){if(this.fullWidth){var a=this.fullWidth/this.fullHeight,b=Math.tan(this.fov*Math.PI/360)*this.near,c=-b,d=a*c,a=Math.abs(a*b-d),c=Math.abs(b-c);this.projectionMatrix.makeFrustum(d+this.x*a/this.fullWidth,d+(this.x+this.width)*a/this.fullWidth,b-(this.y+this.height)*c/this.fullHeight,b-this.y*c/this.fullHeight,this.near,this.far)}else this.projectionMatrix.makePerspective(this.fov,this.aspect,this.near,this.far)},THREE.Light=function(a){THREE.Object3D.call(this),this.color=new THREE.Color(a)},THREE.Light.prototype=new THREE.Object3D,THREE.Light.prototype.constructor=THREE.Light,THREE.Light.prototype.supr=THREE.Object3D.prototype,THREE.AmbientLight=function(a){THREE.Light.call(this,a)},THREE.AmbientLight.prototype=new THREE.Light,THREE.AmbientLight.prototype.constructor=THREE.AmbientLight,THREE.DirectionalLight=function(a,b,c){THREE.Light.call(this,a),this.position=new THREE.Vector3(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==b?b:1,this.distance=void 0!==c?c:0,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraLeft=-500,this.shadowCameraTop=this.shadowCameraRight=500,this.shadowCameraBottom=-500,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowCascade=!1,this.shadowCascadeOffset=new THREE.Vector3(0,0,-1e3),this.shadowCascadeCount=2,this.shadowCascadeBias=[0,0,0],this.shadowCascadeWidth=[512,512,512],this.shadowCascadeHeight=[512,512,512],this.shadowCascadeNearZ=[-1,.99,.998],this.shadowCascadeFarZ=[.99,.998,1],this.shadowCascadeArray=[],this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.DirectionalLight.prototype=new THREE.Light,THREE.DirectionalLight.prototype.constructor=THREE.DirectionalLight,THREE.PointLight=function(a,b,c){THREE.Light.call(this,a),this.position=new THREE.Vector3(0,0,0),this.intensity=void 0!==b?b:1,this.distance=void 0!==c?c:0},THREE.PointLight.prototype=new THREE.Light,THREE.PointLight.prototype.constructor=THREE.PointLight,THREE.SpotLight=function(a,b,c,d,e){THREE.Light.call(this,a),this.position=new THREE.Vector3(0,1,0),this.target=new THREE.Object3D,this.intensity=void 0!==b?b:1,this.distance=void 0!==c?c:0,this.angle=void 0!==d?d:Math.PI/2,this.exponent=void 0!==e?e:10,this.onlyShadow=this.castShadow=!1,this.shadowCameraNear=50,this.shadowCameraFar=5e3,this.shadowCameraFov=50,this.shadowCameraVisible=!1,this.shadowBias=0,this.shadowDarkness=.5,this.shadowMapHeight=this.shadowMapWidth=512,this.shadowMatrix=this.shadowCamera=this.shadowMapSize=this.shadowMap=null},THREE.SpotLight.prototype=new THREE.Light,THREE.SpotLight.prototype.constructor=THREE.SpotLight,THREE.Material=function(a){a=a||{},this.id=THREE.MaterialCount++,this.name="",this.opacity=void 0!==a.opacity?a.opacity:1,this.transparent=void 0!==a.transparent?a.transparent:!1,this.blending=void 0!==a.blending?a.blending:THREE.NormalBlending,this.blendSrc=void 0!==a.blendSrc?a.blendSrc:THREE.SrcAlphaFactor,this.blendDst=void 0!==a.blendDst?a.blendDst:THREE.OneMinusSrcAlphaFactor,this.blendEquation=void 0!==a.blendEquation?a.blendEquation:THREE.AddEquation,this.depthTest=void 0!==a.depthTest?a.depthTest:!0,this.depthWrite=void 0!==a.depthWrite?a.depthWrite:!0,this.polygonOffset=void 0!==a.polygonOffset?a.polygonOffset:!1,this.polygonOffsetFactor=void 0!==a.polygonOffsetFactor?a.polygonOffsetFactor:0,this.polygonOffsetUnits=void 0!==a.polygonOffsetUnits?a.polygonOffsetUnits:0,this.alphaTest=void 0!==a.alphaTest?a.alphaTest:0,this.overdraw=void 0!==a.overdraw?a.overdraw:!1,this.needsUpdate=this.visible=!0},THREE.MaterialCount=0,THREE.NoShading=0,THREE.FlatShading=1,THREE.SmoothShading=2,THREE.NoColors=0,THREE.FaceColors=1,THREE.VertexColors=2,THREE.NoBlending=0,THREE.NormalBlending=1,THREE.AdditiveBlending=2,THREE.SubtractiveBlending=3,THREE.MultiplyBlending=4,THREE.AdditiveAlphaBlending=5,THREE.CustomBlending=6,THREE.AddEquation=100,THREE.SubtractEquation=101,THREE.ReverseSubtractEquation=102,THREE.ZeroFactor=200,THREE.OneFactor=201,THREE.SrcColorFactor=202,THREE.OneMinusSrcColorFactor=203,THREE.SrcAlphaFactor=204,THREE.OneMinusSrcAlphaFactor=205,THREE.DstAlphaFactor=206,THREE.OneMinusDstAlphaFactor=207,THREE.DstColorFactor=208,THREE.OneMinusDstColorFactor=209,THREE.SrcAlphaSaturateFactor=210,THREE.LineBasicMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215),this.linewidth=void 0!==a.linewidth?a.linewidth:1,this.linecap=void 0!==a.linecap?a.linecap:"round",this.linejoin=void 0!==a.linejoin?a.linejoin:"round",this.vertexColors=a.vertexColors?a.vertexColors:!1,this.fog=void 0!==a.fog?a.fog:!0},THREE.LineBasicMaterial.prototype=new THREE.Material,THREE.LineBasicMaterial.prototype.constructor=THREE.LineBasicMaterial,THREE.MeshBasicMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215),this.map=void 0!==a.map?a.map:null,this.lightMap=void 0!==a.lightMap?a.lightMap:null,this.envMap=void 0!==a.envMap?a.envMap:null,this.combine=void 0!==a.combine?a.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==a.reflectivity?a.reflectivity:1,this.refractionRatio=void 0!==a.refractionRatio?a.refractionRatio:.98,this.fog=void 0!==a.fog?a.fog:!0,this.shading=void 0!==a.shading?a.shading:THREE.SmoothShading,this.wireframe=void 0!==a.wireframe?a.wireframe:!1,this.wireframeLinewidth=void 0!==a.wireframeLinewidth?a.wireframeLinewidth:1,this.wireframeLinecap=void 0!==a.wireframeLinecap?a.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==a.wireframeLinejoin?a.wireframeLinejoin:"round",this.vertexColors=void 0!==a.vertexColors?a.vertexColors:THREE.NoColors,this.skinning=void 0!==a.skinning?a.skinning:!1,this.morphTargets=void 0!==a.morphTargets?a.morphTargets:!1},THREE.MeshBasicMaterial.prototype=new THREE.Material,THREE.MeshBasicMaterial.prototype.constructor=THREE.MeshBasicMaterial,THREE.MeshLambertMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215),this.ambient=void 0!==a.ambient?new THREE.Color(a.ambient):new THREE.Color(16777215),this.emissive=void 0!==a.emissive?new THREE.Color(a.emissive):new THREE.Color(0),this.wrapAround=void 0!==a.wrapAround?a.wrapAround:!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=void 0!==a.map?a.map:null,this.lightMap=void 0!==a.lightMap?a.lightMap:null,this.envMap=void 0!==a.envMap?a.envMap:null,this.combine=void 0!==a.combine?a.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==a.reflectivity?a.reflectivity:1,this.refractionRatio=void 0!==a.refractionRatio?a.refractionRatio:.98,this.fog=void 0!==a.fog?a.fog:!0,this.shading=void 0!==a.shading?a.shading:THREE.SmoothShading,this.wireframe=void 0!==a.wireframe?a.wireframe:!1,this.wireframeLinewidth=void 0!==a.wireframeLinewidth?a.wireframeLinewidth:1,this.wireframeLinecap=void 0!==a.wireframeLinecap?a.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==a.wireframeLinejoin?a.wireframeLinejoin:"round",this.vertexColors=void 0!==a.vertexColors?a.vertexColors:THREE.NoColors,this.skinning=void 0!==a.skinning?a.skinning:!1,this.morphTargets=void 0!==a.morphTargets?a.morphTargets:!1,this.morphNormals=void 0!==a.morphNormals?a.morphNormals:!1},THREE.MeshLambertMaterial.prototype=new THREE.Material,THREE.MeshLambertMaterial.prototype.constructor=THREE.MeshLambertMaterial,THREE.MeshPhongMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215),this.ambient=void 0!==a.ambient?new THREE.Color(a.ambient):new THREE.Color(16777215),this.emissive=void 0!==a.emissive?new THREE.Color(a.emissive):new THREE.Color(0),this.specular=void 0!==a.specular?new THREE.Color(a.specular):new THREE.Color(1118481),this.shininess=void 0!==a.shininess?a.shininess:30,this.metal=void 0!==a.metal?a.metal:!1,this.perPixel=void 0!==a.perPixel?a.perPixel:!1,this.wrapAround=void 0!==a.wrapAround?a.wrapAround:!1,this.wrapRGB=new THREE.Vector3(1,1,1),this.map=void 0!==a.map?a.map:null,this.lightMap=void 0!==a.lightMap?a.lightMap:null,this.envMap=void 0!==a.envMap?a.envMap:null,this.combine=void 0!==a.combine?a.combine:THREE.MultiplyOperation,this.reflectivity=void 0!==a.reflectivity?a.reflectivity:1,this.refractionRatio=void 0!==a.refractionRatio?a.refractionRatio:.98,this.fog=void 0!==a.fog?a.fog:!0,this.shading=void 0!==a.shading?a.shading:THREE.SmoothShading,this.wireframe=void 0!==a.wireframe?a.wireframe:!1,this.wireframeLinewidth=void 0!==a.wireframeLinewidth?a.wireframeLinewidth:1,this.wireframeLinecap=void 0!==a.wireframeLinecap?a.wireframeLinecap:"round",this.wireframeLinejoin=void 0!==a.wireframeLinejoin?a.wireframeLinejoin:"round",this.vertexColors=void 0!==a.vertexColors?a.vertexColors:THREE.NoColors,this.skinning=void 0!==a.skinning?a.skinning:!1,this.morphTargets=void 0!==a.morphTargets?a.morphTargets:!1,this.morphNormals=void 0!==a.morphNormals?a.morphNormals:!1},THREE.MeshPhongMaterial.prototype=new THREE.Material,THREE.MeshPhongMaterial.prototype.constructor=THREE.MeshPhongMaterial,THREE.MeshDepthMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.shading=void 0!==a.shading?a.shading:THREE.SmoothShading,this.wireframe=void 0!==a.wireframe?a.wireframe:!1,this.wireframeLinewidth=void 0!==a.wireframeLinewidth?a.wireframeLinewidth:1},THREE.MeshDepthMaterial.prototype=new THREE.Material,THREE.MeshDepthMaterial.prototype.constructor=THREE.MeshDepthMaterial,THREE.MeshNormalMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.shading=a.shading?a.shading:THREE.FlatShading,this.wireframe=a.wireframe?a.wireframe:!1,this.wireframeLinewidth=a.wireframeLinewidth?a.wireframeLinewidth:1},THREE.MeshNormalMaterial.prototype=new THREE.Material,THREE.MeshNormalMaterial.prototype.constructor=THREE.MeshNormalMaterial,THREE.MeshFaceMaterial=function(){},THREE.ParticleBasicMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215),this.map=void 0!==a.map?a.map:null,this.size=void 0!==a.size?a.size:1,this.sizeAttenuation=void 0!==a.sizeAttenuation?a.sizeAttenuation:!0,this.vertexColors=void 0!==a.vertexColors?a.vertexColors:!1,this.fog=void 0!==a.fog?a.fog:!0},THREE.ParticleBasicMaterial.prototype=new THREE.Material,THREE.ParticleBasicMaterial.prototype.constructor=THREE.ParticleBasicMaterial,THREE.ShaderMaterial=function(a){THREE.Material.call(this,a),a=a||{},this.fragmentShader=void 0!==a.fragmentShader?a.fragmentShader:"void main() {}",this.vertexShader=void 0!==a.vertexShader?a.vertexShader:"void main() {}",this.uniforms=void 0!==a.uniforms?a.uniforms:{},this.attributes=a.attributes,this.shading=void 0!==a.shading?a.shading:THREE.SmoothShading,this.wireframe=void 0!==a.wireframe?a.wireframe:!1,this.wireframeLinewidth=void 0!==a.wireframeLinewidth?a.wireframeLinewidth:1,this.fog=void 0!==a.fog?a.fog:!1,this.lights=void 0!==a.lights?a.lights:!1,this.vertexColors=void 0!==a.vertexColors?a.vertexColors:THREE.NoColors,this.skinning=void 0!==a.skinning?a.skinning:!1,this.morphTargets=void 0!==a.morphTargets?a.morphTargets:!1,this.morphNormals=void 0!==a.morphNormals?a.morphNormals:!1},THREE.ShaderMaterial.prototype=new THREE.Material,THREE.ShaderMaterial.prototype.constructor=THREE.ShaderMaterial,THREE.Texture=function(a,b,c,d,e,f,g,h){this.id=THREE.TextureCount++,this.image=a,this.mapping=void 0!==b?b:new THREE.UVMapping,this.wrapS=void 0!==c?c:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==d?d:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==e?e:THREE.LinearFilter,this.minFilter=void 0!==f?f:THREE.LinearMipMapLinearFilter,this.format=void 0!==g?g:THREE.RGBAFormat,this.type=void 0!==h?h:THREE.UnsignedByteType,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.generateMipmaps=!0,this.needsUpdate=this.premultiplyAlpha=!1,this.onUpdate=null},THREE.Texture.prototype={constructor:THREE.Texture,clone:function(){var a=new THREE.Texture(this.image,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter,this.format,this.type);return a.offset.copy(this.offset),a.repeat.copy(this.repeat),a}},THREE.TextureCount=0,THREE.MultiplyOperation=0,THREE.MixOperation=1,THREE.UVMapping=function(){},THREE.CubeReflectionMapping=function(){},THREE.CubeRefractionMapping=function(){},THREE.SphericalReflectionMapping=function(){},THREE.SphericalRefractionMapping=function(){},THREE.RepeatWrapping=0,THREE.ClampToEdgeWrapping=1,THREE.MirroredRepeatWrapping=2,THREE.NearestFilter=3,THREE.NearestMipMapNearestFilter=4,THREE.NearestMipMapLinearFilter=5,THREE.LinearFilter=6,THREE.LinearMipMapNearestFilter=7,THREE.LinearMipMapLinearFilter=8,THREE.ByteType=9,THREE.UnsignedByteType=10,THREE.ShortType=11,THREE.UnsignedShortType=12,THREE.IntType=13,THREE.UnsignedIntType=14,THREE.FloatType=15,THREE.AlphaFormat=16,THREE.RGBFormat=17,THREE.RGBAFormat=18,THREE.LuminanceFormat=19,THREE.LuminanceAlphaFormat=20,THREE.DataTexture=function(a,b,c,d,e,f,g,h,i,j){THREE.Texture.call(this,null,f,g,h,i,j,d,e),this.image={data:a,width:b,height:c}},THREE.DataTexture.prototype=new THREE.Texture,THREE.DataTexture.prototype.constructor=THREE.DataTexture,THREE.DataTexture.prototype.clone=function(){var a=new THREE.DataTexture(this.image.data,this.image.width,this.image.height,this.format,this.type,this.mapping,this.wrapS,this.wrapT,this.magFilter,this.minFilter);return a.offset.copy(this.offset),a.repeat.copy(this.repeat),a},THREE.Particle=function(a){THREE.Object3D.call(this),this.material=a},THREE.Particle.prototype=new THREE.Object3D,THREE.Particle.prototype.constructor=THREE.Particle,THREE.ParticleSystem=function(a,b){THREE.Object3D.call(this),this.geometry=a,this.material=void 0!==b?b:new THREE.ParticleBasicMaterial({color:16777215*Math.random()}),this.sortParticles=!1,this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=a.boundingSphere.radius),this.frustumCulled=!1},THREE.ParticleSystem.prototype=new THREE.Object3D,THREE.ParticleSystem.prototype.constructor=THREE.ParticleSystem,THREE.Line=function(a,b,c){THREE.Object3D.call(this),this.geometry=a,this.material=void 0!==b?b:new THREE.LineBasicMaterial({color:16777215*Math.random()}),this.type=void 0!==c?c:THREE.LineStrip,this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere())},THREE.LineStrip=0,THREE.LinePieces=1,THREE.Line.prototype=new THREE.Object3D,THREE.Line.prototype.constructor=THREE.Line,THREE.Mesh=function(a,b){if(THREE.Object3D.call(this),this.geometry=a,this.material=void 0!==b?b:new THREE.MeshBasicMaterial({color:16777215*Math.random(),wireframe:!0}),this.geometry&&(this.geometry.boundingSphere||this.geometry.computeBoundingSphere(),this.boundRadius=a.boundingSphere.radius,this.geometry.morphTargets.length)){this.morphTargetBase=-1,this.morphTargetForcedOrder=[],this.morphTargetInfluences=[],this.morphTargetDictionary={};for(var c=0;c<this.geometry.morphTargets.length;c++)this.morphTargetInfluences.push(0),this.morphTargetDictionary[this.geometry.morphTargets[c].name]=c}},THREE.Mesh.prototype=new THREE.Object3D,THREE.Mesh.prototype.constructor=THREE.Mesh,THREE.Mesh.prototype.supr=THREE.Object3D.prototype,THREE.Mesh.prototype.getMorphTargetIndexByName=function(a){return void 0!==this.morphTargetDictionary[a]?this.morphTargetDictionary[a]:0},THREE.Ribbon=function(a,b){THREE.Object3D.call(this),this.geometry=a,this.material=b},THREE.Ribbon.prototype=new THREE.Object3D,THREE.Ribbon.prototype.constructor=THREE.Ribbon,THREE.LOD=function(){THREE.Object3D.call(this),this.LODs=[]},THREE.LOD.prototype=new THREE.Object3D,THREE.LOD.prototype.constructor=THREE.LOD,THREE.LOD.prototype.supr=THREE.Object3D.prototype,THREE.LOD.prototype.addLevel=function(a,b){void 0===b&&(b=0);for(var b=Math.abs(b),c=0;c<this.LODs.length&&!(b<this.LODs[c].visibleAtDistance);c++);this.LODs.splice(c,0,{visibleAtDistance:b,object3D:a}),this.add(a)},THREE.LOD.prototype.update=function(a){if(this.LODs.length>1){a.matrixWorldInverse.getInverse(a.matrixWorld),a=a.matrixWorldInverse,a=-(a.elements[2]*this.matrixWorld.elements[12]+a.elements[6]*this.matrixWorld.elements[13]+a.elements[10]*this.matrixWorld.elements[14]+a.elements[14]),this.LODs[0].object3D.visible=!0;for(var b=1;b<this.LODs.length&&a>=this.LODs[b].visibleAtDistance;b++)this.LODs[b-1].object3D.visible=!1,this.LODs[b].object3D.visible=!0;for(;b<this.LODs.length;b++)this.LODs[b].object3D.visible=!1}},THREE.Sprite=function(a){THREE.Object3D.call(this),this.color=void 0!==a.color?new THREE.Color(a.color):new THREE.Color(16777215),this.map=void 0!==a.map?a.map:new THREE.Texture,this.blending=void 0!==a.blending?a.blending:THREE.NormalBlending,this.blendSrc=void 0!==a.blendSrc?a.blendSrc:THREE.SrcAlphaFactor,this.blendDst=void 0!==a.blendDst?a.blendDst:THREE.OneMinusSrcAlphaFactor,this.blendEquation=void 0!==a.blendEquation?a.blendEquation:THREE.AddEquation,this.useScreenCoordinates=void 0!==a.useScreenCoordinates?a.useScreenCoordinates:!0,this.mergeIntoThis3D=void 0!==a.mergeIntoThis3D?a.mergeIntoThis3D:!this.useScreenCoordinates,this.affectedByDistance=void 0!==a.affectedByDistance?a.affectedByDistance:!this.useScreenCoordinates,this.scaleByViewport=void 0!==a.scaleByViewport?a.scaleByViewport:!this.affectedByDistance,this.alignment=a.alignment instanceof THREE.Vector2?a.alignment:THREE.SpriteAlignment.center,this.rotation3d=this.rotation,this.rotation=0,this.opacity=1,this.uvOffset=new THREE.Vector2(0,0),this.uvScale=new THREE.Vector2(1,1)},THREE.Sprite.prototype=new THREE.Object3D,THREE.Sprite.prototype.constructor=THREE.Sprite,THREE.Sprite.prototype.updateMatrix=function(){this.matrix.setPosition(this.position),this.rotation3d.set(0,0,this.rotation),this.matrix.setRotationFromEuler(this.rotation3d),1===this.scale.x&&1===this.scale.y||(this.matrix.scale(this.scale),this.boundRadiusScale=Math.max(this.scale.x,this.scale.y)),this.matrixWorldNeedsUpdate=!0},THREE.SpriteAlignment={},THREE.SpriteAlignment.topLeft=new THREE.Vector2(1,-1),THREE.SpriteAlignment.topCenter=new THREE.Vector2(0,-1),THREE.SpriteAlignment.topRight=new THREE.Vector2(-1,-1),THREE.SpriteAlignment.centerLeft=new THREE.Vector2(1,0),THREE.SpriteAlignment.center=new THREE.Vector2(0,0),THREE.SpriteAlignment.centerRight=new THREE.Vector2(-1,0),THREE.SpriteAlignment.bottomLeft=new THREE.Vector2(1,1),THREE.SpriteAlignment.bottomCenter=new THREE.Vector2(0,1),THREE.SpriteAlignment.bottomRight=new THREE.Vector2(-1,1),THREE.Scene=function(){THREE.Object3D.call(this),this.overrideMaterial=this.fog=null,this.matrixAutoUpdate=!1,this.__objects=[],this.__lights=[],this.__objectsAdded=[],this.__objectsRemoved=[]},THREE.Scene.prototype=new THREE.Object3D,THREE.Scene.prototype.constructor=THREE.Scene,THREE.Scene.prototype.__addObject=function(a){if(a instanceof THREE.Light)-1===this.__lights.indexOf(a)&&this.__lights.push(a);else if(!(a instanceof THREE.Camera)&&-1===this.__objects.indexOf(a)){this.__objects.push(a),this.__objectsAdded.push(a);var b=this.__objectsRemoved.indexOf(a);-1!==b&&this.__objectsRemoved.splice(b,1)}for(b=0;b<a.children.length;b++)this.__addObject(a.children[b])},THREE.Scene.prototype.__removeObject=function(a){if(a instanceof THREE.Light){var b=this.__lights.indexOf(a);-1!==b&&this.__lights.splice(b,1)}else a instanceof THREE.Camera||(b=this.__objects.indexOf(a),-1!==b&&(this.__objects.splice(b,1),this.__objectsRemoved.push(a),b=this.__objectsAdded.indexOf(a),-1!==b&&this.__objectsAdded.splice(b,1)));for(b=0;b<a.children.length;b++)this.__removeObject(a.children[b])},THREE.Fog=function(a,b,c){this.color=new THREE.Color(a),this.near=void 0!==b?b:1,this.far=void 0!==c?c:1e3},THREE.FogExp2=function(a,b){this.color=new THREE.Color(a),this.density=void 0!==b?b:25e-5},THREE.ShaderChunk={fog_pars_fragment:"#ifdef USE_FOG\nuniform vec3 fogColor;\n#ifdef FOG_EXP2\nuniform float fogDensity;\n#else\nuniform float fogNear;\nuniform float fogFar;\n#endif\n#endif",fog_fragment:"#ifdef USE_FOG\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\n#ifdef FOG_EXP2\nconst float LOG2 = 1.442695;\nfloat fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\nfogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n#else\nfloat fogFactor = smoothstep( fogNear, fogFar, depth );\n#endif\ngl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float reflectivity;\nuniform samplerCube envMap;\nuniform float flipEnvMap;\nuniform int combine;\n#endif",envmap_fragment:"#ifdef USE_ENVMAP\n#ifdef DOUBLE_SIDED\nfloat flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\nvec4 cubeColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * vReflect.x, vReflect.yz ) );\n#else\nvec4 cubeColor = textureCube( envMap, vec3( flipEnvMap * vReflect.x, vReflect.yz ) );\n#endif\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\nif ( combine == 1 ) {\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, reflectivity );\n} else {\ngl_FragColor.xyz = gl_FragColor.xyz * cubeColor.xyz;\n}\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\nvarying vec3 vReflect;\nuniform float refractionRatio;\nuniform bool useRefract;\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvec3 nWorld = mat3( objectMatrix[ 0 ].xyz, objectMatrix[ 1 ].xyz, objectMatrix[ 2 ].xyz ) * normal;\nif ( useRefract ) {\nvReflect = refract( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ), refractionRatio );\n} else {\nvReflect = reflect( normalize( mPosition.xyz - cameraPosition ), normalize( nWorld.xyz ) );\n}\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\nuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\ngl_FragColor = gl_FragColor * texture2D( map, gl_PointCoord );\n#endif",map_pars_vertex:"#ifdef USE_MAP\nvarying vec2 vUv;\nuniform vec4 offsetRepeat;\n#endif",map_pars_fragment:"#ifdef USE_MAP\nvarying vec2 vUv;\nuniform sampler2D map;\n#endif",map_vertex:"#ifdef USE_MAP\nvUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n#endif",map_fragment:"#ifdef USE_MAP\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( map, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( map, vUv );\n#endif\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\nuniform sampler2D lightMap;\n#endif",lightmap_pars_vertex:"#ifdef USE_LIGHTMAP\nvarying vec2 vUv2;\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\ngl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n#endif",lightmap_vertex:"#ifdef USE_LIGHTMAP\nvUv2 = uv2;\n#endif",lights_lambert_pars_vertex:"uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngle[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif",
lights_lambert_vertex:"vLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\nvLightBack = vec3( 0.0 );\n#endif\ntransformedNormal = normalize( transformedNormal );\n#if MAX_DIR_LIGHTS > 0\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( transformedNormal, dirVector );\nvec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\ndirectionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\ndirectionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n#ifdef DOUBLE_SIDED\nvLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n#endif\n}\n#endif\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\npointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\npointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n#ifdef DOUBLE_SIDED\nvLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nlVector = normalize( lVector );\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - mPosition.xyz ) );\nif ( spotEffect > spotLightAngle[ i ] ) {\nspotEffect = pow( spotEffect, spotLightExponent[ i ] );\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nfloat dotProduct = dot( transformedNormal, lVector );\nvec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n#ifdef DOUBLE_SIDED\nvec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n#endif\n#endif\n#ifdef WRAP_AROUND\nvec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\nspotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n#ifdef DOUBLE_SIDED\nspotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n#endif\n#endif\nvLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n#ifdef DOUBLE_SIDED\nvLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n#endif\n}\n}\n#endif\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n#ifdef DOUBLE_SIDED\nvLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n#endif",lights_phong_pars_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvarying vec3 vWorldPosition;\n#endif",lights_phong_vertex:"#ifndef PHONG_PER_PIXEL\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nfor( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nvSpotLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvWorldPosition = mPosition.xyz;\n#endif",lights_phong_pars_fragment:"uniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n#else\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#endif\n#if MAX_SPOT_LIGHTS > 0\nuniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\nuniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\nuniform float spotLightAngle[ MAX_SPOT_LIGHTS ];\nuniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n#ifdef PHONG_PER_PIXEL\nuniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n#else\nvarying vec4 vSpotLight[ MAX_SPOT_LIGHTS ];\n#endif\nvarying vec3 vWorldPosition;\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;",lights_phong_fragment:"vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#ifdef DOUBLE_SIDED\nnormal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n#endif\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse  = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vPointLight[ i ].xyz );\nfloat lDistance = vPointLight[ i ].w;\n#endif\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dotProduct, 0.0 );\n#endif\npointDiffuse  += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\nvec3 pointHalfVector = normalize( lVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = max( pow( pointDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n#else\npointSpecular += specular * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance;\n#endif\n}\n#endif\n#if MAX_SPOT_LIGHTS > 0\nvec3 spotDiffuse  = vec3( 0.0 );\nvec3 spotSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n#ifdef PHONG_PER_PIXEL\nvec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz + vViewPosition.xyz;\nfloat lDistance = 1.0;\nif ( spotLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\n#else\nvec3 lVector = normalize( vSpotLight[ i ].xyz );\nfloat lDistance = vSpotLight[ i ].w;\n#endif\nfloat spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\nif ( spotEffect > spotLightAngle[ i ] ) {\nspotEffect = pow( spotEffect, spotLightExponent[ i ] );\nfloat dotProduct = dot( normal, lVector );\n#ifdef WRAP_AROUND\nfloat spotDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 spotDiffuseWeight = mix( vec3 ( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n#else\nfloat spotDiffuseWeight = max( dotProduct, 0.0 );\n#endif\nspotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\nvec3 spotHalfVector = normalize( lVector + viewPosition );\nfloat spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\nfloat spotSpecularWeight = max( pow( spotDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( lVector, spotHalfVector ), 5.0 );\nspotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n#else\nspotSpecular += specular * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * spotEffect;\n#endif\n}\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse  = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\nfloat dotProduct = dot( normal, dirVector );\n#ifdef WRAP_AROUND\nfloat dirDiffuseWeightFull = max( dotProduct, 0.0 );\nfloat dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dotProduct, 0.0 );\n#endif\ndirDiffuse  += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = max( pow( dirDotNormalHalf, shininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( shininess + 2.0001 ) / 8.0;\nvec3 schlick = specular + vec3( 1.0 - specular ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\n#if MAX_SPOT_LIGHTS > 0\ntotalDiffuse += spotDiffuse;\ntotalSpecular += spotSpecular;\n#endif\n#ifdef METAL\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_fragment:"#ifdef USE_COLOR\ngl_FragColor = gl_FragColor * vec4( vColor, opacity );\n#endif",color_pars_vertex:"#ifdef USE_COLOR\nvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n#ifdef GAMMA_INPUT\nvColor = color * color;\n#else\nvColor = color;\n#endif\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\nuniform mat4 boneGlobalMatrices[ MAX_BONES ];\n#endif",skinning_vertex:"#ifdef USE_SKINNING\ngl_Position  = ( boneGlobalMatrices[ int( skinIndex.x ) ] * skinVertexA ) * skinWeight.x;\ngl_Position += ( boneGlobalMatrices[ int( skinIndex.y ) ] * skinVertexB ) * skinWeight.y;\ngl_Position  = projectionMatrix * modelViewMatrix * gl_Position;\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n#ifndef USE_MORPHNORMALS\nuniform float morphTargetInfluences[ 8 ];\n#else\nuniform float morphTargetInfluences[ 4 ];\n#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\nvec3 morphed = vec3( 0.0 );\nmorphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\nmorphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\nmorphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\nmorphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n#ifndef USE_MORPHNORMALS\nmorphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\nmorphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\nmorphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\nmorphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n#endif\nmorphed += position;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( morphed, 1.0 );\n#endif",default_vertex:"#ifndef USE_MORPHTARGETS\n#ifndef USE_SKINNING\ngl_Position = projectionMatrix * mvPosition;\n#endif\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\nvec3 morphedNormal = vec3( 0.0 );\nmorphedNormal +=  ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\nmorphedNormal +=  ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\nmorphedNormal +=  ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\nmorphedNormal +=  ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\nmorphedNormal += normal;\nvec3 transformedNormal = normalMatrix * morphedNormal;\n#else\nvec3 transformedNormal = normalMatrix * normal;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\nuniform sampler2D shadowMap[ MAX_SHADOWS ];\nuniform vec2 shadowMapSize[ MAX_SHADOWS ];\nuniform float shadowDarkness[ MAX_SHADOWS ];\nuniform float shadowBias[ MAX_SHADOWS ];\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nfloat unpackDepth( const in vec4 rgba_depth ) {\nconst vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\nfloat depth = dot( rgba_depth, bit_shift );\nreturn depth;\n}\n#endif",shadowmap_fragment:"#ifdef USE_SHADOWMAP\n#ifdef SHADOWMAP_DEBUG\nvec3 frustumColors[3];\nfrustumColors[0] = vec3( 1.0, 0.5, 0.0 );\nfrustumColors[1] = vec3( 0.0, 1.0, 0.8 );\nfrustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n#endif\n#ifdef SHADOWMAP_CASCADE\nint inFrustumCount = 0;\n#endif\nfloat fDepth;\nvec3 shadowColor = vec3( 1.0 );\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\nvec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\nbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\nbool inFrustum = all( inFrustumVec );\n#ifdef SHADOWMAP_CASCADE\ninFrustumCount += int( inFrustum );\nbvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n#else\nbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n#endif\nbool frustumTest = all( frustumTestVec );\nif ( frustumTest ) {\nshadowCoord.z += shadowBias[ i ];\n#ifdef SHADOWMAP_SOFT\nfloat shadow = 0.0;\nconst float shadowDelta = 1.0 / 9.0;\nfloat xPixelOffset = 1.0 / shadowMapSize[ i ].x;\nfloat yPixelOffset = 1.0 / shadowMapSize[ i ].y;\nfloat dx0 = -1.25 * xPixelOffset;\nfloat dy0 = -1.25 * yPixelOffset;\nfloat dx1 = 1.25 * xPixelOffset;\nfloat dy1 = 1.25 * yPixelOffset;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nfDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\nif ( fDepth < shadowCoord.z ) shadow += shadowDelta;\nshadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n#else\nvec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\nfloat fDepth = unpackDepth( rgbaDepth );\nif ( fDepth < shadowCoord.z )\nshadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n#endif\n}\n#ifdef SHADOWMAP_DEBUG\n#ifdef SHADOWMAP_CASCADE\nif ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n#else\nif ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n#endif\n#endif\n}\n#ifdef GAMMA_OUTPUT\nshadowColor *= shadowColor;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\nvarying vec4 vShadowCoord[ MAX_SHADOWS ];\nuniform mat4 shadowMatrix[ MAX_SHADOWS ];\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\nfor( int i = 0; i < MAX_SHADOWS; i ++ ) {\n#ifdef USE_MORPHTARGETS\nvShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( morphed, 1.0 );\n#else\nvShadowCoord[ i ] = shadowMatrix[ i ] * objectMatrix * vec4( position, 1.0 );\n#endif\n}\n#endif",alphatest_fragment:"#ifdef ALPHATEST\nif ( gl_FragColor.a < ALPHATEST ) discard;\n#endif",linear_to_gamma_fragment:"#ifdef GAMMA_OUTPUT\ngl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n#endif"},THREE.UniformsUtils={merge:function(a){var b,c,d,e={};for(b=0;b<a.length;b++){d=this.clone(a[b]);for(c in d)e[c]=d[c]}return e},clone:function(a){var b,c,d,e={};for(b in a){e[b]={};for(c in a[b])d=a[b][c],e[b][c]=d instanceof THREE.Color||d instanceof THREE.Vector2||d instanceof THREE.Vector3||d instanceof THREE.Vector4||d instanceof THREE.Matrix4||d instanceof THREE.Texture?d.clone():d instanceof Array?d.slice():d}return e}},THREE.UniformsLib={common:{diffuse:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},map:{type:"t",value:0,texture:null},offsetRepeat:{type:"v4",value:new THREE.Vector4(0,0,1,1)},lightMap:{type:"t",value:2,texture:null},envMap:{type:"t",value:1,texture:null},flipEnvMap:{type:"f",value:-1},useRefract:{type:"i",value:0},reflectivity:{type:"f",value:1},refractionRatio:{type:"f",value:.98},combine:{type:"i",value:0},morphTargetInfluences:{type:"f",value:0}},fog:{fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},lights:{ambientLightColor:{type:"fv",value:[]},directionalLightDirection:{type:"fv",value:[]},directionalLightColor:{type:"fv",value:[]},pointLightColor:{type:"fv",value:[]},pointLightPosition:{type:"fv",value:[]},pointLightDistance:{type:"fv1",value:[]},spotLightColor:{type:"fv",value:[]},spotLightPosition:{type:"fv",value:[]},spotLightDirection:{type:"fv",value:[]},spotLightDistance:{type:"fv1",value:[]},spotLightAngle:{type:"fv1",value:[]},spotLightExponent:{type:"fv1",value:[]}},particle:{psColor:{type:"c",value:new THREE.Color(15658734)},opacity:{type:"f",value:1},size:{type:"f",value:1},scale:{type:"f",value:1},map:{type:"t",value:0,texture:null},fogDensity:{type:"f",value:25e-5},fogNear:{type:"f",value:1},fogFar:{type:"f",value:2e3},fogColor:{type:"c",value:new THREE.Color(16777215)}},shadowmap:{shadowMap:{type:"tv",value:6,texture:[]},shadowMapSize:{type:"v2v",value:[]},shadowBias:{type:"fv1",value:[]},shadowDarkness:{type:"fv1",value:[]},shadowMatrix:{type:"m4v",value:[]}}},THREE.ShaderLib={depth:{uniforms:{mNear:{type:"f",value:1},mFar:{type:"f",value:2e3},opacity:{type:"f",value:1}},vertexShader:"void main() {\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float mNear;\nuniform float mFar;\nuniform float opacity;\nvoid main() {\nfloat depth = gl_FragCoord.z / gl_FragCoord.w;\nfloat color = 1.0 - smoothstep( mNear, mFar, depth );\ngl_FragColor = vec4( vec3( color ), opacity );\n}"},normal:{uniforms:{opacity:{type:"f",value:1}},vertexShader:"varying vec3 vNormal;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvNormal = normalMatrix * normal;\ngl_Position = projectionMatrix * mvPosition;\n}",fragmentShader:"uniform float opacity;\nvarying vec3 vNormal;\nvoid main() {\ngl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );\n}"},basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.shadowmap]),vertexShader:[THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( diffuse, opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},lambert:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["varying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_lambert_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.color_vertex,THREE.ShaderChunk.morphnormal_vertex,"#ifndef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\n#endif",THREE.ShaderChunk.lights_lambert_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\nvarying vec3 vLightBack;\n#endif",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,"#ifdef DOUBLE_SIDED\nif ( gl_FrontFacing )\ngl_FragColor.xyz *= vLightFront;\nelse\ngl_FragColor.xyz *= vLightBack;\n#else\ngl_FragColor.xyz *= vLightFront;\n#endif",THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},phong:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.common,THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{ambient:{type:"c",value:new THREE.Color(16777215)},emissive:{type:"c",value:new THREE.Color(0)},specular:{type:"c",value:new THREE.Color(1118481)},shininess:{type:"f",value:30},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),vertexShader:["varying vec3 vViewPosition;\nvarying vec3 vNormal;",THREE.ShaderChunk.map_pars_vertex,THREE.ShaderChunk.lightmap_pars_vertex,THREE.ShaderChunk.envmap_pars_vertex,THREE.ShaderChunk.lights_phong_pars_vertex,THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.skinning_pars_vertex,THREE.ShaderChunk.morphtarget_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.map_vertex,THREE.ShaderChunk.lightmap_vertex,THREE.ShaderChunk.envmap_vertex,THREE.ShaderChunk.color_vertex,"#ifndef USE_ENVMAP\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\n#endif\nvViewPosition = -mvPosition.xyz;",THREE.ShaderChunk.morphnormal_vertex,"vNormal = transformedNormal;",THREE.ShaderChunk.lights_phong_vertex,THREE.ShaderChunk.skinning_vertex,THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 diffuse;\nuniform float opacity;\nuniform vec3 ambient;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_pars_fragment,THREE.ShaderChunk.lightmap_pars_fragment,THREE.ShaderChunk.envmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.lights_phong_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3 ( 1.0 ), opacity );",THREE.ShaderChunk.map_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.lights_phong_fragment,THREE.ShaderChunk.lightmap_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.envmap_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},particle_basic:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.particle,THREE.UniformsLib.shadowmap]),vertexShader:["uniform float size;\nuniform float scale;",THREE.ShaderChunk.color_pars_vertex,THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {",THREE.ShaderChunk.color_vertex,"vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n#ifdef USE_SIZEATTENUATION\ngl_PointSize = size * ( scale / length( mvPosition.xyz ) );\n#else\ngl_PointSize = size;\n#endif\ngl_Position = projectionMatrix * mvPosition;",THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n"),fragmentShader:["uniform vec3 psColor;\nuniform float opacity;",THREE.ShaderChunk.color_pars_fragment,THREE.ShaderChunk.map_particle_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,THREE.ShaderChunk.shadowmap_pars_fragment,"void main() {\ngl_FragColor = vec4( psColor, opacity );",THREE.ShaderChunk.map_particle_fragment,THREE.ShaderChunk.alphatest_fragment,THREE.ShaderChunk.color_fragment,THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n")},depthRGBA:{uniforms:{},vertexShader:[THREE.ShaderChunk.morphtarget_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );",THREE.ShaderChunk.morphtarget_vertex,THREE.ShaderChunk.default_vertex,"}"].join("\n"),fragmentShader:"vec4 pack_depth( const in float depth ) {\nconst vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );\nconst vec4 bit_mask  = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );\nvec4 res = fract( depth * bit_shift );\nres -= res.xxyz * bit_mask;\nreturn res;\n}\nvoid main() {\ngl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );\n}"}},THREE.WebGLRenderer=function(a){function b(a,b){var c=a.vertices.length,d=b.material;if(d.attributes){void 0===a.__webglCustomAttributesList&&(a.__webglCustomAttributesList=[]);for(var e in d.attributes){var f=d.attributes[e];if(!f.__webglInitialized||f.createUniqueBuffers){f.__webglInitialized=!0;var g=1;"v2"===f.type?g=2:"v3"===f.type?g=3:"v4"===f.type?g=4:"c"===f.type&&(g=3),f.size=g,f.array=new Float32Array(c*g),f.buffer=F.createBuffer(),f.buffer.belongsToAttribute=e,f.needsUpdate=!0}a.__webglCustomAttributesList.push(f)}}}function c(a,b){return!a.material||a.material instanceof THREE.MeshFaceMaterial?b.materialIndex>=0?a.geometry.materials[b.materialIndex]:void 0:a.material}function d(a){return a instanceof THREE.MeshBasicMaterial&&!a.envMap||a instanceof THREE.MeshDepthMaterial?!1:a&&void 0!==a.shading&&a.shading===THREE.SmoothShading?THREE.SmoothShading:THREE.FlatShading}function e(a){return!!(a.map||a.lightMap||a instanceof THREE.ShaderMaterial)}function f(a,b,c){var d,e,f,g,h=a.vertices;g=h.length;var i=a.colors,j=i.length,k=a.__vertexArray,l=a.__colorArray,m=a.__sortArray,n=a.verticesNeedUpdate,o=a.colorsNeedUpdate,p=a.__webglCustomAttributesList;if(c.sortParticles){for(ga.copy(fa),ga.multiplySelf(c.matrixWorld),d=0;g>d;d++)e=h[d],ha.copy(e),ga.multiplyVector3(ha),m[d]=[ha.z,d];for(m.sort(function(a,b){return b[0]-a[0]}),d=0;g>d;d++)e=h[m[d][1]],f=3*d,k[f]=e.x,k[f+1]=e.y,k[f+2]=e.z;for(d=0;j>d;d++)f=3*d,e=i[m[d][1]],l[f]=e.r,l[f+1]=e.g,l[f+2]=e.b;if(p)for(i=0,j=p.length;j>i;i++)if(h=p[i],void 0===h.boundTo||"vertices"===h.boundTo)if(f=0,e=h.value.length,1===h.size)for(d=0;e>d;d++)g=m[d][1],h.array[d]=h.value[g];else if(2===h.size)for(d=0;e>d;d++)g=m[d][1],g=h.value[g],h.array[f]=g.x,h.array[f+1]=g.y,f+=2;else if(3===h.size)if("c"===h.type)for(d=0;e>d;d++)g=m[d][1],g=h.value[g],h.array[f]=g.r,h.array[f+1]=g.g,h.array[f+2]=g.b,f+=3;else for(d=0;e>d;d++)g=m[d][1],g=h.value[g],h.array[f]=g.x,h.array[f+1]=g.y,h.array[f+2]=g.z,f+=3;else if(4===h.size)for(d=0;e>d;d++)g=m[d][1],g=h.value[g],h.array[f]=g.x,h.array[f+1]=g.y,h.array[f+2]=g.z,h.array[f+3]=g.w,f+=4}else{if(n)for(d=0;g>d;d++)e=h[d],f=3*d,k[f]=e.x,k[f+1]=e.y,k[f+2]=e.z;if(o)for(d=0;j>d;d++)e=i[d],f=3*d,l[f]=e.r,l[f+1]=e.g,l[f+2]=e.b;if(p)for(i=0,j=p.length;j>i;i++)if(h=p[i],h.needsUpdate&&(void 0===h.boundTo||"vertices"===h.boundTo))if(e=h.value.length,f=0,1===h.size)for(d=0;e>d;d++)h.array[d]=h.value[d];else if(2===h.size)for(d=0;e>d;d++)g=h.value[d],h.array[f]=g.x,h.array[f+1]=g.y,f+=2;else if(3===h.size)if("c"===h.type)for(d=0;e>d;d++)g=h.value[d],h.array[f]=g.r,h.array[f+1]=g.g,h.array[f+2]=g.b,f+=3;else for(d=0;e>d;d++)g=h.value[d],h.array[f]=g.x,h.array[f+1]=g.y,h.array[f+2]=g.z,f+=3;else if(4===h.size)for(d=0;e>d;d++)g=h.value[d],h.array[f]=g.x,h.array[f+1]=g.y,h.array[f+2]=g.z,h.array[f+3]=g.w,f+=4}if((n||c.sortParticles)&&(F.bindBuffer(F.ARRAY_BUFFER,a.__webglVertexBuffer),F.bufferData(F.ARRAY_BUFFER,k,b)),(o||c.sortParticles)&&(F.bindBuffer(F.ARRAY_BUFFER,a.__webglColorBuffer),
F.bufferData(F.ARRAY_BUFFER,l,b)),p)for(i=0,j=p.length;j>i;i++)h=p[i],(h.needsUpdate||c.sortParticles)&&(F.bindBuffer(F.ARRAY_BUFFER,h.buffer),F.bufferData(F.ARRAY_BUFFER,h.array,b))}function g(a,b){return b.z-a.z}function h(a,b,c){if(a.length)for(var d=0,e=a.length;e>d;d++)M=I=null,K=L=P=O=V=U=Q=-1,ja=!0,a[d].render(b,c,ca,da),M=I=null,K=L=P=O=V=U=Q=-1,ja=!0}function i(a,b,c,d,e,f,g,h){var i,j,k,l;b?(j=a.length-1,l=b=-1):(j=0,b=a.length,l=1);for(var m=j;m!==b;m+=l)if(i=a[m],i.render){if(j=i.object,k=i.buffer,h)i=h;else{if(i=i[c],!i)continue;g&&G.setBlending(i.blending,i.blendEquation,i.blendSrc,i.blendDst),G.setDepthTest(i.depthTest),G.setDepthWrite(i.depthWrite),p(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits)}G.setObjectFaces(j),k instanceof THREE.BufferGeometry?G.renderBufferDirect(d,e,f,i,k,j):G.renderBuffer(d,e,f,i,k,j)}}function j(a,b,c,d,e,f,g){for(var h,i,j=0,k=a.length;k>j;j++)if(h=a[j],i=h.object,i.visible){if(g)h=g;else{if(h=h[b],!h)continue;f&&G.setBlending(h.blending,h.blendEquation,h.blendSrc,h.blendDst),G.setDepthTest(h.depthTest),G.setDepthWrite(h.depthWrite),p(h.polygonOffset,h.polygonOffsetFactor,h.polygonOffsetUnits)}G.renderImmediateObject(c,d,e,h,i)}}function k(a,b,c){a.push({buffer:b,object:c,opaque:null,transparent:null})}function l(a){for(var b in a.attributes)if(a.attributes[b].needsUpdate)return!0;return!1}function m(a){for(var b in a.attributes)a.attributes[b].needsUpdate=!1}function n(a,b,c,d,e){if(d.program&&!d.needsUpdate||(G.initMaterial(d,b,c,e),d.needsUpdate=!1),d.morphTargets&&!e.__webglMorphTargetInfluences){e.__webglMorphTargetInfluences=new Float32Array(G.maxMorphTargets);for(var f=0,g=G.maxMorphTargets;g>f;f++)e.__webglMorphTargetInfluences[f]=0}var h=!1,f=d.program,g=f.uniforms,i=d.uniforms;if(f!==I&&(F.useProgram(f),I=f,h=!0),d.id!==K&&(K=d.id,h=!0),(h||a!==M)&&(F.uniformMatrix4fv(g.projectionMatrix,!1,a._projectionMatrixArray),a!==M&&(M=a)),h){if(c&&d.fog&&(i.fogColor.value=c.color,c instanceof THREE.Fog?(i.fogNear.value=c.near,i.fogFar.value=c.far):c instanceof THREE.FogExp2&&(i.fogDensity.value=c.density)),d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d.lights){if(ja){for(var j,k,l,m,n=0,o=0,p=0,q=ka,s=q.directional.colors,t=q.directional.positions,w=q.point.colors,x=q.point.positions,y=q.point.distances,z=q.spot.colors,A=q.spot.positions,B=q.spot.distances,C=q.spot.directions,D=q.spot.angles,E=q.spot.exponents,H=0,J=0,L=0,N=m=0,c=N=0,h=b.length;h>c;c++)j=b[c],j.onlyShadow||(k=j.color,l=j.intensity,m=j.distance,j instanceof THREE.AmbientLight?G.gammaInput?(n+=k.r*k.r,o+=k.g*k.g,p+=k.b*k.b):(n+=k.r,o+=k.g,p+=k.b):j instanceof THREE.DirectionalLight?(m=3*H,G.gammaInput?(s[m]=k.r*k.r*l*l,s[m+1]=k.g*k.g*l*l,s[m+2]=k.b*k.b*l*l):(s[m]=k.r*l,s[m+1]=k.g*l,s[m+2]=k.b*l),ia.copy(j.matrixWorld.getPosition()),ia.subSelf(j.target.matrixWorld.getPosition()),ia.normalize(),t[m]=ia.x,t[m+1]=ia.y,t[m+2]=ia.z,H+=1):j instanceof THREE.PointLight?(N=3*J,G.gammaInput?(w[N]=k.r*k.r*l*l,w[N+1]=k.g*k.g*l*l,w[N+2]=k.b*k.b*l*l):(w[N]=k.r*l,w[N+1]=k.g*l,w[N+2]=k.b*l),k=j.matrixWorld.getPosition(),x[N]=k.x,x[N+1]=k.y,x[N+2]=k.z,y[J]=m,J+=1):j instanceof THREE.SpotLight&&(N=3*L,G.gammaInput?(z[N]=k.r*k.r*l*l,z[N+1]=k.g*k.g*l*l,z[N+2]=k.b*k.b*l*l):(z[N]=k.r*l,z[N+1]=k.g*l,z[N+2]=k.b*l),k=j.matrixWorld.getPosition(),A[N]=k.x,A[N+1]=k.y,A[N+2]=k.z,B[L]=m,ia.copy(k),ia.subSelf(j.target.matrixWorld.getPosition()),ia.normalize(),C[N]=ia.x,C[N+1]=ia.y,C[N+2]=ia.z,D[L]=Math.cos(j.angle),E[L]=j.exponent,L+=1));for(c=3*H,h=s.length;h>c;c++)s[c]=0;for(c=3*J,h=w.length;h>c;c++)w[c]=0;for(c=3*L,h=z.length;h>c;c++)z[c]=0;q.directional.length=H,q.point.length=J,q.spot.length=L,q.ambient[0]=n,q.ambient[1]=o,q.ambient[2]=p,ja=!1}c=ka,i.ambientLightColor.value=c.ambient,i.directionalLightColor.value=c.directional.colors,i.directionalLightDirection.value=c.directional.positions,i.pointLightColor.value=c.point.colors,i.pointLightPosition.value=c.point.positions,i.pointLightDistance.value=c.point.distances,i.spotLightColor.value=c.spot.colors,i.spotLightPosition.value=c.spot.positions,i.spotLightDistance.value=c.spot.distances,i.spotLightDirection.value=c.spot.directions,i.spotLightAngle.value=c.spot.angles,i.spotLightExponent.value=c.spot.exponents}if((d instanceof THREE.MeshBasicMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.MeshPhongMaterial)&&(i.opacity.value=d.opacity,G.gammaInput?i.diffuse.value.copyGammaToLinear(d.color):i.diffuse.value=d.color,(i.map.texture=d.map)&&i.offsetRepeat.value.set(d.map.offset.x,d.map.offset.y,d.map.repeat.x,d.map.repeat.y),i.lightMap.texture=d.lightMap,i.envMap.texture=d.envMap,i.flipEnvMap.value=d.envMap instanceof THREE.WebGLRenderTargetCube?1:-1,i.reflectivity.value=d.reflectivity,i.refractionRatio.value=d.refractionRatio,i.combine.value=d.combine,i.useRefract.value=d.envMap&&d.envMap.mapping instanceof THREE.CubeRefractionMapping),d instanceof THREE.LineBasicMaterial?(i.diffuse.value=d.color,i.opacity.value=d.opacity):d instanceof THREE.ParticleBasicMaterial?(i.psColor.value=d.color,i.opacity.value=d.opacity,i.size.value=d.size,i.scale.value=v.height/2,i.map.texture=d.map):d instanceof THREE.MeshPhongMaterial?(i.shininess.value=d.shininess,G.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive),i.specular.value.copyGammaToLinear(d.specular)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive,i.specular.value=d.specular),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshLambertMaterial?(G.gammaInput?(i.ambient.value.copyGammaToLinear(d.ambient),i.emissive.value.copyGammaToLinear(d.emissive)):(i.ambient.value=d.ambient,i.emissive.value=d.emissive),d.wrapAround&&i.wrapRGB.value.copy(d.wrapRGB)):d instanceof THREE.MeshDepthMaterial?(i.mNear.value=a.near,i.mFar.value=a.far,i.opacity.value=d.opacity):d instanceof THREE.MeshNormalMaterial&&(i.opacity.value=d.opacity),e.receiveShadow&&!d._shadowPass&&i.shadowMatrix)for(h=c=0,j=b.length;j>h;h++)n=b[h],n.castShadow&&(n instanceof THREE.SpotLight||n instanceof THREE.DirectionalLight&&!n.shadowCascade)&&(i.shadowMap.texture[c]=n.shadowMap,i.shadowMapSize.value[c]=n.shadowMapSize,i.shadowMatrix.value[c]=n.shadowMatrix,i.shadowDarkness.value[c]=n.shadowDarkness,i.shadowBias.value[c]=n.shadowBias,c++);for(b=d.uniformsList,i=0,c=b.length;c>i;i++)if(n=f.uniforms[b[i][1]])switch(h=b[i][0],o=h.type,j=h.value,o){case"i":F.uniform1i(n,j);break;case"f":F.uniform1f(n,j);break;case"v2":F.uniform2f(n,j.x,j.y);break;case"v3":F.uniform3f(n,j.x,j.y,j.z);break;case"v4":F.uniform4f(n,j.x,j.y,j.z,j.w);break;case"c":F.uniform3f(n,j.r,j.g,j.b);break;case"fv1":F.uniform1fv(n,j);break;case"fv":F.uniform3fv(n,j);break;case"v2v":for(h._array||(h._array=new Float32Array(2*j.length)),o=0,p=j.length;p>o;o++)q=2*o,h._array[q]=j[o].x,h._array[q+1]=j[o].y;F.uniform2fv(n,h._array);break;case"v3v":for(h._array||(h._array=new Float32Array(3*j.length)),o=0,p=j.length;p>o;o++)q=3*o,h._array[q]=j[o].x,h._array[q+1]=j[o].y,h._array[q+2]=j[o].z;F.uniform3fv(n,h._array);break;case"v4v":for(h._array||(h._array=new Float32Array(4*j.length)),o=0,p=j.length;p>o;o++)q=4*o,h._array[q]=j[o].x,h._array[q+1]=j[o].y,h._array[q+2]=j[o].z,h._array[q+3]=j[o].w;F.uniform4fv(n,h._array);break;case"m4":h._array||(h._array=new Float32Array(16)),j.flattenToArray(h._array),F.uniformMatrix4fv(n,!1,h._array);break;case"m4v":for(h._array||(h._array=new Float32Array(16*j.length)),o=0,p=j.length;p>o;o++)j[o].flattenToArrayOffset(h._array,16*o);F.uniformMatrix4fv(n,!1,h._array);break;case"t":if(F.uniform1i(n,j),n=h.texture,!n)continue;if(n.image instanceof Array&&6===n.image.length){if(h=n,6===h.image.length)if(h.needsUpdate){for(h.image.__webglTextureCube||(h.image.__webglTextureCube=F.createTexture()),F.activeTexture(F.TEXTURE0+j),F.bindTexture(F.TEXTURE_CUBE_MAP,h.image.__webglTextureCube),j=[],n=0;6>n;n++)o=j,p=n,G.autoScaleCubemaps?(q=h.image[n],t=ma,q.width<=t&&q.height<=t||(w=Math.max(q.width,q.height),s=Math.floor(q.width*t/w),t=Math.floor(q.height*t/w),w=document.createElement("canvas"),w.width=s,w.height=t,w.getContext("2d").drawImage(q,0,0,q.width,q.height,0,0,s,t),q=w)):q=h.image[n],o[p]=q;for(n=j[0],o=0===(n.width&n.width-1)&&0===(n.height&n.height-1),p=u(h.format),q=u(h.type),r(F.TEXTURE_CUBE_MAP,h,o),n=0;6>n;n++)F.texImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+n,0,p,p,q,j[n]);h.generateMipmaps&&o&&F.generateMipmap(F.TEXTURE_CUBE_MAP),h.needsUpdate=!1,h.onUpdate&&h.onUpdate()}else F.activeTexture(F.TEXTURE0+j),F.bindTexture(F.TEXTURE_CUBE_MAP,h.image.__webglTextureCube)}else n instanceof THREE.WebGLRenderTargetCube?(h=n,F.activeTexture(F.TEXTURE0+j),F.bindTexture(F.TEXTURE_CUBE_MAP,h.__webglTexture)):G.setTexture(n,j);break;case"tv":if(!h._array)for(h._array=[],o=0,p=h.texture.length;p>o;o++)h._array[o]=j+o;for(F.uniform1iv(n,h._array),o=0,p=h.texture.length;p>o;o++)(n=h.texture[o])&&G.setTexture(n,h._array[o])}(d instanceof THREE.ShaderMaterial||d instanceof THREE.MeshPhongMaterial||d.envMap)&&null!==g.cameraPosition&&(b=a.matrixWorld.getPosition(),F.uniform3f(g.cameraPosition,b.x,b.y,b.z)),(d instanceof THREE.MeshPhongMaterial||d instanceof THREE.MeshLambertMaterial||d instanceof THREE.ShaderMaterial||d.skinning)&&null!==g.viewMatrix&&F.uniformMatrix4fv(g.viewMatrix,!1,a._viewMatrixArray),d.skinning&&F.uniformMatrix4fv(g.boneGlobalMatrices,!1,e.boneMatrices)}return F.uniformMatrix4fv(g.modelViewMatrix,!1,e._modelViewMatrix.elements),g.normalMatrix&&F.uniformMatrix3fv(g.normalMatrix,!1,e._normalMatrix.elements),null!==g.objectMatrix&&F.uniformMatrix4fv(g.objectMatrix,!1,e.matrixWorld.elements),f}function o(a,b){a._modelViewMatrix.multiply(b.matrixWorldInverse,a.matrixWorld),a._normalMatrix.getInverse(a._modelViewMatrix),a._normalMatrix.transpose()}function p(a,b,c){W!==a&&(a?F.enable(F.POLYGON_OFFSET_FILL):F.disable(F.POLYGON_OFFSET_FILL),W=a),!a||X===b&&Y===c||(F.polygonOffset(b,c),X=b,Y=c)}function q(a,b){var c;return"fragment"===a?c=F.createShader(F.FRAGMENT_SHADER):"vertex"===a&&(c=F.createShader(F.VERTEX_SHADER)),F.shaderSource(c,b),F.compileShader(c),F.getShaderParameter(c,F.COMPILE_STATUS)?c:null}function r(a,b,c){c?(F.texParameteri(a,F.TEXTURE_WRAP_S,u(b.wrapS)),F.texParameteri(a,F.TEXTURE_WRAP_T,u(b.wrapT)),F.texParameteri(a,F.TEXTURE_MAG_FILTER,u(b.magFilter)),F.texParameteri(a,F.TEXTURE_MIN_FILTER,u(b.minFilter))):(F.texParameteri(a,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(a,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE),F.texParameteri(a,F.TEXTURE_MAG_FILTER,t(b.magFilter)),F.texParameteri(a,F.TEXTURE_MIN_FILTER,t(b.minFilter)))}function s(a,b){F.bindRenderbuffer(F.RENDERBUFFER,a),b.depthBuffer&&!b.stencilBuffer?(F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_COMPONENT16,b.width,b.height),F.framebufferRenderbuffer(F.FRAMEBUFFER,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,a)):b.depthBuffer&&b.stencilBuffer?(F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_STENCIL,b.width,b.height),F.framebufferRenderbuffer(F.FRAMEBUFFER,F.DEPTH_STENCIL_ATTACHMENT,F.RENDERBUFFER,a)):F.renderbufferStorage(F.RENDERBUFFER,F.RGBA4,b.width,b.height)}function t(a){switch(a){case THREE.NearestFilter:case THREE.NearestMipMapNearestFilter:case THREE.NearestMipMapLinearFilter:return F.NEAREST;default:return F.LINEAR}}function u(a){switch(a){case THREE.RepeatWrapping:return F.REPEAT;case THREE.ClampToEdgeWrapping:return F.CLAMP_TO_EDGE;case THREE.MirroredRepeatWrapping:return F.MIRRORED_REPEAT;case THREE.NearestFilter:return F.NEAREST;case THREE.NearestMipMapNearestFilter:return F.NEAREST_MIPMAP_NEAREST;case THREE.NearestMipMapLinearFilter:return F.NEAREST_MIPMAP_LINEAR;case THREE.LinearFilter:return F.LINEAR;case THREE.LinearMipMapNearestFilter:return F.LINEAR_MIPMAP_NEAREST;case THREE.LinearMipMapLinearFilter:return F.LINEAR_MIPMAP_LINEAR;case THREE.ByteType:return F.BYTE;case THREE.UnsignedByteType:return F.UNSIGNED_BYTE;case THREE.ShortType:return F.SHORT;case THREE.UnsignedShortType:return F.UNSIGNED_SHORT;case THREE.IntType:return F.INT;case THREE.UnsignedIntType:return F.UNSIGNED_INT;case THREE.FloatType:return F.FLOAT;case THREE.AlphaFormat:return F.ALPHA;case THREE.RGBFormat:return F.RGB;case THREE.RGBAFormat:return F.RGBA;case THREE.LuminanceFormat:return F.LUMINANCE;case THREE.LuminanceAlphaFormat:return F.LUMINANCE_ALPHA;case THREE.AddEquation:return F.FUNC_ADD;case THREE.SubtractEquation:return F.FUNC_SUBTRACT;case THREE.ReverseSubtractEquation:return F.FUNC_REVERSE_SUBTRACT;case THREE.ZeroFactor:return F.ZERO;case THREE.OneFactor:return F.ONE;case THREE.SrcColorFactor:return F.SRC_COLOR;case THREE.OneMinusSrcColorFactor:return F.ONE_MINUS_SRC_COLOR;case THREE.SrcAlphaFactor:return F.SRC_ALPHA;case THREE.OneMinusSrcAlphaFactor:return F.ONE_MINUS_SRC_ALPHA;case THREE.DstAlphaFactor:return F.DST_ALPHA;case THREE.OneMinusDstAlphaFactor:return F.ONE_MINUS_DST_ALPHA;case THREE.DstColorFactor:return F.DST_COLOR;case THREE.OneMinusDstColorFactor:return F.ONE_MINUS_DST_COLOR;case THREE.SrcAlphaSaturateFactor:return F.SRC_ALPHA_SATURATE}return 0}var a=a||{},v=void 0!==a.canvas?a.canvas:document.createElement("canvas"),w=void 0!==a.precision?a.precision:"highp",x=void 0!==a.alpha?a.alpha:!0,y=void 0!==a.premultipliedAlpha?a.premultipliedAlpha:!0,z=void 0!==a.antialias?a.antialias:!1,A=void 0!==a.stencil?a.stencil:!0,B=void 0!==a.preserveDrawingBuffer?a.preserveDrawingBuffer:!1,C=void 0!==a.clearColor?new THREE.Color(a.clearColor):new THREE.Color(0),D=void 0!==a.clearAlpha?a.clearAlpha:0,E=void 0!==a.maxLights?a.maxLights:4;this.domElement=v,this.context=null,this.autoUpdateScene=this.autoUpdateObjects=this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.shadowMapEnabled=this.physicallyBasedShading=this.gammaOutput=this.gammaInput=!1,this.shadowMapCullFrontFaces=this.shadowMapSoft=this.shadowMapAutoUpdate=!0,this.shadowMapCascade=this.shadowMapDebug=!1,this.maxMorphTargets=8,this.maxMorphNormals=4,this.autoScaleCubemaps=!0,this.renderPluginsPre=[],this.renderPluginsPost=[],this.info={memory:{programs:0,geometries:0,textures:0},render:{calls:0,vertices:0,faces:0,points:0}};var F,G=this,H=[],I=null,J=null,K=-1,L=null,M=null,N=0,O=-1,P=-1,Q=-1,R=-1,S=-1,T=-1,U=-1,V=-1,W=null,X=null,Y=null,Z=null,$=0,_=0,aa=0,ba=0,ca=0,da=0,ea=new THREE.Frustum,fa=new THREE.Matrix4,ga=new THREE.Matrix4,ha=new THREE.Vector4,ia=new THREE.Vector3,ja=!0,ka={ambient:[0,0,0],directional:{length:0,colors:[],positions:[]},point:{length:0,colors:[],positions:[],distances:[]},spot:{length:0,colors:[],positions:[],distances:[],directions:[],angles:[],exponents:[]}};F=function(){var a;try{if(!(a=v.getContext("experimental-webgl",{alpha:x,premultipliedAlpha:y,antialias:z,stencil:A,preserveDrawingBuffer:B})))throw"Error creating WebGL context."}catch(b){}return a.getExtension("OES_texture_float")||void 0,a}(),F.clearColor(0,0,0,1),F.clearDepth(1),F.clearStencil(0),F.enable(F.DEPTH_TEST),F.depthFunc(F.LEQUAL),F.frontFace(F.CCW),F.cullFace(F.BACK),F.enable(F.CULL_FACE),F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA),F.clearColor(C.r,C.g,C.b,D),this.context=F;var la=F.getParameter(F.MAX_VERTEX_TEXTURE_IMAGE_UNITS);F.getParameter(F.MAX_TEXTURE_SIZE);var ma=F.getParameter(F.MAX_CUBE_MAP_TEXTURE_SIZE);this.getContext=function(){return F},this.supportsVertexTextures=function(){return la>0},this.setSize=function(a,b){v.width=a,v.height=b,this.setViewport(0,0,v.width,v.height)},this.setViewport=function(a,b,c,d){$=a,_=b,aa=c,ba=d,F.viewport($,_,aa,ba)},this.setScissor=function(a,b,c,d){F.scissor(a,b,c,d)},this.enableScissorTest=function(a){a?F.enable(F.SCISSOR_TEST):F.disable(F.SCISSOR_TEST)},this.setClearColorHex=function(a,b){C.setHex(a),D=b,F.clearColor(C.r,C.g,C.b,D)},this.setClearColor=function(a,b){C.copy(a),D=b,F.clearColor(C.r,C.g,C.b,D)},this.getClearColor=function(){return C},this.getClearAlpha=function(){return D},this.clear=function(a,b,c){var d=0;(void 0===a||a)&&(d|=F.COLOR_BUFFER_BIT),(void 0===b||b)&&(d|=F.DEPTH_BUFFER_BIT),(void 0===c||c)&&(d|=F.STENCIL_BUFFER_BIT),F.clear(d)},this.clearTarget=function(a,b,c,d){this.setRenderTarget(a),this.clear(b,c,d)},this.addPostPlugin=function(a){a.init(this),this.renderPluginsPost.push(a)},this.addPrePlugin=function(a){a.init(this),this.renderPluginsPre.push(a)},this.deallocateObject=function(a){if(a.__webglInit)if(a.__webglInit=!1,delete a._modelViewMatrix,delete a._normalMatrix,delete a._normalMatrixArray,delete a._modelViewMatrixArray,delete a._objectMatrixArray,a instanceof THREE.Mesh)for(var b in a.geometry.geometryGroups){var c=a.geometry.geometryGroups[b];F.deleteBuffer(c.__webglVertexBuffer),F.deleteBuffer(c.__webglNormalBuffer),F.deleteBuffer(c.__webglTangentBuffer),F.deleteBuffer(c.__webglColorBuffer),F.deleteBuffer(c.__webglUVBuffer),F.deleteBuffer(c.__webglUV2Buffer),F.deleteBuffer(c.__webglSkinVertexABuffer),F.deleteBuffer(c.__webglSkinVertexBBuffer),F.deleteBuffer(c.__webglSkinIndicesBuffer),F.deleteBuffer(c.__webglSkinWeightsBuffer),F.deleteBuffer(c.__webglFaceBuffer),F.deleteBuffer(c.__webglLineBuffer);var d=void 0,e=void 0;if(c.numMorphTargets)for(d=0,e=c.numMorphTargets;e>d;d++)F.deleteBuffer(c.__webglMorphTargetsBuffers[d]);if(c.numMorphNormals)for(d=0,e=c.numMorphNormals;e>d;d++)F.deleteBuffer(c.__webglMorphNormalsBuffers[d]);if(c.__webglCustomAttributesList){d=void 0;for(d in c.__webglCustomAttributesList)F.deleteBuffer(c.__webglCustomAttributesList[d].buffer)}G.info.memory.geometries--}else a instanceof THREE.Line&&(a=a.geometry,F.deleteBuffer(a.__webglVertexBuffer),F.deleteBuffer(a.__webglColorBuffer),G.info.memory.geometries--)},this.deallocateTexture=function(a){a.__webglInit&&(a.__webglInit=!1,F.deleteTexture(a.__webglTexture),G.info.memory.textures--)},this.deallocateRenderTarget=function(a){if(a&&a.__webglTexture)if(F.deleteTexture(a.__webglTexture),a instanceof THREE.WebGLRenderTargetCube)for(var b=0;6>b;b++)F.deleteFramebuffer(a.__webglFramebuffer[b]),F.deleteRenderbuffer(a.__webglRenderbuffer[b]);else F.deleteFramebuffer(a.__webglFramebuffer),F.deleteRenderbuffer(a.__webglRenderbuffer)},this.updateShadowMap=function(a,b){I=null,K=L=V=U=Q=-1,ja=!0,P=O=-1,this.shadowMapPlugin.update(a,b)},this.renderBufferImmediate=function(a,b,c){if(a.__webglVertexBuffer||(a.__webglVertexBuffer=F.createBuffer()),a.__webglNormalBuffer||(a.__webglNormalBuffer=F.createBuffer()),a.hasPos&&(F.bindBuffer(F.ARRAY_BUFFER,a.__webglVertexBuffer),F.bufferData(F.ARRAY_BUFFER,a.positionArray,F.DYNAMIC_DRAW),F.enableVertexAttribArray(b.attributes.position),F.vertexAttribPointer(b.attributes.position,3,F.FLOAT,!1,0,0)),a.hasNormal){if(F.bindBuffer(F.ARRAY_BUFFER,a.__webglNormalBuffer),c===THREE.FlatShading){var d,e,f,g,h,i,j,k,l,m,n=3*a.count;for(m=0;n>m;m+=9)c=a.normalArray,d=c[m],e=c[m+1],f=c[m+2],g=c[m+3],i=c[m+4],k=c[m+5],h=c[m+6],j=c[m+7],l=c[m+8],d=(d+g+h)/3,e=(e+i+j)/3,f=(f+k+l)/3,c[m]=d,c[m+1]=e,c[m+2]=f,c[m+3]=d,c[m+4]=e,c[m+5]=f,c[m+6]=d,c[m+7]=e,c[m+8]=f}F.bufferData(F.ARRAY_BUFFER,a.normalArray,F.DYNAMIC_DRAW),F.enableVertexAttribArray(b.attributes.normal),F.vertexAttribPointer(b.attributes.normal,3,F.FLOAT,!1,0,0)}F.drawArrays(F.TRIANGLES,0,a.count),a.count=0},this.renderBufferDirect=function(a,b,c,d,e,f){if(d.visible!==!1&&(c=n(a,b,c,d,f),a=c.attributes,b=!1,d=16777215*e.id+2*c.id+(d.wireframe?1:0),d!==L&&(L=d,b=!0),f instanceof THREE.Mesh))for(f=e.offsets,d=0,c=f.length;c>d;++d)b&&(F.bindBuffer(F.ARRAY_BUFFER,e.vertexPositionBuffer),F.vertexAttribPointer(a.position,e.vertexPositionBuffer.itemSize,F.FLOAT,!1,0,12*f[d].index),a.normal>=0&&e.vertexNormalBuffer&&(F.bindBuffer(F.ARRAY_BUFFER,e.vertexNormalBuffer),F.vertexAttribPointer(a.normal,e.vertexNormalBuffer.itemSize,F.FLOAT,!1,0,12*f[d].index)),a.uv>=0&&e.vertexUvBuffer&&(e.vertexUvBuffer?(F.bindBuffer(F.ARRAY_BUFFER,e.vertexUvBuffer),F.vertexAttribPointer(a.uv,e.vertexUvBuffer.itemSize,F.FLOAT,!1,0,8*f[d].index),F.enableVertexAttribArray(a.uv)):F.disableVertexAttribArray(a.uv)),a.color>=0&&e.vertexColorBuffer&&(F.bindBuffer(F.ARRAY_BUFFER,e.vertexColorBuffer),F.vertexAttribPointer(a.color,e.vertexColorBuffer.itemSize,F.FLOAT,!1,0,16*f[d].index)),F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,e.vertexIndexBuffer)),F.drawElements(F.TRIANGLES,f[d].count,F.UNSIGNED_SHORT,2*f[d].start),G.info.render.calls++,G.info.render.vertices=G.info.render.vertices+f[d].count,G.info.render.faces=G.info.render.faces+f[d].count/3},this.renderBuffer=function(a,b,c,d,e,f){if(d.visible!==!1){var g,h,c=n(a,b,c,d,f),b=c.attributes,a=!1,c=16777215*e.id+2*c.id+(d.wireframe?1:0);if(c!==L&&(L=c,a=!0),!d.morphTargets&&b.position>=0)a&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglVertexBuffer),F.vertexAttribPointer(b.position,3,F.FLOAT,!1,0,0));else if(f.morphTargetBase){if(c=d.program.attributes,-1!==f.morphTargetBase?(F.bindBuffer(F.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[f.morphTargetBase]),F.vertexAttribPointer(c.position,3,F.FLOAT,!1,0,0)):c.position>=0&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglVertexBuffer),F.vertexAttribPointer(c.position,3,F.FLOAT,!1,0,0)),f.morphTargetForcedOrder.length){g=0;var i=f.morphTargetForcedOrder;for(h=f.morphTargetInfluences;g<d.numSupportedMorphTargets&&g<i.length;)F.bindBuffer(F.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[i[g]]),F.vertexAttribPointer(c["morphTarget"+g],3,F.FLOAT,!1,0,0),d.morphNormals&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[i[g]]),F.vertexAttribPointer(c["morphNormal"+g],3,F.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[g]=h[i[g]],g++}else{var i=[],j=-1,k=0;h=f.morphTargetInfluences;var l,m=h.length;for(g=0,-1!==f.morphTargetBase&&(i[f.morphTargetBase]=!0);g<d.numSupportedMorphTargets;){for(l=0;m>l;l++)!i[l]&&h[l]>j&&(k=l,j=h[k]);F.bindBuffer(F.ARRAY_BUFFER,e.__webglMorphTargetsBuffers[k]),F.vertexAttribPointer(c["morphTarget"+g],3,F.FLOAT,!1,0,0),d.morphNormals&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglMorphNormalsBuffers[k]),F.vertexAttribPointer(c["morphNormal"+g],3,F.FLOAT,!1,0,0)),f.__webglMorphTargetInfluences[g]=j,i[k]=1,j=-1,g++}}null!==d.program.uniforms.morphTargetInfluences&&F.uniform1fv(d.program.uniforms.morphTargetInfluences,f.__webglMorphTargetInfluences)}if(a){if(e.__webglCustomAttributesList)for(g=0,h=e.__webglCustomAttributesList.length;h>g;g++)c=e.__webglCustomAttributesList[g],b[c.buffer.belongsToAttribute]>=0&&(F.bindBuffer(F.ARRAY_BUFFER,c.buffer),F.vertexAttribPointer(b[c.buffer.belongsToAttribute],c.size,F.FLOAT,!1,0,0));b.color>=0&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglColorBuffer),F.vertexAttribPointer(b.color,3,F.FLOAT,!1,0,0)),b.normal>=0&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglNormalBuffer),F.vertexAttribPointer(b.normal,3,F.FLOAT,!1,0,0)),b.tangent>=0&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglTangentBuffer),F.vertexAttribPointer(b.tangent,4,F.FLOAT,!1,0,0)),b.uv>=0&&(e.__webglUVBuffer?(F.bindBuffer(F.ARRAY_BUFFER,e.__webglUVBuffer),F.vertexAttribPointer(b.uv,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(b.uv)):F.disableVertexAttribArray(b.uv)),b.uv2>=0&&(e.__webglUV2Buffer?(F.bindBuffer(F.ARRAY_BUFFER,e.__webglUV2Buffer),F.vertexAttribPointer(b.uv2,2,F.FLOAT,!1,0,0),F.enableVertexAttribArray(b.uv2)):F.disableVertexAttribArray(b.uv2)),d.skinning&&b.skinVertexA>=0&&b.skinVertexB>=0&&b.skinIndex>=0&&b.skinWeight>=0&&(F.bindBuffer(F.ARRAY_BUFFER,e.__webglSkinVertexABuffer),F.vertexAttribPointer(b.skinVertexA,4,F.FLOAT,!1,0,0),F.bindBuffer(F.ARRAY_BUFFER,e.__webglSkinVertexBBuffer),F.vertexAttribPointer(b.skinVertexB,4,F.FLOAT,!1,0,0),F.bindBuffer(F.ARRAY_BUFFER,e.__webglSkinIndicesBuffer),F.vertexAttribPointer(b.skinIndex,4,F.FLOAT,!1,0,0),F.bindBuffer(F.ARRAY_BUFFER,e.__webglSkinWeightsBuffer),F.vertexAttribPointer(b.skinWeight,4,F.FLOAT,!1,0,0))}f instanceof THREE.Mesh?(d.wireframe?(d=d.wireframeLinewidth,d!==Z&&(F.lineWidth(d),Z=d),a&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,e.__webglLineBuffer),F.drawElements(F.LINES,e.__webglLineCount,F.UNSIGNED_SHORT,0)):(a&&F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,e.__webglFaceBuffer),F.drawElements(F.TRIANGLES,e.__webglFaceCount,F.UNSIGNED_SHORT,0)),G.info.render.calls++,G.info.render.vertices=G.info.render.vertices+e.__webglFaceCount,G.info.render.faces=G.info.render.faces+e.__webglFaceCount/3):f instanceof THREE.Line&&(f=f.type===THREE.LineStrip?F.LINE_STRIP:F.LINES,d=d.linewidth,d!==Z&&(F.lineWidth(d),Z=d),F.drawArrays(f,0,e.__webglLineCount),G.info.render.calls++)}},this.render=function(a,b,c,d){var e,f,k,l,m=a.__lights,n=a.fog;for(K=-1,ja=!0,void 0===b.parent&&a.add(b),this.autoUpdateScene&&a.updateMatrixWorld(),b._viewMatrixArray||(b._viewMatrixArray=new Float32Array(16)),b._projectionMatrixArray||(b._projectionMatrixArray=new Float32Array(16)),b.matrixWorldInverse.getInverse(b.matrixWorld),b.matrixWorldInverse.flattenToArray(b._viewMatrixArray),b.projectionMatrix.flattenToArray(b._projectionMatrixArray),fa.multiply(b.projectionMatrix,b.matrixWorldInverse),ea.setFromMatrix(fa),this.autoUpdateObjects&&this.initWebGLObjects(a),h(this.renderPluginsPre,a,b),G.info.render.calls=0,G.info.render.vertices=0,G.info.render.faces=0,G.info.render.points=0,this.setRenderTarget(c),(this.autoClear||d)&&this.clear(this.autoClearColor,this.autoClearDepth,this.autoClearStencil),l=a.__webglObjects,d=0,e=l.length;e>d;d++)if(f=l[d],k=f.object,f.render=!1,k.visible&&(!(k instanceof THREE.Mesh||k instanceof THREE.ParticleSystem)||!k.frustumCulled||ea.contains(k))){o(k,b);var q=f,r=q.object,s=q.buffer,t=void 0,t=t=void 0,t=r.material;t instanceof THREE.MeshFaceMaterial?(t=s.materialIndex,t>=0&&(t=r.geometry.materials[t],t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null))):t&&(t.transparent?(q.transparent=t,q.opaque=null):(q.opaque=t,q.transparent=null)),f.render=!0,this.sortObjects&&(k.renderDepth?f.z=k.renderDepth:(ha.copy(k.matrixWorld.getPosition()),fa.multiplyVector3(ha),f.z=ha.z))}for(this.sortObjects&&l.sort(g),l=a.__webglObjectsImmediate,d=0,e=l.length;e>d;d++)f=l[d],k=f.object,k.visible&&(o(k,b),k=f.object.material,k.transparent?(f.transparent=k,f.opaque=null):(f.opaque=k,f.transparent=null));a.overrideMaterial?(d=a.overrideMaterial,this.setBlending(d.blending,d.blendEquation,d.blendSrc,d.blendDst),this.setDepthTest(d.depthTest),this.setDepthWrite(d.depthWrite),p(d.polygonOffset,d.polygonOffsetFactor,d.polygonOffsetUnits),i(a.__webglObjects,!1,"",b,m,n,!0,d),j(a.__webglObjectsImmediate,"",b,m,n,!1,d)):(this.setBlending(THREE.NormalBlending),i(a.__webglObjects,!0,"opaque",b,m,n,!1),j(a.__webglObjectsImmediate,"opaque",b,m,n,!1),i(a.__webglObjects,!1,"transparent",b,m,n,!0),j(a.__webglObjectsImmediate,"transparent",b,m,n,!0)),h(this.renderPluginsPost,a,b),c&&c.generateMipmaps&&c.minFilter!==THREE.NearestFilter&&c.minFilter!==THREE.LinearFilter&&(c instanceof THREE.WebGLRenderTargetCube?(F.bindTexture(F.TEXTURE_CUBE_MAP,c.__webglTexture),F.generateMipmap(F.TEXTURE_CUBE_MAP),F.bindTexture(F.TEXTURE_CUBE_MAP,null)):(F.bindTexture(F.TEXTURE_2D,c.__webglTexture),F.generateMipmap(F.TEXTURE_2D),F.bindTexture(F.TEXTURE_2D,null))),this.setDepthTest(!0),this.setDepthWrite(!0)},this.renderImmediateObject=function(a,b,c,d,e){var f=n(a,b,c,d,e);L=-1,G.setObjectFaces(e),e.immediateRenderCallback?e.immediateRenderCallback(f,F,ea):e.render(function(a){G.renderBufferImmediate(a,f,d.shading)})},this.initWebGLObjects=function(a){for(a.__webglObjects||(a.__webglObjects=[],a.__webglObjectsImmediate=[],a.__webglSprites=[],a.__webglFlares=[]);a.__objectsAdded.length;){var g=a.__objectsAdded[0],h=a,i=void 0,j=void 0,n=void 0;if(!g.__webglInit)if(g.__webglInit=!0,g._modelViewMatrix=new THREE.Matrix4,g._normalMatrix=new THREE.Matrix3,g instanceof THREE.Mesh){if(j=g.geometry,j instanceof THREE.Geometry){if(void 0===j.geometryGroups){var o=j,p=void 0,q=void 0,r=void 0,s=void 0,t=void 0,u=void 0,v=void 0,w={},x=o.morphTargets.length,y=o.morphNormals.length;for(o.geometryGroups={},p=0,q=o.faces.length;q>p;p++)r=o.faces[p],s=r.materialIndex,u=void 0!==s?s:-1,void 0===w[u]&&(w[u]={hash:u,counter:0}),v=w[u].hash+"_"+w[u].counter,void 0===o.geometryGroups[v]&&(o.geometryGroups[v]={faces3:[],faces4:[],materialIndex:s,vertices:0,numMorphTargets:x,numMorphNormals:y}),t=r instanceof THREE.Face3?3:4,o.geometryGroups[v].vertices+t>65535&&(w[u].counter=w[u].counter+1,v=w[u].hash+"_"+w[u].counter,void 0===o.geometryGroups[v]&&(o.geometryGroups[v]={faces3:[],faces4:[],materialIndex:s,vertices:0,numMorphTargets:x,numMorphNormals:y})),r instanceof THREE.Face3?o.geometryGroups[v].faces3.push(p):o.geometryGroups[v].faces4.push(p),o.geometryGroups[v].vertices=o.geometryGroups[v].vertices+t;o.geometryGroupsList=[];var z=void 0;for(z in o.geometryGroups)o.geometryGroups[z].id=N++,o.geometryGroupsList.push(o.geometryGroups[z])}for(i in j.geometryGroups)if(n=j.geometryGroups[i],!n.__webglVertexBuffer){var A=n;A.__webglVertexBuffer=F.createBuffer(),A.__webglNormalBuffer=F.createBuffer(),A.__webglTangentBuffer=F.createBuffer(),A.__webglColorBuffer=F.createBuffer(),A.__webglUVBuffer=F.createBuffer(),A.__webglUV2Buffer=F.createBuffer(),A.__webglSkinVertexABuffer=F.createBuffer(),A.__webglSkinVertexBBuffer=F.createBuffer(),A.__webglSkinIndicesBuffer=F.createBuffer(),A.__webglSkinWeightsBuffer=F.createBuffer(),A.__webglFaceBuffer=F.createBuffer(),A.__webglLineBuffer=F.createBuffer();var B=void 0,C=void 0;if(A.numMorphTargets)for(A.__webglMorphTargetsBuffers=[],B=0,C=A.numMorphTargets;C>B;B++)A.__webglMorphTargetsBuffers.push(F.createBuffer());if(A.numMorphNormals)for(A.__webglMorphNormalsBuffers=[],B=0,C=A.numMorphNormals;C>B;B++)A.__webglMorphNormalsBuffers.push(F.createBuffer());G.info.memory.geometries++;var D=n,E=g,H=E.geometry,I=D.faces3,J=D.faces4,K=3*I.length+4*J.length,L=1*I.length+2*J.length,M=3*I.length+4*J.length,O=c(E,D),P=e(O),Q=d(O),R=O.vertexColors?O.vertexColors:!1;D.__vertexArray=new Float32Array(3*K),Q&&(D.__normalArray=new Float32Array(3*K)),H.hasTangents&&(D.__tangentArray=new Float32Array(4*K)),R&&(D.__colorArray=new Float32Array(3*K)),P&&((H.faceUvs.length>0||H.faceVertexUvs.length>0)&&(D.__uvArray=new Float32Array(2*K)),(H.faceUvs.length>1||H.faceVertexUvs.length>1)&&(D.__uv2Array=new Float32Array(2*K))),E.geometry.skinWeights.length&&E.geometry.skinIndices.length&&(D.__skinVertexAArray=new Float32Array(4*K),D.__skinVertexBArray=new Float32Array(4*K),D.__skinIndexArray=new Float32Array(4*K),D.__skinWeightArray=new Float32Array(4*K)),D.__faceArray=new Uint16Array(3*L),D.__lineArray=new Uint16Array(2*M);var S=void 0,T=void 0;if(D.numMorphTargets)for(D.__morphTargetsArrays=[],S=0,T=D.numMorphTargets;T>S;S++)D.__morphTargetsArrays.push(new Float32Array(3*K));if(D.numMorphNormals)for(D.__morphNormalsArrays=[],S=0,T=D.numMorphNormals;T>S;S++)D.__morphNormalsArrays.push(new Float32Array(3*K));if(D.__webglFaceCount=3*L,D.__webglLineCount=2*M,O.attributes){void 0===D.__webglCustomAttributesList&&(D.__webglCustomAttributesList=[]);var U=void 0;for(U in O.attributes){var V,W=O.attributes[U],X={};for(V in W)X[V]=W[V];if(!X.__webglInitialized||X.createUniqueBuffers){X.__webglInitialized=!0;var Y=1;"v2"===X.type?Y=2:"v3"===X.type?Y=3:"v4"===X.type?Y=4:"c"===X.type&&(Y=3),X.size=Y,X.array=new Float32Array(K*Y),X.buffer=F.createBuffer(),X.buffer.belongsToAttribute=U,W.needsUpdate=!0,X.__original=W}D.__webglCustomAttributesList.push(X)}}D.__inittedArrays=!0,j.verticesNeedUpdate=!0,j.morphTargetsNeedUpdate=!0,j.elementsNeedUpdate=!0,j.uvsNeedUpdate=!0,j.normalsNeedUpdate=!0,j.tangetsNeedUpdate=!0,j.colorsNeedUpdate=!0}}}else if(g instanceof THREE.Line){if(j=g.geometry,!j.__webglVertexBuffer){var Z=j;Z.__webglVertexBuffer=F.createBuffer(),Z.__webglColorBuffer=F.createBuffer(),G.info.memory.geometries++;var $=j,_=g,aa=$.vertices.length;$.__vertexArray=new Float32Array(3*aa),$.__colorArray=new Float32Array(3*aa),$.__webglLineCount=aa,b($,_),j.verticesNeedUpdate=!0,j.colorsNeedUpdate=!0}}else if(g instanceof THREE.ParticleSystem&&(j=g.geometry,!j.__webglVertexBuffer)){var ba=j;ba.__webglVertexBuffer=F.createBuffer(),ba.__webglColorBuffer=F.createBuffer(),G.info.geometries++;var ca=j,da=g,ea=ca.vertices.length;ca.__vertexArray=new Float32Array(3*ea),ca.__colorArray=new Float32Array(3*ea),
ca.__sortArray=[],ca.__webglParticleCount=ea,b(ca,da),j.verticesNeedUpdate=!0,j.colorsNeedUpdate=!0}if(!g.__webglActive){if(g instanceof THREE.Mesh)if(j=g.geometry,j instanceof THREE.BufferGeometry)k(h.__webglObjects,j,g);else for(i in j.geometryGroups)n=j.geometryGroups[i],k(h.__webglObjects,n,g);else g instanceof THREE.Line&&(j=g.geometry,k(h.__webglObjects,j,g));g.__webglActive=!0}a.__objectsAdded.splice(0,1)}for(;a.__objectsRemoved.length;){var fa=a.__objectsRemoved[0];if(fa instanceof THREE.Mesh||fa instanceof THREE.Line)for(var ga=a.__webglObjects,ha=fa,ia=ga.length-1;ia>=0;ia--)ga[ia].object===ha&&ga.splice(ia,1);fa.__webglActive=!1,a.__objectsRemoved.splice(0,1)}for(var ja=0,ka=a.__webglObjects.length;ka>ja;ja++){var la=a.__webglObjects[ja].object,ma=la.geometry,na=void 0,oa=void 0,pa=void 0;if(la instanceof THREE.Mesh)if(ma instanceof THREE.BufferGeometry)ma.verticesNeedUpdate=!1,ma.elementsNeedUpdate=!1,ma.uvsNeedUpdate=!1,ma.normalsNeedUpdate=!1,ma.colorsNeedUpdate=!1;else{for(var qa=0,ra=ma.geometryGroupsList.length;ra>qa;qa++)if(na=ma.geometryGroupsList[qa],pa=c(la,na),oa=pa.attributes&&l(pa),ma.verticesNeedUpdate||ma.morphTargetsNeedUpdate||ma.elementsNeedUpdate||ma.uvsNeedUpdate||ma.normalsNeedUpdate||ma.colorsNeedUpdate||ma.tangetsNeedUpdate||oa){var sa=na,ta=la,ua=F.DYNAMIC_DRAW,va=!ma.dynamic,wa=pa;if(sa.__inittedArrays){var xa=d(wa),ya=wa.vertexColors?wa.vertexColors:!1,za=e(wa),Aa=xa===THREE.SmoothShading,Ba=void 0,Ca=void 0,Da=void 0,Ea=void 0,Fa=void 0,Ga=void 0,Ha=void 0,Ia=void 0,Ja=void 0,Ka=void 0,La=void 0,Ma=void 0,Na=void 0,Oa=void 0,Pa=void 0,Qa=void 0,Ra=void 0,Sa=void 0,Ta=void 0,Ua=void 0,Va=void 0,Wa=void 0,Xa=void 0,Ya=void 0,Za=void 0,$a=void 0,_a=void 0,ab=void 0,bb=void 0,cb=void 0,db=void 0,eb=void 0,fb=void 0,gb=void 0,hb=void 0,ib=void 0,jb=void 0,kb=void 0,lb=void 0,mb=void 0,nb=void 0,ob=void 0,pb=void 0,qb=void 0,rb=void 0,sb=void 0,tb=void 0,ub=void 0,vb=void 0,wb=void 0,xb=void 0,yb=void 0,zb=void 0,Ab=void 0,Bb=0,Cb=0,Db=0,Eb=0,Fb=0,Gb=0,Hb=0,Ib=0,Jb=0,Kb=0,Lb=0,Mb=0,Nb=void 0,Ob=sa.__vertexArray,Pb=sa.__uvArray,Qb=sa.__uv2Array,Rb=sa.__normalArray,Sb=sa.__tangentArray,Tb=sa.__colorArray,Ub=sa.__skinVertexAArray,Vb=sa.__skinVertexBArray,Wb=sa.__skinIndexArray,Xb=sa.__skinWeightArray,Yb=sa.__morphTargetsArrays,Zb=sa.__morphNormalsArrays,$b=sa.__webglCustomAttributesList,_b=void 0,ac=sa.__faceArray,bc=sa.__lineArray,cc=ta.geometry,dc=cc.elementsNeedUpdate,ec=cc.uvsNeedUpdate,fc=cc.normalsNeedUpdate,gc=cc.tangetsNeedUpdate,hc=cc.colorsNeedUpdate,ic=cc.morphTargetsNeedUpdate,jc=cc.vertices,kc=sa.faces3,lc=sa.faces4,mc=cc.faces,nc=cc.faceVertexUvs[0],oc=cc.faceVertexUvs[1],pc=cc.skinVerticesA,qc=cc.skinVerticesB,rc=cc.skinIndices,sc=cc.skinWeights,tc=cc.morphTargets,uc=cc.morphNormals;if(cc.verticesNeedUpdate){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],Ma=jc[Ea.a],Na=jc[Ea.b],Oa=jc[Ea.c],Ob[Cb]=Ma.x,Ob[Cb+1]=Ma.y,Ob[Cb+2]=Ma.z,Ob[Cb+3]=Na.x,Ob[Cb+4]=Na.y,Ob[Cb+5]=Na.z,Ob[Cb+6]=Oa.x,Ob[Cb+7]=Oa.y,Ob[Cb+8]=Oa.z,Cb+=9;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],Ma=jc[Ea.a],Na=jc[Ea.b],Oa=jc[Ea.c],Pa=jc[Ea.d],Ob[Cb]=Ma.x,Ob[Cb+1]=Ma.y,Ob[Cb+2]=Ma.z,Ob[Cb+3]=Na.x,Ob[Cb+4]=Na.y,Ob[Cb+5]=Na.z,Ob[Cb+6]=Oa.x,Ob[Cb+7]=Oa.y,Ob[Cb+8]=Oa.z,Ob[Cb+9]=Pa.x,Ob[Cb+10]=Pa.y,Ob[Cb+11]=Pa.z,Cb+=12;F.bindBuffer(F.ARRAY_BUFFER,sa.__webglVertexBuffer),F.bufferData(F.ARRAY_BUFFER,Ob,ua)}if(ic)for(vb=0,wb=tc.length;wb>vb;vb++){for(Ba=Lb=0,Ca=kc.length;Ca>Ba;Ba++)zb=kc[Ba],Ea=mc[zb],Ma=tc[vb].vertices[Ea.a],Na=tc[vb].vertices[Ea.b],Oa=tc[vb].vertices[Ea.c],xb=Yb[vb],xb[Lb]=Ma.x,xb[Lb+1]=Ma.y,xb[Lb+2]=Ma.z,xb[Lb+3]=Na.x,xb[Lb+4]=Na.y,xb[Lb+5]=Na.z,xb[Lb+6]=Oa.x,xb[Lb+7]=Oa.y,xb[Lb+8]=Oa.z,wa.morphNormals&&(Aa?(Ab=uc[vb].vertexNormals[zb],Ua=Ab.a,Va=Ab.b,Wa=Ab.c):Wa=Va=Ua=uc[vb].faceNormals[zb],yb=Zb[vb],yb[Lb]=Ua.x,yb[Lb+1]=Ua.y,yb[Lb+2]=Ua.z,yb[Lb+3]=Va.x,yb[Lb+4]=Va.y,yb[Lb+5]=Va.z,yb[Lb+6]=Wa.x,yb[Lb+7]=Wa.y,yb[Lb+8]=Wa.z),Lb+=9;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)zb=lc[Ba],Ea=mc[zb],Ma=tc[vb].vertices[Ea.a],Na=tc[vb].vertices[Ea.b],Oa=tc[vb].vertices[Ea.c],Pa=tc[vb].vertices[Ea.d],xb=Yb[vb],xb[Lb]=Ma.x,xb[Lb+1]=Ma.y,xb[Lb+2]=Ma.z,xb[Lb+3]=Na.x,xb[Lb+4]=Na.y,xb[Lb+5]=Na.z,xb[Lb+6]=Oa.x,xb[Lb+7]=Oa.y,xb[Lb+8]=Oa.z,xb[Lb+9]=Pa.x,xb[Lb+10]=Pa.y,xb[Lb+11]=Pa.z,wa.morphNormals&&(Aa?(Ab=uc[vb].vertexNormals[zb],Ua=Ab.a,Va=Ab.b,Wa=Ab.c,Xa=Ab.d):Xa=Wa=Va=Ua=uc[vb].faceNormals[zb],yb=Zb[vb],yb[Lb]=Ua.x,yb[Lb+1]=Ua.y,yb[Lb+2]=Ua.z,yb[Lb+3]=Va.x,yb[Lb+4]=Va.y,yb[Lb+5]=Va.z,yb[Lb+6]=Wa.x,yb[Lb+7]=Wa.y,yb[Lb+8]=Wa.z,yb[Lb+9]=Xa.x,yb[Lb+10]=Xa.y,yb[Lb+11]=Xa.z),Lb+=12;F.bindBuffer(F.ARRAY_BUFFER,sa.__webglMorphTargetsBuffers[vb]),F.bufferData(F.ARRAY_BUFFER,Yb[vb],ua),wa.morphNormals&&(F.bindBuffer(F.ARRAY_BUFFER,sa.__webglMorphNormalsBuffers[vb]),F.bufferData(F.ARRAY_BUFFER,Zb[vb],ua))}if(sc.length){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],ab=sc[Ea.a],bb=sc[Ea.b],cb=sc[Ea.c],Xb[Kb]=ab.x,Xb[Kb+1]=ab.y,Xb[Kb+2]=ab.z,Xb[Kb+3]=ab.w,Xb[Kb+4]=bb.x,Xb[Kb+5]=bb.y,Xb[Kb+6]=bb.z,Xb[Kb+7]=bb.w,Xb[Kb+8]=cb.x,Xb[Kb+9]=cb.y,Xb[Kb+10]=cb.z,Xb[Kb+11]=cb.w,eb=rc[Ea.a],fb=rc[Ea.b],gb=rc[Ea.c],Wb[Kb]=eb.x,Wb[Kb+1]=eb.y,Wb[Kb+2]=eb.z,Wb[Kb+3]=eb.w,Wb[Kb+4]=fb.x,Wb[Kb+5]=fb.y,Wb[Kb+6]=fb.z,Wb[Kb+7]=fb.w,Wb[Kb+8]=gb.x,Wb[Kb+9]=gb.y,Wb[Kb+10]=gb.z,Wb[Kb+11]=gb.w,ib=pc[Ea.a],jb=pc[Ea.b],kb=pc[Ea.c],Ub[Kb]=ib.x,Ub[Kb+1]=ib.y,Ub[Kb+2]=ib.z,Ub[Kb+3]=1,Ub[Kb+4]=jb.x,Ub[Kb+5]=jb.y,Ub[Kb+6]=jb.z,Ub[Kb+7]=1,Ub[Kb+8]=kb.x,Ub[Kb+9]=kb.y,Ub[Kb+10]=kb.z,Ub[Kb+11]=1,mb=qc[Ea.a],nb=qc[Ea.b],ob=qc[Ea.c],Vb[Kb]=mb.x,Vb[Kb+1]=mb.y,Vb[Kb+2]=mb.z,Vb[Kb+3]=1,Vb[Kb+4]=nb.x,Vb[Kb+5]=nb.y,Vb[Kb+6]=nb.z,Vb[Kb+7]=1,Vb[Kb+8]=ob.x,Vb[Kb+9]=ob.y,Vb[Kb+10]=ob.z,Vb[Kb+11]=1,Kb+=12;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],ab=sc[Ea.a],bb=sc[Ea.b],cb=sc[Ea.c],db=sc[Ea.d],Xb[Kb]=ab.x,Xb[Kb+1]=ab.y,Xb[Kb+2]=ab.z,Xb[Kb+3]=ab.w,Xb[Kb+4]=bb.x,Xb[Kb+5]=bb.y,Xb[Kb+6]=bb.z,Xb[Kb+7]=bb.w,Xb[Kb+8]=cb.x,Xb[Kb+9]=cb.y,Xb[Kb+10]=cb.z,Xb[Kb+11]=cb.w,Xb[Kb+12]=db.x,Xb[Kb+13]=db.y,Xb[Kb+14]=db.z,Xb[Kb+15]=db.w,eb=rc[Ea.a],fb=rc[Ea.b],gb=rc[Ea.c],hb=rc[Ea.d],Wb[Kb]=eb.x,Wb[Kb+1]=eb.y,Wb[Kb+2]=eb.z,Wb[Kb+3]=eb.w,Wb[Kb+4]=fb.x,Wb[Kb+5]=fb.y,Wb[Kb+6]=fb.z,Wb[Kb+7]=fb.w,Wb[Kb+8]=gb.x,Wb[Kb+9]=gb.y,Wb[Kb+10]=gb.z,Wb[Kb+11]=gb.w,Wb[Kb+12]=hb.x,Wb[Kb+13]=hb.y,Wb[Kb+14]=hb.z,Wb[Kb+15]=hb.w,ib=pc[Ea.a],jb=pc[Ea.b],kb=pc[Ea.c],lb=pc[Ea.d],Ub[Kb]=ib.x,Ub[Kb+1]=ib.y,Ub[Kb+2]=ib.z,Ub[Kb+3]=1,Ub[Kb+4]=jb.x,Ub[Kb+5]=jb.y,Ub[Kb+6]=jb.z,Ub[Kb+7]=1,Ub[Kb+8]=kb.x,Ub[Kb+9]=kb.y,Ub[Kb+10]=kb.z,Ub[Kb+11]=1,Ub[Kb+12]=lb.x,Ub[Kb+13]=lb.y,Ub[Kb+14]=lb.z,Ub[Kb+15]=1,mb=qc[Ea.a],nb=qc[Ea.b],ob=qc[Ea.c],pb=qc[Ea.d],Vb[Kb]=mb.x,Vb[Kb+1]=mb.y,Vb[Kb+2]=mb.z,Vb[Kb+3]=1,Vb[Kb+4]=nb.x,Vb[Kb+5]=nb.y,Vb[Kb+6]=nb.z,Vb[Kb+7]=1,Vb[Kb+8]=ob.x,Vb[Kb+9]=ob.y,Vb[Kb+10]=ob.z,Vb[Kb+11]=1,Vb[Kb+12]=pb.x,Vb[Kb+13]=pb.y,Vb[Kb+14]=pb.z,Vb[Kb+15]=1,Kb+=16;Kb>0&&(F.bindBuffer(F.ARRAY_BUFFER,sa.__webglSkinVertexABuffer),F.bufferData(F.ARRAY_BUFFER,Ub,ua),F.bindBuffer(F.ARRAY_BUFFER,sa.__webglSkinVertexBBuffer),F.bufferData(F.ARRAY_BUFFER,Vb,ua),F.bindBuffer(F.ARRAY_BUFFER,sa.__webglSkinIndicesBuffer),F.bufferData(F.ARRAY_BUFFER,Wb,ua),F.bindBuffer(F.ARRAY_BUFFER,sa.__webglSkinWeightsBuffer),F.bufferData(F.ARRAY_BUFFER,Xb,ua))}if(hc&&ya){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],Ha=Ea.vertexColors,Ia=Ea.color,3===Ha.length&&ya===THREE.VertexColors?(Ya=Ha[0],Za=Ha[1],$a=Ha[2]):$a=Za=Ya=Ia,Tb[Jb]=Ya.r,Tb[Jb+1]=Ya.g,Tb[Jb+2]=Ya.b,Tb[Jb+3]=Za.r,Tb[Jb+4]=Za.g,Tb[Jb+5]=Za.b,Tb[Jb+6]=$a.r,Tb[Jb+7]=$a.g,Tb[Jb+8]=$a.b,Jb+=9;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],Ha=Ea.vertexColors,Ia=Ea.color,4===Ha.length&&ya===THREE.VertexColors?(Ya=Ha[0],Za=Ha[1],$a=Ha[2],_a=Ha[3]):_a=$a=Za=Ya=Ia,Tb[Jb]=Ya.r,Tb[Jb+1]=Ya.g,Tb[Jb+2]=Ya.b,Tb[Jb+3]=Za.r,Tb[Jb+4]=Za.g,Tb[Jb+5]=Za.b,Tb[Jb+6]=$a.r,Tb[Jb+7]=$a.g,Tb[Jb+8]=$a.b,Tb[Jb+9]=_a.r,Tb[Jb+10]=_a.g,Tb[Jb+11]=_a.b,Jb+=12;Jb>0&&(F.bindBuffer(F.ARRAY_BUFFER,sa.__webglColorBuffer),F.bufferData(F.ARRAY_BUFFER,Tb,ua))}if(gc&&cc.hasTangents){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],Ja=Ea.vertexTangents,Qa=Ja[0],Ra=Ja[1],Sa=Ja[2],Sb[Hb]=Qa.x,Sb[Hb+1]=Qa.y,Sb[Hb+2]=Qa.z,Sb[Hb+3]=Qa.w,Sb[Hb+4]=Ra.x,Sb[Hb+5]=Ra.y,Sb[Hb+6]=Ra.z,Sb[Hb+7]=Ra.w,Sb[Hb+8]=Sa.x,Sb[Hb+9]=Sa.y,Sb[Hb+10]=Sa.z,Sb[Hb+11]=Sa.w,Hb+=12;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],Ja=Ea.vertexTangents,Qa=Ja[0],Ra=Ja[1],Sa=Ja[2],Ta=Ja[3],Sb[Hb]=Qa.x,Sb[Hb+1]=Qa.y,Sb[Hb+2]=Qa.z,Sb[Hb+3]=Qa.w,Sb[Hb+4]=Ra.x,Sb[Hb+5]=Ra.y,Sb[Hb+6]=Ra.z,Sb[Hb+7]=Ra.w,Sb[Hb+8]=Sa.x,Sb[Hb+9]=Sa.y,Sb[Hb+10]=Sa.z,Sb[Hb+11]=Sa.w,Sb[Hb+12]=Ta.x,Sb[Hb+13]=Ta.y,Sb[Hb+14]=Ta.z,Sb[Hb+15]=Ta.w,Hb+=16;F.bindBuffer(F.ARRAY_BUFFER,sa.__webglTangentBuffer),F.bufferData(F.ARRAY_BUFFER,Sb,ua)}if(fc&&xa){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)if(Ea=mc[kc[Ba]],Fa=Ea.vertexNormals,Ga=Ea.normal,3===Fa.length&&Aa)for(qb=0;3>qb;qb++)sb=Fa[qb],Rb[Gb]=sb.x,Rb[Gb+1]=sb.y,Rb[Gb+2]=sb.z,Gb+=3;else for(qb=0;3>qb;qb++)Rb[Gb]=Ga.x,Rb[Gb+1]=Ga.y,Rb[Gb+2]=Ga.z,Gb+=3;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)if(Ea=mc[lc[Ba]],Fa=Ea.vertexNormals,Ga=Ea.normal,4===Fa.length&&Aa)for(qb=0;4>qb;qb++)sb=Fa[qb],Rb[Gb]=sb.x,Rb[Gb+1]=sb.y,Rb[Gb+2]=sb.z,Gb+=3;else for(qb=0;4>qb;qb++)Rb[Gb]=Ga.x,Rb[Gb+1]=Ga.y,Rb[Gb+2]=Ga.z,Gb+=3;F.bindBuffer(F.ARRAY_BUFFER,sa.__webglNormalBuffer),F.bufferData(F.ARRAY_BUFFER,Rb,ua)}if(ec&&nc&&za){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)if(Da=kc[Ba],Ea=mc[Da],Ka=nc[Da],void 0!==Ka)for(qb=0;3>qb;qb++)tb=Ka[qb],Pb[Db]=tb.u,Pb[Db+1]=tb.v,Db+=2;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)if(Da=lc[Ba],Ea=mc[Da],Ka=nc[Da],void 0!==Ka)for(qb=0;4>qb;qb++)tb=Ka[qb],Pb[Db]=tb.u,Pb[Db+1]=tb.v,Db+=2;Db>0&&(F.bindBuffer(F.ARRAY_BUFFER,sa.__webglUVBuffer),F.bufferData(F.ARRAY_BUFFER,Pb,ua))}if(ec&&oc&&za){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)if(Da=kc[Ba],Ea=mc[Da],La=oc[Da],void 0!==La)for(qb=0;3>qb;qb++)ub=La[qb],Qb[Eb]=ub.u,Qb[Eb+1]=ub.v,Eb+=2;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)if(Da=lc[Ba],Ea=mc[Da],La=oc[Da],void 0!==La)for(qb=0;4>qb;qb++)ub=La[qb],Qb[Eb]=ub.u,Qb[Eb+1]=ub.v,Eb+=2;Eb>0&&(F.bindBuffer(F.ARRAY_BUFFER,sa.__webglUV2Buffer),F.bufferData(F.ARRAY_BUFFER,Qb,ua))}if(dc){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],ac[Fb]=Bb,ac[Fb+1]=Bb+1,ac[Fb+2]=Bb+2,Fb+=3,bc[Ib]=Bb,bc[Ib+1]=Bb+1,bc[Ib+2]=Bb,bc[Ib+3]=Bb+2,bc[Ib+4]=Bb+1,bc[Ib+5]=Bb+2,Ib+=6,Bb+=3;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],ac[Fb]=Bb,ac[Fb+1]=Bb+1,ac[Fb+2]=Bb+3,ac[Fb+3]=Bb+1,ac[Fb+4]=Bb+2,ac[Fb+5]=Bb+3,Fb+=6,bc[Ib]=Bb,bc[Ib+1]=Bb+1,bc[Ib+2]=Bb,bc[Ib+3]=Bb+3,bc[Ib+4]=Bb+1,bc[Ib+5]=Bb+2,bc[Ib+6]=Bb+2,bc[Ib+7]=Bb+3,Ib+=8,Bb+=4;F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,sa.__webglFaceBuffer),F.bufferData(F.ELEMENT_ARRAY_BUFFER,ac,ua),F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,sa.__webglLineBuffer),F.bufferData(F.ELEMENT_ARRAY_BUFFER,bc,ua)}if($b)for(qb=0,rb=$b.length;rb>qb;qb++)if(_b=$b[qb],_b.__original.needsUpdate){if(Mb=0,1===_b.size){if(void 0===_b.boundTo||"vertices"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],_b.array[Mb]=_b.value[Ea.a],_b.array[Mb+1]=_b.value[Ea.b],_b.array[Mb+2]=_b.value[Ea.c],Mb+=3;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],_b.array[Mb]=_b.value[Ea.a],_b.array[Mb+1]=_b.value[Ea.b],_b.array[Mb+2]=_b.value[Ea.c],_b.array[Mb+3]=_b.value[Ea.d],Mb+=4}else if("faces"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Nb=_b.value[kc[Ba]],_b.array[Mb]=Nb,_b.array[Mb+1]=Nb,_b.array[Mb+2]=Nb,Mb+=3;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Nb=_b.value[lc[Ba]],_b.array[Mb]=Nb,_b.array[Mb+1]=Nb,_b.array[Mb+2]=Nb,_b.array[Mb+3]=Nb,Mb+=4}}else if(2===_b.size){if(void 0===_b.boundTo||"vertices"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],Ma=_b.value[Ea.a],Na=_b.value[Ea.b],Oa=_b.value[Ea.c],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Na.x,_b.array[Mb+3]=Na.y,_b.array[Mb+4]=Oa.x,_b.array[Mb+5]=Oa.y,Mb+=6;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],Ma=_b.value[Ea.a],Na=_b.value[Ea.b],Oa=_b.value[Ea.c],Pa=_b.value[Ea.d],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Na.x,_b.array[Mb+3]=Na.y,_b.array[Mb+4]=Oa.x,_b.array[Mb+5]=Oa.y,_b.array[Mb+6]=Pa.x,_b.array[Mb+7]=Pa.y,Mb+=8}else if("faces"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Oa=Na=Ma=Nb=_b.value[kc[Ba]],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Na.x,_b.array[Mb+3]=Na.y,_b.array[Mb+4]=Oa.x,_b.array[Mb+5]=Oa.y,Mb+=6;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Pa=Oa=Na=Ma=Nb=_b.value[lc[Ba]],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Na.x,_b.array[Mb+3]=Na.y,_b.array[Mb+4]=Oa.x,_b.array[Mb+5]=Oa.y,_b.array[Mb+6]=Pa.x,_b.array[Mb+7]=Pa.y,Mb+=8}}else if(3===_b.size){var vc;if(vc="c"===_b.type?["r","g","b"]:["x","y","z"],void 0===_b.boundTo||"vertices"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],Ma=_b.value[Ea.a],Na=_b.value[Ea.b],Oa=_b.value[Ea.c],_b.array[Mb]=Ma[vc[0]],_b.array[Mb+1]=Ma[vc[1]],_b.array[Mb+2]=Ma[vc[2]],_b.array[Mb+3]=Na[vc[0]],_b.array[Mb+4]=Na[vc[1]],_b.array[Mb+5]=Na[vc[2]],_b.array[Mb+6]=Oa[vc[0]],_b.array[Mb+7]=Oa[vc[1]],_b.array[Mb+8]=Oa[vc[2]],Mb+=9;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],Ma=_b.value[Ea.a],Na=_b.value[Ea.b],Oa=_b.value[Ea.c],Pa=_b.value[Ea.d],_b.array[Mb]=Ma[vc[0]],_b.array[Mb+1]=Ma[vc[1]],_b.array[Mb+2]=Ma[vc[2]],_b.array[Mb+3]=Na[vc[0]],_b.array[Mb+4]=Na[vc[1]],_b.array[Mb+5]=Na[vc[2]],_b.array[Mb+6]=Oa[vc[0]],_b.array[Mb+7]=Oa[vc[1]],_b.array[Mb+8]=Oa[vc[2]],_b.array[Mb+9]=Pa[vc[0]],_b.array[Mb+10]=Pa[vc[1]],_b.array[Mb+11]=Pa[vc[2]],Mb+=12}else if("faces"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Oa=Na=Ma=Nb=_b.value[kc[Ba]],_b.array[Mb]=Ma[vc[0]],_b.array[Mb+1]=Ma[vc[1]],_b.array[Mb+2]=Ma[vc[2]],_b.array[Mb+3]=Na[vc[0]],_b.array[Mb+4]=Na[vc[1]],_b.array[Mb+5]=Na[vc[2]],_b.array[Mb+6]=Oa[vc[0]],_b.array[Mb+7]=Oa[vc[1]],_b.array[Mb+8]=Oa[vc[2]],Mb+=9;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Pa=Oa=Na=Ma=Nb=_b.value[lc[Ba]],_b.array[Mb]=Ma[vc[0]],_b.array[Mb+1]=Ma[vc[1]],_b.array[Mb+2]=Ma[vc[2]],_b.array[Mb+3]=Na[vc[0]],_b.array[Mb+4]=Na[vc[1]],_b.array[Mb+5]=Na[vc[2]],_b.array[Mb+6]=Oa[vc[0]],_b.array[Mb+7]=Oa[vc[1]],_b.array[Mb+8]=Oa[vc[2]],_b.array[Mb+9]=Pa[vc[0]],_b.array[Mb+10]=Pa[vc[1]],_b.array[Mb+11]=Pa[vc[2]],Mb+=12}}else if(4===_b.size)if(void 0===_b.boundTo||"vertices"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Ea=mc[kc[Ba]],Ma=_b.value[Ea.a],Na=_b.value[Ea.b],Oa=_b.value[Ea.c],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Ma.z,_b.array[Mb+3]=Ma.w,_b.array[Mb+4]=Na.x,_b.array[Mb+5]=Na.y,_b.array[Mb+6]=Na.z,_b.array[Mb+7]=Na.w,_b.array[Mb+8]=Oa.x,_b.array[Mb+9]=Oa.y,_b.array[Mb+10]=Oa.z,_b.array[Mb+11]=Oa.w,Mb+=12;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Ea=mc[lc[Ba]],Ma=_b.value[Ea.a],Na=_b.value[Ea.b],Oa=_b.value[Ea.c],Pa=_b.value[Ea.d],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Ma.z,_b.array[Mb+3]=Ma.w,_b.array[Mb+4]=Na.x,_b.array[Mb+5]=Na.y,_b.array[Mb+6]=Na.z,_b.array[Mb+7]=Na.w,_b.array[Mb+8]=Oa.x,_b.array[Mb+9]=Oa.y,_b.array[Mb+10]=Oa.z,_b.array[Mb+11]=Oa.w,_b.array[Mb+12]=Pa.x,_b.array[Mb+13]=Pa.y,_b.array[Mb+14]=Pa.z,_b.array[Mb+15]=Pa.w,Mb+=16}else if("faces"===_b.boundTo){for(Ba=0,Ca=kc.length;Ca>Ba;Ba++)Oa=Na=Ma=Nb=_b.value[kc[Ba]],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Ma.z,_b.array[Mb+3]=Ma.w,_b.array[Mb+4]=Na.x,_b.array[Mb+5]=Na.y,_b.array[Mb+6]=Na.z,_b.array[Mb+7]=Na.w,_b.array[Mb+8]=Oa.x,_b.array[Mb+9]=Oa.y,_b.array[Mb+10]=Oa.z,_b.array[Mb+11]=Oa.w,Mb+=12;for(Ba=0,Ca=lc.length;Ca>Ba;Ba++)Pa=Oa=Na=Ma=Nb=_b.value[lc[Ba]],_b.array[Mb]=Ma.x,_b.array[Mb+1]=Ma.y,_b.array[Mb+2]=Ma.z,_b.array[Mb+3]=Ma.w,_b.array[Mb+4]=Na.x,_b.array[Mb+5]=Na.y,_b.array[Mb+6]=Na.z,_b.array[Mb+7]=Na.w,_b.array[Mb+8]=Oa.x,_b.array[Mb+9]=Oa.y,_b.array[Mb+10]=Oa.z,_b.array[Mb+11]=Oa.w,_b.array[Mb+12]=Pa.x,_b.array[Mb+13]=Pa.y,_b.array[Mb+14]=Pa.z,_b.array[Mb+15]=Pa.w,Mb+=16}F.bindBuffer(F.ARRAY_BUFFER,_b.buffer),F.bufferData(F.ARRAY_BUFFER,_b.array,ua)}va&&(delete sa.__inittedArrays,delete sa.__colorArray,delete sa.__normalArray,delete sa.__tangentArray,delete sa.__uvArray,delete sa.__uv2Array,delete sa.__faceArray,delete sa.__vertexArray,delete sa.__lineArray,delete sa.__skinVertexAArray,delete sa.__skinVertexBArray,delete sa.__skinIndexArray,delete sa.__skinWeightArray)}}ma.verticesNeedUpdate=!1,ma.morphTargetsNeedUpdate=!1,ma.elementsNeedUpdate=!1,ma.uvsNeedUpdate=!1,ma.normalsNeedUpdate=!1,ma.colorsNeedUpdate=!1,ma.tangetsNeedUpdate=!1,pa.attributes&&m(pa)}else if(la instanceof THREE.Line){if(pa=c(la,na),oa=pa.attributes&&l(pa),ma.verticesNeedUpdate||ma.colorsNeedUpdate||oa){var wc=ma,xc=F.DYNAMIC_DRAW,yc=void 0,zc=void 0,Ac=void 0,Bc=void 0,Cc=void 0,Dc=wc.vertices,Ec=wc.colors,Fc=Dc.length,Gc=Ec.length,Hc=wc.__vertexArray,Ic=wc.__colorArray,Jc=wc.colorsNeedUpdate,Kc=wc.__webglCustomAttributesList,Lc=void 0,Mc=void 0,Nc=void 0,Oc=void 0,Pc=void 0,Qc=void 0;if(wc.verticesNeedUpdate){for(yc=0;Fc>yc;yc++)Ac=Dc[yc],Bc=3*yc,Hc[Bc]=Ac.x,Hc[Bc+1]=Ac.y,Hc[Bc+2]=Ac.z;F.bindBuffer(F.ARRAY_BUFFER,wc.__webglVertexBuffer),F.bufferData(F.ARRAY_BUFFER,Hc,xc)}if(Jc){for(zc=0;Gc>zc;zc++)Cc=Ec[zc],Bc=3*zc,Ic[Bc]=Cc.r,Ic[Bc+1]=Cc.g,Ic[Bc+2]=Cc.b;F.bindBuffer(F.ARRAY_BUFFER,wc.__webglColorBuffer),F.bufferData(F.ARRAY_BUFFER,Ic,xc)}if(Kc)for(Lc=0,Mc=Kc.length;Mc>Lc;Lc++)if(Qc=Kc[Lc],Qc.needsUpdate&&(void 0===Qc.boundTo||"vertices"===Qc.boundTo)){if(Bc=0,Oc=Qc.value.length,1===Qc.size)for(Nc=0;Oc>Nc;Nc++)Qc.array[Nc]=Qc.value[Nc];else if(2===Qc.size)for(Nc=0;Oc>Nc;Nc++)Pc=Qc.value[Nc],Qc.array[Bc]=Pc.x,Qc.array[Bc+1]=Pc.y,Bc+=2;else if(3===Qc.size)if("c"===Qc.type)for(Nc=0;Oc>Nc;Nc++)Pc=Qc.value[Nc],Qc.array[Bc]=Pc.r,Qc.array[Bc+1]=Pc.g,Qc.array[Bc+2]=Pc.b,Bc+=3;else for(Nc=0;Oc>Nc;Nc++)Pc=Qc.value[Nc],Qc.array[Bc]=Pc.x,Qc.array[Bc+1]=Pc.y,Qc.array[Bc+2]=Pc.z,Bc+=3;else if(4===Qc.size)for(Nc=0;Oc>Nc;Nc++)Pc=Qc.value[Nc],Qc.array[Bc]=Pc.x,Qc.array[Bc+1]=Pc.y,Qc.array[Bc+2]=Pc.z,Qc.array[Bc+3]=Pc.w,Bc+=4;F.bindBuffer(F.ARRAY_BUFFER,Qc.buffer),F.bufferData(F.ARRAY_BUFFER,Qc.array,xc)}}ma.verticesNeedUpdate=!1,ma.colorsNeedUpdate=!1,pa.attributes&&m(pa)}else la instanceof THREE.ParticleSystem&&(pa=c(la,na),oa=pa.attributes&&l(pa),(ma.verticesNeedUpdate||ma.colorsNeedUpdate||la.sortParticles||oa)&&f(ma,F.DYNAMIC_DRAW,la),ma.verticesNeedUpdate=!1,ma.colorsNeedUpdate=!1,pa.attributes&&m(pa))}},this.initMaterial=function(a,b,c,d){var e,f,g;if(a instanceof THREE.MeshDepthMaterial?g="depth":a instanceof THREE.MeshNormalMaterial?g="normal":a instanceof THREE.MeshBasicMaterial?g="basic":a instanceof THREE.MeshLambertMaterial?g="lambert":a instanceof THREE.MeshPhongMaterial?g="phong":a instanceof THREE.LineBasicMaterial?g="basic":a instanceof THREE.ParticleBasicMaterial&&(g="particle_basic"),g){var h=THREE.ShaderLib[g];a.uniforms=THREE.UniformsUtils.clone(h.uniforms),a.vertexShader=h.vertexShader,a.fragmentShader=h.fragmentShader}var i,j,k,l,m;for(i=l=m=h=0,j=b.length;j>i;i++)k=b[i],k.onlyShadow||(k instanceof THREE.DirectionalLight&&l++,k instanceof THREE.PointLight&&m++,k instanceof THREE.SpotLight&&h++);E>=m+h+l?(j=l,k=m,l=h):(j=Math.ceil(E*l/(m+l)),l=k=E-j);var n=0,h=0;for(m=b.length;m>h;h++)i=b[h],i.castShadow&&(i instanceof THREE.SpotLight&&n++,i instanceof THREE.DirectionalLight&&!i.shadowCascade&&n++);var o;a:{m=a.fragmentShader,i=a.vertexShader;var p,h=a.uniforms,b=a.attributes,c={map:!!a.map,envMap:!!a.envMap,lightMap:!!a.lightMap,vertexColors:a.vertexColors,fog:c,useFog:a.fog,sizeAttenuation:a.sizeAttenuation,skinning:a.skinning,maxBones:50,morphTargets:a.morphTargets,morphNormals:a.morphNormals,maxMorphTargets:this.maxMorphTargets,maxMorphNormals:this.maxMorphNormals,maxDirLights:j,maxPointLights:k,maxSpotLights:l,maxShadows:n,shadowMapEnabled:this.shadowMapEnabled&&d.receiveShadow,shadowMapSoft:this.shadowMapSoft,shadowMapDebug:this.shadowMapDebug,shadowMapCascade:this.shadowMapCascade,alphaTest:a.alphaTest,metal:a.metal,perPixel:a.perPixel,wrapAround:a.wrapAround,doubleSided:d&&d.doubleSided},d=[];g?d.push(g):(d.push(m),d.push(i));for(p in c)d.push(p),d.push(c[p]);for(g=d.join(),p=0,d=H.length;d>p;p++)if(H[p].code===g){o=H[p].program;break a}p=F.createProgram(),d=["precision "+w+" float;",la>0?"#define VERTEX_TEXTURES":"",G.gammaInput?"#define GAMMA_INPUT":"",G.gammaOutput?"#define GAMMA_OUTPUT":"",G.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"","#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_SHADOWS "+c.maxShadows,"#define MAX_BONES "+c.maxBones,c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.vertexColors?"#define USE_COLOR":"",c.skinning?"#define USE_SKINNING":"",c.morphTargets?"#define USE_MORPHTARGETS":"",c.morphNormals?"#define USE_MORPHNORMALS":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapSoft?"#define SHADOWMAP_SOFT":"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"",c.sizeAttenuation?"#define USE_SIZEATTENUATION":"","uniform mat4 objectMatrix;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform mat4 viewMatrix;\nuniform mat3 normalMatrix;\nuniform vec3 cameraPosition;\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 uv;\nattribute vec2 uv2;\n#ifdef USE_COLOR\nattribute vec3 color;\n#endif\n#ifdef USE_MORPHTARGETS\nattribute vec3 morphTarget0;\nattribute vec3 morphTarget1;\nattribute vec3 morphTarget2;\nattribute vec3 morphTarget3;\n#ifdef USE_MORPHNORMALS\nattribute vec3 morphNormal0;\nattribute vec3 morphNormal1;\nattribute vec3 morphNormal2;\nattribute vec3 morphNormal3;\n#else\nattribute vec3 morphTarget4;\nattribute vec3 morphTarget5;\nattribute vec3 morphTarget6;\nattribute vec3 morphTarget7;\n#endif\n#endif\n#ifdef USE_SKINNING\nattribute vec4 skinVertexA;\nattribute vec4 skinVertexB;\nattribute vec4 skinIndex;\nattribute vec4 skinWeight;\n#endif\n"].join("\n"),j=["precision "+w+" float;","#define MAX_DIR_LIGHTS "+c.maxDirLights,"#define MAX_POINT_LIGHTS "+c.maxPointLights,"#define MAX_SPOT_LIGHTS "+c.maxSpotLights,"#define MAX_SHADOWS "+c.maxShadows,c.alphaTest?"#define ALPHATEST "+c.alphaTest:"",G.gammaInput?"#define GAMMA_INPUT":"",G.gammaOutput?"#define GAMMA_OUTPUT":"",G.physicallyBasedShading?"#define PHYSICALLY_BASED_SHADING":"",c.useFog&&c.fog?"#define USE_FOG":"",c.useFog&&c.fog instanceof THREE.FogExp2?"#define FOG_EXP2":"",c.map?"#define USE_MAP":"",c.envMap?"#define USE_ENVMAP":"",c.lightMap?"#define USE_LIGHTMAP":"",c.vertexColors?"#define USE_COLOR":"",c.metal?"#define METAL":"",c.perPixel?"#define PHONG_PER_PIXEL":"",c.wrapAround?"#define WRAP_AROUND":"",c.doubleSided?"#define DOUBLE_SIDED":"",c.shadowMapEnabled?"#define USE_SHADOWMAP":"",c.shadowMapSoft?"#define SHADOWMAP_SOFT":"",c.shadowMapDebug?"#define SHADOWMAP_DEBUG":"",c.shadowMapCascade?"#define SHADOWMAP_CASCADE":"","uniform mat4 viewMatrix;\nuniform vec3 cameraPosition;\n"].join("\n"),F.attachShader(p,q("fragment",j+m)),F.attachShader(p,q("vertex",d+i)),F.linkProgram(p),F.getProgramParameter(p,F.LINK_STATUS)||void 0,p.uniforms={},p.attributes={};var r,d=["viewMatrix","modelViewMatrix","projectionMatrix","normalMatrix","objectMatrix","cameraPosition","boneGlobalMatrices","morphTargetInfluences"];for(r in h)d.push(r);for(r=d,d=0,h=r.length;h>d;d++)m=r[d],p.uniforms[m]=F.getUniformLocation(p,m);for(d=["position","normal","uv","uv2","tangent","color","skinVertexA","skinVertexB","skinIndex","skinWeight"],r=0;r<c.maxMorphTargets;r++)d.push("morphTarget"+r);for(r=0;r<c.maxMorphNormals;r++)d.push("morphNormal"+r);for(o in b)d.push(o);for(o=d,r=0,b=o.length;b>r;r++)c=o[r],p.attributes[c]=F.getAttribLocation(p,c);p.id=H.length,H.push({program:p,code:g}),G.info.memory.programs=H.length,o=p}if(a.program=o,o=a.program.attributes,o.position>=0&&F.enableVertexAttribArray(o.position),o.color>=0&&F.enableVertexAttribArray(o.color),o.normal>=0&&F.enableVertexAttribArray(o.normal),o.tangent>=0&&F.enableVertexAttribArray(o.tangent),a.skinning&&o.skinVertexA>=0&&o.skinVertexB>=0&&o.skinIndex>=0&&o.skinWeight>=0&&(F.enableVertexAttribArray(o.skinVertexA),F.enableVertexAttribArray(o.skinVertexB),F.enableVertexAttribArray(o.skinIndex),F.enableVertexAttribArray(o.skinWeight)),a.attributes)for(f in a.attributes)void 0!==o[f]&&o[f]>=0&&F.enableVertexAttribArray(o[f]);if(a.morphTargets)for(a.numSupportedMorphTargets=0,p="morphTarget",f=0;f<this.maxMorphTargets;f++)r=p+f,o[r]>=0&&(F.enableVertexAttribArray(o[r]),a.numSupportedMorphTargets++);if(a.morphNormals)for(a.numSupportedMorphNormals=0,p="morphNormal",f=0;f<this.maxMorphNormals;f++)r=p+f,o[r]>=0&&(F.enableVertexAttribArray(o[r]),a.numSupportedMorphNormals++);a.uniformsList=[];for(e in a.uniforms)a.uniformsList.push([a.uniforms[e],e])},this.setFaceCulling=function(a,b){a?(b&&"ccw"!==b?F.frontFace(F.CW):F.frontFace(F.CCW),"back"===a?F.cullFace(F.BACK):"front"===a?F.cullFace(F.FRONT):F.cullFace(F.FRONT_AND_BACK),F.enable(F.CULL_FACE)):F.disable(F.CULL_FACE)},this.setObjectFaces=function(a){O!==a.doubleSided&&(a.doubleSided?F.disable(F.CULL_FACE):F.enable(F.CULL_FACE),O=a.doubleSided),P!==a.flipSided&&(a.flipSided?F.frontFace(F.CW):F.frontFace(F.CCW),P=a.flipSided)},this.setDepthTest=function(a){U!==a&&(a?F.enable(F.DEPTH_TEST):F.disable(F.DEPTH_TEST),U=a)},this.setDepthWrite=function(a){V!==a&&(F.depthMask(a),V=a)},this.setBlending=function(a,b,c,d){if(a!==Q){switch(a){case THREE.NoBlending:F.disable(F.BLEND);break;case THREE.AdditiveBlending:F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.SRC_ALPHA,F.ONE);break;case THREE.SubtractiveBlending:F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.ZERO,F.ONE_MINUS_SRC_COLOR);break;case THREE.MultiplyBlending:F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.ZERO,F.SRC_COLOR);break;case THREE.CustomBlending:F.enable(F.BLEND);break;default:F.enable(F.BLEND),F.blendEquationSeparate(F.FUNC_ADD,F.FUNC_ADD),F.blendFuncSeparate(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA,F.ONE,F.ONE_MINUS_SRC_ALPHA)}Q=a}a===THREE.CustomBlending?(b!==R&&(F.blendEquation(u(b)),R=b),c===S&&d===T||(F.blendFunc(u(c),u(d)),S=c,T=d)):T=S=R=null},this.setTexture=function(a,b){if(a.needsUpdate){a.__webglInit||(a.__webglInit=!0,a.__webglTexture=F.createTexture(),G.info.memory.textures++),F.activeTexture(F.TEXTURE0+b),F.bindTexture(F.TEXTURE_2D,a.__webglTexture),F.pixelStorei(F.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha);var c=a.image,d=0===(c.width&c.width-1)&&0===(c.height&c.height-1),e=u(a.format),f=u(a.type);r(F.TEXTURE_2D,a,d),a instanceof THREE.DataTexture?F.texImage2D(F.TEXTURE_2D,0,e,c.width,c.height,0,e,f,c.data):F.texImage2D(F.TEXTURE_2D,0,e,e,f,a.image),a.generateMipmaps&&d&&F.generateMipmap(F.TEXTURE_2D),a.needsUpdate=!1,a.onUpdate&&a.onUpdate()}else F.activeTexture(F.TEXTURE0+b),F.bindTexture(F.TEXTURE_2D,a.__webglTexture)},this.setRenderTarget=function(a){var b=a instanceof THREE.WebGLRenderTargetCube;if(a&&!a.__webglFramebuffer){void 0===a.depthBuffer&&(a.depthBuffer=!0),void 0===a.stencilBuffer&&(a.stencilBuffer=!0),a.__webglTexture=F.createTexture();var c=0===(a.width&a.width-1)&&0===(a.height&a.height-1),d=u(a.format),e=u(a.type);if(b){a.__webglFramebuffer=[],a.__webglRenderbuffer=[],F.bindTexture(F.TEXTURE_CUBE_MAP,a.__webglTexture),r(F.TEXTURE_CUBE_MAP,a,c);for(var f=0;6>f;f++){a.__webglFramebuffer[f]=F.createFramebuffer(),a.__webglRenderbuffer[f]=F.createRenderbuffer(),F.texImage2D(F.TEXTURE_CUBE_MAP_POSITIVE_X+f,0,d,a.width,a.height,0,d,e,null);var g=a,h=F.TEXTURE_CUBE_MAP_POSITIVE_X+f;F.bindFramebuffer(F.FRAMEBUFFER,a.__webglFramebuffer[f]),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,h,g.__webglTexture,0),s(a.__webglRenderbuffer[f],a)}c&&F.generateMipmap(F.TEXTURE_CUBE_MAP)}else a.__webglFramebuffer=F.createFramebuffer(),a.__webglRenderbuffer=F.createRenderbuffer(),F.bindTexture(F.TEXTURE_2D,a.__webglTexture),r(F.TEXTURE_2D,a,c),F.texImage2D(F.TEXTURE_2D,0,d,a.width,a.height,0,d,e,null),d=F.TEXTURE_2D,F.bindFramebuffer(F.FRAMEBUFFER,a.__webglFramebuffer),F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,d,a.__webglTexture,0),s(a.__webglRenderbuffer,a),c&&F.generateMipmap(F.TEXTURE_2D);b?F.bindTexture(F.TEXTURE_CUBE_MAP,null):F.bindTexture(F.TEXTURE_2D,null),F.bindRenderbuffer(F.RENDERBUFFER,null),F.bindFramebuffer(F.FRAMEBUFFER,null)}a?(b=b?a.__webglFramebuffer[a.activeCubeFace]:a.__webglFramebuffer,c=a.width,a=a.height,e=d=0):(b=null,c=aa,a=ba,d=$,e=_),b!==J&&(F.bindFramebuffer(F.FRAMEBUFFER,b),F.viewport(d,e,c,a),J=b),ca=c,da=a}},THREE.WebGLRenderTarget=function(a,b,c){this.width=a,this.height=b,c=c||{},this.wrapS=void 0!==c.wrapS?c.wrapS:THREE.ClampToEdgeWrapping,this.wrapT=void 0!==c.wrapT?c.wrapT:THREE.ClampToEdgeWrapping,this.magFilter=void 0!==c.magFilter?c.magFilter:THREE.LinearFilter,this.minFilter=void 0!==c.minFilter?c.minFilter:THREE.LinearMipMapLinearFilter,this.offset=new THREE.Vector2(0,0),this.repeat=new THREE.Vector2(1,1),this.format=void 0!==c.format?c.format:THREE.RGBAFormat,this.type=void 0!==c.type?c.type:THREE.UnsignedByteType,this.depthBuffer=void 0!==c.depthBuffer?c.depthBuffer:!0,this.stencilBuffer=void 0!==c.stencilBuffer?c.stencilBuffer:!0,this.generateMipmaps=!0},THREE.WebGLRenderTarget.prototype.clone=function(){var a=new THREE.WebGLRenderTarget(this.width,this.height);return a.wrapS=this.wrapS,a.wrapT=this.wrapT,a.magFilter=this.magFilter,a.minFilter=this.minFilter,a.offset.copy(this.offset),a.repeat.copy(this.repeat),a.format=this.format,a.type=this.type,a.depthBuffer=this.depthBuffer,a.stencilBuffer=this.stencilBuffer,a},THREE.WebGLRenderTargetCube=function(a,b,c){THREE.WebGLRenderTarget.call(this,a,b,c),this.activeCubeFace=0},THREE.WebGLRenderTargetCube.prototype=new THREE.WebGLRenderTarget,THREE.WebGLRenderTargetCube.prototype.constructor=THREE.WebGLRenderTargetCube,THREE.RenderableVertex=function(){this.positionWorld=new THREE.Vector3,this.positionScreen=new THREE.Vector4,this.visible=!0},THREE.RenderableVertex.prototype.copy=function(a){this.positionWorld.copy(a.positionWorld),this.positionScreen.copy(a.positionScreen)},THREE.RenderableFace3=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableFace4=function(){this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.v3=new THREE.RenderableVertex,this.v4=new THREE.RenderableVertex,this.centroidWorld=new THREE.Vector3,this.centroidScreen=new THREE.Vector3,this.normalWorld=new THREE.Vector3,this.vertexNormalsWorld=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3],this.faceMaterial=this.material=null,this.uvs=[[]],this.z=null},THREE.RenderableObject=function(){this.z=this.object=null},THREE.RenderableLine=function(){this.z=null,this.v1=new THREE.RenderableVertex,this.v2=new THREE.RenderableVertex,this.material=null},THREE.GeometryUtils={merge:function(a,b){for(var c,d,e=a.vertices.length,f=b instanceof THREE.Mesh?b.geometry:b,g=a.vertices,h=f.vertices,i=a.faces,j=f.faces,k=a.faceVertexUvs[0],l=f.faceVertexUvs[0],m={},n=0;n<a.materials.length;n++)m[a.materials[n].id]=n;b instanceof THREE.Mesh&&(b.matrixAutoUpdate&&b.updateMatrix(),c=b.matrix,d=new THREE.Matrix4,d.extractRotation(c,b.scale));for(var n=0,o=h.length;o>n;n++){var p=h[n].clone();c&&c.multiplyVector3(p),g.push(p)}for(n=0,o=j.length;o>n;n++){var q,r,g=j[n],s=g.vertexNormals,t=g.vertexColors;for(g instanceof THREE.Face3?q=new THREE.Face3(g.a+e,g.b+e,g.c+e):g instanceof THREE.Face4&&(q=new THREE.Face4(g.a+e,g.b+e,g.c+e,g.d+e)),q.normal.copy(g.normal),d&&d.multiplyVector3(q.normal),h=0,p=s.length;p>h;h++)r=s[h].clone(),d&&d.multiplyVector3(r),q.vertexNormals.push(r);for(q.color.copy(g.color),h=0,p=t.length;p>h;h++)r=t[h],q.vertexColors.push(r.clone());void 0!==g.materialIndex&&(h=f.materials[g.materialIndex],p=h.id,t=m[p],void 0===t&&(t=a.materials.length,m[p]=t,a.materials.push(h)),q.materialIndex=t),q.centroid.copy(g.centroid),c&&c.multiplyVector3(q.centroid),
i.push(q)}for(n=0,o=l.length;o>n;n++){for(c=l[n],d=[],h=0,p=c.length;p>h;h++)d.push(new THREE.UV(c[h].u,c[h].v));k.push(d)}},clone:function(a){var b,c=new THREE.Geometry,d=a.vertices,e=a.faces,f=a.faceVertexUvs[0];for(a.materials&&(c.materials=a.materials.slice()),a=0,b=d.length;b>a;a++)c.vertices.push(d[a].clone());for(a=0,b=e.length;b>a;a++)c.faces.push(e[a].clone());for(a=0,b=f.length;b>a;a++){for(var d=f[a],e=[],g=0,h=d.length;h>g;g++)e.push(new THREE.UV(d[g].u,d[g].v));c.faceVertexUvs[0].push(e)}return c},randomPointInTriangle:function(a,b,c){var d,e,f,g=new THREE.Vector3,h=THREE.GeometryUtils.__v1;return d=THREE.GeometryUtils.random(),e=THREE.GeometryUtils.random(),d+e>1&&(d=1-d,e=1-e),f=1-d-e,g.copy(a),g.multiplyScalar(d),h.copy(b),h.multiplyScalar(e),g.addSelf(h),h.copy(c),h.multiplyScalar(f),g.addSelf(h),g},randomPointInFace:function(a,b,c){var d,e,f;if(a instanceof THREE.Face3)return d=b.vertices[a.a],e=b.vertices[a.b],f=b.vertices[a.c],THREE.GeometryUtils.randomPointInTriangle(d,e,f);if(a instanceof THREE.Face4){d=b.vertices[a.a],e=b.vertices[a.b],f=b.vertices[a.c];var g,b=b.vertices[a.d];return c?a._area1&&a._area2?(c=a._area1,g=a._area2):(c=THREE.GeometryUtils.triangleArea(d,e,b),g=THREE.GeometryUtils.triangleArea(e,f,b),a._area1=c,a._area2=g):(c=THREE.GeometryUtils.triangleArea(d,e,b),g=THREE.GeometryUtils.triangleArea(e,f,b)),THREE.GeometryUtils.random()*(c+g)<c?THREE.GeometryUtils.randomPointInTriangle(d,e,b):THREE.GeometryUtils.randomPointInTriangle(e,f,b)}},randomPointsInGeometry:function(a,b){function c(a){function b(c,d){if(c>d)return c;var e=c+Math.floor((d-c)/2);return n[e]>a?b(c,e-1):n[e]<a?b(e+1,d):e}return b(0,n.length-1)}var d,e,f,g,h,i,j=a.faces,k=a.vertices,l=j.length,m=0,n=[];for(e=0;l>e;e++)d=j[e],d instanceof THREE.Face3?(f=k[d.a],g=k[d.b],h=k[d.c],d._area=THREE.GeometryUtils.triangleArea(f,g,h)):d instanceof THREE.Face4&&(f=k[d.a],g=k[d.b],h=k[d.c],i=k[d.d],d._area1=THREE.GeometryUtils.triangleArea(f,g,i),d._area2=THREE.GeometryUtils.triangleArea(g,h,i),d._area=d._area1+d._area2),m+=d._area,n[e]=m;for(d=[],e=0;b>e;e++)k=THREE.GeometryUtils.random()*m,k=c(k),d[e]=THREE.GeometryUtils.randomPointInFace(j[k],a,!0);return d},triangleArea:function(a,b,c){var d,e=THREE.GeometryUtils.__v1;return e.sub(a,b),d=e.length(),e.sub(a,c),a=e.length(),e.sub(b,c),c=e.length(),b=.5*(d+a+c),Math.sqrt(b*(b-d)*(b-a)*(b-c))},center:function(a){a.computeBoundingBox();var b=a.boundingBox,c=new THREE.Vector3;return c.add(b.min,b.max),c.multiplyScalar(-.5),a.applyMatrix((new THREE.Matrix4).makeTranslation(c.x,c.y,c.z)),a.computeBoundingBox(),c},normalizeUVs:function(a){for(var a=a.faceVertexUvs[0],b=0,c=a.length;c>b;b++)for(var d=a[b],e=0,f=d.length;f>e;e++)1!==d[e].u&&(d[e].u=d[e].u-Math.floor(d[e].u)),1!==d[e].v&&(d[e].v=d[e].v-Math.floor(d[e].v))},triangulateQuads:function(a){var b,c,d,e,f=[],g=[],h=[];for(b=0,c=a.faceUvs.length;c>b;b++)g[b]=[];for(b=0,c=a.faceVertexUvs.length;c>b;b++)h[b]=[];for(b=0,c=a.faces.length;c>b;b++)if(d=a.faces[b],d instanceof THREE.Face4){e=d.a;var i=d.b,j=d.c,k=d.d,l=new THREE.Face3,m=new THREE.Face3;for(l.color.copy(d.color),m.color.copy(d.color),l.materialIndex=d.materialIndex,m.materialIndex=d.materialIndex,l.a=e,l.b=i,l.c=k,m.a=i,m.b=j,m.c=k,4===d.vertexColors.length&&(l.vertexColors[0]=d.vertexColors[0].clone(),l.vertexColors[1]=d.vertexColors[1].clone(),l.vertexColors[2]=d.vertexColors[3].clone(),m.vertexColors[0]=d.vertexColors[1].clone(),m.vertexColors[1]=d.vertexColors[2].clone(),m.vertexColors[2]=d.vertexColors[3].clone()),f.push(l,m),d=0,e=a.faceVertexUvs.length;e>d;d++)a.faceVertexUvs[d].length&&(l=a.faceVertexUvs[d][b],i=l[1],j=l[2],k=l[3],l=[l[0].clone(),i.clone(),k.clone()],i=[i.clone(),j.clone(),k.clone()],h[d].push(l,i));for(d=0,e=a.faceUvs.length;e>d;d++)a.faceUvs[d].length&&(i=a.faceUvs[d][b],g[d].push(i,i))}else{for(f.push(d),d=0,e=a.faceUvs.length;e>d;d++)g[d].push(a.faceUvs[d]);for(d=0,e=a.faceVertexUvs.length;e>d;d++)h[d].push(a.faceVertexUvs[d])}a.faces=f,a.faceUvs=g,a.faceVertexUvs=h,a.computeCentroids(),a.computeFaceNormals(),a.computeVertexNormals(),a.hasTangents&&a.computeTangents()},explode:function(a){for(var b=[],c=0,d=a.faces.length;d>c;c++){var e=b.length,f=a.faces[c];if(f instanceof THREE.Face4){var g=f.a,h=f.b,i=f.c,g=a.vertices[g],h=a.vertices[h],i=a.vertices[i],j=a.vertices[f.d];b.push(g.clone()),b.push(h.clone()),b.push(i.clone()),b.push(j.clone()),f.a=e,f.b=e+1,f.c=e+2,f.d=e+3}else g=f.a,h=f.b,i=f.c,g=a.vertices[g],h=a.vertices[h],i=a.vertices[i],b.push(g.clone()),b.push(h.clone()),b.push(i.clone()),f.a=e,f.b=e+1,f.c=e+2}a.vertices=b,delete a.__tmpVertices},tessellate:function(a,b){var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=[],w=[];for(c=0,d=a.faceVertexUvs.length;d>c;c++)w[c]=[];for(c=0,d=a.faces.length;d>c;c++)if(e=a.faces[c],e instanceof THREE.Face3)if(f=e.a,g=e.b,h=e.c,j=a.vertices[f],k=a.vertices[g],l=a.vertices[h],n=j.distanceTo(k),o=k.distanceTo(l),m=j.distanceTo(l),n>b||o>b||m>b)for(i=a.vertices.length,t=e.clone(),u=e.clone(),n>=o&&n>=m?(j=j.clone(),j.lerpSelf(k,.5),t.a=f,t.b=i,t.c=h,u.a=i,u.b=g,u.c=h,3===e.vertexNormals.length&&(f=e.vertexNormals[0].clone(),f.lerpSelf(e.vertexNormals[1],.5),t.vertexNormals[1].copy(f),u.vertexNormals[0].copy(f)),3===e.vertexColors.length&&(f=e.vertexColors[0].clone(),f.lerpSelf(e.vertexColors[1],.5),t.vertexColors[1].copy(f),u.vertexColors[0].copy(f)),e=0):o>=n&&o>=m?(j=k.clone(),j.lerpSelf(l,.5),t.a=f,t.b=g,t.c=i,u.a=i,u.b=h,u.c=f,3===e.vertexNormals.length&&(f=e.vertexNormals[1].clone(),f.lerpSelf(e.vertexNormals[2],.5),t.vertexNormals[2].copy(f),u.vertexNormals[0].copy(f),u.vertexNormals[1].copy(e.vertexNormals[2]),u.vertexNormals[2].copy(e.vertexNormals[0])),3===e.vertexColors.length&&(f=e.vertexColors[1].clone(),f.lerpSelf(e.vertexColors[2],.5),t.vertexColors[2].copy(f),u.vertexColors[0].copy(f),u.vertexColors[1].copy(e.vertexColors[2]),u.vertexColors[2].copy(e.vertexColors[0])),e=1):(j=j.clone(),j.lerpSelf(l,.5),t.a=f,t.b=g,t.c=i,u.a=i,u.b=g,u.c=h,3===e.vertexNormals.length&&(f=e.vertexNormals[0].clone(),f.lerpSelf(e.vertexNormals[2],.5),t.vertexNormals[2].copy(f),u.vertexNormals[0].copy(f)),3===e.vertexColors.length&&(f=e.vertexColors[0].clone(),f.lerpSelf(e.vertexColors[2],.5),t.vertexColors[2].copy(f),u.vertexColors[0].copy(f)),e=2),v.push(t,u),a.vertices.push(j),f=0,g=a.faceVertexUvs.length;g>f;f++)a.faceVertexUvs[f].length&&(j=a.faceVertexUvs[f][c],u=j[0],h=j[1],t=j[2],0===e?(k=u.clone(),k.lerpSelf(h,.5),j=[u.clone(),k.clone(),t.clone()],h=[k.clone(),h.clone(),t.clone()]):1===e?(k=h.clone(),k.lerpSelf(t,.5),j=[u.clone(),h.clone(),k.clone()],h=[k.clone(),t.clone(),u.clone()]):(k=u.clone(),k.lerpSelf(t,.5),j=[u.clone(),h.clone(),k.clone()],h=[k.clone(),h.clone(),t.clone()]),w[f].push(j,h));else for(v.push(e),f=0,g=a.faceVertexUvs.length;g>f;f++)w[f].push(a.faceVertexUvs[f][c]);else if(f=e.a,g=e.b,h=e.c,i=e.d,j=a.vertices[f],k=a.vertices[g],l=a.vertices[h],m=a.vertices[i],n=j.distanceTo(k),o=k.distanceTo(l),p=l.distanceTo(m),q=j.distanceTo(m),n>b||o>b||p>b||q>b)for(r=a.vertices.length,s=a.vertices.length+1,t=e.clone(),u=e.clone(),n>=o&&n>=p&&n>=q||p>=o&&p>=n&&p>=q?(n=j.clone(),n.lerpSelf(k,.5),k=l.clone(),k.lerpSelf(m,.5),t.a=f,t.b=r,t.c=s,t.d=i,u.a=r,u.b=g,u.c=h,u.d=s,4===e.vertexNormals.length&&(f=e.vertexNormals[0].clone(),f.lerpSelf(e.vertexNormals[1],.5),g=e.vertexNormals[2].clone(),g.lerpSelf(e.vertexNormals[3],.5),t.vertexNormals[1].copy(f),t.vertexNormals[2].copy(g),u.vertexNormals[0].copy(f),u.vertexNormals[3].copy(g)),4===e.vertexColors.length&&(f=e.vertexColors[0].clone(),f.lerpSelf(e.vertexColors[1],.5),g=e.vertexColors[2].clone(),g.lerpSelf(e.vertexColors[3],.5),t.vertexColors[1].copy(f),t.vertexColors[2].copy(g),u.vertexColors[0].copy(f),u.vertexColors[3].copy(g)),e=0):(n=k.clone(),n.lerpSelf(l,.5),k=m.clone(),k.lerpSelf(j,.5),t.a=f,t.b=g,t.c=r,t.d=s,u.a=s,u.b=r,u.c=h,u.d=i,4===e.vertexNormals.length&&(f=e.vertexNormals[1].clone(),f.lerpSelf(e.vertexNormals[2],.5),g=e.vertexNormals[3].clone(),g.lerpSelf(e.vertexNormals[0],.5),t.vertexNormals[2].copy(f),t.vertexNormals[3].copy(g),u.vertexNormals[0].copy(g),u.vertexNormals[1].copy(f)),4===e.vertexColors.length&&(f=e.vertexColors[1].clone(),f.lerpSelf(e.vertexColors[2],.5),g=e.vertexColors[3].clone(),g.lerpSelf(e.vertexColors[0],.5),t.vertexColors[2].copy(f),t.vertexColors[3].copy(g),u.vertexColors[0].copy(g),u.vertexColors[1].copy(f)),e=1),v.push(t,u),a.vertices.push(n,k),f=0,g=a.faceVertexUvs.length;g>f;f++)a.faceVertexUvs[f].length&&(j=a.faceVertexUvs[f][c],u=j[0],h=j[1],t=j[2],j=j[3],0===e?(k=u.clone(),k.lerpSelf(h,.5),l=t.clone(),l.lerpSelf(j,.5),u=[u.clone(),k.clone(),l.clone(),j.clone()],h=[k.clone(),h.clone(),t.clone(),l.clone()]):(k=h.clone(),k.lerpSelf(t,.5),l=j.clone(),l.lerpSelf(u,.5),u=[u.clone(),h.clone(),k.clone(),l.clone()],h=[l.clone(),k.clone(),t.clone(),j.clone()]),w[f].push(u,h));else for(v.push(e),f=0,g=a.faceVertexUvs.length;g>f;f++)w[f].push(a.faceVertexUvs[f][c]);a.faces=v,a.faceVertexUvs=w}},THREE.GeometryUtils.random=THREE.Math.random16,THREE.GeometryUtils.__v1=new THREE.Vector3,THREE.ImageUtils={crossOrigin:"anonymous",loadTexture:function(a,b,c){var d=new Image,e=new THREE.Texture(d,b);return d.onload=function(){e.needsUpdate=!0,c&&c(this)},d.crossOrigin=this.crossOrigin,d.src=a,e},loadTextureCube:function(a,b,c){var d,e=[],f=new THREE.Texture(e,b),b=e.loadCount=0;for(d=a.length;d>b;++b)e[b]=new Image,e[b].onload=function(){e.loadCount=e.loadCount+1,6===e.loadCount&&(f.needsUpdate=!0),c&&c(this)},e[b].crossOrigin=this.crossOrigin,e[b].src=a[b];return f},getNormalMap:function(a,b){var c=function(a){var b=Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]);return[a[0]/b,a[1]/b,a[2]/b]},b=1|b,d=a.width,e=a.height,f=document.createElement("canvas");f.width=d,f.height=e;var g=f.getContext("2d");g.drawImage(a,0,0);for(var h=g.getImageData(0,0,d,e).data,i=g.createImageData(d,e),j=i.data,k=0;d>k;k++)for(var l=0;e>l;l++){var m=0>l-1?0:l-1,n=l+1>e-1?e-1:l+1,o=0>k-1?0:k-1,p=k+1>d-1?d-1:k+1,q=[],r=[0,0,h[4*(l*d+k)]/255*b];for(q.push([-1,0,h[4*(l*d+o)]/255*b]),q.push([-1,-1,h[4*(m*d+o)]/255*b]),q.push([0,-1,h[4*(m*d+k)]/255*b]),q.push([1,-1,h[4*(m*d+p)]/255*b]),q.push([1,0,h[4*(l*d+p)]/255*b]),q.push([1,1,h[4*(n*d+p)]/255*b]),q.push([0,1,h[4*(n*d+k)]/255*b]),q.push([-1,1,h[4*(n*d+o)]/255*b]),m=[],o=q.length,n=0;o>n;n++){var p=q[n],s=q[(n+1)%o],p=[p[0]-r[0],p[1]-r[1],p[2]-r[2]],s=[s[0]-r[0],s[1]-r[1],s[2]-r[2]];m.push(c([p[1]*s[2]-p[2]*s[1],p[2]*s[0]-p[0]*s[2],p[0]*s[1]-p[1]*s[0]]))}for(q=[0,0,0],n=0;n<m.length;n++)q[0]=q[0]+m[n][0],q[1]=q[1]+m[n][1],q[2]=q[2]+m[n][2];q[0]=q[0]/m.length,q[1]=q[1]/m.length,q[2]=q[2]/m.length,r=4*(l*d+k),j[r]=(q[0]+1)/2*255|0,j[r+1]=255*(q[1]+.5)|0,j[r+2]=255*q[2]|0,j[r+3]=255}return g.putImageData(i,0,0),f},generateDataTexture:function(a,b,c){for(var d=a*b,e=new Uint8Array(3*d),f=Math.floor(255*c.r),g=Math.floor(255*c.g),c=Math.floor(255*c.b),h=0;d>h;h++)e[3*h]=f,e[3*h+1]=g,e[3*h+2]=c;return a=new THREE.DataTexture(e,a,b,THREE.RGBFormat),a.needsUpdate=!0,a}},THREE.SceneUtils={showHierarchy:function(a,b){THREE.SceneUtils.traverseHierarchy(a,function(a){a.visible=b})},traverseHierarchy:function(a,b){var c,d,e=a.children.length;for(d=0;e>d;d++)c=a.children[d],b(c),THREE.SceneUtils.traverseHierarchy(c,b)},createMultiMaterialObject:function(a,b){var c,d=b.length,e=new THREE.Object3D;for(c=0;d>c;c++){var f=new THREE.Mesh(a,b[c]);e.add(f)}return e},cloneObject:function(a){var b;a instanceof THREE.Mesh?b=new THREE.Mesh(a.geometry,a.material):a instanceof THREE.Line?b=new THREE.Line(a.geometry,a.material,a.type):a instanceof THREE.Ribbon?b=new THREE.Ribbon(a.geometry,a.material):a instanceof THREE.ParticleSystem?(b=new THREE.ParticleSystem(a.geometry,a.material),b.sortParticles=a.sortParticles):a instanceof THREE.Particle?b=new THREE.Particle(a.material):a instanceof THREE.Sprite?(b=new THREE.Sprite({}),b.color.copy(a.color),b.map=a.map,b.blending=a.blending,b.useScreenCoordinates=a.useScreenCoordinates,b.mergeIntoThis3D=a.mergeIntoThis3D,b.affectedByDistance=a.affectedByDistance,b.scaleByViewport=a.scaleByViewport,b.alignment=a.alignment,b.rotation3d.copy(a.rotation3d),b.rotation=a.rotation,b.opacity=a.opacity,b.uvOffset.copy(a.uvOffset),b.uvScale.copy(a.uvScale)):a instanceof THREE.LOD?b=new THREE.LOD:a instanceof THREE.Object3D&&(b=new THREE.Object3D),b.name=a.name,b.parent=a.parent,b.up.copy(a.up),b.position.copy(a.position),b.rotation instanceof THREE.Vector3&&b.rotation.copy(a.rotation),b.eulerOrder=a.eulerOrder,b.scale.copy(a.scale),b.dynamic=a.dynamic,b.doubleSided=a.doubleSided,b.flipSided=a.flipSided,b.renderDepth=a.renderDepth,b.rotationAutoUpdate=a.rotationAutoUpdate,b.matrix.copy(a.matrix),b.matrixWorld.copy(a.matrixWorld),b.matrixRotationWorld.copy(a.matrixRotationWorld),b.matrixAutoUpdate=a.matrixAutoUpdate,b.matrixWorldNeedsUpdate=a.matrixWorldNeedsUpdate,b.quaternion.copy(a.quaternion),b.useQuaternion=a.useQuaternion,b.boundRadius=a.boundRadius,b.boundRadiusScale=a.boundRadiusScale,b.visible=a.visible,b.castShadow=a.castShadow,b.receiveShadow=a.receiveShadow,b.frustumCulled=a.frustumCulled;for(var c=0;c<a.children.length;c++){var d=THREE.SceneUtils.cloneObject(a.children[c]);b.children[c]=d,d.parent=b}if(a instanceof THREE.LOD)for(c=0;c<a.LODs.length;c++)b.LODs[c]={visibleAtDistance:a.LODs[c].visibleAtDistance,object3D:b.children[c]};return b},detach:function(a,b,c){a.applyMatrix(b.matrixWorld),b.remove(a),c.add(a)},attach:function(a,b,c){var d=new THREE.Matrix4;d.getInverse(c.matrixWorld),a.applyMatrix(d),b.remove(a),c.add(a)}},THREE.WebGLRenderer&&(THREE.ShaderUtils={lib:{fresnel:{uniforms:{mRefractionRatio:{type:"f",value:1.02},mFresnelBias:{type:"f",value:.1},mFresnelPower:{type:"f",value:2},mFresnelScale:{type:"f",value:1},tCube:{type:"t",value:1,texture:null}},fragmentShader:"uniform samplerCube tCube;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 reflectedColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\nvec4 refractedColor = vec4( 1.0, 1.0, 1.0, 1.0 );\nrefractedColor.r = textureCube( tCube, vec3( -vRefract[0].x, vRefract[0].yz ) ).r;\nrefractedColor.g = textureCube( tCube, vec3( -vRefract[1].x, vRefract[1].yz ) ).g;\nrefractedColor.b = textureCube( tCube, vec3( -vRefract[2].x, vRefract[2].yz ) ).b;\nrefractedColor.a = 1.0;\ngl_FragColor = mix( refractedColor, reflectedColor, clamp( vReflectionFactor, 0.0, 1.0 ) );\n}",vertexShader:"uniform float mRefractionRatio;\nuniform float mFresnelBias;\nuniform float mFresnelScale;\nuniform float mFresnelPower;\nvarying vec3 vReflect;\nvarying vec3 vRefract[3];\nvarying float vReflectionFactor;\nvoid main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvec3 nWorld = normalize ( mat3( objectMatrix[0].xyz, objectMatrix[1].xyz, objectMatrix[2].xyz ) * normal );\nvec3 I = mPosition.xyz - cameraPosition;\nvReflect = reflect( I, nWorld );\nvRefract[0] = refract( normalize( I ), nWorld, mRefractionRatio );\nvRefract[1] = refract( normalize( I ), nWorld, mRefractionRatio * 0.99 );\nvRefract[2] = refract( normalize( I ), nWorld, mRefractionRatio * 0.98 );\nvReflectionFactor = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( I ), nWorld ), mFresnelPower );\ngl_Position = projectionMatrix * mvPosition;\n}"},normal:{uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.fog,THREE.UniformsLib.lights,THREE.UniformsLib.shadowmap,{enableAO:{type:"i",value:0},enableDiffuse:{type:"i",value:0},enableSpecular:{type:"i",value:0},enableReflection:{type:"i",value:0},tDiffuse:{type:"t",value:0,texture:null},tCube:{type:"t",value:1,texture:null},tNormal:{type:"t",value:2,texture:null},tSpecular:{type:"t",value:3,texture:null},tAO:{type:"t",value:4,texture:null},tDisplacement:{type:"t",value:5,texture:null},uNormalScale:{type:"f",value:1},uDisplacementBias:{type:"f",value:0},uDisplacementScale:{type:"f",value:1},uDiffuseColor:{type:"c",value:new THREE.Color(16777215)},uSpecularColor:{type:"c",value:new THREE.Color(1118481)},uAmbientColor:{type:"c",value:new THREE.Color(16777215)},uShininess:{type:"f",value:30},uOpacity:{type:"f",value:1},uReflectivity:{type:"f",value:.5},uOffset:{type:"v2",value:new THREE.Vector2(0,0)},uRepeat:{type:"v2",value:new THREE.Vector2(1,1)},wrapRGB:{type:"v3",value:new THREE.Vector3(1,1,1)}}]),fragmentShader:["uniform vec3 uAmbientColor;\nuniform vec3 uDiffuseColor;\nuniform vec3 uSpecularColor;\nuniform float uShininess;\nuniform float uOpacity;\nuniform bool enableDiffuse;\nuniform bool enableSpecular;\nuniform bool enableAO;\nuniform bool enableReflection;\nuniform sampler2D tDiffuse;\nuniform sampler2D tNormal;\nuniform sampler2D tSpecular;\nuniform sampler2D tAO;\nuniform samplerCube tCube;\nuniform float uNormalScale;\nuniform float uReflectivity;\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\nuniform vec3 ambientLightColor;\n#if MAX_DIR_LIGHTS > 0\nuniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\nuniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n#endif\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\n#ifdef WRAP_AROUND\nuniform vec3 wrapRGB;\n#endif\nvarying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_fragment,THREE.ShaderChunk.fog_pars_fragment,"void main() {\ngl_FragColor = vec4( vec3( 1.0 ), uOpacity );\nvec3 specularTex = vec3( 1.0 );\nvec3 normalTex = texture2D( tNormal, vUv ).xyz * 2.0 - 1.0;\nnormalTex.xy *= uNormalScale;\nnormalTex = normalize( normalTex );\nif( enableDiffuse ) {\n#ifdef GAMMA_INPUT\nvec4 texelColor = texture2D( tDiffuse, vUv );\ntexelColor.xyz *= texelColor.xyz;\ngl_FragColor = gl_FragColor * texelColor;\n#else\ngl_FragColor = gl_FragColor * texture2D( tDiffuse, vUv );\n#endif\n}\nif( enableAO ) {\n#ifdef GAMMA_INPUT\nvec4 aoColor = texture2D( tAO, vUv );\naoColor.xyz *= aoColor.xyz;\ngl_FragColor.xyz = gl_FragColor.xyz * aoColor.xyz;\n#else\ngl_FragColor.xyz = gl_FragColor.xyz * texture2D( tAO, vUv ).xyz;\n#endif\n}\nif( enableSpecular )\nspecularTex = texture2D( tSpecular, vUv ).xyz;\nmat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\nvec3 finalNormal = tsb * normalTex;\nvec3 normal = normalize( finalNormal );\nvec3 viewPosition = normalize( vViewPosition );\n#if MAX_POINT_LIGHTS > 0\nvec3 pointDiffuse = vec3( 0.0 );\nvec3 pointSpecular = vec3( 0.0 );\nfor ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\nvec3 pointVector = normalize( vPointLight[ i ].xyz );\nfloat pointDistance = vPointLight[ i ].w;\n#ifdef WRAP_AROUND\nfloat pointDiffuseWeightFull = max( dot( normal, pointVector ), 0.0 );\nfloat pointDiffuseWeightHalf = max( 0.5 * dot( normal, pointVector ) + 0.5, 0.0 );\nvec3 pointDiffuseWeight = mix( vec3 ( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n#else\nfloat pointDiffuseWeight = max( dot( normal, pointVector ), 0.0 );\n#endif\npointDiffuse += pointDistance * pointLightColor[ i ] * uDiffuseColor * pointDiffuseWeight;\nvec3 pointHalfVector = normalize( pointVector + viewPosition );\nfloat pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\nfloat pointSpecularWeight = specularTex.r * max( pow( pointDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( pointVector, pointHalfVector ), 5.0 );\npointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * pointDistance * specularNormalization;\n#else\npointSpecular += pointDistance * pointLightColor[ i ] * uSpecularColor * pointSpecularWeight * pointDiffuseWeight;\n#endif\n}\n#endif\n#if MAX_DIR_LIGHTS > 0\nvec3 dirDiffuse = vec3( 0.0 );\nvec3 dirSpecular = vec3( 0.0 );\nfor( int i = 0; i < MAX_DIR_LIGHTS; i++ ) {\nvec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\nvec3 dirVector = normalize( lDirection.xyz );\n#ifdef WRAP_AROUND\nfloat directionalLightWeightingFull = max( dot( normal, dirVector ), 0.0 );\nfloat directionalLightWeightingHalf = max( 0.5 * dot( normal, dirVector ) + 0.5, 0.0 );\nvec3 dirDiffuseWeight = mix( vec3( directionalLightWeightingFull ), vec3( directionalLightWeightingHalf ), wrapRGB );\n#else\nfloat dirDiffuseWeight = max( dot( normal, dirVector ), 0.0 );\n#endif\ndirDiffuse += directionalLightColor[ i ] * uDiffuseColor * dirDiffuseWeight;\nvec3 dirHalfVector = normalize( dirVector + viewPosition );\nfloat dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\nfloat dirSpecularWeight = specularTex.r * max( pow( dirDotNormalHalf, uShininess ), 0.0 );\n#ifdef PHYSICALLY_BASED_SHADING\nfloat specularNormalization = ( uShininess + 2.0001 ) / 8.0;\nvec3 schlick = uSpecularColor + vec3( 1.0 - uSpecularColor ) * pow( 1.0 - dot( dirVector, dirHalfVector ), 5.0 );\ndirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n#else\ndirSpecular += directionalLightColor[ i ] * uSpecularColor * dirSpecularWeight * dirDiffuseWeight;\n#endif\n}\n#endif\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n#if MAX_DIR_LIGHTS > 0\ntotalDiffuse += dirDiffuse;\ntotalSpecular += dirSpecular;\n#endif\n#if MAX_POINT_LIGHTS > 0\ntotalDiffuse += pointDiffuse;\ntotalSpecular += pointSpecular;\n#endif\ngl_FragColor.xyz = gl_FragColor.xyz * ( totalDiffuse + ambientLightColor * uAmbientColor) + totalSpecular;\nif ( enableReflection ) {\nvec3 wPos = cameraPosition - vViewPosition;\nvec3 vReflect = reflect( normalize( wPos ), normal );\nvec4 cubeColor = textureCube( tCube, vec3( -vReflect.x, vReflect.yz ) );\n#ifdef GAMMA_INPUT\ncubeColor.xyz *= cubeColor.xyz;\n#endif\ngl_FragColor.xyz = mix( gl_FragColor.xyz, cubeColor.xyz, specularTex.r * uReflectivity );\n}",THREE.ShaderChunk.shadowmap_fragment,THREE.ShaderChunk.linear_to_gamma_fragment,THREE.ShaderChunk.fog_fragment,"}"].join("\n"),vertexShader:["attribute vec4 tangent;\nuniform vec2 uOffset;\nuniform vec2 uRepeat;\n#ifdef VERTEX_TEXTURES\nuniform sampler2D tDisplacement;\nuniform float uDisplacementScale;\nuniform float uDisplacementBias;\n#endif\nvarying vec3 vTangent;\nvarying vec3 vBinormal;\nvarying vec3 vNormal;\nvarying vec2 vUv;\n#if MAX_POINT_LIGHTS > 0\nuniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\nuniform float pointLightDistance[ MAX_POINT_LIGHTS ];\nvarying vec4 vPointLight[ MAX_POINT_LIGHTS ];\n#endif\nvarying vec3 vViewPosition;",THREE.ShaderChunk.shadowmap_pars_vertex,"void main() {\nvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\nvViewPosition = -mvPosition.xyz;\nvNormal = normalMatrix * normal;\nvTangent = normalMatrix * tangent.xyz;\nvBinormal = cross( vNormal, vTangent ) * tangent.w;\nvUv = uv * uRepeat + uOffset;\n#if MAX_POINT_LIGHTS > 0\nfor( int i = 0; i < MAX_POINT_LIGHTS; i++ ) {\nvec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\nvec3 lVector = lPosition.xyz - mvPosition.xyz;\nfloat lDistance = 1.0;\nif ( pointLightDistance[ i ] > 0.0 )\nlDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\nlVector = normalize( lVector );\nvPointLight[ i ] = vec4( lVector, lDistance );\n}\n#endif\n#ifdef VERTEX_TEXTURES\nvec3 dv = texture2D( tDisplacement, uv ).xyz;\nfloat df = uDisplacementScale * dv.x + uDisplacementBias;\nvec4 displacedPosition = vec4( normalize( vNormal.xyz ) * df, 0.0 ) + mvPosition;\ngl_Position = projectionMatrix * displacedPosition;\n#else\ngl_Position = projectionMatrix * mvPosition;\n#endif",THREE.ShaderChunk.shadowmap_vertex,"}"].join("\n")},cube:{uniforms:{tCube:{type:"t",value:1,texture:null},tFlip:{type:"f",value:-1}},vertexShader:"varying vec3 vViewPosition;\nvoid main() {\nvec4 mPosition = objectMatrix * vec4( position, 1.0 );\nvViewPosition = cameraPosition - mPosition.xyz;\ngl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform samplerCube tCube;\nuniform float tFlip;\nvarying vec3 vViewPosition;\nvoid main() {\nvec3 wPos = cameraPosition - vViewPosition;\ngl_FragColor = textureCube( tCube, vec3( tFlip * wPos.x, wPos.yz ) );\n}"}}}),THREE.BufferGeometry=function(){this.id=THREE.GeometryCount++,this.vertexColorArray=this.vertexUvArray=this.vertexNormalArray=this.vertexPositionArray=this.vertexIndexArray=this.vertexColorBuffer=this.vertexUvBuffer=this.vertexNormalBuffer=this.vertexPositionBuffer=this.vertexIndexBuffer=null,this.dynamic=!1,this.boundingSphere=this.boundingBox=null,this.morphTargets=[]},THREE.BufferGeometry.prototype={constructor:THREE.BufferGeometry,computeBoundingBox:function(){},computeBoundingSphere:function(){}},THREE.CubeGeometry=function(a,b,c,d,e,f,g,h){function i(a,b,c,g,h,i,j,k){var l,m=d||1,n=e||1,o=h/2,q=i/2,r=p.vertices.length;"x"===a&&"y"===b||"y"===a&&"x"===b?l="z":"x"===a&&"z"===b||"z"===a&&"x"===b?(l="y",n=f||1):("z"===a&&"y"===b||"y"===a&&"z"===b)&&(l="x",m=f||1);var s=m+1,t=n+1,u=h/m,v=i/n,w=new THREE.Vector3;for(w[l]=j>0?1:-1,h=0;t>h;h++)for(i=0;s>i;i++){var x=new THREE.Vector3;x[a]=(i*u-o)*c,x[b]=(h*v-q)*g,x[l]=j,p.vertices.push(x)}for(h=0;n>h;h++)for(i=0;m>i;i++)a=new THREE.Face4(i+s*h+r,i+s*(h+1)+r,i+1+s*(h+1)+r,i+1+s*h+r),a.normal.copy(w),a.vertexNormals.push(w.clone(),w.clone(),w.clone(),w.clone()),a.materialIndex=k,p.faces.push(a),p.faceVertexUvs[0].push([new THREE.UV(i/m,h/n),new THREE.UV(i/m,(h+1)/n),new THREE.UV((i+1)/m,(h+1)/n),new THREE.UV((i+1)/m,h/n)])}THREE.Geometry.call(this);var j,k,l,m,n,o,p=this,q=a/2,r=b/2,s=c/2;if(void 0!==g){if(g instanceof Array)this.materials=g;else for(this.materials=[],j=0;6>j;j++)this.materials.push(g);j=0,m=1,k=2,n=3,l=4,o=5}else this.materials=[];if(this.sides={px:!0,nx:!0,py:!0,ny:!0,pz:!0,nz:!0},void 0!=h)for(var t in h)void 0!==this.sides[t]&&(this.sides[t]=h[t]);this.sides.px&&i("z","y",-1,-1,c,b,q,j),this.sides.nx&&i("z","y",1,-1,c,b,-q,m),this.sides.py&&i("x","z",1,1,a,c,r,k),this.sides.ny&&i("x","z",1,-1,a,c,-r,n),this.sides.pz&&i("x","y",1,-1,a,b,s,l),this.sides.nz&&i("x","y",-1,-1,a,b,-s,o),this.computeCentroids(),this.mergeVertices()},THREE.CubeGeometry.prototype=new THREE.Geometry,THREE.CubeGeometry.prototype.constructor=THREE.CubeGeometry,THREE.CylinderGeometry=function(a,b,c,d,e,f){THREE.Geometry.call(this);var g,h,a=void 0!==a?a:20,b=void 0!==b?b:20,c=void 0!==c?c:100,i=c/2,d=d||8,e=e||1,j=[],k=[];for(h=0;e>=h;h++){var l=[],m=[],n=h/e,o=n*(b-a)+a;for(g=0;d>=g;g++){var p=g/d,q=new THREE.Vector3;q.x=o*Math.sin(p*Math.PI*2),q.y=-n*c+i,q.z=o*Math.cos(p*Math.PI*2),this.vertices.push(q),l.push(this.vertices.length-1),m.push(new THREE.UV(p,n))}j.push(l),k.push(m)}for(c=(b-a)/c,g=0;d>g;g++)for(0!==a?(l=this.vertices[j[0][g]].clone(),m=this.vertices[j[0][g+1]].clone()):(l=this.vertices[j[1][g]].clone(),m=this.vertices[j[1][g+1]].clone()),l.setY(Math.sqrt(l.x*l.x+l.z*l.z)*c).normalize(),m.setY(Math.sqrt(m.x*m.x+m.z*m.z)*c).normalize(),h=0;e>h;h++){var n=j[h][g],o=j[h+1][g],p=j[h+1][g+1],q=j[h][g+1],r=l.clone(),s=l.clone(),t=m.clone(),u=m.clone(),v=k[h][g].clone(),w=k[h+1][g].clone(),x=k[h+1][g+1].clone(),y=k[h][g+1].clone();this.faces.push(new THREE.Face4(n,o,p,q,[r,s,t,u])),this.faceVertexUvs[0].push([v,w,x,y])}if(!f&&a>0)for(this.vertices.push(new THREE.Vector3(0,i,0)),g=0;d>g;g++)n=j[0][g],o=j[0][g+1],p=this.vertices.length-1,r=new THREE.Vector3(0,1,0),s=new THREE.Vector3(0,1,0),t=new THREE.Vector3(0,1,0),v=k[0][g].clone(),w=k[0][g+1].clone(),x=new THREE.UV(w.u,0),this.faces.push(new THREE.Face3(n,o,p,[r,s,t])),this.faceVertexUvs[0].push([v,w,x]);if(!f&&b>0)for(this.vertices.push(new THREE.Vector3(0,-i,0)),g=0;d>g;g++)n=j[h][g+1],o=j[h][g],p=this.vertices.length-1,r=new THREE.Vector3(0,-1,0),s=new THREE.Vector3(0,-1,0),t=new THREE.Vector3(0,-1,0),v=k[h][g+1].clone(),w=k[h][g].clone(),x=new THREE.UV(w.u,1),this.faces.push(new THREE.Face3(n,o,p,[r,s,t])),this.faceVertexUvs[0].push([v,w,x]);this.computeCentroids(),this.computeFaceNormals()},THREE.CylinderGeometry.prototype=new THREE.Geometry,THREE.CylinderGeometry.prototype.constructor=THREE.CylinderGeometry,THREE.PlaneGeometry=function(a,b,c,d){THREE.Geometry.call(this);for(var e=a/2,f=b/2,c=c||1,d=d||1,g=c+1,h=d+1,i=a/c,j=b/d,k=new THREE.Vector3(0,1,0),a=0;h>a;a++)for(b=0;g>b;b++)this.vertices.push(new THREE.Vector3(b*i-e,0,a*j-f));for(a=0;d>a;a++)for(b=0;c>b;b++)e=new THREE.Face4(b+g*a,b+g*(a+1),b+1+g*(a+1),b+1+g*a),e.normal.copy(k),e.vertexNormals.push(k.clone(),k.clone(),k.clone(),k.clone()),this.faces.push(e),this.faceVertexUvs[0].push([new THREE.UV(b/c,a/d),new THREE.UV(b/c,(a+1)/d),new THREE.UV((b+1)/c,(a+1)/d),new THREE.UV((b+1)/c,a/d)]);this.computeCentroids()},THREE.PlaneGeometry.prototype=new THREE.Geometry,THREE.PlaneGeometry.prototype.constructor=THREE.PlaneGeometry,THREE.SphereGeometry=function(a,b,c,d,e,f,g){THREE.Geometry.call(this);var h,i,a=a||50,d=void 0!==d?d:0,e=void 0!==e?e:2*Math.PI,f=void 0!==f?f:0,g=void 0!==g?g:Math.PI,b=Math.max(3,Math.floor(b)||8),c=Math.max(2,Math.floor(c)||6),j=[],k=[];for(i=0;c>=i;i++){var l=[],m=[];for(h=0;b>=h;h++){var n=h/b,o=i/c,p=new THREE.Vector3;p.x=-a*Math.cos(d+n*e)*Math.sin(f+o*g),p.y=a*Math.cos(f+o*g),p.z=a*Math.sin(d+n*e)*Math.sin(f+o*g),this.vertices.push(p),l.push(this.vertices.length-1),m.push(new THREE.UV(n,o))}j.push(l),k.push(m)}for(i=0;c>i;i++)for(h=0;b>h;h++){var d=j[i][h+1],e=j[i][h],f=j[i+1][h],g=j[i+1][h+1],l=this.vertices[d].clone().normalize(),m=this.vertices[e].clone().normalize(),n=this.vertices[f].clone().normalize(),o=this.vertices[g].clone().normalize(),p=k[i][h+1].clone(),q=k[i][h].clone(),r=k[i+1][h].clone(),s=k[i+1][h+1].clone();Math.abs(this.vertices[d].y)==a?(this.faces.push(new THREE.Face3(d,f,g,[l,n,o])),this.faceVertexUvs[0].push([p,r,s])):Math.abs(this.vertices[f].y)==a?(this.faces.push(new THREE.Face3(d,e,f,[l,m,n])),this.faceVertexUvs[0].push([p,q,r])):(this.faces.push(new THREE.Face4(d,e,f,g,[l,m,n,o])),this.faceVertexUvs[0].push([p,q,r,s]))}this.computeCentroids(),this.computeFaceNormals(),this.boundingSphere={radius:a}},THREE.SphereGeometry.prototype=new THREE.Geometry,THREE.SphereGeometry.prototype.constructor=THREE.SphereGeometry,THREE.PolyhedronGeometry=function(a,b,c,d){function e(a){var b=a.normalize().clone();b.index=i.vertices.push(b)-1;var c=Math.atan2(a.z,-a.x)/2/Math.PI+.5,a=Math.atan2(-a.y,Math.sqrt(a.x*a.x+a.z*a.z))/Math.PI+.5;return b.uv=new THREE.UV(c,a),b}function f(a,b,c,d){1>d?(d=new THREE.Face3(a.index,b.index,c.index,[a.clone(),b.clone(),c.clone()]),d.centroid.addSelf(a).addSelf(b).addSelf(c).divideScalar(3),d.normal=d.centroid.clone().normalize(),i.faces.push(d),d=Math.atan2(d.centroid.z,-d.centroid.x),i.faceVertexUvs[0].push([h(a.uv,a,d),h(b.uv,b,d),h(c.uv,c,d)])):(d-=1,f(a,g(a,b),g(a,c),d),f(g(a,b),b,g(b,c),d),f(g(a,c),g(b,c),c,d),f(g(a,b),g(b,c),g(a,c),d))}function g(a,b){l[a.index]||(l[a.index]=[]),l[b.index]||(l[b.index]=[]);var c=l[a.index][b.index];return void 0===c&&(l[a.index][b.index]=l[b.index][a.index]=c=e((new THREE.Vector3).add(a,b).divideScalar(2))),c}function h(a,b,c){return 0>c&&1===a.u&&(a=new THREE.UV(a.u-1,a.v)),0===b.x&&0===b.z&&(a=new THREE.UV(c/2/Math.PI+.5,a.v)),a}THREE.Geometry.call(this);for(var c=c||1,d=d||0,i=this,j=0,k=a.length;k>j;j++)e(new THREE.Vector3(a[j][0],a[j][1],a[j][2]));for(var l=[],a=this.vertices,j=0,k=b.length;k>j;j++)f(a[b[j][0]],a[b[j][1]],a[b[j][2]],d);for(this.mergeVertices(),j=0,k=this.vertices.length;k>j;j++)this.vertices[j].multiplyScalar(c);this.computeCentroids(),this.boundingSphere={radius:c}},THREE.PolyhedronGeometry.prototype=new THREE.Geometry,THREE.PolyhedronGeometry.prototype.constructor=THREE.PolyhedronGeometry,THREE.IcosahedronGeometry=function(a,b){var c=(1+Math.sqrt(5))/2;THREE.PolyhedronGeometry.call(this,[[-1,c,0],[1,c,0],[-1,-c,0],[1,-c,0],[0,-1,c],[0,1,c],[0,-1,-c],[0,1,-c],[c,0,-1],[c,0,1],[-c,0,-1],[-c,0,1]],[[0,11,5],[0,5,1],[0,1,7],[0,7,10],[0,10,11],[1,5,9],[5,11,4],[11,10,2],[10,7,6],[7,1,8],[3,9,4],[3,4,2],[3,2,6],[3,6,8],[3,8,9],[4,9,5],[2,4,11],[6,2,10],[8,6,7],[9,8,1]],a,b);
},THREE.IcosahedronGeometry.prototype=new THREE.Geometry,THREE.IcosahedronGeometry.prototype.constructor=THREE.IcosahedronGeometry,function(){for(var a=0,b=["ms","moz","webkit","o"],c=0;c<b.length&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[b[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[b[c]+"CancelAnimationFrame"]||window[b[c]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(b,c){var d=(new Date).getTime(),e=Math.max(0,16-(d-a)),f=window.setTimeout(function(){b(d+e)},e);return a=d+e,f}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(a){clearTimeout(a)})}();var TV3=THREE.Vector3,TF3=THREE.Face3,TCo=THREE.Color;THREE.Geometry.prototype.colorAll=function(a){for(var b=0;b<this.faces.length;b++)this.faces[b].color=a},THREE.Matrix4.prototype.isIdentity=function(){for(var a=0;4>a;a++)for(var b=0;4>b;b++)if(this.elements[4*a+b]!=(a==b)?1:0)return!1;return!0};var GLmolElementColors={D:16777152,H:16777215,He:14286847,Li:13402367,Be:12779264,B:16758197,C:9474192,N:3166456,O:16715021,F:9494608,Ne:11789301,Na:11230450,Mg:9109248,Al:12560038,Si:1578e4,P:16744448,S:16777008,Cl:2093087,Ar:8442339,K:9388244,Ca:4062976,Sc:15132390,Ti:12567239,V:10921643,Cr:9083335,Mn:10255047,Fe:14706227,Co:15765664,Ni:5296208,Cu:13140019,Zn:8224944,Ga:12750735,Ge:6721423,As:12419299,Se:16752896,Br:10889513,Kr:6076625,Rb:7351984,Sr:65280,Y:9764863,Zr:9756896,Nb:7586505,Mo:5551541,Tc:3907230,Ru:2396047,Rh:687500,Pd:27013,Ag:12632256,Cd:16767375,In:10909043,Sn:6717568,Sb:10380213,Te:13924864,I:9699476,Xe:4366e3,Cs:5707663,Ba:51456,La:7394559,Ce:16777159,Pr:14286791,Nd:13107143,Pm:10747847,Sm:9437127,Eu:6422471,Gd:4587463,Tb:3211207,Dy:2097095,Ho:65436,Er:58997,Tm:54354,Yb:48952,Lu:43812,Hf:5096191,Ta:5089023,W:2200790,Re:2522539,Os:2516630,Ir:1528967,Pt:13684960,Au:16765219,Hg:12105936,Tl:10900557,Pb:5724513,Bi:10375093,Po:11230208,At:7688005,Rn:4358806,Fr:4325478,Ra:32e3,Ac:7384058,Th:47871,Pa:41471,U:36863,Np:33023,Pu:27647,Am:5528818,Cm:7888099,Bk:9064419,Cf:10565332,Es:11739092,Fm:11739066,Md:11734438,No:12389767,Lr:13041766,Rf:13369433,Db:13697103,Sg:14221381,Bh:14680120,Hs:15073326,Mt:15400998},GLmolVDWRadii={H:1.08,HE:1.34,LI:1.75,BE:2.05,B:1.47,C:1.49,N:1.41,O:1.4,F:1.39,NE:1.68,NA:1.84,MG:2.05,AL:2.11,SI:2.07,P:1.92,S:1.82,CL:1.83,AR:1.93,K:2.05,CA:2.21,SC:2.16,TI:1.87,V:1.79,CR:1.89,MN:1.97,FE:1.94,CO:1.92,NI:1.84,CU:1.86,ZN:2.1,GA:2.08,GE:2.15,AS:2.06,SE:1.93,BR:1.98,KR:2.12,RB:2.16,SR:2.24,Y:2.19,ZR:1.86,NB:2.07,MO:2.09,TC:2.09,RU:2.07,RH:1.95,PD:2.02,AG:2.03,CD:2.3,IN:2.36,SN:2.33,SB:2.25,TE:2.23,I:2.23,XE:2.21,CS:2.22,BA:2.51,LA:2.4,CE:2.35,PR:2.39,ND:2.29,PM:2.36,SM:2.29,EU:2.33,GD:2.37,TB:2.21,DY:2.29,HO:2.16,ER:2.35,TM:2.27,YB:2.42,LU:2.21,HF:2.12,TA:2.17,W:2.1,RE:2.17,OS:2.16,IR:2.02,PT:2.09,AU:2.17,HG:2.09,TL:2.35,PB:2.32,BI:2.43,PO:2.29,AT:2.36,RN:2.43,FR:2.56,RA:2.43,AC:2.6,TH:2.37,PA:2.43,U:2.4,NP:2.21,PU:2.56,AM:2.56,CM:2.56,BK:2.56,CF:2.56,ES:2.56,FM:2.56},GLmolAminoColors={ALA:13158600,ARG:1334015,ASN:56540,ASP:15075850,CYS:15132160,GLN:56540,GLU:15075850,GLY:15461355,HIS:8553170,ILE:1016335,LEU:1016335,LYS:1334015,MET:15132160,PHE:3289770,PRO:14456450,SER:16422400,THR:16422400,TRP:11819700,TYR:3289770,VAL:1016335,ASX:16738740,GLX:16738740},polarResidues=["ARG","HIS","LYS","ASP","GLU","SER","THR","ASN","GLN","CYS"],nonPolarResidues=["GLY","PRO","ALA","VAL","LEU","ILE","MET","PHE","TYR","TRP"],GLmol=function(){function a(a,b,c,d){return this.create(a,b,c,d),!0}return a.prototype.create=function(a,b,c,d){this.nucleotides=["  G","  A","  T","  C","  U"," DG"," DA"," DT"," DC"," DU"],this.id=a,this.devicePixelRatio=c,this.container=jQuery("#"+this.id),this.WIDTH=this.container.width()*this.devicePixelRatio,this.HEIGHT=this.container.height()*this.devicePixelRatio,this.ASPECT=this.WIDTH/this.HEIGHT,this.NEAR=1,FAR=800,this.CAMERA_Z=-150,this.webglFailed=!0;try{if(b)throw new Error("WebGL disabled");this.renderer=new THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.sortObjects=!1;var e=d>>16;e/=255;var f=d>>8&255;f/=255;var g=255&d;g/=255,this.renderer.setClearColor({r:e,g:f,b:g},1),this.eventTarget=this.renderer.domElement,this.container.append(this.renderer.domElement),this.renderer.setSize(this.WIDTH,this.HEIGHT),jQuery(this.renderer.domElement).css({width:this.container.width(),height:this.container.height()}),this.webglFailed=!1}catch(h){this.canvas2d=jQuery("<canvas></canvas"),this.container.append(this.canvas2d),this.eventTarget=this.canvas2d,this.canvas2d[0].height=this.HEIGHT,this.canvas2d[0].width=this.WIDTH,jQuery(this.canvas2d).css({width:this.container.width(),height:this.container.height()})}this.camera=new THREE.PerspectiveCamera(20,this.ASPECT,1,800),this.camera.position=new TV3(0,0,this.CAMERA_Z),this.camera.lookAt(new TV3(0,0,0)),this.perspectiveCamera=this.camera,this.orthoscopicCamera=new THREE.OrthographicCamera,this.orthoscopicCamera.position.z=this.CAMERA_Z,this.orthoscopicCamera.lookAt(new TV3(0,0,0)),this.scene=null,this.rotationGroup=null,this.modelGroup=null,this.framePending=!1,this.bgColor=d,this.bgAlpha=1,this.fov=20,this.fogStart=.4,this.slabNear=-50,this.slabFar=50,this.sphereRadius=1.5,this.cylinderRadius=.4,this.lineWidth=1.5*this.devicePixelRatio,this.curveWidth=3*this.devicePixelRatio,this.defaultColor=13421772,this.sphereQuality=16,this.cylinderQuality=16,this.axisDIV=5,this.strandDIV=6,this.nucleicAcidStrandDIV=4,this.tubeDIV=8,this.coilWidth=.3,this.helixSheetWidth=1.3,this.nucleicAcidWidth=.8,this.thickness=.2,this.cq=new THREE.Quaternion(1,0,0,0),this.dq=new THREE.Quaternion(1,0,0,0),this.isDragging=!1,this.mouseStartX=0,this.mouseStartY=0,this.zoom2D=30,this.canvasAtomRadius=.5,this.canvasBondWidth=.3,this.canvasVDW=!1,this.canvasLine=!1,this.canvasdrawStack=[],this.canvasDetail=24,this.multiTouch=!1,this.multiTouchD=0,this.currentModelPos=0,this.cz=0,this.protein={sheet:[],helix:[],biomtChains:"",biomtMatrices:[],symMat:[],pdbID:"",title:""},this.atoms=[],this.container.on("DOMMouseScroll mousewheel",this.onScroll.bind(this)),this.container.on("mousedown touchstart",this.onPointerDown.bind(this)),jQuery(window).on("mousemove touchmove",this.onPointerMove.bind(this)),jQuery(window).on("mouseup touchend touchcancel",this.onPointerUp.bind(this))},a.prototype.onScroll=function(a){if(a.preventDefault(),this.scene){var b=.3*(this.rotationGroup.position.z-this.CAMERA_Z);b>2e3&&(b=2e3),a.originalEvent.detail?(this.rotationGroup.position.z+=b*a.originalEvent.detail/10,this.zoom2D+=b*a.originalEvent.detail/10):a.originalEvent.wheelDelta&&(this.rotationGroup.position.z-=b*a.originalEvent.wheelDelta/400,this.zoom2D-=.5*b*a.originalEvent.wheelDelta/400),this.rotationGroup.position.z>1e4&&(this.rotationGroup.position.z=1e4),this.rotationGroup.position.z<-149&&(this.rotationGroup.position.z=-149),this.zoom2D<2&&(this.zoom2D=2),this.redraw()}},a.prototype.onPointerDown=function(a){if(this.scene){a.preventDefault(),a.stopImmediatePropagation();var b=a.pageX,c=a.pageY;if(a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0]&&(b=a.originalEvent.targetTouches[0].pageX,c=a.originalEvent.targetTouches[0].pageY),a.originalEvent.targetTouches&&a.originalEvent.targetTouches.length>1){var d=a.originalEvent.targetTouches,e=d[0].pageX-d[1].pageX,f=d[0].pageY-d[1].pageY;this.multiTouchD=Math.sqrt(e*e+f*f),this.multiTouch=!0}void 0!=b&&(this.isDragging=!0,this.mouseButton=a.which||1,this.mouseStartX=b,this.mouseStartY=c,this.cq=this.rotationGroup.quaternion,this.cz=this.rotationGroup.position.z,this.currentModelPos=this.modelGroup.position.clone(),this.cslabNear=this.slabNear,this.cslabFar=this.slabFar)}},a.prototype.onPointerMove=function(a){if(this.scene&&this.isDragging){if(a.preventDefault(),a.stopImmediatePropagation(),0==a.which&&(void 0===a.originalEvent.targetTouches||0==a.originalEvent.targetTouches.length)||a.originalEvent.targetTouches&&0==a.originalEvent.targetTouches.length)return this.isDragging=!1,this.multiTouch=!1,void this.redraw();var b=a.pageX,c=a.pageY;if(a.originalEvent.targetTouches&&a.originalEvent.targetTouches[0]&&(b=a.originalEvent.targetTouches[0].pageX,c=a.originalEvent.targetTouches[0].pageY),this.multiTouch&&a.originalEvent.targetTouches&&a.originalEvent.targetTouches.length>1){var d=a.originalEvent.targetTouches,e=d[0].pageX-d[1].pageX,f=d[0].pageY-d[1].pageY,g=Math.sqrt(e*e+f*f),h=g/this.multiTouchD;this.multiTouchD=g;var i=.85*(this.rotationGroup.position.z-this.CAMERA_Z);this.rotationGroup.position.z+=i*(-h+1),this.zoom2D*=h,this.rotationGroup.position.z>1e4&&(this.rotationGroup.position.z=1e4),this.rotationGroup.position.z<-149&&(this.rotationGroup.position.z=-149),this.zoom2D<2&&(this.zoom2D=2),this.redraw()}if(!this.multiTouch&&void 0!=b){var e=(b-this.mouseStartX)/this.WIDTH,f=(c-this.mouseStartY)/this.HEIGHT,j=Math.sqrt(e*e+f*f);if(1==this.mouseButton&&a.ctrlKey&&a.shiftKey)this.slabNear=this.cslabNear+100*e,this.slabFar=this.cslabFar+100*f;else if(2==this.mouseButton){var i=.85*(this.rotationGroup.position.z-this.CAMERA_Z);20>i&&(i=20),this.webglFailed&&(e*=-1,f*=-1);var k=new TV3(-e*i,-f*i,0),l=this.rotationGroup.quaternion,m=new THREE.Quaternion(l.x,l.y,l.z,l.w).inverse().normalize(),n=m.multiplyVector3(k);this.modelGroup.position.x=this.currentModelPos.x+n.x,this.modelGroup.position.y=this.currentModelPos.y+n.y,this.modelGroup.position.z=this.currentModelPos.z+n.z}else if(1==this.mouseButton&&0!=j){var o=Math.sin(j*Math.PI)/j;this.dq.x=Math.cos(j*Math.PI),this.dq.y=0,this.dq.z=o*e,this.dq.w=o*f,this.rotationGroup.quaternion=new THREE.Quaternion(1,0,0,0),this.rotationGroup.quaternion.multiplySelf(this.dq),this.rotationGroup.quaternion.multiplySelf(this.cq)}this.redraw()}}},a.prototype.onPointerUp=function(a){this.isDragging=!1,a.originalEvent.targetTouches&&a.originalEvent.targetTouches.length>1||(this.multiTouch=!1),this.redraw()},a.prototype.resize=function(){this.WIDTH=this.container.width()*this.devicePixelRatio,this.HEIGHT=this.container.height()*this.devicePixelRatio,this.webglFailed?(this.canvas2d[0].height=this.HEIGHT,this.canvas2d[0].width=this.WIDTH,jQuery(this.canvas2d).css({width:this.container.width(),height:this.container.height()})):(this.ASPECT=this.WIDTH/this.HEIGHT,this.renderer.setSize(this.WIDTH,this.HEIGHT),jQuery(this.renderer.domElement).css({width:this.container.width(),height:this.container.height()}),this.camera.aspect=this.ASPECT,this.camera.updateProjectionMatrix()),this.redraw()},a.prototype.isConnected=function(a,b){var c=a.bonds.indexOf(b.serial);if(-1!=c)return a.bondOrder[c];if(this.protein.smallMolecule&&(a.hetflag||b.hetflag))return 0;var d=(a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y)+(a.z-b.z)*(a.z-b.z);return isNaN(d)?0:.5>d?0:d>1.3&&("H"==a.elem||"H"==b.elem||"D"==a.elem||"D"==b.elem)?0:3.42>d&&("S"==a.elem||"S"==b.elem)?1:d>2.78?0:1},a.prototype.loadSDF=function(a){this.loadMolecule(a,this.parseSDF)},a.prototype.loadXYZ=function(a){this.loadMolecule(a,this.parseXYZ)},a.prototype.loadPDB=function(a){this.loadMolecule(a,this.parsePDB)},a.prototype.loadMolecule=function(a,b){this.protein={sheet:[],helix:[],biomtChains:"",biomtMatrices:[],symMat:[],pdbID:"",title:""},this.atoms=[],b.call(this,a),this.rebuildScene(),this.zoomInto(this.getAllAtoms()),this.redraw()},a.prototype.parseSDF=function(a){var b=this.atoms,c=this.protein,d=a.split("\n");if(!(d.length<4)){var e=parseInt(d[3].substr(0,3));if(!(isNaN(e)||0>=e)){var f=parseInt(d[3].substr(3,3)),g=4;if(!(d.length<4+e+f)){for(var h=1;e>=h;h++){var i=d[g];g++;var j={};j.serial=h,j.x=parseFloat(i.substr(0,10)),j.y=parseFloat(i.substr(10,10)),j.z=parseFloat(i.substr(20,10)),j.hetflag=!0,j.atom=j.elem=i.substr(31,3).replace(/ /g,""),j.bonds=[],j.bondOrder=[],b[h]=j}for(h=1;f>=h;h++){var i=d[g];g++;var k=parseInt(i.substr(0,3)),l=parseInt(i.substr(3,3)),m=parseInt(i.substr(6,3));b[k].bonds.push(l),b[k].bondOrder.push(m),b[l].bonds.push(k),b[l].bondOrder.push(m)}return c.smallMolecule=!0,!0}}}},a.prototype.parseXYZ=function(a){var b=this.atoms,c=this.protein,d=a.split("\n");if(!(d.length<3)){var e=parseInt(d[0].substr(0,3));if(!(isNaN(e)||0>=e||d.length<e+2)){for(var f=2,g=1;e>=g;g++){var h=d[f++],i=h.replace(/^\s+/,"").replace(/\s+/g," ").split(" "),j={};j.serial=g,j.atom=j.elem=i[0],j.x=parseFloat(i[1]),j.y=parseFloat(i[2]),j.z=parseFloat(i[3]),j.hetflag=!0,j.bonds=[],j.bondOrder=[],b[g]=j}for(var g=1;e>g;g++)for(var k=g+1;e>=k;k++)this.isConnected(b[g],b[k])&&(b[g].bonds.push(k),b[g].bondOrder.push(1),b[k].bonds.push(g),b[k].bondOrder.push(1));return c.smallMolecule=!0,!0}}},a.prototype.parsePDB=function(a){var b=this.atoms,c=this.protein;lines=a.split("\n");for(var d=0;d<lines.length;d++){line=lines[d].replace(/^\s*/,"");var e=line.substr(0,6);if("ATOM  "==e||"HETATM"==e){var f,g,h,i,j,k,l,m,n,o,p,q;if(p=line.substr(16,1)," "!=p&&"A"!=p)continue;o=parseInt(line.substr(6,5)),f=line.substr(12,4).replace(/ /g,""),g=line.substr(17,3),h=line.substr(21,1),i=parseInt(line.substr(22,5)),j=parseFloat(line.substr(30,8)),k=parseFloat(line.substr(38,8)),l=parseFloat(line.substr(46,8)),q=parseFloat(line.substr(60,8)),n=line.substr(76,2).replace(/ /g,""),""==n&&(n=line.substr(12,4).replace(/ /g,"")),m="H"==line[0],b[o]={resn:g,x:j,y:k,z:l,elem:n,hetflag:m,chain:h,resi:i,serial:o,atom:f,ss:"c",color:16777215,bonds:[],bondOrder:[],b:q}}else if("SHEET "==e){var r=line.substr(21,1),s=parseInt(line.substr(22,4)),t=line.substr(32,1),u=parseInt(line.substr(33,4));c.sheet.push([r,s,t,u])}else if("CONECT"==e)for(var v=parseInt(line.substr(6,5)),w=0;4>w;w++){var x=parseInt(line.substr([11,16,21,26][w],5));isNaN(x)||void 0!=b[v]&&(b[v].bonds.push(x),b[v].bondOrder.push(1))}else if("HELIX "==e){var r=line.substr(19,1),s=parseInt(line.substr(21,4)),t=line.substr(31,1),u=parseInt(line.substr(33,4));c.helix.push([r,s,t,u])}else if("CRYST1"==e)c.a=parseFloat(line.substr(6,9)),c.b=parseFloat(line.substr(15,9)),c.c=parseFloat(line.substr(24,9)),c.alpha=parseFloat(line.substr(33,7)),c.beta=parseFloat(line.substr(40,7)),c.gamma=parseFloat(line.substr(47,7)),c.spacegroup=line.substr(55,11),this.defineCell();else if("REMARK"==e){var y=parseInt(line.substr(7,3));if(290==y&&"SMTRY"==line.substr(13,5)){var z=parseInt(line[18])-1,A=parseInt(line.substr(21,2));void 0==c.symMat[A]&&(c.symMat[A]=(new THREE.Matrix4).identity()),c.symMat[A].elements[z]=parseFloat(line.substr(24,9)),c.symMat[A].elements[z+4]=parseFloat(line.substr(34,9)),c.symMat[A].elements[z+8]=parseFloat(line.substr(44,9)),c.symMat[A].elements[z+12]=parseFloat(line.substr(54,10))}else if(350==y&&"BIOMT"==line.substr(13,5)){var z=parseInt(line[18])-1,A=parseInt(line.substr(21,2));void 0==c.biomtMatrices[A]&&(c.biomtMatrices[A]=(new THREE.Matrix4).identity()),c.biomtMatrices[A].elements[z]=parseFloat(line.substr(24,9)),c.biomtMatrices[A].elements[z+4]=parseFloat(line.substr(34,9)),c.biomtMatrices[A].elements[z+8]=parseFloat(line.substr(44,9)),c.biomtMatrices[A].elements[z+12]=parseFloat(line.substr(54,10))}else 350==y&&"BIOMOLECULE"==line.substr(11,11)?(c.biomtMatrices=[],c.biomtChains=""):350==y&&"CHAINS"==line.substr(34,6)&&(c.biomtChains+=line.substr(41,40))}else"HEADER"==e?c.pdbID=line.substr(62,4):"TITLE "==e&&(void 0==c.title&&(c.title=""),c.title+=line.substr(10,70)+"\n")}for(d=0;d<b.length;d++)if(f=b[d],void 0!=f){for(w=0;w<c.sheet.length;w++)f.chain==c.sheet[w][0]&&(f.resi<c.sheet[w][1]||f.resi>c.sheet[w][3]||(f.ss="s",f.resi==c.sheet[w][1]&&(f.ssbegin=!0),f.resi==c.sheet[w][3]&&(f.ssend=!0)));for(w=0;w<c.helix.length;w++)f.chain==c.helix[w][0]&&(f.resi<c.helix[w][1]||f.resi>c.helix[w][3]||(f.ss="h",f.resi==c.helix[w][1]?f.ssbegin=!0:f.resi==c.helix[w][3]&&(f.ssend=!0)))}return c.smallMolecule=!1,!0},a.prototype.calculateBonds=function(){for(var a=this.getAllAtoms(),b=0;b<a.length;b++){var c=a[b],d=this.atoms[c];if(void 0!=d)for(var e=b+1;b+30>e&&e<a.length;e++){var f=a[e],g=this.atoms[f];void 0!=g&&this.isConnected(d,g)&&(-1==d.bonds.indexOf(f)&&(d.bonds.push(f),d.bondOrder.push(1)),-1==g.bonds.indexOf(c)&&(g.bonds.push(c),g.bondOrder.push(1)))}}},a.prototype.subdivide=function(a,b){var c=[],d=a;d=new Array,d.push(a[0]);for(var e=1,f=a.length-1;f>e;e++){var g=a[e],h=a[e+1];g.smoothen?d.push(new TV3((g.x+h.x)/2,(g.y+h.y)/2,(g.z+h.z)/2)):d.push(g)}d.push(a[a.length-1]);for(var e=-1,i=d.length;i-3>=e;e++)for(var j=d[-1==e?0:e],g=d[e+1],h=d[e+2],k=d[e==i-3?i-1:e+3],l=(new TV3).sub(h,j).multiplyScalar(.5),m=(new TV3).sub(k,g).multiplyScalar(.5),n=0;b>n;n++){var o=1/b*n,p=g.x+o*l.x+o*o*(-3*g.x+3*h.x-2*l.x-m.x)+o*o*o*(2*g.x-2*h.x+l.x+m.x),q=g.y+o*l.y+o*o*(-3*g.y+3*h.y-2*l.y-m.y)+o*o*o*(2*g.y-2*h.y+l.y+m.y),r=g.z+o*l.z+o*o*(-3*g.z+3*h.z-2*l.z-m.z)+o*o*o*(2*g.z-2*h.z+l.z+m.z);c.push(new TV3(p,q,r))}return c.push(d[d.length-1]),c},a.prototype.drawAtomsAsSphere=function(a,b,c,d,e){for(var f=new THREE.SphereGeometry(1,this.sphereQuality,this.sphereQuality),g=0;g<b.length;g++){var h=this.atoms[b[g]];if(void 0!=h){var i=new THREE.MeshLambertMaterial({color:h.color}),j=new THREE.Mesh(f,i);a.add(j);var k=d||void 0==GLmolVDWRadii[h.elem]?c:GLmolVDWRadii[h.elem];!d&&e&&(k*=e),j.scale.x=j.scale.y=j.scale.z=k,j.position.x=h.x,j.position.y=h.y,j.position.z=h.z}}},a.prototype.drawAtomsAsIcosahedron=function(a,b,c,d){for(var e=this.IcosahedronGeometry(),f=0;f<b.length;f++){var g=this.atoms[b[f]];if(void 0!=g){var h=new THREE.MeshLambertMaterial({color:g.color}),i=new THREE.Mesh(e,h);i.scale.x=i.scale.y=i.scale.z=d||void 0==GLmolVDWRadii[g.elem]?c:GLmolVDWRadii[g.elem],a.add(i),i.position.x=g.x,i.position.y=g.y,i.position.z=g.z}}},a.prototype.drawBondAsStickSub=function(a,b,c,d,e){var f,g;e>1&&(f=this.calcBondDelta(b,c,2.3*d));var h=new TV3(b.x,b.y,b.z),i=new TV3(c.x,c.y,c.z),j=h.clone().addSelf(i).multiplyScalar(.5);new TCo(b.color),new TCo(c.color);1!=e&&3!=e||(this.drawCylinder(a,h,j,d,b.color),this.drawCylinder(a,i,j,d,c.color)),e>1&&(g=j.clone().addSelf(f),this.drawCylinder(a,h.clone().addSelf(f),g,d,b.color),this.drawCylinder(a,i.clone().addSelf(f),g,d,c.color),g=j.clone().subSelf(f),this.drawCylinder(a,h.clone().subSelf(f),g,d,b.color),this.drawCylinder(a,i.clone().subSelf(f),g,d,c.color))},a.prototype.drawBondsAsStick=function(a,b,c,d,e,f){e&&(c/=2.5);for(var g=0;g<b.length;g++){var h=b[g],i=this.atoms[h];if(void 0!=i)for(var j=0;j<i.bonds.length;j++){var k=i.bonds[j];if(-1!=b.indexOf(k)){var l=this.atoms[k];void 0!=l&&(h>k&&-1!=l.bonds.indexOf(h)||this.drawBondAsStickSub(a,i,l,c,e?i.bondOrder[j]:1))}}}this.drawAtomsAsSphere(a,b,d,!f,f)},a.prototype.defineCell=function(){var a=this.protein;void 0!=a.a&&(a.ax=a.a,a.ay=0,a.az=0,a.bx=a.b*Math.cos(Math.PI/180*a.gamma),a.by=a.b*Math.sin(Math.PI/180*a.gamma),a.bz=0,a.cx=a.c*Math.cos(Math.PI/180*a.beta),a.cy=a.c*Math.cos(Math.PI/180*a.alpha-Math.cos(Math.PI/180*a.gamma)*Math.cos(Math.PI/180*a.beta))/Math.sin(Math.PI/180*a.gamma),a.cz=Math.sqrt(a.c*a.c*Math.sin(Math.PI/180*a.beta)*Math.sin(Math.PI/180*a.beta)-a.cy*a.cy))},a.prototype.drawUnitcell=function(a){var b=this.protein;if(void 0!=b.a){for(var c=[[0,0,0],[b.ax,b.ay,b.az],[b.bx,b.by,b.bz],[b.ax+b.bx,b.ay+b.by,b.az+b.bz],[b.cx,b.cy,b.cz],[b.cx+b.ax,b.cy+b.ay,b.cz+b.az],[b.cx+b.bx,b.cy+b.by,b.cz+b.bz],[b.cx+b.ax+b.bx,b.cy+b.ay+b.by,b.cz+b.az+b.bz]],d=[0,1,0,2,1,3,2,3,4,5,4,6,5,7,6,7,0,4,1,5,2,6,3,7],e=new THREE.Geometry,f=0;f<d.length;f++)e.vertices.push(new TV3(c[d[f]][0],c[d[f]][1],c[d[f]][2]));var g=new THREE.LineBasicMaterial({linewidth:1,color:13421772}),h=new THREE.Line(e,g);h.type=THREE.LinePieces,a.add(h)}},a.prototype.calcBondDelta=function(a,b,c){for(var d,e=new TV3(a.x-b.x,a.y-b.y,a.z-b.z).normalize(),f=null,g=0;g<a.bonds.length&&!f;g++){var h=this.atoms[a.bonds[g]];h&&h.serial!=b.serial&&"H"!=h.elem&&(f=h)}for(var g=0;g<b.bonds.length&&!f;g++){var h=this.atoms[b.bonds[g]];h&&h.serial!=a.serial&&"H"!=h.elem&&(f=h)}if(f){var i=new TV3(a.x-f.x,a.y-f.y,a.z-f.z).normalize();d=i.dot(e),delta=new TV3(i.x-e.x*d,i.y-e.y*d,i.z-e.z*d)}return(!f||Math.abs(d-1)<.001||Math.abs(d+1)<.001)&&(Math.abs(e.x)<.01&&Math.abs(e.y)<.01?delta=new TV3(0,-e.z,e.y):delta=new TV3(-e.y,e.x,0)),delta.normalize().multiplyScalar(c),delta},a.prototype.drawBondsAsLineSub=function(a,b,c,d){var e,f,g=a.vertices,h=a.colors;d>1&&(e=this.calcBondDelta(b,c,.15));var i=new TV3(b.x,b.y,b.z),j=new TV3(c.x,c.y,c.z),k=i.clone().addSelf(j).multiplyScalar(.5),l=new TCo(b.color),m=new TCo(c.color);1!=d&&3!=d||(g.push(i),h.push(l),g.push(k),h.push(l),g.push(j),h.push(m),g.push(k),h.push(m)),d>1&&(g.push(i.clone().addSelf(e)),h.push(l),g.push(f=k.clone().addSelf(e)),h.push(l),g.push(j.clone().addSelf(e)),h.push(m),g.push(f),h.push(m),g.push(i.clone().subSelf(e)),h.push(l),g.push(f=k.clone().subSelf(e)),h.push(l),g.push(j.clone().subSelf(e)),h.push(m),g.push(f),h.push(m))},a.prototype.drawBondsAsLine=function(a,b,c){for(var d=new THREE.Geometry,e=0;e<b.length;e++){var f=b[e],g=this.atoms[f];if(void 0!=g)for(var h=0;h<g.bonds.length;h++){var i=g.bonds[h];if(-1!=b.indexOf(i)){var j=this.atoms[i];void 0!=j&&(f>i&&-1!=j.bonds.indexOf(f)||this.drawBondsAsLineSub(d,g,j,g.bondOrder[h]))}}}var k=new THREE.LineBasicMaterial({linewidth:c});k.vertexColors=!0;var l=new THREE.Line(d,k);l.type=THREE.LinePieces,a.add(l)},a.prototype.drawSmoothCurve=function(a,b,c,d,e){if(0!=b.length){e=void 0==e?5:e;for(var f=new THREE.Geometry,g=this.subdivide(b,e),h=0;h<g.length;h++)f.vertices.push(g[h]),f.colors.push(new TCo(d[0==h?0:Math.round((h-1)/e)]));var i=new THREE.LineBasicMaterial({linewidth:c});i.vertexColors=!0;var j=new THREE.Line(f,i);j.type=THREE.LineStrip,a.add(j)}},a.prototype.drawAsCross=function(a,b,c){for(var d=new THREE.Geometry,e=[[c,0,0],[-c,0,0],[0,c,0],[0,-c,0],[0,0,c],[0,0,-c]],f=0,g=b.length;g>f;f++){var h=this.atoms[b[f]];if(void 0!=h)for(var i=new TCo(h.color),j=0;6>j;j++)d.vertices.push(new TV3(h.x+e[j][0],h.y+e[j][1],h.z+e[j][2])),d.colors.push(i)}var k=new THREE.LineBasicMaterial({linewidth:this.lineWidth});k.vertexColors=!0;var l=new THREE.Line(d,k,THREE.LinePieces);a.add(l)},a.prototype.drawSmoothTube=function(a,b,c,d){if(!(b.length<2)){for(var e,f=this.tubeDIV,g=this.axisDIV,h=new THREE.Geometry,i=this.subdivide(b,g),j=new TV3,k=0,l=i.length;l>k;k++){var m,n=(k-1)/g;if(0==k)m=d[0];else if(n%1==0)m=d[n];else{var o=Math.floor(n),p=n-o;m=d[o]*p+d[o+1]*(1-p)}var q,r,s;l-1>k?(q=(new TV3).sub(i[k],i[k+1]),r=new TV3(0,-q.z,q.y).normalize().multiplyScalar(m),s=(new TV3).cross(q,r).normalize().multiplyScalar(m),j.dot(r)<0&&(r.negate(),s.negate()),j=r,e=s):(r=j,s=e);for(var t=0;f>t;t++){var u=2*Math.PI/f*t,v=Math.cos(u),w=Math.sin(u);h.vertices.push(new TV3(i[k].x+v*r.x+w*s.x,i[k].y+v*r.y+w*s.y,i[k].z+v*r.z+w*s.z))}}for(var x=0,k=0,l=i.length-1;l>k;k++){var v=new TCo(c[Math.round((k-1)/g)]),y=0,z=(new TV3).sub(h.vertices[x],h.vertices[x+f]).lengthSq(),A=(new TV3).sub(h.vertices[x],h.vertices[x+f+1]).lengthSq();z>A&&(z=A,y=1);for(var t=0;f>t;t++)h.faces.push(new TF3(x+t,x+(t+y)%f+f,x+(t+1)%f)),h.faces.push(new TF3(x+(t+1)%f,x+(t+y)%f+f,x+(t+y+1)%f+f)),h.faces[h.faces.length-2].color=v,h.faces[h.faces.length-1].color=v;x+=f}h.computeFaceNormals(),h.computeVertexNormals(!1);var B=new THREE.MeshLambertMaterial;B.vertexColors=THREE.FaceColors;var C=new THREE.Mesh(h,B);C.doubleSided=!0,a.add(C)}},a.prototype.drawMainchainCurve=function(a,b,c,d,e){var f,g,h=[],i=[];void 0==e&&(e=5);for(var j in b){var k=this.atoms[b[j]];void 0!=k&&(k.atom!=d||k.hetflag||(f==k.chain&&g+1==k.resi||(this.drawSmoothCurve(a,h,c,i,e),h=[],i=[]),h.push(new TV3(k.x,k.y,k.z)),i.push(k.color),f=k.chain,g=k.resi))}this.drawSmoothCurve(a,h,c,i,e)},a.prototype.drawMainchainTube=function(a,b,c,d){var e,f,g=[],h=[],i=[];for(var j in b){var k=this.atoms[b[j]];void 0!=k&&(k.atom!=c||k.hetflag||(e==k.chain&&f+1==k.resi||(this.drawSmoothTube(a,g,h,i),g=[],h=[],i=[]),g.push(new TV3(k.x,k.y,k.z)),void 0==d?i.push(k.b>0?k.b/100:.3):i.push(d),h.push(k.color),e=k.chain,f=k.resi))}this.drawSmoothTube(a,g,h,i)},a.prototype.drawStrip=function(a,b,c,d,e,f){if(!(b.length<2)){if(e=e||this.axisDIV,b=this.subdivide(b,e),c=this.subdivide(c,e),!f)return this.drawThinStrip(a,b,c,d,e);for(var g,h,i,j,k,l=new THREE.Geometry,m=l.vertices,n=l.faces,o=0,p=b.length;p>o;o++){if(m.push(h=b[o]),m.push(h),m.push(i=c[o]),m.push(i),p-1>o){var q=b[o+1].clone().subSelf(b[o]),r=c[o].clone().subSelf(b[o]);g=r.crossSelf(q).normalize().multiplyScalar(f)}m.push(j=b[o].clone().addSelf(g)),m.push(j),m.push(k=c[o].clone().addSelf(g)),m.push(k)}for(var s=[[0,2,-6,-8],[-4,-2,6,4],[7,3,-5,-1],[-3,-7,1,5]],o=1,p=b.length;p>o;o++)for(var t=8*o,u=new TCo(d[Math.round((o-1)/e)]),v=0;4>v;v++){var w=new THREE.Face4(t+s[v][0],t+s[v][1],t+s[v][2],t+s[v][3],void 0,u);n.push(w)}for(var x=m.length-8,o=0;4>o;o++)m.push(m[2*o]),m.push(m[x+2*o]);x+=8,n.push(new THREE.Face4(x,x+2,x+6,x+4,void 0,n[0].color)),n.push(new THREE.Face4(x+1,x+5,x+7,x+3,void 0,n[n.length-3].color)),l.computeFaceNormals(),l.computeVertexNormals();var y=new THREE.MeshLambertMaterial;y.vertexColors=THREE.FaceColors;var z=new THREE.Mesh(l,y);z.doubleSided=!0,a.add(z)}},a.prototype.drawThinStrip=function(a,b,c,d,e){for(var f=new THREE.Geometry,g=0,h=b.length;h>g;g++)f.vertices.push(b[g]),f.vertices.push(c[g]);for(var g=1,h=b.length;h>g;g++){var i=new THREE.Face4(2*g,2*g+1,2*g-1,2*g-2);i.color=new TCo(d[Math.round((g-1)/e)]),f.faces.push(i)}f.computeFaceNormals(),f.computeVertexNormals(!1);var j=new THREE.MeshLambertMaterial;j.vertexColors=THREE.FaceColors;var k=new THREE.Mesh(f,j);k.doubleSided=!0,a.add(k)},a.prototype.IcosahedronGeometry=function(){return this.icosahedron||(this.icosahedron=new THREE.IcosahedronGeometry(1)),this.icosahedron},a.prototype.drawCylinder=function(a,b,c,d,e,f){if(b&&c){var g=(new TV3).add(b,c).multiplyScalar(.5),e=new TCo(e);f&&!this.cylinderGeometryCap&&(this.cylinderGeometryCap=new THREE.CylinderGeometry(1,1,1,this.cylinderQuality,1,!1),this.cylinderGeometryCap.faceUvs=[],this.faceVertexUvs=[]),f||this.cylinderGeometry||(this.cylinderGeometry=new THREE.CylinderGeometry(1,1,1,this.cylinderQuality,1,!0),this.cylinderGeometry.faceUvs=[],this.faceVertexUvs=[]);var h=new THREE.MeshLambertMaterial({color:e.getHex()}),i=new THREE.Mesh(f?this.cylinderGeometryCap:this.cylinderGeometry,h);i.position=g,i.lookAt(b),i.updateMatrix(),i.matrixAutoUpdate=!1;var j=(new THREE.Matrix4).makeScale(d,d,b.distanceTo(c));j.rotateX(Math.PI/2),i.matrix.multiplySelf(j),a.add(i)}},a.prototype.drawHelixAsCylinder=function(a,b,c){var d,e,f=null,g=[],h=[];for(var i in b){var j=this.atoms[b[i]];void 0==j||j.hetflag||(("h"!=j.ss&&"s"!=j.ss||j.ssend||j.ssbegin)&&g.push(j.serial),"s"==j.ss&&h.push(j.serial),"CA"==j.atom&&("h"==j.ss&&j.ssend&&(null!=f&&this.drawCylinder(a,new TV3(f.x,f.y,f.z),new TV3(j.x,j.y,j.z),c,j.color,!0),f=null),d=j.chain,e=j.resi,null==f&&"h"==j.ss&&j.ssbegin&&(f=j)))}null!=f&&this.drawCylinder(a,new TV3(f.x,f.y,f.z),new TV3(j.x,j.y,j.z),c,j.color,!0),this.drawMainchainTube(a,g,"CA",.3),this.drawStrand(a,h,2,void 0,!0,void 0,this.helixSheetWidth,!1,2*this.thickness)},a.prototype.drawCartoon=function(a,b,c,d){this.drawStrand(a,b,2,void 0,!0,void 0,void 0,c,d)},a.prototype.drawStrand=function(a,b,c,d,e,f,g,h,i){c=c||this.strandDIV,d=d||this.axisDIV,f=f||this.coilWidth,g=g||this.helixSheetWidth;for(var j=[],k=0;c>k;k++)j[k]=[];var l,m,n,o=[],p=null,q=null,r=!1;for(var s in b){var t=this.atoms[b[s]];if(void 0!=t&&("O"==t.atom||"CA"==t.atom)&&!t.hetflag)if("CA"==t.atom){if(l!=t.chain||m+1!=t.resi){for(var u=0;!i&&c>u;u++)this.drawSmoothCurve(a,j[u],1,o,d);e&&this.drawStrip(a,j[0],j[c-1],o,d,i);for(var j=[],k=0;c>k;k++)j[k]=[];o=[],p=null,q=null,r=!1}n=new TV3(t.x,t.y,t.z),l=t.chain,m=t.resi,q=t.ss,r=t.ssstart||t.ssend,o.push(t.color)}else{var v=new TV3(t.x,t.y,t.z);v.subSelf(n),v.normalize(),v.multiplyScalar("c"==q?f:g),void 0!=p&&v.dot(p)<0&&v.negate(),p=v;for(var u=0;c>u;u++){var w=-1+2/(c-1)*u,x=new TV3(n.x+p.x*w,n.y+p.y*w,n.z+p.z*w);h||"s"!=q||(x.smoothen=!0),j[u].push(x)}}}for(var u=0;!i&&c>u;u++)this.drawSmoothCurve(a,j[u],1,o,d);e&&this.drawStrip(a,j[0],j[c-1],o,d,i)},a.prototype.drawNucleicAcidLadderSub=function(a,b,c,d){if(void 0!=c[0]&&void 0!=c[1]&&void 0!=c[2]&&void 0!=c[3]&&void 0!=c[4]&&void 0!=c[5]){for(var e=a.vertices.length,f=0;5>=f;f++)a.vertices.push(c[f]);a.faces.push(new TF3(e,e+1,e+2)),a.faces.push(new TF3(e,e+2,e+3)),a.faces.push(new TF3(e,e+3,e+4)),a.faces.push(new TF3(e,e+4,e+5));for(var g=a.faces.length-4,h=a.faces.length;h>g;g++)a.faces[g].color=d}if(void 0!=c[4]&&void 0!=c[3]&&void 0!=c[6]&&void 0!=c[7]&&void 0!=c[8]){var e=a.vertices.length;a.vertices.push(c[4]),a.vertices.push(c[3]),a.vertices.push(c[6]),a.vertices.push(c[7]),a.vertices.push(c[8]);for(var f=0;4>=f;f++)a.colors.push(d);a.faces.push(new TF3(e,e+1,e+2)),a.faces.push(new TF3(e,e+2,e+3)),a.faces.push(new TF3(e,e+3,e+4));for(var g=a.faces.length-3,h=a.faces.length;h>g;g++)a.faces[g].color=d}},a.prototype.drawNucleicAcidLadder=function(a,b){var c,d,e=new THREE.Geometry,f=new THREE.Geometry,g=["N1","C2","N3","C4","C5","C6","N9","C8","N7"],h=new Array(g.length),i=new TCo(13369344);for(var j in b){var k=this.atoms[b[j]];if(void 0!=k&&!k.hetflag){k.resi==d&&k.chain==c||(this.drawNucleicAcidLadderSub(e,f,h,i),h=new Array(g.length));var l=g.indexOf(k.atom);-1!=l&&(h[l]=new TV3(k.x,k.y,k.z)),"O3'"==k.atom&&(i=new TCo(k.color)),d=k.resi,c=k.chain}}this.drawNucleicAcidLadderSub(e,f,h,i),e.computeFaceNormals();var m=new THREE.MeshLambertMaterial;m.vertexColors=THREE.VertexColors;var n=new THREE.Mesh(e,m);n.doubleSided=!0,a.add(n)},a.prototype.drawNucleicAcidStick=function(a,b){for(var c,d,e=null,f=null,g=0;g<b.length;g++){var h=this.atoms[b[g]];void 0==h||h.hetflag||(h.resi==d&&h.chain==c||(null!=e&&null!=f&&this.drawCylinder(a,new TV3(e.x,e.y,e.z),new TV3(f.x,f.y,f.z),.3,e.color,!0),e=null,f=null),"O3'"==h.atom&&(e=h),"  A"==h.resn||"  G"==h.resn||" DA"==h.resn||" DG"==h.resn?"N1"==h.atom&&(f=h):"N3"==h.atom&&(f=h),d=h.resi,c=h.chain)}null!=e&&null!=f&&this.drawCylinder(a,new TV3(e.x,e.y,e.z),new TV3(f.x,f.y,f.z),.3,e.color,!0)},a.prototype.drawNucleicAcidLine=function(a,b){var c,d,e=null,f=null,g=new THREE.Geometry;for(var h in b){var i=this.atoms[b[h]];void 0==i||i.hetflag||(i.resi==d&&i.chain==c||(null!=e&&null!=f&&(g.vertices.push(new TV3(e.x,e.y,e.z)),g.colors.push(new TCo(e.color)),g.vertices.push(new TV3(f.x,f.y,f.z)),g.colors.push(new TCo(e.color))),e=null,f=null),"O3'"==i.atom&&(e=i),"  A"==i.resn||"  G"==i.resn||" DA"==i.resn||" DG"==i.resn?"N1"==i.atom&&(f=i):"N3"==i.atom&&(f=i),d=i.resi,c=i.chain)}null!=e&&null!=f&&(g.vertices.push(new TV3(e.x,e.y,e.z)),g.colors.push(new TCo(e.color)),g.vertices.push(new TV3(f.x,f.y,f.z)),g.colors.push(new TCo(e.color)));var j=new THREE.LineBasicMaterial({linewidth:1,linejoin:!1});j.linewidth=1.5,j.vertexColors=!0;var k=new THREE.Line(g,j,THREE.LinePieces);a.add(k)},a.prototype.drawCartoonNucleicAcid=function(a,b,c,d){this.drawStrandNucleicAcid(a,b,2,c,!0,void 0,d)},a.prototype.drawStrandNucleicAcid=function(a,b,c,d,e,f,g){f=f||this.nucleicAcidWidth,d=d||this.axisDIV,c=c||this.nucleicAcidStrandDIV;for(var h=[],i=0;c>i;i++)h[i]=[];var j,k,l,m=[],n=null;for(var o in b){var p=this.atoms[b[o]];if(void 0!=p&&("O3'"==p.atom||"OP2"==p.atom)&&!p.hetflag)if("O3'"==p.atom){if(j!=p.chain||k+1!=p.resi){if(l)for(var q=0;c>q;q++){var r=-1+2/(c-1)*q;h[q].push(new TV3(l.x+n.x*r,l.y+n.y*r,l.z+n.z*r))}e&&this.drawStrip(a,h[0],h[1],m,d,g);for(var q=0;!g&&c>q;q++)this.drawSmoothCurve(a,h[q],1,m,d);for(var h=[],i=0;c>i;i++)h[i]=[];m=[],n=null}l=new TV3(p.x,p.y,p.z),j=p.chain,k=p.resi,m.push(p.color)}else{if(!l){n=null;continue}var s=new TV3(p.x,p.y,p.z);s.subSelf(l),s.normalize().multiplyScalar(f),void 0!=n&&s.dot(n)<0&&s.negate(),n=s;for(var q=0;c>q;q++){var r=-1+2/(c-1)*q;h[q].push(new TV3(l.x+n.x*r,l.y+n.y*r,l.z+n.z*r))}l=null}}if(l)for(var q=0;c>q;q++){var r=-1+2/(c-1)*q;h[q].push(new TV3(l.x+n.x*r,l.y+n.y*r,l.z+n.z*r))}e&&this.drawStrip(a,h[0],h[1],m,d,g);for(var q=0;!g&&c>q;q++)this.drawSmoothCurve(a,h[q],1,m,d)},a.prototype.drawDottedLines=function(a,b,c){for(var d=new THREE.Geometry,e=.3,f=0,g=Math.floor(b.length/2);g>f;f++){var h=b[2*f],i=b[2*f+1],j=i.clone().subSelf(h),k=j.length();
j.normalize().multiplyScalar(e);for(var l=Math.floor(k/e),m=0;l>m;m++){var n=new TV3(h.x+j.x*m,h.y+j.y*m,h.z+j.z*m);d.vertices.push(n)}l%2==1&&d.vertices.push(i)}var o=new THREE.LineBasicMaterial({color:c.getHex()});o.linewidth=2;var p=new THREE.Line(d,o,THREE.LinePieces);a.add(p)},a.prototype.getAllAtoms=function(){var a=[];for(var b in this.atoms)a.push(this.atoms[b].serial);return a},a.prototype.getHetatms=function(a){var b=[];for(var c in a){var d=this.atoms[a[c]];void 0!=d&&d.hetflag&&b.push(d.serial)}return b},a.prototype.removeSolvents=function(a){var b=[];for(var c in a){var d=this.atoms[a[c]];void 0!=d&&"HOH"!=d.resn&&b.push(d.serial)}return b},a.prototype.getProteins=function(a){var b=[];for(var c in a){var d=this.atoms[a[c]];void 0!=d&&(d.hetflag||b.push(d.serial))}return b},a.prototype.excludeAtoms=function(a,b){var c=[],d=new Object;for(var e in b)d[b[e]]=!0;for(var e in a){var f=a[e];d[f]||c.push(f)}return c},a.prototype.getSidechains=function(a){var b=[];for(var c in a){var d=this.atoms[a[c]];void 0!=d&&(d.hetflag||"C"==d.atom||"O"==d.atom||"N"==d.atom&&"PRO"!=d.resn||b.push(d.serial))}return b},a.prototype.getAtomsWithin=function(a,b){var c=[];for(var d in a){var e=this.atoms[a[d]];void 0!=e&&(e.x<b[0][0]||e.x>b[1][0]||e.y<b[0][1]||e.y>b[1][1]||e.z<b[0][2]||e.z>b[1][2]||c.push(e.serial))}return c},a.prototype.getExtent=function(a){var b=ymin=zmin=9999,c=ymax=zmax=-9999,d=ysum=zsum=cnt=0;for(var e in a){var f=this.atoms[a[e]];void 0!=f&&(cnt++,d+=f.x,ysum+=f.y,zsum+=f.z,b=b<f.x?b:f.x,ymin=ymin<f.y?ymin:f.y,zmin=zmin<f.z?zmin:f.z,c=c>f.x?c:f.x,ymax=ymax>f.y?ymax:f.y,zmax=zmax>f.z?zmax:f.z)}return[[b,ymin,zmin],[c,ymax,zmax],[d/cnt,ysum/cnt,zsum/cnt]]},a.prototype.getResiduesById=function(a,b){var c=[];for(var d in a){var e=this.atoms[a[d]];void 0!=e&&-1!=b.indexOf(e.resi)&&c.push(e.serial)}return c},a.prototype.getResidueBySS=function(a,b){var c=[];for(var d in a){var e=this.atoms[a[d]];void 0!=e&&-1!=b.indexOf(e.ss)&&c.push(e.serial)}return c},a.prototype.getChain=function(a,b){var c=[],d={};b=b.toString();for(var e=0,f=b.length;f>e;e++)d[b.substr(e,1)]=!0;for(var e in a){var g=this.atoms[a[e]];void 0!=g&&d[g.chain]&&c.push(g.serial)}return c},a.prototype.getNonbonded=function(a,b){var c=[];for(var d in a){var e=this.atoms[a[d]];void 0!=e&&e.hetflag&&0==e.bonds.length&&c.push(e.serial)}return c},a.prototype.colorByAtom=function(a,b){for(var c in a){var d=this.atoms[a[c]];if(void 0!=d){var e=b[d.elem];void 0==e&&(e=GLmolElementColors[d.elem]),void 0==e&&(e=this.defaultColor),d.color=e}}},a.prototype.colorByStructure=function(a,b,c,d,e){for(var f in a){var g=this.atoms[a[f]];void 0!=g&&(e||"CA"==g.atom&&!g.hetflag)&&("s"==g.ss[0]?g.color=c:"h"==g.ss[0]?g.color=b:"c"==g.ss[0]&&(g.color=d))}},a.prototype.colorByBFactor=function(a,b){var c=1e3,d=-1e3;for(var e in a){var f=this.atoms[a[e]];void 0!=f&&(f.hetflag||(b||"CA"==f.atom||"O3'"==f.atom)&&(c>f.b&&(c=f.b),d<f.b&&(d=f.b)))}var g=(d+c)/2,h=(d-c)/2;if(!(.01>h&&h>-.01))for(var e in a){var f=this.atoms[a[e]];if(void 0!=f&&!f.hetflag&&(b||"CA"==f.atom||"O3'"==f.atom)){var i=new TCo(0);f.b<g?i.setHSV(.667,(g-f.b)/h,1):i.setHSV(0,(f.b-g)/h,1),f.color=i.getHex()}}},a.prototype.colorByChain=function(a,b){for(var c in a){var d=this.atoms[a[c]];if(void 0!=d&&!d.hetflag&&(b||"CA"==d.atom||"O3'"==d.atom)){var e=new TCo(0);e.setHSV(5*d.chain.charCodeAt(0)%17/17,1,.9),d.color=e.getHex()}}},a.prototype.colorByResidue=function(a,b){for(var d in a){var e=this.atoms[a[d]];void 0!=e&&(c=b[e.resn],void 0!=c&&(e.color=c))}},a.prototype.colorAtoms=function(a,b){for(var c in a){var d=this.atoms[a[c]];void 0!=d&&(d.color=b)}},a.prototype.colorByPolarity=function(a,b,c){var d={};for(var e in polarResidues)d[polarResidues[e]]=b;for(e in nonPolarResidues)d[nonPolarResidues[e]]=c;this.colorByResidue(a,d)},a.prototype.colorChainbow=function(a,b){var c,d,e=0;for(d in a)c=this.atoms[a[d]],void 0!=c&&(!b&&"CA"==c.atom&&"O3'"==c.atom||c.hetflag||e++);var f=e;e=0;for(d in a)if(c=this.atoms[a[d]],void 0!=c&&(b||"CA"!=c.atom||"O3'"!=c.atom)&&!c.hetflag){var g=new TCo(0);g.setHSV(240/360*(1-e/f),1,.9),c.color=g.getHex(),e++}},a.prototype.drawSymmetryMates2=function(a,b,c){if(void 0!=c){b.matrixAutoUpdate=!1;var d=1;this.protein.appliedMatrix=new THREE.Matrix4;for(var e=0;e<c.length;e++){var f=c[e];if(void 0!=f&&!f.isIdentity()){var g=THREE.SceneUtils.cloneObject(b);g.matrix=f,a.add(g);for(var h=0;16>h;h++)this.protein.appliedMatrix.elements[h]+=f.elements[h];d++}}this.protein.appliedMatrix.multiplyScalar(d)}},a.prototype.drawSymmetryMatesWithTranslation2=function(a,b,c){if(void 0!=c){var d=this.protein;b.matrixAutoUpdate=!1;for(var e=0;e<c.length;e++){var f=c[e];if(void 0!=f)for(var g=-1;0>=g;g++)for(var h=-1;0>=h;h++)for(var i=-1;0>=i;i++){var j=(new THREE.Matrix4).makeTranslation(d.ax*g+d.bx*h+d.cx*i,d.ay*g+d.by*h+d.cy*i,d.az*g+d.bz*h+d.cz*i),k=f.clone().multiplySelf(j);if(!k.isIdentity()){var l=THREE.SceneUtils.cloneObject(b);l.matrix=k,a.add(l)}}}}},a.prototype.defineRepresentation=function(){var a=this.getAllAtoms(),b=this.removeSolvents(this.getHetatms(a));this.colorByAtom(a,{}),this.colorByChain(a),this.drawAtomsAsSphere(this.modelGroup,b,this.sphereRadius),this.drawMainchainCurve(this.modelGroup,a,this.curveWidth,"P"),this.drawCartoon(this.modelGroup,a,this.curveWidth)},a.prototype.getView=function(){if(!this.modelGroup)return[0,0,0,0,0,0,0,1];var a=this.modelGroup.position,b=this.rotationGroup.quaternion;return[a.x,a.y,a.z,this.rotationGroup.position.z,b.x,b.y,b.z,b.w]},a.prototype.setView=function(a){this.modelGroup&&this.rotationGroup&&(this.modelGroup.position.x=a[0],this.modelGroup.position.y=a[1],this.modelGroup.position.z=a[2],this.rotationGroup.position.z=a[3],this.rotationGroup.quaternion.x=a[4],this.rotationGroup.quaternion.y=a[5],this.rotationGroup.quaternion.z=a[6],this.rotationGroup.quaternion.w=a[7],this.redraw())},a.prototype.setBackground=function(a,b){if(this.scene){var c=a>>16;c/=255;var d=a>>8&255;d/=255;var e=255&a;e/=255,void 0===b&&(b=1),this.bgColor=a,this.bgAlpha=b,this.renderer&&this.renderer.setClearColor({r:c,g:d,b:e},b),this.scene.fog.color=new TCo(a)}},a.prototype.setupLights=function(a){var b=new THREE.DirectionalLight(16777215);b.position=new TV3(.2,.2,-1).normalize(),b.intensity=1.2,a.add(b);var c=new THREE.AmbientLight(2105376);a.add(c)},a.prototype.initializeScene=function(){this.scene=new THREE.Scene,this.scene.fog=new THREE.Fog(this.bgColor,100,200),this.modelGroup=new THREE.Object3D,this.rotationGroup=new THREE.Object3D,this.rotationGroup.useQuaternion=!0,this.rotationGroup.quaternion=new THREE.Quaternion(1,0,0,0),this.rotationGroup.add(this.modelGroup),this.scene.add(this.rotationGroup),this.setupLights(this.scene)},a.prototype.zoomInto=function(a,b){var c=this.getExtent(a),d=new TV3(c[2][0],c[2][1],c[2][2]);this.protein.appliedMatrix&&(d=this.protein.appliedMatrix.multiplyVector3(d)),this.modelGroup.position=d.multiplyScalar(-1);var e=c[1][0]-c[0][0],f=c[1][1]-c[0][1],g=c[1][2]-c[0][2],h=Math.sqrt(e*e+f*f+g*g);25>h&&(h=25),b||(this.slabNear=1*-h,this.slabFar=1*h),this.rotationGroup.position.z=.35*h/Math.tan(Math.PI/180*this.camera.fov/2)-150,this.rotationGroup.quaternion=new THREE.Quaternion(1,0,0,0),this.zoom2D=30/(h/25)},a.prototype.rebuildScene=function(){this.canvasdrawStack=[];var a=this.getView();this.initializeScene(),this.defineRepresentation(),this.setView(a)},a.prototype.setSlabAndFog=function(){var a=this.rotationGroup.position.z-this.camera.position.z;1>a&&(a=1),this.camera.near=a+this.slabNear,this.camera.near<1&&(this.camera.near=1),this.camera.far=a+this.slabFar,this.camera.near+1>this.camera.far&&(this.camera.far=this.camera.near+1),this.camera instanceof THREE.PerspectiveCamera?this.camera.fov=this.fov:(this.camera.right=a*Math.tan(Math.PI/180*this.fov),this.camera.left=-this.camera.right,this.camera.top=this.camera.right/this.ASPECT,this.camera.bottom=-this.camera.top),this.camera.updateProjectionMatrix(),this.scene.fog.near=this.camera.near+this.fogStart*(this.camera.far-this.camera.near),this.scene.fog.far=this.camera.far},a.prototype.draw=function(){this.scene&&(this.framePending=!1,this.setSlabAndFog(),this.webglFailed?this.render2d():this.renderer.render(this.scene,this.camera))},a.prototype.redraw=function(){this.framePending||(this.pendingFrame=!0,requestAnimationFrame(this.draw.bind(this)))},a.prototype.render2d=function(){var a=this.canvas2d[0].getContext("2d");this.scene.updateMatrixWorld(),a.clearRect(0,0,this.WIDTH,this.HEIGHT),a.fillStyle="rgba("+(this.bgColor>>16)+","+(this.bgColor>>8&255)+","+(255&this.bgColor)+","+this.bgAlpha+")",a.fillRect(0,0,this.WIDTH,this.HEIGHT),a.save(),a.translate(this.WIDTH/2,this.HEIGHT/2),a.scale(this.zoom2D||1,this.zoom2D||1);var b=.02,c=new THREE.Matrix4;c.multiply(this.camera.matrixWorldInverse,this.modelGroup.matrixWorld);for(var d=2*Math.PI,e=this.atoms,f=0;f<this.atoms.length;f++){var g=e[f];void 0!=g&&(void 0==g.screen&&(g.screen=new THREE.Vector3),g.screen.set(g.x,g.y,g.z),c.multiplyVector3(g.screen),this.webglFailed||(g.screen.y*=-1))}if(0==this.canvasdrawStack.length)for(var f=0;f<e.length;f++){var g=e[f];if(void 0!=g){var h={i:f,screen:g.screen,color:"rgb("+(g.color>>16)+","+(g.color>>8&255)+","+(255&g.color)+")",r:this.canvasVDW?GLmolVDWRadii[g.elem]:this.canvasAtomRadius};if(h.arc=[],h.r>0)for(var i=this.canvasDetail,j=0;i>j;j++)h.arc.push([h.r*Math.cos(d/i*j),h.r*Math.sin(d/i*j)]);h.bonds=[];for(var k=0;k<g.bonds.length;k++){var l=e[g.bonds[k]];void 0!=l&&h.bonds.push(g.bonds[k])}this.canvasdrawStack.push(h)}}this.canvasdrawStack.sort(function(a,b){return a.screen.z-b.screen.z});for(var f=0;f<this.canvasdrawStack.length;f++)e[this.canvasdrawStack[f].i].zIndex=f;for(var f=0;f<this.canvasdrawStack.length;f++){var h=this.canvasdrawStack[f];if(!this.isDragging&&h.r>0){a.save(),a.translate(h.screen.x,h.screen.y),a.fillStyle="#000000",a.lineWidth=b,a.beginPath();for(var m=(h.r+b)/h.r,j=0;j<h.arc.length;j++)0==j?a.moveTo(m*h.arc[j][0],m*h.arc[j][1]):a.lineTo(m*h.arc[j][0],m*h.arc[j][1]);if(a.closePath(),a.fill(),a.restore(),!this.canvasVDW)for(var k=0;k<h.bonds.length;k++){var g=e[h.bonds[k]];if(g.screen.z>h.screen.z||g.screen.z==h.screen.z&&g.zIndex>e[h.i].zIndex){var n=(h.screen.x+g.screen.x)/2,o=(h.screen.y+g.screen.y)/2;a.lineWidth=(this.isDragging||this.canvasLine?1/this.zoom2D:this.canvasBondWidth)+2*b,a.strokeStyle="#000000",a.beginPath(),a.moveTo(h.screen.x,h.screen.y),a.lineTo(n,o),a.closePath(),a.stroke(),a.beginPath(),a.moveTo(g.screen.x,g.screen.y),a.lineTo(n,o),a.closePath(),a.stroke()}}}if(!this.canvasVDW||this.isDragging)for(var k=0;k<h.bonds.length;k++){var g=e[h.bonds[k]],p=this.canvasdrawStack[e[h.bonds[k]].zIndex].color;if(g.screen.z>h.screen.z||g.screen.z==h.screen.z&&g.zIndex>e[h.i].zIndex){var n=(h.screen.x+g.screen.x)/2,o=(h.screen.y+g.screen.y)/2;a.lineWidth=this.isDragging||this.canvasLine?1/this.zoom2D:this.canvasBondWidth,a.strokeStyle=h.color,a.beginPath(),a.moveTo(h.screen.x,h.screen.y),a.lineTo(n,o),a.closePath(),a.stroke(),a.strokeStyle=p,a.beginPath(),a.moveTo(g.screen.x,g.screen.y),a.lineTo(n,o),a.closePath(),a.stroke()}}if(!this.isDragging&&h.r>0){a.save(),a.translate(h.screen.x,h.screen.y),a.fillStyle=h.color,a.beginPath();for(var j=0;j<h.arc.length;j++)0==j?a.moveTo(h.arc[j][0],h.arc[j][1]):a.lineTo(h.arc[j][0],h.arc[j][1]);a.closePath(),a.fill(),a.restore()}}a.restore()},a}(),ChemDoodle=function(){var a={iChemLabs:{},informatics:{},io:{},lib:{},structures:{}};return a.structures.d2={},a.structures.d3={},a.getVersion=function(){return"6.0.1"},a}();!function(a,b,c){function d(a){var b=a.length,c=da.type(a);return da.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||"function"!==c&&(0===b||"number"==typeof b&&b>0&&b-1 in a)}function e(a,b,d,e){if(da.acceptData(a)){var f=da.expando,g=a.nodeType,h=g?da.cache:a,i=g?a[f]:a[f]&&f;if(i&&h[i]&&(e||h[i].data)||d!==c||"string"!=typeof b)return i||(i=g?a[f]=X.pop()||da.guid++:f),h[i]||(h[i]=g?{}:{toJSON:da.noop}),"object"!=typeof b&&"function"!=typeof b||(e?h[i]=da.extend(h[i],b):h[i].data=da.extend(h[i].data,b)),a=h[i],e||(a.data||(a.data={}),a=a.data),d!==c&&(a[da.camelCase(b)]=d),"string"==typeof b?(d=a[b],null==d&&(d=a[da.camelCase(b)])):d=a,d}}function f(a,b,c){if(da.acceptData(a)){var d,e,f=a.nodeType,g=f?da.cache:a,i=f?a[da.expando]:da.expando;if(g[i]){if(b&&(d=c?g[i]:g[i].data)){da.isArray(b)?b=b.concat(da.map(b,da.camelCase)):b in d?b=[b]:(b=da.camelCase(b),b=b in d?[b]:b.split(" "));for(e=b.length;e--;)delete d[b[e]];if(c?!h(d):!da.isEmptyObject(d))return}if(!c&&(delete g[i].data,!h(g[i])))return;f?da.cleanData([a],!0):da.support.deleteExpando||g!=g.window?delete g[i]:g[i]=null}}}function g(a,b,d){if(d===c&&1===a.nodeType)if(d="data-"+b.replace(Yb,"-$1").toLowerCase(),d=a.getAttribute(d),"string"==typeof d){try{d="true"===d?!0:"false"===d?!1:"null"===d?null:+d+""===d?+d:Xb.test(d)?da.parseJSON(d):d}catch(e){}da.data(a,b,d)}else d=c;return d}function h(a){for(var b in a)if(("data"!==b||!da.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function i(){return!0}function j(){return!1}function k(){try{return S.activeElement}catch(a){}}function l(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}function m(a,b,c){if(da.isFunction(b))return da.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return da.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(lc.test(b))return da.filter(b,a,c);b=da.filter(b,a)}return da.grep(a,function(a){return 0<=da.inArray(a,b)!==c})}function n(a){var b=pc.split("|");if(a=a.createDocumentFragment(),a.createElement)for(;b.length;)a.createElement(b.pop());return a}function o(a,b){return da.nodeName(a,"table")&&da.nodeName(1===b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function p(a){return a.type=(null!==da.find.attr(a,"type"))+"/"+a.type,a}function q(a){var b=Bc.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function r(a,b){for(var c,d=0;null!=(c=a[d]);d++)da._data(c,"globalEval",!b||da._data(b[d],"globalEval"))}function s(a,b){if(1===b.nodeType&&da.hasData(a)){var c,d,e;d=da._data(a);var f=da._data(b,d),g=d.events;if(g)for(c in delete f.handle,f.events={},g)for(d=0,e=g[c].length;e>d;d++)da.event.add(b,c,g[c][d]);f.data&&(f.data=da.extend({},f.data))}}function t(a,b){var d,e,f=0,g=typeof a.getElementsByTagName!==Q?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==Q?a.querySelectorAll(b||"*"):c;if(!g)for(g=[],d=a.childNodes||a;null!=(e=d[f]);f++)!b||da.nodeName(e,b)?g.push(e):da.merge(g,t(e,b));return b===c||b&&da.nodeName(a,b)?da.merge([a],g):g}function u(a){yc.test(a.type)&&(a.defaultChecked=a.checked)}function v(a,b){if(b in a)return b;for(var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Uc.length;e--;)if(b=Uc[e]+c,b in a)return b;return d}function w(a,b){return a=b||a,"none"===da.css(a,"display")||!da.contains(a.ownerDocument,a)}function x(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=da._data(d,"olddisplay"),c=d.style.display,b?(!f[g]&&"none"===c&&(d.style.display=""),""===d.style.display&&w(d)&&(f[g]=da._data(d,"olddisplay",B(d.nodeName)))):!f[g]&&(e=w(d),c&&"none"!==c||!e)&&da._data(d,"olddisplay",e?c:da.css(d,"display")));for(g=0;h>g;g++)d=a[g],!d.style||b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none");return a}function y(a,b,c){return(a=Nc.exec(b))?Math.max(0,a[1]-(c||0))+(a[2]||"px"):b}function z(a,b,c,d,e){b=c===(d?"border":"content")?4:"width"===b?1:0;for(var f=0;4>b;b+=2)"margin"===c&&(f+=da.css(a,c+Tc[b],!0,e)),d?("content"===c&&(f-=da.css(a,"padding"+Tc[b],!0,e)),"margin"!==c&&(f-=da.css(a,"border"+Tc[b]+"Width",!0,e))):(f+=da.css(a,"padding"+Tc[b],!0,e),"padding"!==c&&(f+=da.css(a,"border"+Tc[b]+"Width",!0,e)));return f}function A(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Gc(a),g=da.support.boxSizing&&"border-box"===da.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Hc(a,b,f),(0>e||null==e)&&(e=a.style[b]),Oc.test(e))return e;d=g&&(da.support.boxSizingReliable||e===a.style[b]),e=parseFloat(e)||0}return e+z(a,b,c||(g?"border":"content"),d,f)+"px"}function B(a){var b=S,c=Qc[a];return c||(c=C(a,b),"none"!==c&&c||(Fc=(Fc||da("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(b.documentElement),b=(Fc[0].contentWindow||Fc[0].contentDocument).document,b.write("<!doctype html><html><body>"),b.close(),c=C(a,b),Fc.detach()),Qc[a]=c),c}function C(a,b){var c=da(b.createElement(a)).appendTo(b.body),d=da.css(c[0],"display");return c.remove(),d}function D(a,b,c,d){var e;if(da.isArray(b))da.each(b,function(b,e){c||Wc.test(a)?d(a,e):D(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==da.type(b))d(a,b);else for(e in b)D(a+"["+e+"]",b[e],c,d)}function E(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(fa)||[];if(da.isFunction(c))for(;d=f[e++];)"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function F(a,b,c,d){function e(h){var i;return f[h]=!0,da.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||g||f[j]?g?!(i=j):void 0:(b.dataTypes.unshift(j),e(j),!1)}),i}var f={},g=a===kd;return e(b.dataTypes[0])||!f["*"]&&e("*")}function G(a,b){var d,e,f=da.ajaxSettings.flatOptions||{};for(e in b)b[e]!==c&&((f[e]?a:d||(d={}))[e]=b[e]);return d&&da.extend(!0,a,d),a}function H(){try{return new a.XMLHttpRequest}catch(b){}}function I(){return setTimeout(function(){td=c}),td=da.now()}function J(a,b,c){for(var d,e=(zd[b]||[]).concat(zd["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function K(a,b,c){var d,e,f=0,g=yd.length,h=da.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=td||I(),b=Math.max(0,j.startTime+j.duration-b),c=1-(b/j.duration||0),d=0,f=j.tweens.length;f>d;d++)j.tweens[d].run(c);return h.notifyWith(a,[j,c,b]),1>c&&f?b:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:da.extend({},b),opts:da.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:td||I(),duration:c.duration,tweens:[],createTween:function(b,c){var d=da.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}});b=j.props,c=j.opts.specialEasing;var k,l,m,n;for(d in b)if(k=da.camelCase(d),l=c[k],m=b[d],da.isArray(m)&&(l=m[1],m=b[d]=m[0]),d!==k&&(b[k]=m,delete b[d]),(n=da.cssHooks[k])&&"expand"in n)for(d in m=n.expand(m),delete b[k],m)d in b||(b[d]=m[d],c[d]=l);else c[k]=l;for(;g>f;f++)if(d=yd[f].call(j,a,b,j.opts))return d;return da.map(b,J,j),da.isFunction(j.opts.start)&&j.opts.start.call(a,j),da.fx.timer(da.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}function L(a,b,c,d,e){return new L.prototype.init(a,b,c,d,e)}function M(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=Tc[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function N(a){return da.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}var O,P,Q=typeof c,R=a.location,S=a.document,T=S.documentElement,U=a.jQuery,V=a.$,W={},X=[],Y=X.concat,Z=X.push,$=X.slice,_=X.indexOf,aa=W.toString,ba=W.hasOwnProperty,ca="1.10.2".trim,da=function(a,b){return new da.fn.init(a,b,P)},ea=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,fa=/\S+/g,ga=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ha=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ia=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ja=/^[\],:{}\s]*$/,ka=/(?:^|:|,)(?:\s*\[)+/g,la=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ma=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,na=/^-ms-/,oa=/-([\da-z])/gi,pa=function(a,b){return b.toUpperCase()},qa=function(a){(S.addEventListener||"load"===a.type||"complete"===S.readyState)&&(ra(),da.ready())},ra=function(){S.addEventListener?(S.removeEventListener("DOMContentLoaded",qa,!1),a.removeEventListener("load",qa,!1)):(S.detachEvent("onreadystatechange",qa),a.detachEvent("onload",qa))};da.fn=da.prototype={jquery:"1.10.2",constructor:da,init:function(a,b,d){var e;if(!a)return this;if("string"==typeof a){if((e="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:ha.exec(a))&&(e[1]||!b)){if(e[1]){if(b=b instanceof da?b[0]:b,da.merge(this,da.parseHTML(e[1],b&&b.nodeType?b.ownerDocument||b:S,!0)),ia.test(e[1])&&da.isPlainObject(b))for(e in b)da.isFunction(this[e])?this[e](b[e]):this.attr(e,b[e])}else{if((b=S.getElementById(e[2]))&&b.parentNode){if(b.id!==e[2])return d.find(a);this.length=1,this[0]=b}this.context=S,this.selector=a}return this}return!b||b.jquery?(b||d).find(a):this.constructor(b).find(a)}return a.nodeType?(this.context=this[0]=a,this.length=1,this):da.isFunction(a)?d.ready(a):(a.selector!==c&&(this.selector=a.selector,this.context=a.context),da.makeArray(a,this))},selector:"",length:0,toArray:function(){return $.call(this)},get:function(a){return null==a?this.toArray():0>a?this[this.length+a]:this[a]},pushStack:function(a){return a=da.merge(this.constructor(),a),a.prevObject=this,a.context=this.context,a},each:function(a,b){return da.each(this,a,b)},ready:function(a){return da.ready.promise().done(a),this},slice:function(){return this.pushStack($.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length;return a=+a+(0>a?b:0),this.pushStack(a>=0&&b>a?[this[a]]:[])},map:function(a){return this.pushStack(da.map(this,function(b,c){return a.call(b,c,b)}))},end:function(){return this.prevObject||this.constructor(null)},push:Z,sort:[].sort,splice:[].splice},da.fn.init.prototype=da.fn,da.extend=da.fn.extend=function(){var a,b,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[1]||{},h=2),"object"!=typeof g&&!da.isFunction(g)&&(g={}),i===h&&(g=this,--h);i>h;h++)if(null!=(f=arguments[h]))for(e in f)a=g[e],d=f[e],g!==d&&(j&&d&&(da.isPlainObject(d)||(b=da.isArray(d)))?(b?(b=!1,a=a&&da.isArray(a)?a:[]):a=a&&da.isPlainObject(a)?a:{},g[e]=da.extend(j,a,d)):d!==c&&(g[e]=d));return g},da.extend({expando:"jQuery"+("1.10.2"+Math.random()).replace(/\D/g,""),noConflict:function(b){return a.$===da&&(a.$=V),b&&a.jQuery===da&&(a.jQuery=U),da},isReady:!1,readyWait:1,holdReady:function(a){a?da.readyWait++:da.ready(!0)},ready:function(a){if(!(!0===a?--da.readyWait:da.isReady)){if(!S.body)return setTimeout(da.ready);da.isReady=!0,!0!==a&&0<--da.readyWait||(O.resolveWith(S,[da]),da.fn.trigger&&da(S).trigger("ready").off("ready"))}},isFunction:function(a){return"function"===da.type(a)},isArray:Array.isArray||function(a){return"array"===da.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!isNaN(parseFloat(a))&&isFinite(a)},type:function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?W[aa.call(a)]||"object":typeof a},isPlainObject:function(a){var b;if(!a||"object"!==da.type(a)||a.nodeType||da.isWindow(a))return!1;try{if(a.constructor&&!ba.call(a,"constructor")&&!ba.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(d){return!1}if(da.support.ownLast)for(b in a)return ba.call(a,b);for(b in a);return b===c||ba.call(a,b)},isEmptyObject:function(a){for(var b in a)return!1;return!0},error:function(a){throw Error(a)},parseHTML:function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||S;var d=ia.exec(a);return c=!c&&[],d?[b.createElement(d[1])]:(d=da.buildFragment([a],b,c),c&&da(c).remove(),da.merge([],d.childNodes))},parseJSON:function(b){return a.JSON&&a.JSON.parse?a.JSON.parse(b):null===b?b:"string"==typeof b&&(b=da.trim(b))&&ja.test(b.replace(la,"@").replace(ma,"]").replace(ka,""))?new Function("return "+b)():void da.error("Invalid JSON: "+b)},parseXML:function(b){var d,e;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(e=new DOMParser,d=e.parseFromString(b,"text/xml")):(d=new ActiveXObject("Microsoft.XMLDOM"),d.async="false",d.loadXML(b))}catch(f){d=c}return(!d||!d.documentElement||d.getElementsByTagName("parsererror").length)&&da.error("Invalid XML: "+b),d},noop:function(){},globalEval:function(b){b&&da.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(na,"ms-").replace(oa,pa)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var e,f=0,g=a.length;if(e=d(a),c){if(e)for(;g>f&&(e=b.apply(a[f],c),!(!1===e));f++);else for(f in a)if(e=b.apply(a[f],c),!1===e)break}else if(e)for(;g>f&&(e=b.call(a[f],f,a[f]),!(!1===e));f++);else for(f in a)if(e=b.call(a[f],f,a[f]),!1===e)break;return a},trim:ca&&!ca.call("\ufeff")?function(a){return null==a?"":ca.call(a)}:function(a){return null==a?"":(a+"").replace(ga,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(d(Object(a))?da.merge(c,"string"==typeof a?[a]:a):Z.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(_)return _.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var d=b.length,e=a.length,f=0;if("number"==typeof d)for(;d>f;f++)a[e++]=b[f];else for(;b[f]!==c;)a[e++]=b[f++];return a.length=e,a},grep:function(a,b,c){var d,e=[],f=0,g=a.length;for(c=!!c;g>f;f++)d=!!b(a[f],f),c!==d&&e.push(a[f]);return e},map:function(a,b,c){var e,f=0,g=a.length,h=[];if(d(a))for(;g>f;f++)e=b(a[f],f,c),null!=e&&(h[h.length]=e);else for(f in a)e=b(a[f],f,c),null!=e&&(h[h.length]=e);return Y.apply([],h)},guid:1,proxy:function(a,b){var d,e;return"string"==typeof b&&(e=a[b],b=a,a=e),da.isFunction(a)?(d=$.call(arguments,2),e=function(){return a.apply(b||this,d.concat($.call(arguments)))},e.guid=a.guid=a.guid||da.guid++,e):c},access:function(a,b,d,e,f,g,h){var i=0,j=a.length,k=null==d;if("object"===da.type(d))for(i in f=!0,d)da.access(a,b,i,d[i],!0,g,h);else if(e!==c&&(f=!0,da.isFunction(e)||(h=!0),k&&(h?(b.call(a,e),b=null):(k=b,b=function(a,b,c){return k.call(da(a),c)})),b))for(;j>i;i++)b(a[i],d,h?e:e.call(a[i],i,b(a[i],d)));return f?a:k?b.call(a):j?b(a[0],d):g},now:function(){return(new Date).getTime()},swap:function(a,b,c,d){var e,f={};for(e in b)f[e]=a.style[e],a.style[e]=b[e];c=c.apply(a,d||[]);for(e in b)a.style[e]=f[e];return c}}),da.ready.promise=function(b){if(!O)if(O=da.Deferred(),"complete"===S.readyState)setTimeout(da.ready);else if(S.addEventListener)S.addEventListener("DOMContentLoaded",qa,!1),a.addEventListener("load",qa,!1);else{S.attachEvent("onreadystatechange",qa),a.attachEvent("onload",qa);var c=!1;try{c=null==a.frameElement&&S.documentElement}catch(d){}c&&c.doScroll&&function e(){if(!da.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}ra(),da.ready()}}()}return O.promise(b)},da.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){W["[object "+b+"]"]=b.toLowerCase()}),P=da(S);var sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da,Ea,Fa,Ga,Ha,Ia,Ja=a,Ka=function(a,b,c,d){var e,f,g,h,i;if((b?b.ownerDocument||b:ab)!==Ca&&Ba(b),b=b||Ca,c=c||[],!a||"string"!=typeof a)return c;if(1!==(h=b.nodeType)&&9!==h)return[];if(Ea&&!d){if(e=Cb.exec(a))if(g=e[1]){if(9===h){if(!(f=b.getElementById(g))||!f.parentNode)return c;if(f.id===g)return c.push(f),c}else if(b.ownerDocument&&(f=b.ownerDocument.getElementById(g))&&Ia(b,f)&&f.id===g)return c.push(f),c}else{if(e[2])return nb.apply(c,b.getElementsByTagName(a)),c;if((g=e[3])&&ta.getElementsByClassName&&b.getElementsByClassName)return nb.apply(c,b.getElementsByClassName(g)),c}if(ta.qsa&&(!Fa||!Fa.test(a))){if(f=e=_a,g=b,i=9===h&&a,1===h&&"object"!==b.nodeName.toLowerCase()){for(h=Ua(a),(e=b.getAttribute("id"))?f=e.replace(Fb,"\\$&"):b.setAttribute("id",f),f="[id='"+f+"'] ",g=h.length;g--;)h[g]=f+Va(h[g]);g=wb.test(a)&&b.parentNode||b,i=h.join(",")}if(i)try{return nb.apply(c,g.querySelectorAll(i)),c}catch(j){}finally{e||b.removeAttribute("id")}}}var k;a:{if(a=a.replace(tb,"$1"),f=Ua(a),!d&&1===f.length){if(e=f[0]=f[0].slice(0),2<e.length&&"ID"===(k=e[0]).type&&ta.getById&&9===b.nodeType&&Ea&&va.relative[e[1].type]){if(b=(va.find.ID(k.matches[0].replace(Gb,Hb),b)||[])[0],!b){k=c;break a}a=a.slice(e.shift().value.length)}for(h=Ab.needsContext.test(a)?0:e.length;h--&&(k=e[h],!va.relative[g=k.type]);)if((g=va.find[g])&&(d=g(k.matches[0].replace(Gb,Hb),wb.test(e[0].type)&&b.parentNode||b))){if(e.splice(h,1),a=d.length&&Va(e),!a){nb.apply(c,d),k=c;break a}break}}ya(a,f)(d,b,!Ea,c,wb.test(a)),k=c}return k},La=function(){function a(c,d){return b.push(c+=" ")>va.cacheLength&&delete a[b.shift()],a[c]=d}var b=[];return a},Ma=function(a){return a[_a]=!0,a},Na=function(a){var b=Ca.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b)}},Oa=function(a,b){for(var c=a.split("|"),d=a.length;d--;)va.attrHandle[c[d]]=b},Pa=function(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||ib)-(~a.sourceIndex||ib);if(d)return d;if(c)for(;c=c.nextSibling;)if(c===b)return-1;return a?1:-1},Qa=function(a){return function(b){return"input"===b.nodeName.toLowerCase()&&b.type===a}},Ra=function(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}},Sa=function(a){return Ma(function(b){return b=+b,Ma(function(c,d){for(var e,f=a([],c.length,b),g=f.length;g--;)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})},Ta=function(){},Ua=function(a,b){var c,d,e,f,g,h,i;if(g=eb[a+" "])return b?0:g.slice(0);for(g=a,h=[],i=va.preFilter;g;){c&&!(d=ub.exec(g))||(d&&(g=g.slice(d[0].length)||g),h.push(e=[])),c=!1,(d=vb.exec(g))&&(c=d.shift(),e.push({value:c,type:d[0].replace(tb," ")}),g=g.slice(c.length));for(f in va.filter)!(d=Ab[f].exec(g))||i[f]&&!(d=i[f](d))||(c=d.shift(),e.push({value:c,type:f,matches:d}),g=g.slice(c.length));if(!c)break}return b?g.length:g?Ka.error(a):eb(a,h).slice(0)},Va=function(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d},Wa=function(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=cb++;return b.first?function(b,c,f){for(;b=b[d];)if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j,k=bb+" "+f;if(g){for(;b=b[d];)if((1===b.nodeType||e)&&a(b,c,g))return!0}else for(;b=b[d];)if(1===b.nodeType||e)if(j=b[_a]||(b[_a]={}),(i=j[d])&&i[0]===k){if(!0===(h=i[1])||h===ua)return!0===h}else if(i=j[d]=[k],i[1]=a(b,c,g)||ua,!0===i[1])return!0}},Xa=function(a){return 1<a.length?function(b,c,d){for(var e=a.length;e--;)if(!a[e](b,c,d))return!1;return!0}:a[0]},Ya=function(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(c&&!c(f,d,e)||(g.push(f),j&&b.push(h)));return g},Za=function(a,b,c,d,e,f){return d&&!d[_a]&&(d=Za(d)),e&&!e[_a]&&(e=Za(e,f)),Ma(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length;if(!(l=f)){l=b||"*";for(var p=h.nodeType?[h]:h,q=[],r=0,s=p.length;s>r;r++)Ka(l,p[r],q);l=q}if(l=!a||!f&&b?l:Ya(l,m,a,h,i),p=c?e||(f?a:o||d)?[]:g:l,c&&c(l,p,h,i),d)for(j=Ya(p,n),d(j,[],h,i),h=j.length;h--;)(k=j[h])&&(p[n[h]]=!(l[n[h]]=k));if(f){if(e||a){if(e){for(j=[],h=p.length;h--;)(k=p[h])&&j.push(l[h]=k);e(null,p=[],j,i)}for(h=p.length;h--;)(k=p[h])&&-1<(j=e?pb.call(f,k):m[h])&&(f[j]=!(g[j]=k))}}else p=Ya(p===g?p.splice(o,p.length):p),e?e(null,g,p,i):nb.apply(g,p)})},$a=function(a){var b,c,d,e=a.length,f=va.relative[a[0].type];c=f||va.relative[" "];for(var g=f?1:0,h=Wa(function(a){return a===b},c,!0),i=Wa(function(a){return-1<pb.call(b,a)},c,!0),j=[function(a,c,d){return!f&&(d||c!==za)||((b=c).nodeType?h(a,c,d):i(a,c,d))}];e>g;g++)if(c=va.relative[a[g].type])j=[Wa(Xa(j),c)];else{if(c=va.filter[a[g].type].apply(null,a[g].matches),c[_a]){for(d=++g;e>d&&!va.relative[a[d].type];d++);return Za(g>1&&Xa(j),g>1&&Va(a.slice(0,g-1).concat({value:" "===a[g-2].type?"*":""})).replace(tb,"$1"),c,d>g&&$a(a.slice(g,d)),e>d&&$a(a=a.slice(d)),e>d&&Va(a))}j.push(c)}return Xa(j)},_a="sizzle"+-new Date,ab=Ja.document,bb=0,cb=0,db=La(),eb=La(),fb=La(),gb=!1,hb=function(a,b){return a===b&&(gb=!0),0},ib=-2147483648,jb={}.hasOwnProperty,kb=[],lb=kb.pop,mb=kb.push,nb=kb.push,ob=kb.slice,pb=kb.indexOf||function(a){
for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},qb="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w#"),rb="\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)[\\x20\\t\\r\\n\\f]*(?:([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+qb+")|)|)[\\x20\\t\\r\\n\\f]*\\]",sb=":((?:\\\\.|[\\w-]|[^\\x00-\\xa0])+)(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+rb.replace(3,8)+")*)|.*)\\)|)",tb=RegExp("^[\\x20\\t\\r\\n\\f]+|((?:^|[^\\\\])(?:\\\\.)*)[\\x20\\t\\r\\n\\f]+$","g"),ub=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,vb=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,wb=/[\x20\t\r\n\f]*[+~]/,xb=RegExp("=[\\x20\\t\\r\\n\\f]*([^\\]'\"]*)[\\x20\\t\\r\\n\\f]*\\]","g"),yb=RegExp(sb),zb=RegExp("^"+qb+"$"),Ab={ID:/^#((?:\\.|[\w-]|[^\x00-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\x00-\xa0])+)/,TAG:RegExp("^("+"(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+".replace("w","w*")+")"),ATTR:RegExp("^"+rb),PSEUDO:RegExp("^"+sb),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\([\\x20\\t\\r\\n\\f]*(even|odd|(([+-]|)(\\d*)n|)[\\x20\\t\\r\\n\\f]*(?:([+-]|)[\\x20\\t\\r\\n\\f]*(\\d+)|))[\\x20\\t\\r\\n\\f]*\\)|)","i"),bool:RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:RegExp("^[\\x20\\t\\r\\n\\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\([\\x20\\t\\r\\n\\f]*((?:-\\d)?\\d*)[\\x20\\t\\r\\n\\f]*\\)|)(?=[^-]|$)","i")},Bb=/^[^{]+\{\s*\[native \w/,Cb=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Db=/^(?:input|select|textarea|button)$/i,Eb=/^h\d$/i,Fb=/'|\\/g,Gb=RegExp("\\\\([\\da-f]{1,6}[\\x20\\t\\r\\n\\f]?|([\\x20\\t\\r\\n\\f])|.)","ig"),Hb=function(a,b,c){return a="0x"+b-65536,a!==a||c?b:0>a?String.fromCharCode(a+65536):String.fromCharCode(a>>10|55296,1023&a|56320)};try{nb.apply(kb=ob.call(ab.childNodes),ab.childNodes),kb[ab.childNodes.length].nodeType}catch(Ib){nb={apply:kb.length?function(a,b){mb.apply(a,ob.call(b))}:function(a,b){for(var c=a.length,d=0;a[c++]=b[d++];);a.length=c-1}}}xa=Ka.isXML=function(a){return(a=a&&(a.ownerDocument||a).documentElement)?"HTML"!==a.nodeName:!1},ta=Ka.support={},Ba=Ka.setDocument=function(a){var b=a?a.ownerDocument||a:ab;return a=b.defaultView,b!==Ca&&9===b.nodeType&&b.documentElement?(Ca=b,Da=b.documentElement,Ea=!xa(b),a&&a.attachEvent&&a!==a.top&&a.attachEvent("onbeforeunload",function(){Ba()}),ta.attributes=Na(function(a){return a.className="i",!a.getAttribute("className")}),ta.getElementsByTagName=Na(function(a){return a.appendChild(b.createComment("")),!a.getElementsByTagName("*").length}),ta.getElementsByClassName=Na(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),ta.getById=Na(function(a){return Da.appendChild(a).id=_a,!b.getElementsByName||!b.getElementsByName(_a).length}),ta.getById?(va.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&Ea){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},va.filter.ID=function(a){var b=a.replace(Gb,Hb);return function(a){return a.getAttribute("id")===b}}):(delete va.find.ID,va.filter.ID=function(a){var b=a.replace(Gb,Hb);return function(a){return(a="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id"))&&a.value===b}}),va.find.TAG=ta.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){for(;c=f[e++];)1===c.nodeType&&d.push(c);return d}return f},va.find.CLASS=ta.getElementsByClassName&&function(a,b){return"undefined"!=typeof b.getElementsByClassName&&Ea?b.getElementsByClassName(a):void 0},Ga=[],Fa=[],(ta.qsa=Bb.test(b.querySelectorAll))&&(Na(function(a){a.innerHTML="<select><option selected=''></option></select>",a.querySelectorAll("[selected]").length||Fa.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),a.querySelectorAll(":checked").length||Fa.push(":checked")}),Na(function(a){var c=b.createElement("input");c.setAttribute("type","hidden"),a.appendChild(c).setAttribute("t",""),a.querySelectorAll("[t^='']").length&&Fa.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),a.querySelectorAll(":enabled").length||Fa.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),Fa.push(",.*:")})),(ta.matchesSelector=Bb.test(Ha=Da.webkitMatchesSelector||Da.mozMatchesSelector||Da.oMatchesSelector||Da.msMatchesSelector))&&Na(function(a){ta.disconnectedMatch=Ha.call(a,"div"),Ha.call(a,"[s!='']:x"),Ga.push("!=",sb)}),Fa=Fa.length&&RegExp(Fa.join("|")),Ga=Ga.length&&RegExp(Ga.join("|")),Ia=Bb.test(Da.contains)||Da.compareDocumentPosition?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)for(;b=b.parentNode;)if(b===a)return!0;return!1},hb=Da.compareDocumentPosition?function(a,c){if(a===c)return gb=!0,0;var d=c.compareDocumentPosition&&a.compareDocumentPosition&&a.compareDocumentPosition(c);return d?1&d||!ta.sortDetached&&c.compareDocumentPosition(a)===d?a===b||Ia(ab,a)?-1:c===b||Ia(ab,c)?1:Aa?pb.call(Aa,a)-pb.call(Aa,c):0:4&d?-1:1:a.compareDocumentPosition?-1:1}:function(a,c){var d,e=0;d=a.parentNode;var f=c.parentNode,g=[a],h=[c];if(a===c)return gb=!0,0;if(!d||!f)return a===b?-1:c===b?1:d?-1:f?1:Aa?pb.call(Aa,a)-pb.call(Aa,c):0;if(d===f)return Pa(a,c);for(d=a;d=d.parentNode;)g.unshift(d);for(d=c;d=d.parentNode;)h.unshift(d);for(;g[e]===h[e];)e++;return e?Pa(g[e],h[e]):g[e]===ab?-1:h[e]===ab?1:0},b):Ca},Ka.matches=function(a,b){return Ka(a,null,null,b)},Ka.matchesSelector=function(a,b){if((a.ownerDocument||a)!==Ca&&Ba(a),b=b.replace(xb,"='$1']"),ta.matchesSelector&&Ea&&(!Ga||!Ga.test(b))&&(!Fa||!Fa.test(b)))try{var c=Ha.call(a,b);if(c||ta.disconnectedMatch||a.document&&11!==a.document.nodeType)return c}catch(d){}return 0<Ka(b,Ca,null,[a]).length},Ka.contains=function(a,b){return(a.ownerDocument||a)!==Ca&&Ba(a),Ia(a,b)},Ka.attr=function(a,b){(a.ownerDocument||a)!==Ca&&Ba(a);var c=va.attrHandle[b.toLowerCase()],c=c&&jb.call(va.attrHandle,b.toLowerCase())?c(a,b,!Ea):void 0;return void 0===c?ta.attributes||!Ea?a.getAttribute(b):(c=a.getAttributeNode(b))&&c.specified?c.value:null:c},Ka.error=function(a){throw Error("Syntax error, unrecognized expression: "+a)},Ka.uniqueSort=function(a){var b,c=[],d=0,e=0;if(gb=!ta.detectDuplicates,Aa=!ta.sortStable&&a.slice(0),a.sort(hb),gb){for(;b=a[e++];)b===a[e]&&(d=c.push(e));for(;d--;)a.splice(c[d],1)}return a},wa=Ka.getText=function(a){var b,c="",d=0;if(b=a.nodeType){if(1===b||9===b||11===b){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=wa(a)}else if(3===b||4===b)return a.nodeValue}else for(;b=a[d];d++)c+=wa(b);return c},va=Ka.selectors={cacheLength:50,createPseudo:Ma,match:Ab,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(Gb,Hb),a[3]=(a[4]||a[5]||"").replace(Gb,Hb),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||Ka.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&Ka.error(a[0]),a},PSEUDO:function(a){var b,c=!a[5]&&a[2];return Ab.CHILD.test(a[0])?null:(a[3]&&void 0!==a[4]?a[2]=a[4]:c&&yb.test(c)&&(b=Ua(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(Gb,Hb).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=db[a+" "];return b||(b=RegExp("(^|[\\x20\\t\\r\\n\\f])"+a+"([\\x20\\t\\r\\n\\f]|$)"))&&db(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){return d=Ka.attr(d,a),null==d?"!="===b:b?(d+="","="===b?d===c:"!="===b?d!==c:"^="===b?c&&0===d.indexOf(c):"*="===b?c&&-1<d.indexOf(c):"$="===b?c&&d.slice(-c.length)===c:"~="===b?-1<(" "+d+" ").indexOf(c):"|="===b?d===c||d.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n;c=f!==g?"nextSibling":"previousSibling";var o=b.parentNode,p=h&&b.nodeName.toLowerCase();if(i=!i&&!h,o){if(f){for(;c;){for(k=b;k=k[c];)if(h?k.nodeName.toLowerCase()===p:1===k.nodeType)return!1;n=c="only"===a&&!n&&"nextSibling"}return!0}if(n=[g?o.firstChild:o.lastChild],g&&i){for(i=o[_a]||(o[_a]={}),j=i[a]||[],m=j[0]===bb&&j[1],l=j[0]===bb&&j[2],k=m&&o.childNodes[m];k=++m&&k&&k[c]||(l=m=0)||n.pop();)if(1===k.nodeType&&++l&&k===b){i[a]=[bb,m,l];break}}else if(i&&(j=(b[_a]||(b[_a]={}))[a])&&j[0]===bb)l=j[1];else for(;(k=++m&&k&&k[c]||(l=m=0)||n.pop())&&((h?k.nodeName.toLowerCase()!==p:1!==k.nodeType)||!++l||(i&&((k[_a]||(k[_a]={}))[a]=[bb,l]),k!==b)););return l-=e,l===d||0===l%d&&l/d>=0}}},PSEUDO:function(a,b){var c,d=va.pseudos[a]||va.setFilters[a.toLowerCase()]||Ka.error("unsupported pseudo: "+a);return d[_a]?d(b):1<d.length?(c=[a,a,"",b],va.setFilters.hasOwnProperty(a.toLowerCase())?Ma(function(a,c){for(var e,f=d(a,b),g=f.length;g--;)e=pb.call(a,f[g]),a[e]=!(c[e]=f[g])}):function(a){return d(a,0,c)}):d}},pseudos:{not:Ma(function(a){var b=[],c=[],d=ya(a.replace(tb,"$1"));return d[_a]?Ma(function(a,b,c,e){e=d(a,null,e,[]);for(var f=a.length;f--;)(c=e[f])&&(a[f]=!(b[f]=c))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:Ma(function(a){return function(b){return 0<Ka(a,b).length}}),contains:Ma(function(a){return function(b){return-1<(b.textContent||b.innerText||wa(b)).indexOf(a)}}),lang:Ma(function(a){return zb.test(a||"")||Ka.error("unsupported lang: "+a),a=a.replace(Gb,Hb).toLowerCase(),function(b){var c;do if(c=Ea?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(a){var b=Ja.location&&Ja.location.hash;return b&&b.slice(1)===a.id},root:function(a){return a===Da},focus:function(a){return a===Ca.activeElement&&(!Ca.hasFocus||Ca.hasFocus())&&!(!a.type&&!a.href&&!~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if("@"<a.nodeName||3===a.nodeType||4===a.nodeType)return!1;return!0},parent:function(a){return!va.pseudos.empty(a)},header:function(a){return Eb.test(a.nodeName)},input:function(a){return Db.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||b.toLowerCase()===a.type)},first:Sa(function(){return[0]}),last:Sa(function(a,b){return[b-1]}),eq:Sa(function(a,b,c){return[0>c?c+b:c]}),even:Sa(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:Sa(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:Sa(function(a,b,c){for(b=0>c?c+b:c;0<=--b;)a.push(b);return a}),gt:Sa(function(a,b,c){for(c=0>c?c+b:c;++c<b;)a.push(c);return a})}},va.pseudos.nth=va.pseudos.eq;for(sa in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})va.pseudos[sa]=Qa(sa);for(sa in{submit:!0,reset:!0})va.pseudos[sa]=Ra(sa);Ta.prototype=va.filters=va.pseudos,va.setFilters=new Ta,ya=Ka.compile=function(a,b){var c,d=[],e=[],f=fb[a+" "];if(!f){for(b||(b=Ua(a)),c=b.length;c--;)f=$a(b[c]),f[_a]?d.push(f):e.push(f);var g=0,h=0<d.length,i=0<e.length;c=function(a,b,c,f,j){var k,l,m=[],n=0,o="0",p=a&&[],q=null!=j,r=za,s=a||i&&va.find.TAG("*",j&&b.parentNode||b),t=bb+=null==r?1:Math.random()||.1;for(q&&(za=b!==Ca&&b,ua=g);null!=(j=s[o]);o++){if(i&&j){for(k=0;l=e[k++];)if(l(j,b,c)){f.push(j);break}q&&(bb=t,ua=++g)}h&&((j=!l&&j)&&n--,a&&p.push(j))}if(n+=o,h&&o!==n){for(k=0;l=d[k++];)l(p,m,b,c);if(a){if(n>0)for(;o--;)!p[o]&&!m[o]&&(m[o]=lb.call(f));m=Ya(m)}nb.apply(f,m),q&&!a&&0<m.length&&1<n+d.length&&Ka.uniqueSort(f)}return q&&(bb=t,za=r),p},c=h?Ma(c):c,f=fb(a,c)}return f},ta.sortStable=_a.split("").sort(hb).join("")===_a,ta.detectDuplicates=gb,Ba(),ta.sortDetached=Na(function(a){return 1&a.compareDocumentPosition(Ca.createElement("div"))}),Na(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||Oa("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),(!ta.attributes||!Na(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")}))&&Oa("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),Na(function(a){return null==a.getAttribute("disabled")})||Oa("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&d.specified?d.value:!0===a[b]?b.toLowerCase():null}),da.find=Ka,da.expr=Ka.selectors,da.expr[":"]=da.expr.pseudos,da.unique=Ka.uniqueSort,da.text=Ka.getText,da.isXMLDoc=Ka.isXML,da.contains=Ka.contains;var Jb={};da.Callbacks=function(a){var b;if("string"==typeof a){if(!(b=Jb[a])){b=a;var d=Jb[b]={};da.each(b.match(fa)||[],function(a,b){d[b]=!0}),b=d}}else b=da.extend({},a);a=b;var e,f,g,h,i,j,k=[],l=!a.once&&[],m=function(b){for(f=a.memory&&b,g=!0,i=j||0,j=0,h=k.length,e=!0;k&&h>i;i++)if(!1===k[i].apply(b[0],b[1])&&a.stopOnFalse){f=!1;break}e=!1,k&&(l?l.length&&m(l.shift()):f?k=[]:n.disable())},n={add:function(){if(k){var b=k.length;!function c(b){da.each(b,function(b,d){var e=da.type(d);"function"===e?(!a.unique||!n.has(d))&&k.push(d):d&&d.length&&"string"!==e&&c(d)})}(arguments),e?h=k.length:f&&(j=b,m(f))}return this},remove:function(){return k&&da.each(arguments,function(a,b){for(var c;-1<(c=da.inArray(b,k,c));)k.splice(c,1),e&&(h>=c&&h--,i>=c&&i--)}),this},has:function(a){return a?-1<da.inArray(a,k):!(!k||!k.length)},empty:function(){return k=[],h=0,this},disable:function(){return k=l=f=c,this},disabled:function(){return!k},lock:function(){return l=c,f||n.disable(),this},locked:function(){return!l},fireWith:function(a,b){return!k||g&&!l||(b=b||[],b=[a,b.slice?b.slice():b],e?l.push(b):m(b)),this},fire:function(){return n.fireWith(this,arguments),this},fired:function(){return!!g}};return n},da.extend({Deferred:function(a){var b=[["resolve","done",da.Callbacks("once memory"),"resolved"],["reject","fail",da.Callbacks("once memory"),"rejected"],["notify","progress",da.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return da.Deferred(function(c){da.each(b,function(b,f){var g=f[0],h=da.isFunction(a[b])&&a[b];e[f[1]](function(){var a=h&&h.apply(this,arguments);a&&da.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[g+"With"](this===d?c.promise():this,h?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?da.extend(a,d):d}},e={};return d.pipe=d.then,da.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b,c,d,e=0,f=$.call(arguments),g=f.length,h=1!==g||a&&da.isFunction(a.promise)?g:0,i=1===h?a:da.Deferred(),j=function(a,c,d){return function(e){c[a]=this,d[a]=1<arguments.length?$.call(arguments):e,d===b?i.notifyWith(c,d):--h||i.resolveWith(c,d)}};if(g>1)for(b=Array(g),c=Array(g),d=Array(g);g>e;e++)f[e]&&da.isFunction(f[e].promise)?f[e].promise().done(j(e,d,f)).fail(i.reject).progress(j(e,c,b)):--h;return h||i.resolveWith(d,f),i.promise()}});var Kb,Lb,Mb,Nb,Ob,Pb,Qb,Rb,Sb,Tb=da,Ub={},Vb=S.createElement("div");if(Vb.setAttribute("className","t"),Vb.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",Kb=Vb.getElementsByTagName("*")||[],(Lb=Vb.getElementsByTagName("a")[0])&&Lb.style&&Kb.length){Nb=S.createElement("select"),Pb=Nb.appendChild(S.createElement("option")),Mb=Vb.getElementsByTagName("input")[0],Lb.style.cssText="top:1px;float:left;opacity:.5",Ub.getSetAttribute="t"!==Vb.className,Ub.leadingWhitespace=3===Vb.firstChild.nodeType,Ub.tbody=!Vb.getElementsByTagName("tbody").length,Ub.htmlSerialize=!!Vb.getElementsByTagName("link").length,Ub.style=/top/.test(Lb.getAttribute("style")),Ub.hrefNormalized="/a"===Lb.getAttribute("href"),Ub.opacity=/^0.5/.test(Lb.style.opacity),Ub.cssFloat=!!Lb.style.cssFloat,Ub.checkOn=!!Mb.value,Ub.optSelected=Pb.selected,Ub.enctype=!!S.createElement("form").enctype,Ub.html5Clone="<:nav></:nav>"!==S.createElement("nav").cloneNode(!0).outerHTML,Ub.inlineBlockNeedsLayout=!1,Ub.shrinkWrapBlocks=!1,Ub.pixelPosition=!1,Ub.deleteExpando=!0,Ub.noCloneEvent=!0,Ub.reliableMarginRight=!0,Ub.boxSizingReliable=!0,Mb.checked=!0,Ub.noCloneChecked=Mb.cloneNode(!0).checked,Nb.disabled=!0,Ub.optDisabled=!Pb.disabled;try{delete Vb.test}catch(Wb){Ub.deleteExpando=!1}Mb=S.createElement("input"),Mb.setAttribute("value",""),Ub.input=""===Mb.getAttribute("value"),Mb.value="t",Mb.setAttribute("type","radio"),Ub.radioValue="t"===Mb.value,Mb.setAttribute("checked","t"),Mb.setAttribute("name","t"),Ob=S.createDocumentFragment(),Ob.appendChild(Mb),Ub.appendChecked=Mb.checked,Ub.checkClone=Ob.cloneNode(!0).cloneNode(!0).lastChild.checked,Vb.attachEvent&&(Vb.attachEvent("onclick",function(){Ub.noCloneEvent=!1}),Vb.cloneNode(!0).click());for(Sb in{submit:!0,change:!0,focusin:!0})Vb.setAttribute(Qb="on"+Sb,"t"),Ub[Sb+"Bubbles"]=Qb in a||!1===Vb.attributes[Qb].expando;Vb.style.backgroundClip="content-box",Vb.cloneNode(!0).style.backgroundClip="",Ub.clearCloneStyle="content-box"===Vb.style.backgroundClip;for(Sb in da(Ub))break;Ub.ownLast="0"!==Sb,da(function(){var b,c,d=S.getElementsByTagName("body")[0];d&&(b=S.createElement("div"),b.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",d.appendChild(b).appendChild(Vb),Vb.innerHTML="<table><tr><td></td><td>t</td></tr></table>",c=Vb.getElementsByTagName("td"),c[0].style.cssText="padding:0;margin:0;border:0;display:none",Rb=0===c[0].offsetHeight,c[0].style.display="",c[1].style.display="none",Ub.reliableHiddenOffsets=Rb&&0===c[0].offsetHeight,Vb.innerHTML="",Vb.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",da.swap(d,null!=d.style.zoom?{zoom:1}:{},function(){Ub.boxSizing=4===Vb.offsetWidth}),a.getComputedStyle&&(Ub.pixelPosition="1%"!==(a.getComputedStyle(Vb,null)||{}).top,Ub.boxSizingReliable="4px"===(a.getComputedStyle(Vb,null)||{width:"4px"}).width,c=Vb.appendChild(S.createElement("div")),c.style.cssText=Vb.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",c.style.marginRight=c.style.width="0",Vb.style.width="1px",Ub.reliableMarginRight=!parseFloat((a.getComputedStyle(c,null)||{}).marginRight)),typeof Vb.style.zoom!==Q&&(Vb.innerHTML="",Vb.style.cssText="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;width:1px;padding:1px;display:inline;zoom:1",Ub.inlineBlockNeedsLayout=3===Vb.offsetWidth,Vb.style.display="block",Vb.innerHTML="<div></div>",Vb.firstChild.style.width="5px",Ub.shrinkWrapBlocks=3!==Vb.offsetWidth,Ub.inlineBlockNeedsLayout&&(d.style.zoom=1)),d.removeChild(b),b=Vb=c=c=null)}),Kb=Nb=Ob=Pb=Lb=Mb=null}Tb.support=Ub;var Xb=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,Yb=/([A-Z])/g;da.extend({cache:{},noData:{applet:!0,embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?da.cache[a[da.expando]]:a[da.expando],!!a&&!h(a)},data:function(a,b,c){return e(a,b,c)},removeData:function(a,b){return f(a,b)},_data:function(a,b,c){return e(a,b,c,!0)},_removeData:function(a,b){return f(a,b,!0)},acceptData:function(a){if(a.nodeType&&1!==a.nodeType&&9!==a.nodeType)return!1;var b=a.nodeName&&da.noData[a.nodeName.toLowerCase()];return!b||!0!==b&&a.getAttribute("classid")===b}}),da.fn.extend({data:function(a,b){var d,e,f=null,h=0,i=this[0];if(a===c){if(this.length&&(f=da.data(i),1===i.nodeType&&!da._data(i,"parsedAttrs"))){for(d=i.attributes;h<d.length;h++)e=d[h].name,0===e.indexOf("data-")&&(e=da.camelCase(e.slice(5)),g(i,e,f[e]));da._data(i,"parsedAttrs",!0)}return f}return"object"==typeof a?this.each(function(){da.data(this,a)}):1<arguments.length?this.each(function(){da.data(this,a,b)}):i?g(i,a,da.data(i,a)):null},removeData:function(a){return this.each(function(){da.removeData(this,a)})}}),da.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=da._data(a,b),c&&(!d||da.isArray(c)?d=da._data(a,b,da.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=da.queue(a,b),d=c.length,e=c.shift(),f=da._queueHooks(a,b),g=function(){da.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return da._data(a,c)||da._data(a,c,{empty:da.Callbacks("once memory").add(function(){da._removeData(a,b+"queue"),da._removeData(a,c)})})}}),da.fn.extend({queue:function(a,b){var d=2;return"string"!=typeof a&&(b=a,a="fx",d--),arguments.length<d?da.queue(this[0],a):b===c?this:this.each(function(){var c=da.queue(this,a,b);da._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&da.dequeue(this,a)})},dequeue:function(a){return this.each(function(){da.dequeue(this,a)})},delay:function(a,b){return a=da.fx?da.fx.speeds[a]||a:a,this.queue(b||"fx",function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var d,e=1,f=da.Deferred(),g=this,h=this.length,i=function(){--e||f.resolveWith(g,[g])};for("string"!=typeof a&&(b=a,a=c),a=a||"fx";h--;)(d=da._data(g[h],a+"queueHooks"))&&d.empty&&(e++,d.empty.add(i));return i(),f.promise(b)}});var Zb,$b,_b=/[\t\r\n\f]/g,ac=/\r/g,bc=/^(?:input|select|textarea|button|object)$/i,cc=/^(?:a|area)$/i,dc=/^(?:checked|selected)$/i,ec=da.support.getSetAttribute,fc=da.support.input;da.fn.extend({attr:function(a,b){return da.access(this,da.attr,a,b,1<arguments.length)},removeAttr:function(a){return this.each(function(){da.removeAttr(this,a)})},prop:function(a,b){return da.access(this,da.prop,a,b,1<arguments.length)},removeProp:function(a){return a=da.propFix[a]||a,this.each(function(){try{this[a]=c,delete this[a]}catch(b){}})},addClass:function(a){var b,c,d,e,f,g=0,h=this.length;if(b="string"==typeof a&&a,da.isFunction(a))return this.each(function(b){da(this).addClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(fa)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(_b," "):" ")){for(f=0;e=b[f++];)0>d.indexOf(" "+e+" ")&&(d+=e+" ");c.className=da.trim(d)}return this},removeClass:function(a){var b,c,d,e,f,g=0,h=this.length;if(b=0===arguments.length||"string"==typeof a&&a,da.isFunction(a))return this.each(function(b){da(this).removeClass(a.call(this,b,this.className))});if(b)for(b=(a||"").match(fa)||[];h>g;g++)if(c=this[g],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(_b," "):"")){for(f=0;e=b[f++];)for(;0<=d.indexOf(" "+e+" ");)d=d.replace(" "+e+" "," ");c.className=a?da.trim(d):""}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):da.isFunction(a)?this.each(function(c){da(this).toggleClass(a.call(this,c,this.className,b),b)}):this.each(function(){if("string"===c)for(var b,d=0,e=da(this),f=a.match(fa)||[];b=f[d++];)e.hasClass(b)?e.removeClass(b):e.addClass(b);else c!==Q&&"boolean"!==c||(this.className&&da._data(this,"__className__",this.className),this.className=this.className||!1===a?"":da._data(this,"__className__")||"")})},hasClass:function(a){a=" "+a+" ";for(var b=0,c=this.length;c>b;b++)if(1===this[b].nodeType&&0<=(" "+this[b].className+" ").replace(_b," ").indexOf(a))return!0;return!1},val:function(a){var b,d,e,f=this[0];return arguments.length?(e=da.isFunction(a),this.each(function(b){1!==this.nodeType||(b=e?a.call(this,b,da(this).val()):a,null==b?b="":"number"==typeof b?b+="":da.isArray(b)&&(b=da.map(b,function(a){return null==a?"":a+""})),d=da.valHooks[this.type]||da.valHooks[this.nodeName.toLowerCase()],d&&"set"in d&&d.set(this,b,"value")!==c)||(this.value=b)})):f?(d=da.valHooks[f.type]||da.valHooks[f.nodeName.toLowerCase()])&&"get"in d&&(b=d.get(f,"value"))!==c?b:(b=f.value,"string"==typeof b?b.replace(ac,""):null==b?"":b):void 0}}),da.extend({valHooks:{option:{get:function(a){var b=da.find.attr(a,"value");return null!=b?b:a.text}},select:{get:function(a){for(var b,c=a.options,d=a.selectedIndex,e=(a="select-one"===a.type||0>d)?null:[],f=a?d+1:c.length,g=0>d?f:a?d:0;f>g;g++)if(b=c[g],(b.selected||g===d)&&(da.support.optDisabled?!b.disabled:null===b.getAttribute("disabled"))&&(!b.parentNode.disabled||!da.nodeName(b.parentNode,"optgroup"))){if(b=da(b).val(),a)return b;e.push(b)}return e},set:function(a,b){for(var c,d,e=a.options,f=da.makeArray(b),g=e.length;g--;)d=e[g],(d.selected=0<=da.inArray(da(d).val(),f))&&(c=!0);return c||(a.selectedIndex=-1),f}}},attr:function(a,b,d){var e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g){if(typeof a.getAttribute===Q)return da.prop(a,b,d);if(1===g&&da.isXMLDoc(a)||(b=b.toLowerCase(),e=da.attrHooks[b]||(da.expr.match.bool.test(b)?$b:Zb)),d===c)return e&&"get"in e&&null!==(f=e.get(a,b))?f:(f=da.find.attr(a,b),null==f?c:f);if(null!==d)return e&&"set"in e&&(f=e.set(a,d,b))!==c?f:(a.setAttribute(b,d+""),d);da.removeAttr(a,b)}},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(fa);if(f&&1===a.nodeType)for(;c=f[e++];)d=da.propFix[c]||c,da.expr.match.bool.test(c)?fc&&ec||!dc.test(c)?a[d]=!1:a[da.camelCase("default-"+c)]=a[d]=!1:da.attr(a,c,""),a.removeAttribute(ec?c:d)},attrHooks:{type:{set:function(a,b){if(!da.support.radioValue&&"radio"===b&&da.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}},propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,d){var e,f,g;return g=a.nodeType,a&&3!==g&&8!==g&&2!==g?((g=1!==g||!da.isXMLDoc(a))&&(b=da.propFix[b]||b,f=da.propHooks[b]),d!==c?f&&"set"in f&&(e=f.set(a,d,b))!==c?e:a[b]=d:f&&"get"in f&&null!==(e=f.get(a,b))?e:a[b]):void 0},propHooks:{tabIndex:{get:function(a){var b=da.find.attr(a,"tabindex");return b?parseInt(b,10):bc.test(a.nodeName)||cc.test(a.nodeName)&&a.href?0:-1}}}}),$b={set:function(a,b,c){return!1===b?da.removeAttr(a,c):fc&&ec||!dc.test(c)?a.setAttribute(!ec&&da.propFix[c]||c,c):a[da.camelCase("default-"+c)]=a[c]=!0,c}},da.each(da.expr.match.bool.source.match(/\w+/g),function(a,b){var d=da.expr.attrHandle[b]||da.find.attr;da.expr.attrHandle[b]=fc&&ec||!dc.test(b)?function(a,b,e){var f=da.expr.attrHandle[b];return a=e?c:(da.expr.attrHandle[b]=c)!=d(a,b,e)?b.toLowerCase():null,da.expr.attrHandle[b]=f,a}:function(a,b,d){return d?c:a[da.camelCase("default-"+b)]?b.toLowerCase():null}}),fc&&ec||(da.attrHooks.value={set:function(a,b,c){return da.nodeName(a,"input")?void(a.defaultValue=b):Zb&&Zb.set(a,b,c)}}),ec||(Zb={set:function(a,b,d){var e=a.getAttributeNode(d);return e||a.setAttributeNode(e=a.ownerDocument.createAttribute(d)),e.value=b+="","value"===d||b===a.getAttribute(d)?b:c}},da.expr.attrHandle.id=da.expr.attrHandle.name=da.expr.attrHandle.coords=function(a,b,d){var e;return d?c:(e=a.getAttributeNode(b))&&""!==e.value?e.value:null},da.valHooks.button={get:function(a,b){var d=a.getAttributeNode(b);return d&&d.specified?d.value:c},set:Zb.set},da.attrHooks.contenteditable={set:function(a,b,c){Zb.set(a,""===b?!1:b,c)}},da.each(["width","height"],function(a,b){da.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),da.support.hrefNormalized||da.each(["href","src"],function(a,b){da.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),da.support.style||(da.attrHooks.style={get:function(a){return a.style.cssText||c},set:function(a,b){return a.style.cssText=b+""}}),da.support.optSelected||(da.propHooks.selected={get:function(a){return(a=a.parentNode)&&(a.selectedIndex,a.parentNode&&a.parentNode.selectedIndex),null}}),da.each("tabIndex readOnly maxLength cellSpacing cellPadding rowSpan colSpan useMap frameBorder contentEditable".split(" "),function(){da.propFix[this.toLowerCase()]=this}),da.support.enctype||(da.propFix.enctype="encoding"),da.each(["radio","checkbox"],function(){da.valHooks[this]={set:function(a,b){return da.isArray(b)?a.checked=0<=da.inArray(da(a).val(),b):void 0}},da.support.checkOn||(da.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var gc=/^(?:input|select|textarea)$/i,hc=/^key/,ic=/^(?:mouse|contextmenu)|click/,jc=/^(?:focusinfocus|focusoutblur)$/,kc=/^([^.]*)(?:\.(.+)|)$/;da.event={global:{},add:function(a,b,d,e,f){var g,h,i,j,k,l,m,n,o;if(i=da._data(a)){for(d.handler&&(j=d,d=j.handler,f=j.selector),d.guid||(d.guid=da.guid++),(h=i.events)||(h=i.events={}),(k=i.handle)||(k=i.handle=function(a){return typeof da===Q||a&&da.event.triggered===a.type?c:da.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(fa)||[""],i=b.length;i--;)g=kc.exec(b[i])||[],n=l=g[1],o=(g[2]||"").split(".").sort(),n&&(g=da.event.special[n]||{},n=(f?g.delegateType:g.bindType)||n,g=da.event.special[n]||{},l=da.extend({type:n,origType:l,data:e,handler:d,guid:d.guid,selector:f,needsContext:f&&da.expr.match.needsContext.test(f),namespace:o.join(".")},j),(m=h[n])||(m=h[n]=[],m.delegateCount=0,g.setup&&!1!==g.setup.call(a,e,o,k)||(a.addEventListener?a.addEventListener(n,k,!1):a.attachEvent&&a.attachEvent("on"+n,k))),g.add&&(g.add.call(a,l),l.handler.guid||(l.handler.guid=d.guid)),f?m.splice(m.delegateCount++,0,l):m.push(l),da.event.global[n]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,n,o,p,q=da.hasData(a)&&da._data(a);if(q&&(k=q.events)){for(b=(b||"").match(fa)||[""],j=b.length;j--;)if(h=kc.exec(b[j])||[],n=p=h[1],o=(h[2]||"").split(".").sort(),n){for(l=da.event.special[n]||{},n=(d?l.delegateType:l.bindType)||n,m=k[n]||[],h=h[2]&&RegExp("(^|\\.)"+o.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=m.length;f--;)g=m[f],!e&&p!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(m.splice(f,1),g.selector&&m.delegateCount--,l.remove&&l.remove.call(a,g));i&&!m.length&&((!l.teardown||!1===l.teardown.call(a,o,q.handle))&&da.removeEvent(a,n,q.handle),delete k[n])}else for(n in k)da.event.remove(a,n+b[j],c,d,!0);da.isEmptyObject(k)&&(delete q.handle,da._removeData(a,"events"))}},trigger:function(b,d,e,f){var g,h,i,j,k,l,m=[e||S],n=ba.call(b,"type")?b.type:b;if(k=ba.call(b,"namespace")?b.namespace.split("."):[],i=g=e=e||S,3!==e.nodeType&&8!==e.nodeType&&!jc.test(n+da.event.triggered)&&(0<=n.indexOf(".")&&(k=n.split("."),n=k.shift(),k.sort()),h=0>n.indexOf(":")&&"on"+n,b=b[da.expando]?b:new da.Event(n,"object"==typeof b&&b),b.isTrigger=f?2:3,b.namespace=k.join("."),b.namespace_re=b.namespace?RegExp("(^|\\.)"+k.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=c,b.target||(b.target=e),d=null==d?[b]:da.makeArray(d,[b]),k=da.event.special[n]||{},f||!(k.trigger&&!1===k.trigger.apply(e,d)))){
if(!f&&!k.noBubble&&!da.isWindow(e)){for(j=k.delegateType||n,jc.test(j+n)||(i=i.parentNode);i;i=i.parentNode)m.push(i),g=i;g===(e.ownerDocument||S)&&m.push(g.defaultView||g.parentWindow||a)}for(l=0;(i=m[l++])&&!b.isPropagationStopped();)b.type=l>1?j:k.bindType||n,(g=(da._data(i,"events")||{})[b.type]&&da._data(i,"handle"))&&g.apply(i,d),(g=h&&i[h])&&da.acceptData(i)&&g.apply&&!1===g.apply(i,d)&&b.preventDefault();if(b.type=n,!f&&!b.isDefaultPrevented()&&(!k._default||!1===k._default.apply(m.pop(),d))&&da.acceptData(e)&&h&&e[n]&&!da.isWindow(e)){(g=e[h])&&(e[h]=null),da.event.triggered=n;try{e[n]()}catch(o){}da.event.triggered=c,g&&(e[h]=g)}return b.result}},dispatch:function(a){a=da.event.fix(a);var b,d,e,f,g=[],h=$.call(arguments);b=(da._data(this,"events")||{})[a.type]||[];var i=da.event.special[a.type]||{};if(h[0]=a,a.delegateTarget=this,!i.preDispatch||!1!==i.preDispatch.call(this,a)){for(g=da.event.handlers.call(this,a,b),b=0;(e=g[b++])&&!a.isPropagationStopped();)for(a.currentTarget=e.elem,f=0;(d=e.handlers[f++])&&!a.isImmediatePropagationStopped();)a.namespace_re&&!a.namespace_re.test(d.namespace)||(a.handleObj=d,a.data=d.data,d=((da.event.special[d.origType]||{}).handle||d.handler).apply(e.elem,h),d!==c&&!1===(a.result=d)&&(a.preventDefault(),a.stopPropagation()));return i.postDispatch&&i.postDispatch.call(this,a),a.result}},handlers:function(a,b){var d,e,f,g,h=[],i=b.delegateCount,j=a.target;if(i&&j.nodeType&&(!a.button||"click"!==a.type))for(;j!=this;j=j.parentNode||this)if(1===j.nodeType&&(!0!==j.disabled||"click"!==a.type)){for(f=[],g=0;i>g;g++)e=b[g],d=e.selector+" ",f[d]===c&&(f[d]=e.needsContext?0<=da(d,this).index(j):da.find(d,this,null,[j]).length),f[d]&&f.push(e);f.length&&h.push({elem:j,handlers:f})}return i<b.length&&h.push({elem:this,handlers:b.slice(i)}),h},fix:function(a){if(a[da.expando])return a;var b,c,d;b=a.type;var e=a,f=this.fixHooks[b];for(f||(this.fixHooks[b]=f=ic.test(b)?this.mouseHooks:hc.test(b)?this.keyHooks:{}),d=f.props?this.props.concat(f.props):this.props,a=new da.Event(e),b=d.length;b--;)c=d[b],a[c]=e[c];return a.target||(a.target=e.srcElement||S),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,f.filter?f.filter(a,e):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:["char","charCode","key","keyCode"],filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||S,e=d.documentElement,d=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||d&&d.scrollLeft||0)-(e&&e.clientLeft||d&&d.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||d&&d.scrollTop||0)-(e&&e.clientTop||d&&d.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),!a.which&&f!==c&&(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==k()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===k()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return da.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return da.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){a.result!==c&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){a=da.extend(new da.Event,c,{type:a,isSimulated:!0,originalEvent:{}}),d?da.event.trigger(a,null,b):da.event.dispatch.call(b,a),a.isDefaultPrevented()&&c.preventDefault()}},da.removeEvent=S.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){b="on"+b,a.detachEvent&&(typeof a[b]===Q&&(a[b]=null),a.detachEvent(b,c))},da.Event=function(a,b){return this instanceof da.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||!1===a.returnValue||a.getPreventDefault&&a.getPreventDefault()?i:j):this.type=a,b&&da.extend(this,b),this.timeStamp=a&&a.timeStamp||da.now(),void(this[da.expando]=!0)):new da.Event(a,b)},da.Event.prototype={isDefaultPrevented:j,isPropagationStopped:j,isImmediatePropagationStopped:j,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=i,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=i,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=i,this.stopPropagation()}},da.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){da.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=a.relatedTarget,e=a.handleObj;return d&&(d===this||da.contains(this,d))||(a.type=e.origType,c=e.handler.apply(this,arguments),a.type=b),c}}}),da.support.submitBubbles||(da.event.special.submit={setup:function(){return da.nodeName(this,"form")?!1:void da.event.add(this,"click._submit keypress._submit",function(a){a=a.target,(a=da.nodeName(a,"input")||da.nodeName(a,"button")?a.form:c)&&!da._data(a,"submitBubbles")&&(da.event.add(a,"submit._submit",function(a){a._submit_bubble=!0}),da._data(a,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&da.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return da.nodeName(this,"form")?!1:void da.event.remove(this,"._submit")}}),da.support.changeBubbles||(da.event.special.change={setup:function(){return gc.test(this.nodeName)?("checkbox"!==this.type&&"radio"!==this.type||(da.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),da.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),da.event.simulate("change",this,a,!0)})),!1):void da.event.add(this,"beforeactivate._change",function(a){a=a.target,gc.test(a.nodeName)&&!da._data(a,"changeBubbles")&&(da.event.add(a,"change._change",function(a){this.parentNode&&!a.isSimulated&&!a.isTrigger&&da.event.simulate("change",this.parentNode,a,!0)}),da._data(a,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return da.event.remove(this,"._change"),!gc.test(this.nodeName)}}),da.support.focusinBubbles||da.each({focus:"focusin",blur:"focusout"},function(a,b){var c=0,d=function(a){da.event.simulate(b,a.target,da.event.fix(a),!0)};da.event.special[b]={setup:function(){0===c++&&S.addEventListener(a,d,!0)},teardown:function(){0===--c&&S.removeEventListener(a,d,!0)}}}),da.fn.extend({on:function(a,b,d,e,f){var g,h;if("object"==typeof a){"string"!=typeof b&&(d=d||b,b=c);for(g in a)this.on(g,b,d,a[g],f);return this}if(null==d&&null==e?(e=b,d=b=c):null==e&&("string"==typeof b?(e=d,d=c):(e=d,d=b,b=c)),!1===e)e=j;else if(!e)return this;return 1===f&&(h=e,e=function(a){return da().off(a),h.apply(this,arguments)},e.guid=h.guid||(h.guid=da.guid++)),this.each(function(){da.event.add(this,a,e,d,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,d){var e;if(a&&a.preventDefault&&a.handleObj)return e=a.handleObj,da(a.delegateTarget).off(e.namespace?e.origType+"."+e.namespace:e.origType,e.selector,e.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return!1!==b&&"function"!=typeof b||(d=b,b=c),!1===d&&(d=j),this.each(function(){da.event.remove(this,a,d,b)})},trigger:function(a,b){return this.each(function(){da.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?da.event.trigger(a,b,c,!0):void 0}});var lc=/^.[^:#\[\.,]*$/,mc=/^(?:parents|prev(?:Until|All))/,nc=da.expr.match.needsContext,oc={children:!0,contents:!0,next:!0,prev:!0};da.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(da(a).filter(function(){for(b=0;e>b;b++)if(da.contains(d[b],this))return!0}));for(b=0;e>b;b++)da.find(a,d[b],c);return c=this.pushStack(e>1?da.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},has:function(a){var b,c=da(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(da.contains(this,c[b]))return!0})},not:function(a){return this.pushStack(m(this,a||[],!0))},filter:function(a){return this.pushStack(m(this,a||[],!1))},is:function(a){return!!m(this,"string"==typeof a&&nc.test(a)?da(a):a||[],!1).length},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=nc.test(a)||"string"!=typeof a?da(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(11>c.nodeType&&(g?-1<g.index(c):1===c.nodeType&&da.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(1<f.length?da.unique(f):f)},index:function(a){return a?"string"==typeof a?da.inArray(this[0],da(a)):da.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){var c="string"==typeof a?da(a,b):da.makeArray(a&&a.nodeType?[a]:a),c=da.merge(this.get(),c);return this.pushStack(da.unique(c))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}}),da.each({parent:function(a){return(a=a.parentNode)&&11!==a.nodeType?a:null},parents:function(a){return da.dir(a,"parentNode")},parentsUntil:function(a,b,c){return da.dir(a,"parentNode",c)},next:function(a){return l(a,"nextSibling")},prev:function(a){return l(a,"previousSibling")},nextAll:function(a){return da.dir(a,"nextSibling")},prevAll:function(a){return da.dir(a,"previousSibling")},nextUntil:function(a,b,c){return da.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return da.dir(a,"previousSibling",c)},siblings:function(a){return da.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return da.sibling(a.firstChild)},contents:function(a){return da.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:da.merge([],a.childNodes)}},function(a,b){da.fn[a]=function(c,d){var e=da.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=da.filter(d,e)),1<this.length&&(oc[a]||(e=da.unique(e)),mc.test(a)&&(e=e.reverse())),this.pushStack(e)}}),da.extend({filter:function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?da.find.matchesSelector(d,a)?[d]:[]:da.find.matches(a,da.grep(b,function(a){return 1===a.nodeType}))},dir:function(a,b,d){var e=[];for(a=a[b];a&&9!==a.nodeType&&(d===c||1!==a.nodeType||!da(a).is(d));)1===a.nodeType&&e.push(a),a=a[b];return e},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}});var pc="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qc=/ jQuery\d+="(?:null|\d+)"/g,rc=RegExp("<(?:"+pc+")[\\s/>]","i"),sc=/^\s+/,tc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,uc=/<([\w:]+)/,vc=/<tbody/i,wc=/<|&#?\w+;/,xc=/<(?:script|style|link)/i,yc=/^(?:checkbox|radio)$/i,zc=/checked\s*(?:[^=]|=\s*.checked.)/i,Ac=/^$|\/(?:java|ecma)script/i,Bc=/^true\/(.*)/,Cc=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Dc={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:da.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ec=n(S).appendChild(S.createElement("div"));Dc.optgroup=Dc.option,Dc.tbody=Dc.tfoot=Dc.colgroup=Dc.caption=Dc.thead,Dc.th=Dc.td,da.fn.extend({text:function(a){return da.access(this,function(a){return a===c?da.text(this):this.empty().append((this[0]&&this[0].ownerDocument||S).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&o(this,a).appendChild(a)})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=o(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?da.filter(a,this):this,e=0;null!=(c=d[e]);e++)!b&&1===c.nodeType&&da.cleanData(t(c)),c.parentNode&&(b&&da.contains(c.ownerDocument,c)&&r(t(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){for(1===a.nodeType&&da.cleanData(t(a,!1));a.firstChild;)a.removeChild(a.firstChild);a.options&&da.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return da.clone(this,a,b)})},html:function(a){return da.access(this,function(a){var b=this[0]||{},d=0,e=this.length;if(a===c)return 1===b.nodeType?b.innerHTML.replace(qc,""):c;if("string"==typeof a&&!xc.test(a)&&(da.support.htmlSerialize||!rc.test(a))&&(da.support.leadingWhitespace||!sc.test(a))&&!Dc[(uc.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(tc,"<$1></$2>");try{for(;e>d;d++)b=this[d]||{},1===b.nodeType&&(da.cleanData(t(b,!1)),b.innerHTML=a);b=0}catch(f){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=da.map(this,function(a){return[a.nextSibling,a.parentNode]}),b=0;return this.domManip(arguments,function(c){var d=a[b++],e=a[b++];e&&(d&&d.parentNode!==e&&(d=this.nextSibling),da(this).remove(),e.insertBefore(c,d))},!0),b?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b,c){a=Y.apply([],a);var d,e,f,g,h=0,i=this.length,j=this,k=i-1,l=a[0],m=da.isFunction(l);if(m||!(1>=i||"string"!=typeof l||da.support.checkClone)&&zc.test(l))return this.each(function(d){var e=j.eq(d);m&&(a[0]=l.call(this,d,e.html())),e.domManip(a,b,c)});if(i&&(g=da.buildFragment(a,this[0].ownerDocument,!1,!c&&this),d=g.firstChild,1===g.childNodes.length&&(g=d),d)){for(f=da.map(t(g,"script"),p),e=f.length;i>h;h++)d=g,h!==k&&(d=da.clone(d,!0,!0),e&&da.merge(f,t(d,"script"))),b.call(this[h],d,h);if(e)for(g=f[f.length-1].ownerDocument,da.map(f,q),h=0;e>h;h++)d=f[h],Ac.test(d.type||"")&&!da._data(d,"globalEval")&&da.contains(g,d)&&(d.src?da._evalUrl(d.src):da.globalEval((d.text||d.textContent||d.innerHTML||"").replace(Cc,"")));g=d=null}return this}}),da.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){da.fn[a]=function(a){for(var c=0,d=[],e=da(a),f=e.length-1;f>=c;c++)a=c===f?this:this.clone(!0),da(e[c])[b](a),Z.apply(d,a.get());return this.pushStack(d)}}),da.extend({clone:function(a,b,c){var d,e,f,g,h,i=da.contains(a.ownerDocument,a);if(da.support.html5Clone||da.isXMLDoc(a)||!rc.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(Ec.innerHTML=a.outerHTML,Ec.removeChild(f=Ec.firstChild)),!(da.support.noCloneEvent&&da.support.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||da.isXMLDoc(a)))for(d=t(f),h=t(a),g=0;null!=(e=h[g]);++g)if(d[g]){var j=d[g],k=void 0,l=void 0,m=void 0;if(1===j.nodeType){if(k=j.nodeName.toLowerCase(),!da.support.noCloneEvent&&j[da.expando]){m=da._data(j);for(l in m.events)da.removeEvent(j,l,m.handle);j.removeAttribute(da.expando)}"script"===k&&j.text!==e.text?(p(j).text=e.text,q(j)):"object"===k?(j.parentNode&&(j.outerHTML=e.outerHTML),da.support.html5Clone&&e.innerHTML&&!da.trim(j.innerHTML)&&(j.innerHTML=e.innerHTML)):"input"===k&&yc.test(e.type)?(j.defaultChecked=j.checked=e.checked,j.value!==e.value&&(j.value=e.value)):"option"===k?j.defaultSelected=j.selected=e.defaultSelected:"input"!==k&&"textarea"!==k||(j.defaultValue=e.defaultValue)}}if(b)if(c)for(h=h||t(a),d=d||t(f),g=0;null!=(e=h[g]);g++)s(e,d[g]);else s(a,f);return d=t(f,"script"),0<d.length&&r(d,!i&&t(a,"script")),f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=a.length,l=n(b),m=[],o=0;k>o;o++)if((f=a[o])||0===f)if("object"===da.type(f))da.merge(m,f.nodeType?[f]:f);else if(wc.test(f)){for(g=g||l.appendChild(b.createElement("div")),h=(uc.exec(f)||["",""])[1].toLowerCase(),j=Dc[h]||Dc._default,g.innerHTML=j[1]+f.replace(tc,"<$1></$2>")+j[2],e=j[0];e--;)g=g.lastChild;if(!da.support.leadingWhitespace&&sc.test(f)&&m.push(b.createTextNode(sc.exec(f)[0])),!da.support.tbody)for(e=(f="table"!==h||vc.test(f)?"<table>"!==j[1]||vc.test(f)?0:g:g.firstChild)&&f.childNodes.length;e--;)da.nodeName(i=f.childNodes[e],"tbody")&&!i.childNodes.length&&f.removeChild(i);for(da.merge(m,g.childNodes),g.textContent="";g.firstChild;)g.removeChild(g.firstChild);g=l.lastChild}else m.push(b.createTextNode(f));for(g&&l.removeChild(g),da.support.appendChecked||da.grep(t(m,"input"),u),o=0;f=m[o++];)if((!d||-1===da.inArray(f,d))&&(a=da.contains(f.ownerDocument,f),g=t(l.appendChild(f),"script"),a&&r(g),c))for(e=0;f=g[e++];)Ac.test(f.type||"")&&c.push(f);return l},cleanData:function(a,b){for(var c,d,e,f,g=0,h=da.expando,i=da.cache,j=da.support.deleteExpando,k=da.event.special;null!=(c=a[g]);g++)if((b||da.acceptData(c))&&(f=(e=c[h])&&i[e])){if(f.events)for(d in f.events)k[d]?da.event.remove(c,d):da.removeEvent(c,d,f.handle);i[e]&&(delete i[e],j?delete c[h]:typeof c.removeAttribute!==Q?c.removeAttribute(h):c[h]=null,X.push(e))}},_evalUrl:function(a){return da.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})}}),da.fn.extend({wrapAll:function(a){if(da.isFunction(a))return this.each(function(b){da(this).wrapAll(a.call(this,b))});if(this[0]){var b=da(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){for(var a=this;a.firstChild&&1===a.firstChild.nodeType;)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return da.isFunction(a)?this.each(function(b){da(this).wrapInner(a.call(this,b))}):this.each(function(){var b=da(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=da.isFunction(a);return this.each(function(c){da(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){da.nodeName(this,"body")||da(this).replaceWith(this.childNodes)}).end()}});var Fc,Gc,Hc,Ic=/alpha\([^)]*\)/i,Jc=/opacity\s*=\s*([^)]*)/,Kc=/^(top|right|bottom|left)$/,Lc=/^(none|table(?!-c[ea]).+)/,Mc=/^margin/,Nc=RegExp("^("+ea+")(.*)$","i"),Oc=RegExp("^("+ea+")(?!px)[a-z%]+$","i"),Pc=RegExp("^([+-])=("+ea+")","i"),Qc={BODY:"block"},Rc={position:"absolute",visibility:"hidden",display:"block"},Sc={letterSpacing:0,fontWeight:400},Tc=["Top","Right","Bottom","Left"],Uc=["Webkit","O","Moz","ms"];da.fn.extend({css:function(a,b){return da.access(this,function(a,b,d){var e,f={},g=0;if(da.isArray(b)){for(e=Gc(a),d=b.length;d>g;g++)f[b[g]]=da.css(a,b[g],!1,e);return f}return d!==c?da.style(a,b,d):da.css(a,b)},a,b,1<arguments.length)},show:function(){return x(this,!0)},hide:function(){return x(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){w(this)?da(this).show():da(this).hide()})}}),da.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Hc(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":da.support.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,d,e){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var f,g,h,i=da.camelCase(b),j=a.style;if(b=da.cssProps[i]||(da.cssProps[i]=v(j,i)),h=da.cssHooks[b]||da.cssHooks[i],d===c)return h&&"get"in h&&(f=h.get(a,!1,e))!==c?f:j[b];if(g=typeof d,"string"===g&&(f=Pc.exec(d))&&(d=(f[1]+1)*f[2]+parseFloat(da.css(a,b)),g="number"),!(null==d||"number"===g&&isNaN(d)||("number"===g&&!da.cssNumber[i]&&(d+="px"),!da.support.clearCloneStyle&&""===d&&0===b.indexOf("background")&&(j[b]="inherit"),h&&"set"in h&&(d=h.set(a,d,e))===c)))try{j[b]=d}catch(k){}}},css:function(a,b,d,e){var f,g;return g=da.camelCase(b),b=da.cssProps[g]||(da.cssProps[g]=v(a.style,g)),(g=da.cssHooks[b]||da.cssHooks[g])&&"get"in g&&(f=g.get(a,!0,d)),f===c&&(f=Hc(a,b,e)),"normal"===f&&b in Sc&&(f=Sc[b]),""===d||d?(a=parseFloat(f),!0===d||da.isNumeric(a)?a||0:f):f}}),a.getComputedStyle?(Gc=function(b){return a.getComputedStyle(b,null)},Hc=function(a,b,d){var e,f=(d=d||Gc(a))?d.getPropertyValue(b)||d[b]:c,g=a.style;return d&&(""===f&&!da.contains(a.ownerDocument,a)&&(f=da.style(a,b)),Oc.test(f)&&Mc.test(b)&&(a=g.width,b=g.minWidth,e=g.maxWidth,g.minWidth=g.maxWidth=g.width=f,f=d.width,g.width=a,g.minWidth=b,g.maxWidth=e)),f}):S.documentElement.currentStyle&&(Gc=function(a){return a.currentStyle},Hc=function(a,b,d){var e,f,g=(d=d||Gc(a))?d[b]:c,h=a.style;return null==g&&h&&h[b]&&(g=h[b]),Oc.test(g)&&!Kc.test(b)&&(d=h.left,(f=(e=a.runtimeStyle)&&e.left)&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),""===g?"auto":g}),da.each(["height","width"],function(a,b){da.cssHooks[b]={get:function(a,c,d){return c?0===a.offsetWidth&&Lc.test(da.css(a,"display"))?da.swap(a,Rc,function(){return A(a,b,d)}):A(a,b,d):void 0},set:function(a,c,d){var e=d&&Gc(a);return y(a,c,d?z(a,b,d,da.support.boxSizing&&"border-box"===da.css(a,"boxSizing",!1,e),e):0)}}}),da.support.opacity||(da.cssHooks.opacity={get:function(a,b){return Jc.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=da.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===da.trim(f.replace(Ic,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Ic.test(f)?f.replace(Ic,e):f+" "+e)}}),da(function(){da.support.reliableMarginRight||(da.cssHooks.marginRight={get:function(a,b){return b?da.swap(a,{display:"inline-block"},Hc,[a,"marginRight"]):void 0}}),!da.support.pixelPosition&&da.fn.position&&da.each(["top","left"],function(a,b){da.cssHooks[b]={get:function(a,c){return c?(c=Hc(a,b),Oc.test(c)?da(a).position()[b]+"px":c):void 0}}})}),da.expr&&da.expr.filters&&(da.expr.filters.hidden=function(a){return 0>=a.offsetWidth&&0>=a.offsetHeight||!da.support.reliableHiddenOffsets&&"none"===(a.style&&a.style.display||da.css(a,"display"))},da.expr.filters.visible=function(a){return!da.expr.filters.hidden(a)}),da.each({margin:"",padding:"",border:"Width"},function(a,b){da.cssHooks[a+b]={expand:function(c){var d=0,e={};for(c="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+Tc[d]+b]=c[d]||c[d-2]||c[0];return e}},Mc.test(a)||(da.cssHooks[a+b].set=y)});var Vc=/%20/g,Wc=/\[\]$/,Xc=/\r?\n/g,Yc=/^(?:submit|button|image|reset|file)$/i,Zc=/^(?:input|select|textarea|keygen)/i;da.fn.extend({serialize:function(){return da.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=da.prop(this,"elements");return a?da.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!da(this).is(":disabled")&&Zc.test(this.nodeName)&&!Yc.test(a)&&(this.checked||!yc.test(a))}).map(function(a,b){var c=da(this).val();return null==c?null:da.isArray(c)?da.map(c,function(a){return{name:b.name,value:a.replace(Xc,"\r\n")}}):{name:b.name,value:c.replace(Xc,"\r\n")}}).get()}}),da.param=function(a,b){var d,e=[],f=function(a,b){b=da.isFunction(b)?b():null==b?"":b,e[e.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(b===c&&(b=da.ajaxSettings&&da.ajaxSettings.traditional),da.isArray(a)||a.jquery&&!da.isPlainObject(a))da.each(a,function(){f(this.name,this.value)});else for(d in a)D(d,a[d],b,f);return e.join("&").replace(Vc,"+")},da.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){da.fn[b]=function(a,c){return 0<arguments.length?this.on(b,null,a,c):this.trigger(b)}}),da.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var $c,_c,ad=da.now(),bd=/\?/,cd=/#.*$/,dd=/([?&])_=[^&]*/,ed=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,fd=/^(?:GET|HEAD)$/,gd=/^\/\//,hd=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,id=da.fn.load,jd={},kd={},ld="*/".concat("*");try{_c=R.href}catch(md){_c=S.createElement("a"),_c.href="",_c=_c.href}$c=hd.exec(_c.toLowerCase())||[],da.fn.load=function(a,b,d){if("string"!=typeof a&&id)return id.apply(this,arguments);var e,f,g,h=this,i=a.indexOf(" ");return i>=0&&(e=a.slice(i,a.length),a=a.slice(0,i)),da.isFunction(b)?(d=b,b=c):b&&"object"==typeof b&&(g="POST"),0<h.length&&da.ajax({url:a,type:g,dataType:"html",data:b}).done(function(a){f=arguments,h.html(e?da("<div>").append(da.parseHTML(a)).find(e):a)}).complete(d&&function(a,b){h.each(d,f||[a.responseText,b,a])}),this},da.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(a,b){da.fn[b]=function(a){return this.on(b,a)}}),da.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:_c,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test($c[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ld,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":da.parseJSON,"text xml":da.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?G(G(a,da.ajaxSettings),b):G(da.ajaxSettings,a)},ajaxPrefilter:E(jd),ajaxTransport:E(kd),ajax:function(a,b){function d(a,b,d,e){var f,l,s,t;if(t=b,2!==u){if(u=2,i&&clearTimeout(i),k=c,h=e||"",w.readyState=a>0?4:0,e=a>=200&&300>a||304===a,d){s=m;for(var v,x,y,z,A=w,B=s.contents,C=s.dataTypes;"*"===C[0];)C.shift(),x===c&&(x=s.mimeType||A.getResponseHeader("Content-Type"));if(x)for(z in B)if(B[z]&&B[z].test(x)){C.unshift(z);break}if(C[0]in d)y=C[0];else{for(z in d){if(!C[0]||s.converters[z+" "+C[0]]){y=z;break}v||(v=z)}y=y||v}y?(y!==C[0]&&C.unshift(y),s=d[y]):s=void 0}a:{d=m,v=s,x=w,y=e;var D,E,F,A={},B=d.dataTypes.slice();if(B[1])for(E in d.converters)A[E.toLowerCase()]=d.converters[E];for(z=B.shift();z;)if(d.responseFields[z]&&(x[d.responseFields[z]]=v),!F&&y&&d.dataFilter&&(v=d.dataFilter(v,d.dataType)),F=z,z=B.shift())if("*"===z)z=F;else if("*"!==F&&F!==z){if(E=A[F+" "+z]||A["* "+z],!E)for(D in A)if(s=D.split(" "),s[1]===z&&(E=A[F+" "+s[0]]||A["* "+s[0]])){!0===E?E=A[D]:!0!==A[D]&&(z=s[0],B.unshift(s[1]));break}if(!0!==E)if(E&&d["throws"])v=E(v);else try{v=E(v)}catch(G){s={state:"parsererror",error:E?G:"No conversion from "+F+" to "+z};break a}}s={state:"success",data:v}}e?(m.ifModified&&((t=w.getResponseHeader("Last-Modified"))&&(da.lastModified[g]=t),(t=w.getResponseHeader("etag"))&&(da.etag[g]=t)),204===a||"HEAD"===m.type?t="nocontent":304===a?t="notmodified":(t=s.state,f=s.data,l=s.error,e=!l)):(l=t,(a||!t)&&(t="error",0>a&&(a=0))),w.status=a,w.statusText=(b||t)+"",e?p.resolveWith(n,[f,t,w]):p.rejectWith(n,[w,t,l]),w.statusCode(r),r=c,j&&o.trigger(e?"ajaxSuccess":"ajaxError",[w,m,e?f:l]),q.fireWith(n,[w,t]),j&&(o.trigger("ajaxComplete",[w,m]),--da.active||da.event.trigger("ajaxStop"))}}"object"==typeof a&&(b=a,a=c),b=b||{};var e,f,g,h,i,j,k,l,m=da.ajaxSetup({},b),n=m.context||m,o=m.context&&(n.nodeType||n.jquery)?da(n):da.event,p=da.Deferred(),q=da.Callbacks("once memory"),r=m.statusCode||{},s={},t={},u=0,v="canceled",w={readyState:0,getResponseHeader:function(a){var b;if(2===u){if(!l)for(l={};b=ed.exec(h);)l[b[1].toLowerCase()]=b[2];b=l[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===u?h:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return u||(a=t[c]=t[c]||a,s[a]=b),this},overrideMimeType:function(a){return u||(m.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>u)for(b in a)r[b]=[r[b],a[b]];else w.always(a[w.status]);return this},abort:function(a){return a=a||v,k&&k.abort(a),d(0,a),this}};if(p.promise(w).complete=q.add,w.success=w.done,w.error=w.fail,m.url=((a||m.url||_c)+"").replace(cd,"").replace(gd,$c[1]+"//"),m.type=b.method||b.type||m.method||m.type,m.dataTypes=da.trim(m.dataType||"*").toLowerCase().match(fa)||[""],null==m.crossDomain&&(e=hd.exec(m.url.toLowerCase()),m.crossDomain=!(!e||e[1]===$c[1]&&e[2]===$c[2]&&(e[3]||("http:"===e[1]?"80":"443"))===($c[3]||("http:"===$c[1]?"80":"443")))),m.data&&m.processData&&"string"!=typeof m.data&&(m.data=da.param(m.data,m.traditional)),F(jd,m,b,w),2===u)return w;(j=m.global)&&0===da.active++&&da.event.trigger("ajaxStart"),m.type=m.type.toUpperCase(),m.hasContent=!fd.test(m.type),g=m.url,m.hasContent||(m.data&&(g=m.url+=(bd.test(g)?"&":"?")+m.data,delete m.data),!1===m.cache&&(m.url=dd.test(g)?g.replace(dd,"$1_="+ad++):g+(bd.test(g)?"&":"?")+"_="+ad++)),m.ifModified&&(da.lastModified[g]&&w.setRequestHeader("If-Modified-Since",da.lastModified[g]),da.etag[g]&&w.setRequestHeader("If-None-Match",da.etag[g])),(m.data&&m.hasContent&&!1!==m.contentType||b.contentType)&&w.setRequestHeader("Content-Type",m.contentType),w.setRequestHeader("Accept",m.dataTypes[0]&&m.accepts[m.dataTypes[0]]?m.accepts[m.dataTypes[0]]+("*"!==m.dataTypes[0]?", "+ld+"; q=0.01":""):m.accepts["*"]);for(f in m.headers)w.setRequestHeader(f,m.headers[f]);if(m.beforeSend&&(!1===m.beforeSend.call(n,w,m)||2===u))return w.abort();v="abort";for(f in{success:1,error:1,complete:1})w[f](m[f]);if(k=F(kd,m,b,w)){w.readyState=1,j&&o.trigger("ajaxSend",[w,m]),m.async&&0<m.timeout&&(i=setTimeout(function(){w.abort("timeout")},m.timeout));try{u=1,k.send(s,d)}catch(x){if(!(2>u))throw x;d(-1,x)}}else d(-1,"No Transport");return w},getJSON:function(a,b,c){return da.get(a,b,c,"json")},getScript:function(a,b){return da.get(a,c,b,"script")}}),da.each(["get","post"],function(a,b){da[b]=function(a,d,e,f){return da.isFunction(d)&&(f=f||e,e=d,d=c),da.ajax({url:a,type:b,dataType:f,data:d,success:e})}}),da.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return da.globalEval(a),a}}}),da.ajaxPrefilter("script",function(a){a.cache===c&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),da.ajaxTransport("script",function(a){if(a.crossDomain){var b,d=S.head||da("head")[0]||S.documentElement;return{send:function(c,e){b=S.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},d.insertBefore(b,d.firstChild)},abort:function(){b&&b.onload(c,!0)}}}});var nd=[],od=/(=)\?(?=&|$)|\?\?/;da.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=nd.pop()||da.expando+"_"+ad++;return this[a]=!0,a}}),da.ajaxPrefilter("json jsonp",function(b,d,e){var f,g,h,i=!1!==b.jsonp&&(od.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&od.test(b.data)&&"data");return i||"jsonp"===b.dataTypes[0]?(f=b.jsonpCallback=da.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,
i?b[i]=b[i].replace(od,"$1"+f):!1!==b.jsonp&&(b.url+=(bd.test(b.url)?"&":"?")+b.jsonp+"="+f),b.converters["script json"]=function(){return h||da.error(f+" was not called"),h[0]},b.dataTypes[0]="json",g=a[f],a[f]=function(){h=arguments},e.always(function(){a[f]=g,b[f]&&(b.jsonpCallback=d.jsonpCallback,nd.push(f)),h&&da.isFunction(g)&&g(h[0]),h=g=c}),"script"):void 0});var pd,qd,rd=0,sd=a.ActiveXObject&&function(){for(var a in pd)pd[a](c,!0)};da.ajaxSettings.xhr=a.ActiveXObject?function(){var b;if(!(b=!this.isLocal&&H()))a:{try{b=new a.ActiveXObject("Microsoft.XMLHTTP");break a}catch(c){}b=void 0}return b}:H,qd=da.ajaxSettings.xhr(),da.support.cors=!!qd&&"withCredentials"in qd,(qd=da.support.ajax=!!qd)&&da.ajaxTransport(function(b){if(!b.crossDomain||da.support.cors){var d;return{send:function(e,f){var g,h,i=b.xhr();if(b.username?i.open(b.type,b.url,b.async,b.username,b.password):i.open(b.type,b.url,b.async),b.xhrFields)for(h in b.xhrFields)i[h]=b.xhrFields[h];b.mimeType&&i.overrideMimeType&&i.overrideMimeType(b.mimeType),!b.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(h in e)i.setRequestHeader(h,e[h])}catch(j){}i.send(b.hasContent&&b.data||null),d=function(a,e){var h,j,k,l;try{if(d&&(e||4===i.readyState))if(d=c,g&&(i.onreadystatechange=da.noop,sd&&delete pd[g]),e)4!==i.readyState&&i.abort();else{l={},h=i.status,j=i.getAllResponseHeaders(),"string"==typeof i.responseText&&(l.text=i.responseText);try{k=i.statusText}catch(m){k=""}h||!b.isLocal||b.crossDomain?1223===h&&(h=204):h=l.text?200:404}}catch(n){e||f(-1,n)}l&&f(h,k,l,j)},b.async?4===i.readyState?setTimeout(d):(g=++rd,sd&&(pd||(pd={},da(a).unload(sd)),pd[g]=d),i.onreadystatechange=d):d()},abort:function(){d&&d(c,!0)}}}});var td,ud,vd=/^(?:toggle|show|hide)$/,wd=RegExp("^(?:([+-])=|)("+ea+")([a-z%]*)$","i"),xd=/queueHooks$/,yd=[function(a,b,c){var d,e,f,g,h,i=this,j={},k=a.style,l=a.nodeType&&w(a),m=da._data(a,"fxshow");c.queue||(g=da._queueHooks(a,"fx"),null==g.unqueued&&(g.unqueued=0,h=g.empty.fire,g.empty.fire=function(){g.unqueued||h()}),g.unqueued++,i.always(function(){i.always(function(){g.unqueued--,da.queue(a,"fx").length||g.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[k.overflow,k.overflowX,k.overflowY],"inline"===da.css(a,"display")&&"none"===da.css(a,"float")&&(da.support.inlineBlockNeedsLayout&&"inline"!==B(a.nodeName)?k.zoom=1:k.display="inline-block")),c.overflow&&(k.overflow="hidden",da.support.shrinkWrapBlocks||i.always(function(){k.overflow=c.overflow[0],k.overflowX=c.overflow[1],k.overflowY=c.overflow[2]}));for(d in b)e=b[d],vd.exec(e)&&(delete b[d],f=f||"toggle"===e,e!==(l?"hide":"show"))&&(j[d]=m&&m[d]||da.style(a,d));if(!da.isEmptyObject(j))for(d in m?"hidden"in m&&(l=m.hidden):m=da._data(a,"fxshow",{}),f&&(m.hidden=!l),l?da(a).show():i.done(function(){da(a).hide()}),i.done(function(){var b;da._removeData(a,"fxshow");for(b in j)da.style(a,b,j[b])}),j)b=J(l?m[d]:0,d,i),d in m||(m[d]=b.start,l&&(b.end=b.start,b.start="width"===d||"height"===d?1:0))}],zd={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=wd.exec(b),f=e&&e[3]||(da.cssNumber[a]?"":"px"),g=(da.cssNumber[a]||"px"!==f&&+d)&&wd.exec(da.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,da.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};da.Animation=da.extend(K,{tweener:function(a,b){da.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],zd[c]=zd[c]||[],zd[c].unshift(b)},prefilter:function(a,b){b?yd.unshift(a):yd.push(a)}}),da.Tween=L,L.prototype={constructor:L,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(da.cssNumber[c]?"":"px")},cur:function(){var a=L.propHooks[this.prop];return a&&a.get?a.get(this):L.propHooks._default.get(this)},run:function(a){var b,c=L.propHooks[this.prop];return this.pos=b=this.options.duration?da.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):L.propHooks._default.set(this),this}},L.prototype.init.prototype=L.prototype,L.propHooks={_default:{get:function(a){return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(a=da.css(a.elem,a.prop,""),a&&"auto"!==a?a:0):a.elem[a.prop]},set:function(a){da.fx.step[a.prop]?da.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[da.cssProps[a.prop]]||da.cssHooks[a.prop])?da.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},L.propHooks.scrollTop=L.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},da.each(["toggle","show","hide"],function(a,b){var c=da.fn[b];da.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(M(b,!0),a,d,e)}}),da.fn.extend({fadeTo:function(a,b,c,d){return this.filter(w).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=da.isEmptyObject(a),f=da.speed(b,c,d);return b=function(){var b=K(this,da.extend({},a),f);(e||da._data(this,"finish"))&&b.stop(!0)},b.finish=b,e||!1===f.queue?this.each(b):this.queue(f.queue,b)},stop:function(a,b,d){var e=function(a){var b=a.stop;delete a.stop,b(d)};return"string"!=typeof a&&(d=b,b=a,a=c),b&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var b=!0,c=null!=a&&a+"queueHooks",f=da.timers,g=da._data(this);if(c)g[c]&&g[c].stop&&e(g[c]);else for(c in g)g[c]&&g[c].stop&&xd.test(c)&&e(g[c]);for(c=f.length;c--;)f[c].elem!==this||null!=a&&f[c].queue!==a||(f[c].anim.stop(d),b=!1,f.splice(c,1));(b||!d)&&da.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var b,c=da._data(this),d=c[a+"queue"];b=c[a+"queueHooks"];var e=da.timers,f=d?d.length:0;for(c.finish=!0,da.queue(this,a,[]),b&&b.stop&&b.stop.call(this,!0),b=e.length;b--;)e[b].elem===this&&e[b].queue===a&&(e[b].anim.stop(!0),e.splice(b,1));for(b=0;f>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),da.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){da.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),da.speed=function(a,b,c){var d=a&&"object"==typeof a?da.extend({},a):{complete:c||!c&&b||da.isFunction(a)&&a,duration:a,easing:c&&b||b&&!da.isFunction(b)&&b};return d.duration=da.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in da.fx.speeds?da.fx.speeds[d.duration]:da.fx.speeds._default,null!=d.queue&&!0!==d.queue||(d.queue="fx"),d.old=d.complete,d.complete=function(){da.isFunction(d.old)&&d.old.call(this),d.queue&&da.dequeue(this,d.queue)},d},da.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},da.timers=[],da.fx=L.prototype.init,da.fx.tick=function(){var a,b=da.timers,d=0;for(td=da.now();d<b.length;d++)a=b[d],!a()&&b[d]===a&&b.splice(d--,1);b.length||da.fx.stop(),td=c},da.fx.timer=function(a){a()&&da.timers.push(a)&&da.fx.start()},da.fx.interval=13,da.fx.start=function(){ud||(ud=setInterval(da.fx.tick,da.fx.interval))},da.fx.stop=function(){clearInterval(ud),ud=null},da.fx.speeds={slow:600,fast:200,_default:400},da.fx.step={},da.expr&&da.expr.filters&&(da.expr.filters.animated=function(a){return da.grep(da.timers,function(b){return a===b.elem}).length}),da.fn.offset=function(a){if(arguments.length)return a===c?this:this.each(function(b){da.offset.setOffset(this,a,b)});var b,d,e={top:0,left:0},f=(d=this[0])&&d.ownerDocument;return f?(b=f.documentElement,da.contains(b,d)?(typeof d.getBoundingClientRect!==Q&&(e=d.getBoundingClientRect()),d=N(f),{top:e.top+(d.pageYOffset||b.scrollTop)-(b.clientTop||0),left:e.left+(d.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):e):void 0},da.offset={setOffset:function(a,b,c){var d=da.css(a,"position");"static"===d&&(a.style.position="relative");var e=da(a),f=e.offset(),g=da.css(a,"top"),h=da.css(a,"left"),i={},j={};("absolute"===d||"fixed"===d)&&-1<da.inArray("auto",[g,h])?(j=e.position(),d=j.top,h=j.left):(d=parseFloat(g)||0,h=parseFloat(h)||0),da.isFunction(b)&&(b=b.call(a,c,f)),null!=b.top&&(i.top=b.top-f.top+d),null!=b.left&&(i.left=b.left-f.left+h),"using"in b?b.using.call(a,i):e.css(i)}},da.fn.extend({position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===da.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),da.nodeName(a[0],"html")||(c=a.offset()),c.top+=da.css(a[0],"borderTopWidth",!0),c.left+=da.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-da.css(d,"marginTop",!0),left:b.left-c.left-da.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var a=this.offsetParent||T;a&&!da.nodeName(a,"html")&&"static"===da.css(a,"position");)a=a.offsetParent;return a||T})}}),da.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var d=/Y/.test(b);da.fn[a]=function(e){return da.access(this,function(a,e,f){var g=N(a);return f===c?g?b in g?g[b]:g.document.documentElement[e]:a[e]:void(g?g.scrollTo(d?da(g).scrollLeft():f,d?f:da(g).scrollTop()):a[e]=f)},a,e,arguments.length,null)}}),da.each({Height:"height",Width:"width"},function(a,b){da.each({padding:"inner"+a,content:b,"":"outer"+a},function(d,e){da.fn[e]=function(e,f){var g=arguments.length&&(d||"boolean"!=typeof e),h=d||(!0===e||!0===f?"margin":"border");return da.access(this,function(b,d,e){return da.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(d=b.documentElement,Math.max(b.body["scroll"+a],d["scroll"+a],b.body["offset"+a],d["offset"+a],d["client"+a])):e===c?da.css(b,d,h):da.style(b,d,e,h)},b,g?e:c,g,null)}})}),da.fn.size=function(){return this.length},da.fn.andSelf=da.fn.addBack,b.jQuery=da}(window,ChemDoodle.lib),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(ChemDoodle.lib.jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,k=0,l=0,m=0;return b=a.event.fix(g),b.type="mousewheel","detail"in g&&(l=-1*g.detail),"wheelDelta"in g&&(l=g.wheelDelta),"wheelDeltaY"in g&&(l=g.wheelDeltaY),"wheelDeltaX"in g&&(k=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(k=-1*l,l=0),j=0===l?k:l,"deltaY"in g&&(j=l=-1*g.deltaY),"deltaX"in g&&(k=g.deltaX,0===l&&(j=-1*k)),0!==l||0!==k?(1===g.deltaMode?(g=a.data(this,"mousewheel-line-height"),j*=g,l*=g,k*=g):2===g.deltaMode&&(g=a.data(this,"mousewheel-page-height"),j*=g,l*=g,k*=g),m=Math.max(Math.abs(l),Math.abs(k)),(!f||f>m)&&(f=m,120===f&&(d=!0,f/=40)),d&&(j/=40,k/=40,l/=40),j=Math[j>=1?"floor":"ceil"](j/f),k=Math[k>=1?"floor":"ceil"](k/f),l=Math[l>=1?"floor":"ceil"](l/f),b.deltaX=k,b.deltaY=l,b.deltaFactor=f,b.deltaMode=0,h.unshift(b,j,k,l),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)):void 0}function c(){d=f=null}var d,e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.8",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var a=h.length;a;)this.removeEventListener(h[--a],b,!1);else this.onmousewheel=null},getLineHeight:function(b){return parseInt(a(b)["offsetParent"in a.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(b){return a(b).height()}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})}),function(a,b){"object"==typeof exports?module.exports=b(global):"function"==typeof define&&define.amd?define([],function(){return b(a)}):b(a)}(ChemDoodle.lib,function(a){function b(a){return g=a}function c(){return g="undefined"!=typeof Float32Array?Float32Array:Array}var d={};if("undefined"!=typeof Float32Array){var e=new Float32Array(1),f=new Int32Array(e.buffer);d.invsqrt=function(a){e[0]=a,f[0]=1597463007-(f[0]>>1);var b=e[0];return b*(1.5-.5*a*b*b)}}else d.invsqrt=function(a){return 1/Math.sqrt(a)};var g=null;c();var h={create:function(a){var b=new g(3);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2]):b[0]=b[1]=b[2]=0,b},createFrom:function(a,b,c){var d=new g(3);return d[0]=a,d[1]=b,d[2]=c,d},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b},equal:function(a,b){return a===b||1e-6>Math.abs(a[0]-b[0])&&1e-6>Math.abs(a[1]-b[1])&&1e-6>Math.abs(a[2]-b[2])},add:function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a)},subtract:function(a,b,c){return c&&a!==c?(c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c):(a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a)},multiply:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c):(a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a)},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b},scale:function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a)},normalize:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e);return f?1===f?(b[0]=c,b[1]=d,b[2]=e,b):(f=1/f,b[0]=c*f,b[1]=d*f,b[2]=e*f,b):(b[0]=0,b[1]=0,b[2]=0,b)},cross:function(a,b,c){c||(c=a);var d=a[0],e=a[1];a=a[2];var f=b[0],g=b[1];return b=b[2],c[0]=e*b-a*g,c[1]=a*f-d*b,c[2]=d*g-e*f,c},length:function(a){var b=a[0],c=a[1];return a=a[2],Math.sqrt(b*b+c*c+a*a)},squaredLength:function(a){var b=a[0],c=a[1];return a=a[2],b*b+c*c+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0],e=a[1]-b[1];return a=a[2]-b[2],(b=Math.sqrt(d*d+e*e+a*a))?(b=1/b,c[0]=d*b,c[1]=e*b,c[2]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1],e=b[2]-a[2];return Math.sqrt(c*c+d*d+e*e)}},i=null,j=new g(4);h.unproject=function(a,b,c,d,e){e||(e=a),i||(i=p.create());var f=i;return j[0]=2*(a[0]-d[0])/d[2]-1,j[1]=2*(a[1]-d[1])/d[3]-1,j[2]=2*a[2]-1,j[3]=1,p.multiply(c,b,f),p.inverse(f)?(p.multiplyVec4(f,j),0===j[3]?null:(e[0]=j[0]/j[3],e[1]=j[1]/j[3],e[2]=j[2]/j[3],e)):null};var k=h.createFrom(1,0,0),l=h.createFrom(0,1,0),m=h.createFrom(0,0,1),n=h.create();h.rotationTo=function(a,b,c){c||(c=q.create());var d=h.dot(a,b);if(d>=1)q.set(r,c);else if(-.999999>d)h.cross(k,a,n),1e-6>h.length(n)&&h.cross(l,a,n),1e-6>h.length(n)&&h.cross(m,a,n),h.normalize(n),q.fromAngleAxis(Math.PI,n,c);else{var d=Math.sqrt(2*(1+d)),e=1/d;h.cross(a,b,n),c[0]=n[0]*e,c[1]=n[1]*e,c[2]=n[2]*e,c[3]=.5*d,q.normalize(c)}return 1<c[3]?c[3]=1:-1>c[3]&&(c[3]=-1),c},h.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};var o={create:function(a){var b=new g(9);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]):b[0]=b[1]=b[2]=b[3]=b[4]=b[5]=b[6]=b[7]=b[8]=0,b},createFrom:function(a,b,c,d,e,f,h,i,j){var k=new g(9);return k[0]=a,k[1]=b,k[2]=c,k[3]=d,k[4]=e,k[5]=f,k[6]=h,k[7]=i,k[8]=j,k},determinant:function(a){var b=a[3],c=a[4],d=a[5],e=a[6],f=a[7],g=a[8];return a[0]*(g*c-d*f)+a[1]*(-g*b+d*e)+a[2]*(f*b-c*e)},inverse:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,p=c*l+d*m+e*n;return p?(p=1/p,b||(b=o.create()),b[0]=l*p,b[1]=(-k*d+e*j)*p,b[2]=(h*d-e*g)*p,b[3]=m*p,b[4]=(k*c-e*i)*p,b[5]=(-h*c+e*f)*p,b[6]=n*p,b[7]=(-j*c+d*i)*p,b[8]=(g*c-d*f)*p,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7];a=a[8];var l=b[0],m=b[1],n=b[2],o=b[3],p=b[4],q=b[5],r=b[6],s=b[7];return b=b[8],c[0]=l*d+m*g+n*j,c[1]=l*e+m*h+n*k,c[2]=l*f+m*i+n*a,c[3]=o*d+p*g+q*j,c[4]=o*e+p*h+q*k,c[5]=o*f+p*i+q*a,c[6]=r*d+s*g+b*j,c[7]=r*e+s*h+b*k,c[8]=r*f+s*i+b*a,c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];return b=b[1],c[0]=d*a[0]+b*a[3]+a[6],c[1]=d*a[1]+b*a[4]+a[7],c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];return b=b[2],c[0]=d*a[0]+e*a[3]+b*a[6],c[1]=d*a[1]+e*a[4]+b*a[7],c[2]=d*a[2]+e*a[5]+b*a[8],c},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b},equal:function(a,b){return a===b||1e-6>Math.abs(a[0]-b[0])&&1e-6>Math.abs(a[1]-b[1])&&1e-6>Math.abs(a[2]-b[2])&&1e-6>Math.abs(a[3]-b[3])&&1e-6>Math.abs(a[4]-b[4])&&1e-6>Math.abs(a[5]-b[5])&&1e-6>Math.abs(a[6]-b[6])&&1e-6>Math.abs(a[7]-b[7])&&1e-6>Math.abs(a[8]-b[8])},identity:function(a){return a||(a=o.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},transpose:function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[5];return a[1]=a[3],a[2]=a[6],a[3]=c,a[5]=a[7],a[6]=d,a[7]=e,a}return b[0]=a[0],b[1]=a[3],b[2]=a[6],b[3]=a[1],b[4]=a[4],b[5]=a[7],b[6]=a[2],b[7]=a[5],b[8]=a[8],b},toMat4:function(a,b){return b||(b=p.create()),b[15]=1,b[14]=0,b[13]=0,b[12]=0,b[11]=0,b[10]=a[8],b[9]=a[7],b[8]=a[6],b[7]=0,b[6]=a[5],b[5]=a[4],b[4]=a[3],b[3]=0,b[2]=a[2],b[1]=a[1],b[0]=a[0],b},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"}},p={create:function(a){var b=new g(16);return a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]),b},createFrom:function(a,b,c,d,e,f,h,i,j,k,l,m,n,o,p,q){var r=new g(16);return r[0]=a,r[1]=b,r[2]=c,r[3]=d,r[4]=e,r[5]=f,r[6]=h,r[7]=i,r[8]=j,r[9]=k,r[10]=l,r[11]=m,r[12]=n,r[13]=o,r[14]=p,r[15]=q,r},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15],b},equal:function(a,b){return a===b||1e-6>Math.abs(a[0]-b[0])&&1e-6>Math.abs(a[1]-b[1])&&1e-6>Math.abs(a[2]-b[2])&&1e-6>Math.abs(a[3]-b[3])&&1e-6>Math.abs(a[4]-b[4])&&1e-6>Math.abs(a[5]-b[5])&&1e-6>Math.abs(a[6]-b[6])&&1e-6>Math.abs(a[7]-b[7])&&1e-6>Math.abs(a[8]-b[8])&&1e-6>Math.abs(a[9]-b[9])&&1e-6>Math.abs(a[10]-b[10])&&1e-6>Math.abs(a[11]-b[11])&&1e-6>Math.abs(a[12]-b[12])&&1e-6>Math.abs(a[13]-b[13])&&1e-6>Math.abs(a[14]-b[14])&&1e-6>Math.abs(a[15]-b[15])},identity:function(a){return a||(a=p.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},transpose:function(a,b){if(!b||a===b){var c=a[1],d=a[2],e=a[3],f=a[6],g=a[7],h=a[11];return a[1]=a[4],a[2]=a[8],a[3]=a[12],a[4]=c,a[6]=a[9],a[7]=a[13],a[8]=d,a[9]=f,a[11]=a[14],a[12]=e,a[13]=g,a[14]=h,a}return b[0]=a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15],b},determinant:function(a){var b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],i=a[7],j=a[8],k=a[9],l=a[10],m=a[11],n=a[12],o=a[13],p=a[14];return a=a[15],n*k*h*e-j*o*h*e-n*g*l*e+f*o*l*e+j*g*p*e-f*k*p*e-n*k*d*i+j*o*d*i+n*c*l*i-b*o*l*i-j*c*p*i+b*k*p*i+n*g*d*m-f*o*d*m-n*c*h*m+b*o*h*m+f*c*p*m-b*g*p*m-j*g*d*a+f*k*d*a+j*c*h*a-b*k*h*a-f*c*l*a+b*g*l*a},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],i=a[6],j=a[7],k=a[8],l=a[9],m=a[10],n=a[11],o=a[12],p=a[13],q=a[14],r=a[15],s=c*h-d*g,t=c*i-e*g,u=c*j-f*g,v=d*i-e*h,w=d*j-f*h,x=e*j-f*i,y=k*p-l*o,z=k*q-m*o,A=k*r-n*o,B=l*q-m*p,C=l*r-n*p,D=m*r-n*q,E=s*D-t*C+u*B+v*A-w*z+x*y;return E?(E=1/E,b[0]=(h*D-i*C+j*B)*E,b[1]=(-d*D+e*C-f*B)*E,b[2]=(p*x-q*w+r*v)*E,b[3]=(-l*x+m*w-n*v)*E,b[4]=(-g*D+i*A-j*z)*E,b[5]=(c*D-e*A+f*z)*E,b[6]=(-o*x+q*u-r*t)*E,b[7]=(k*x-m*u+n*t)*E,b[8]=(g*C-h*A+j*y)*E,b[9]=(-c*C+d*A-f*y)*E,b[10]=(o*w-p*u+r*s)*E,b[11]=(-k*w+l*u-n*s)*E,b[12]=(-g*B+h*z-i*y)*E,b[13]=(c*B-d*z+e*y)*E,b[14]=(-o*v+p*t-q*s)*E,b[15]=(k*v-l*t+m*s)*E,b):null},toRotationMat:function(a,b){return b||(b=p.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},toMat3:function(a,b){return b||(b=o.create()),b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[4],b[4]=a[5],b[5]=a[6],b[6]=a[8],b[7]=a[9],b[8]=a[10],b},toInverseMat3:function(a,b){var c=a[0],d=a[1],e=a[2],f=a[4],g=a[5],h=a[6],i=a[8],j=a[9],k=a[10],l=k*g-h*j,m=-k*f+h*i,n=j*f-g*i,p=c*l+d*m+e*n;return p?(p=1/p,b||(b=o.create()),b[0]=l*p,b[1]=(-k*d+e*j)*p,b[2]=(h*d-e*g)*p,b[3]=m*p,b[4]=(k*c-e*i)*p,b[5]=(-h*c+e*f)*p,b[6]=n*p,b[7]=(-j*c+d*i)*p,b[8]=(g*c-d*f)*p,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2],g=a[3],h=a[4],i=a[5],j=a[6],k=a[7],l=a[8],m=a[9],n=a[10],o=a[11],p=a[12],q=a[13],r=a[14];a=a[15];var s=b[0],t=b[1],u=b[2],v=b[3];return c[0]=s*d+t*h+u*l+v*p,c[1]=s*e+t*i+u*m+v*q,c[2]=s*f+t*j+u*n+v*r,c[3]=s*g+t*k+u*o+v*a,s=b[4],t=b[5],u=b[6],v=b[7],c[4]=s*d+t*h+u*l+v*p,c[5]=s*e+t*i+u*m+v*q,c[6]=s*f+t*j+u*n+v*r,c[7]=s*g+t*k+u*o+v*a,s=b[8],t=b[9],u=b[10],v=b[11],c[8]=s*d+t*h+u*l+v*p,c[9]=s*e+t*i+u*m+v*q,c[10]=s*f+t*j+u*n+v*r,c[11]=s*g+t*k+u*o+v*a,s=b[12],t=b[13],u=b[14],v=b[15],c[12]=s*d+t*h+u*l+v*p,c[13]=s*e+t*i+u*m+v*q,c[14]=s*f+t*j+u*n+v*r,c[15]=s*g+t*k+u*o+v*a,c},multiplyVec3:function(a,b,c){c||(c=b);var d=b[0],e=b[1];return b=b[2],c[0]=a[0]*d+a[4]*e+a[8]*b+a[12],c[1]=a[1]*d+a[5]*e+a[9]*b+a[13],c[2]=a[2]*d+a[6]*e+a[10]*b+a[14],c},multiplyVec4:function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];return b=b[3],c[0]=a[0]*d+a[4]*e+a[8]*f+a[12]*b,c[1]=a[1]*d+a[5]*e+a[9]*f+a[13]*b,c[2]=a[2]*d+a[6]*e+a[10]*f+a[14]*b,c[3]=a[3]*d+a[7]*e+a[11]*f+a[15]*b,c},translate:function(a,b,c){var d=b[0],e=b[1];b=b[2];var f,g,h,i,j,k,l,m,n,o,p,q;return c&&a!==c?(f=a[0],g=a[1],h=a[2],i=a[3],j=a[4],k=a[5],l=a[6],m=a[7],n=a[8],o=a[9],p=a[10],q=a[11],c[0]=f,c[1]=g,c[2]=h,c[3]=i,c[4]=j,c[5]=k,c[6]=l,c[7]=m,c[8]=n,c[9]=o,c[10]=p,c[11]=q,c[12]=f*d+j*e+n*b+a[12],c[13]=g*d+k*e+o*b+a[13],c[14]=h*d+l*e+p*b+a[14],c[15]=i*d+m*e+q*b+a[15],c):(a[12]=a[0]*d+a[4]*e+a[8]*b+a[12],a[13]=a[1]*d+a[5]*e+a[9]*b+a[13],a[14]=a[2]*d+a[6]*e+a[10]*b+a[14],a[15]=a[3]*d+a[7]*e+a[11]*b+a[15],a)},scale:function(a,b,c){var d=b[0],e=b[1];return b=b[2],c&&a!==c?(c[0]=a[0]*d,c[1]=a[1]*d,c[2]=a[2]*d,c[3]=a[3]*d,c[4]=a[4]*e,c[5]=a[5]*e,c[6]=a[6]*e,c[7]=a[7]*e,c[8]=a[8]*b,c[9]=a[9]*b,c[10]=a[10]*b,c[11]=a[11]*b,c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15],c):(a[0]*=d,a[1]*=d,a[2]*=d,a[3]*=d,a[4]*=e,a[5]*=e,a[6]*=e,a[7]*=e,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a)},rotate:function(a,b,c,d){var e=c[0],f=c[1];c=c[2];var g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=Math.sqrt(e*e+f*f+c*c);return A?(1!==A&&(A=1/A,e*=A,f*=A,c*=A),g=Math.sin(b),h=Math.cos(b),i=1-h,b=a[0],A=a[1],j=a[2],k=a[3],l=a[4],m=a[5],n=a[6],o=a[7],p=a[8],q=a[9],r=a[10],s=a[11],t=e*e*i+h,u=f*e*i+c*g,v=c*e*i-f*g,w=e*f*i-c*g,x=f*f*i+h,y=c*f*i+e*g,z=e*c*i+f*g,e=f*c*i-e*g,f=c*c*i+h,d?a!==d&&(d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a,d[0]=b*t+l*u+p*v,d[1]=A*t+m*u+q*v,d[2]=j*t+n*u+r*v,d[3]=k*t+o*u+s*v,d[4]=b*w+l*x+p*y,d[5]=A*w+m*x+q*y,d[6]=j*w+n*x+r*y,d[7]=k*w+o*x+s*y,d[8]=b*z+l*e+p*f,d[9]=A*z+m*e+q*f,d[10]=j*z+n*e+r*f,d[11]=k*z+o*e+s*f,d):null},rotateX:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[4],f=a[5],g=a[6],h=a[7],i=a[8],j=a[9],k=a[10],l=a[11];return c?a!==c&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[4]=e*b+i*d,c[5]=f*b+j*d,c[6]=g*b+k*d,c[7]=h*b+l*d,c[8]=e*-d+i*b,c[9]=f*-d+j*b,c[10]=g*-d+k*b,c[11]=h*-d+l*b,c},rotateY:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],i=a[8],j=a[9],k=a[10],l=a[11];return c?a!==c&&(c[4]=a[4],c[5]=a[5],c[6]=a[6],c[7]=a[7],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+i*-d,c[1]=f*b+j*-d,c[2]=g*b+k*-d,c[3]=h*b+l*-d,c[8]=e*d+i*b,c[9]=f*d+j*b,c[10]=g*d+k*b,c[11]=h*d+l*b,c},rotateZ:function(a,b,c){var d=Math.sin(b);b=Math.cos(b);var e=a[0],f=a[1],g=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l=a[7];return c?a!==c&&(c[8]=a[8],c[9]=a[9],c[10]=a[10],c[11]=a[11],c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a,c[0]=e*b+i*d,c[1]=f*b+j*d,c[2]=g*b+k*d,c[3]=h*b+l*d,c[4]=e*-d+i*b,c[5]=f*-d+j*b,c[6]=g*-d+k*b,c[7]=h*-d+l*b,c},frustum:function(a,b,c,d,e,f,g){g||(g=p.create());var h=b-a,i=d-c,j=f-e;return g[0]=2*e/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2*e/i,g[6]=0,g[7]=0,g[8]=(b+a)/h,g[9]=(d+c)/i,g[10]=-(f+e)/j,g[11]=-1,g[12]=0,g[13]=0,g[14]=-(2*f*e)/j,g[15]=0,g},perspective:function(a,b,c,d,e){return a=c*Math.tan(a*Math.PI/360),b*=a,p.frustum(-b,b,-a,a,c,d,e)},ortho:function(a,b,c,d,e,f,g){g||(g=p.create());var h=b-a,i=d-c,j=f-e;return g[0]=2/h,g[1]=0,g[2]=0,g[3]=0,g[4]=0,g[5]=2/i,g[6]=0,g[7]=0,g[8]=0,g[9]=0,g[10]=-2/j,g[11]=0,g[12]=-(a+b)/h,g[13]=-(d+c)/i,g[14]=-(f+e)/j,g[15]=1,g},lookAt:function(a,b,c,d){d||(d=p.create());var e,f,g,h,i,j,k,l,m=a[0],n=a[1];return a=a[2],g=c[0],h=c[1],f=c[2],k=b[0],c=b[1],e=b[2],m===k&&n===c&&a===e?p.identity(d):(b=m-k,c=n-c,k=a-e,l=1/Math.sqrt(b*b+c*c+k*k),b*=l,c*=l,k*=l,e=h*k-f*c,f=f*b-g*k,g=g*c-h*b,(l=Math.sqrt(e*e+f*f+g*g))?(l=1/l,e*=l,f*=l,g*=l):g=f=e=0,h=c*g-k*f,i=k*e-b*g,j=b*f-c*e,(l=Math.sqrt(h*h+i*i+j*j))?(l=1/l,h*=l,i*=l,j*=l):j=i=h=0,d[0]=e,d[1]=h,d[2]=b,d[3]=0,d[4]=f,d[5]=i,d[6]=c,d[7]=0,d[8]=g,d[9]=j,d[10]=k,d[11]=0,d[12]=-(e*m+f*n+g*a),d[13]=-(h*m+i*n+j*a),d[14]=-(b*m+c*n+k*a),d[15]=1,d)},fromRotationTranslation:function(a,b,c){c||(c=p.create());var d=a[0],e=a[1],f=a[2],g=a[3],h=d+d,i=e+e,j=f+f;a=d*h;var k=d*i,d=d*j,l=e*i,e=e*j,f=f*j,h=g*h,i=g*i,g=g*j;return c[0]=1-(l+f),c[1]=k+g,c[2]=d-i,c[3]=0,c[4]=k-g,c[5]=1-(a+f),c[6]=e+h,c[7]=0,c[8]=d+i,c[9]=e-h,c[10]=1-(a+l),c[11]=0,c[12]=b[0],c[13]=b[1],c[14]=b[2],c[15]=1,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+"]"}},q={create:function(a){var b=new g(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},createFrom:function(a,b,c,d){var e=new g(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},equal:function(a,b){return a===b||1e-6>Math.abs(a[0]-b[0])&&1e-6>Math.abs(a[1]-b[1])&&1e-6>Math.abs(a[2]-b[2])&&1e-6>Math.abs(a[3]-b[3])},identity:function(a){return a||(a=q.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}},r=q.identity();q.calculateW=function(a,b){var c=a[0],d=a[1],e=a[2];return b&&a!==b?(b[0]=c,b[1]=d,b[2]=e,b[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),b):(a[3]=-Math.sqrt(Math.abs(1-c*c-d*d-e*e)),a)},q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]},q.inverse=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],c=(c=c*c+d*d+e*e+f*f)?1/c:0;return b&&a!==b?(b[0]=-a[0]*c,b[1]=-a[1]*c,b[2]=-a[2]*c,b[3]=a[3]*c,b):(a[0]*=-c,a[1]*=-c,a[2]*=-c,a[3]*=c,a)},q.conjugate=function(a,b){return b&&a!==b?(b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=a[3],b):(a[0]*=-1,a[1]*=-1,a[2]*=-1,a)},q.length=function(a){var b=a[0],c=a[1],d=a[2];return a=a[3],Math.sqrt(b*b+c*c+d*d+a*a)},q.normalize=function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=Math.sqrt(c*c+d*d+e*e+f*f);return 0===g?(b[0]=0,b[1]=0,b[2]=0,b[3]=0,b):(g=1/g,b[0]=c*g,b[1]=d*g,b[2]=e*g,b[3]=f*g,b)},q.add=function(a,b,c){return c&&a!==c?(c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c):(a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a[3]+=b[3],a)},q.multiply=function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=b[0],h=b[1],i=b[2];return b=b[3],c[0]=d*b+a*g+e*i-f*h,c[1]=e*b+a*h+f*g-d*i,c[2]=f*b+a*i+d*h-e*g,c[3]=a*b-d*g-e*h-f*i,c},q.multiplyVec3=function(a,b,c){c||(c=b);var d=b[0],e=b[1],f=b[2];b=a[0];var g=a[1],h=a[2];a=a[3];var i=a*d+g*f-h*e,j=a*e+h*d-b*f,k=a*f+b*e-g*d,d=-b*d-g*e-h*f;return c[0]=i*a+d*-b+j*-h-k*-g,c[1]=j*a+d*-g+k*-b-i*-h,c[2]=k*a+d*-h+i*-g-j*-b,c},q.scale=function(a,b,c){return c&&a!==c?(c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c):(a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a)},q.toMat3=function(a,b){b||(b=o.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,c=c*i,l=d*h,d=d*i,e=e*i,g=f*g,h=f*h,f=f*i;return b[0]=1-(l+e),b[1]=k+f,b[2]=c-h,b[3]=k-f,b[4]=1-(j+e),b[5]=d+g,b[6]=c+h,b[7]=d-g,b[8]=1-(j+l),b},q.toMat4=function(a,b){b||(b=p.create());var c=a[0],d=a[1],e=a[2],f=a[3],g=c+c,h=d+d,i=e+e,j=c*g,k=c*h,c=c*i,l=d*h,d=d*i,e=e*i,g=f*g,h=f*h,f=f*i;return b[0]=1-(l+e),b[1]=k+f,b[2]=c-h,b[3]=0,b[4]=k-f,b[5]=1-(j+e),b[6]=d+g,b[7]=0,b[8]=c+h,b[9]=d-g,b[10]=1-(j+l),b[11]=0,b[12]=0,b[13]=0,b[14]=0,b[15]=1,b},q.slerp=function(a,b,c,d){d||(d=a);var e,f,g=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];return 1<=Math.abs(g)?(d!==a&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3]),d):(e=Math.acos(g),f=Math.sqrt(1-g*g),.001>Math.abs(f)?(d[0]=.5*a[0]+.5*b[0],d[1]=.5*a[1]+.5*b[1],d[2]=.5*a[2]+.5*b[2],d[3]=.5*a[3]+.5*b[3],d):(g=Math.sin((1-c)*e)/f,c=Math.sin(c*e)/f,d[0]=a[0]*g+b[0]*c,d[1]=a[1]*g+b[1]*c,d[2]=a[2]*g+b[2]*c,d[3]=a[3]*g+b[3]*c,d))},q.fromRotationMatrix=function(a,b){b||(b=q.create());var c,d=a[0]+a[4]+a[8];if(d>0)c=Math.sqrt(d+1),b[3]=.5*c,c=.5/c,b[0]=(a[7]-a[5])*c,b[1]=(a[2]-a[6])*c,b[2]=(a[3]-a[1])*c;else{c=q.fromRotationMatrix.s_iNext=q.fromRotationMatrix.s_iNext||[1,2,0],d=0,a[4]>a[0]&&(d=1),a[8]>a[3*d+d]&&(d=2);var e=c[d],f=c[e];c=Math.sqrt(a[3*d+d]-a[3*e+e]-a[3*f+f]+1),b[d]=.5*c,c=.5/c,b[3]=(a[3*f+e]-a[3*e+f])*c,b[e]=(a[3*e+d]+a[3*d+e])*c,b[f]=(a[3*f+d]+a[3*d+f])*c}return b},o.toQuat4=q.fromRotationMatrix;var s=o.create();q.fromAxes=function(a,b,c,d){return s[0]=b[0],s[3]=b[1],s[6]=b[2],s[1]=c[0],s[4]=c[1],s[7]=c[2],s[2]=a[0],s[5]=a[1],s[8]=a[2],q.fromRotationMatrix(s,d)},q.identity=function(a){return a||(a=q.create()),a[0]=0,a[1]=0,a[2]=0,a[3]=1,a},q.fromAngleAxis=function(a,b,c){c||(c=q.create()),a*=.5;var d=Math.sin(a);return c[3]=Math.cos(a),c[0]=d*b[0],c[1]=d*b[1],c[2]=d*b[2],c},q.toAngleAxis=function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1]+a[2]*a[2];return c>0?(b[3]=2*Math.acos(a[3]),c=d.invsqrt(c),b[0]=a[0]*c,b[1]=a[1]*c,b[2]=a[2]*c):(b[3]=0,b[0]=1,b[1]=0,b[2]=0),b},q.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};var t={create:function(a){var b=new g(2);return a?(b[0]=a[0],b[1]=a[1]):(b[0]=0,b[1]=0),b},createFrom:function(a,b){var c=new g(2);return c[0]=a,c[1]=b,c},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c},dist:function(a,b){var c=b[0]-a[0],d=b[1]-a[1];return Math.sqrt(c*c+d*d)},set:function(a,b){return b[0]=a[0],b[1]=a[1],b},equal:function(a,b){return a===b||1e-6>Math.abs(a[0]-b[0])&&1e-6>Math.abs(a[1]-b[1])},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b},normalize:function(a,b){b||(b=a);var c=a[0]*a[0]+a[1]*a[1];return c>0?(c=Math.sqrt(c),b[0]=a[0]/c,b[1]=a[1]/c):b[0]=b[1]=0,b},cross:function(a,b,c){return a=a[0]*b[1]-a[1]*b[0],c?(c[0]=c[1]=0,c[2]=a,c):a},length:function(a){var b=a[0];return a=a[1],Math.sqrt(b*b+a*a)},squaredLength:function(a){var b=a[0];return a=a[1],b*b+a*a},dot:function(a,b){return a[0]*b[0]+a[1]*b[1]},direction:function(a,b,c){c||(c=a);var d=a[0]-b[0];return a=a[1]-b[1],(b=d*d+a*a)?(b=1/Math.sqrt(b),c[0]=d*b,c[1]=a*b,c):(c[0]=0,c[1]=0,c[2]=0,c)},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d},str:function(a){return"["+a[0]+", "+a[1]+"]"}},u={create:function(a){var b=new g(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):b[0]=b[1]=b[2]=b[3]=0,b},createFrom:function(a,b,c,d){var e=new g(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],
b[3]=a[3],b},equal:function(a,b){return a===b||1e-6>Math.abs(a[0]-b[0])&&1e-6>Math.abs(a[1]-b[1])&&1e-6>Math.abs(a[2]-b[2])&&1e-6>Math.abs(a[3]-b[3])},identity:function(a){return a||(a=u.create()),a[0]=1,a[1]=0,a[2]=0,a[3]=1,a},transpose:function(a,b){if(!b||a===b){var c=a[1];return a[1]=a[2],a[2]=c,a}return b[0]=a[0],b[1]=a[2],b[2]=a[1],b[3]=a[3],b},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},inverse:function(a,b){b||(b=a);var c=a[0],d=a[1],e=a[2],f=a[3],g=c*f-e*d;return g?(g=1/g,b[0]=f*g,b[1]=-d*g,b[2]=-e*g,b[3]=c*g,b):null},multiply:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];return a=a[3],c[0]=d*b[0]+e*b[2],c[1]=d*b[1]+e*b[3],c[2]=f*b[0]+a*b[2],c[3]=f*b[1]+a*b[3],c},rotate:function(a,b,c){c||(c=a);var d=a[0],e=a[1],f=a[2];a=a[3];var g=Math.sin(b);return b=Math.cos(b),c[0]=d*b+e*g,c[1]=d*-g+e*b,c[2]=f*b+a*g,c[3]=f*-g+a*b,c},multiplyVec2:function(a,b,c){c||(c=b);var d=b[0];return b=b[1],c[0]=d*a[0]+b*a[1],c[1]=d*a[2]+b*a[3],c},scale:function(a,b,c){c||(c=a);var d=a[1],e=a[2],f=a[3],g=b[0];return b=b[1],c[0]=a[0]*g,c[1]=d*b,c[2]=e*g,c[3]=f*b,c},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}},v={create:function(a){var b=new g(4);return a?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]):(b[0]=0,b[1]=0,b[2]=0,b[3]=0),b},createFrom:function(a,b,c,d){var e=new g(4);return e[0]=a,e[1]=b,e[2]=c,e[3]=d,e},add:function(a,b,c){return c||(c=b),c[0]=a[0]+b[0],c[1]=a[1]+b[1],c[2]=a[2]+b[2],c[3]=a[3]+b[3],c},subtract:function(a,b,c){return c||(c=b),c[0]=a[0]-b[0],c[1]=a[1]-b[1],c[2]=a[2]-b[2],c[3]=a[3]-b[3],c},multiply:function(a,b,c){return c||(c=b),c[0]=a[0]*b[0],c[1]=a[1]*b[1],c[2]=a[2]*b[2],c[3]=a[3]*b[3],c},divide:function(a,b,c){return c||(c=b),c[0]=a[0]/b[0],c[1]=a[1]/b[1],c[2]=a[2]/b[2],c[3]=a[3]/b[3],c},scale:function(a,b,c){return c||(c=a),c[0]=a[0]*b,c[1]=a[1]*b,c[2]=a[2]*b,c[3]=a[3]*b,c},set:function(a,b){return b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b},equal:function(a,b){return a===b||1e-6>Math.abs(a[0]-b[0])&&1e-6>Math.abs(a[1]-b[1])&&1e-6>Math.abs(a[2]-b[2])&&1e-6>Math.abs(a[3]-b[3])},negate:function(a,b){return b||(b=a),b[0]=-a[0],b[1]=-a[1],b[2]=-a[2],b[3]=-a[3],b},length:function(a){var b=a[0],c=a[1],d=a[2];return a=a[3],Math.sqrt(b*b+c*c+d*d+a*a)},squaredLength:function(a){var b=a[0],c=a[1],d=a[2];return a=a[3],b*b+c*c+d*d+a*a},lerp:function(a,b,c,d){return d||(d=a),d[0]=a[0]+c*(b[0]-a[0]),d[1]=a[1]+c*(b[1]-a[1]),d[2]=a[2]+c*(b[2]-a[2]),d[3]=a[3]+c*(b[3]-a[3]),d},str:function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}};return a&&(a.glMatrixArrayType=g,a.MatrixArray=g,a.setMatrixArrayType=b,a.determineMatrixArrayType=c,a.glMath=d,a.vec2=t,a.vec3=h,a.vec4=v,a.mat2=u,a.mat3=o,a.mat4=p,a.quat4=q),{glMatrixArrayType:g,MatrixArray:g,setMatrixArrayType:b,determineMatrixArrayType:c,glMath:d,vec2:t,vec3:h,vec4:v,mat2:u,mat3:o,mat4:p,quat4:q}}),ChemDoodle.animations=function(a){var b={};return a.requestAnimFrame=a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame||function(b){a.setTimeout(b,1e3/60)},b.requestInterval=function(b,c){function d(){(new Date).getTime()-e>=c&&(b.call(),e=(new Date).getTime()),f.value=a.requestAnimFrame(d)}if(!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame&&a.mozCancelRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame))return a.setInterval(b,c);var e=(new Date).getTime(),f={};return f.value=a.requestAnimFrame(d),f},b.clearRequestInterval=function(b){a.cancelAnimationFrame?a.cancelAnimationFrame(b.value):a.webkitCancelAnimationFrame?a.webkitCancelAnimationFrame(b.value):a.webkitCancelRequestAnimationFrame?a.webkitCancelRequestAnimationFrame(b.value):a.mozCancelRequestAnimationFrame?a.mozCancelRequestAnimationFrame(b.value):a.oCancelRequestAnimationFrame?a.oCancelRequestAnimationFrame(b.value):a.msCancelRequestAnimationFrame?a.msCancelRequestAnimationFrame(b.value):clearInterval(b)},b.requestTimeout=function(b,c){function d(){(new Date).getTime()-e>=c?b.call():f.value=a.requestAnimFrame(d)}if(!(a.requestAnimationFrame||a.webkitRequestAnimationFrame||a.mozRequestAnimationFrame&&a.mozCancelRequestAnimationFrame||a.oRequestAnimationFrame||a.msRequestAnimationFrame))return a.setTimeout(b,c);var e=(new Date).getTime(),f={};return f.value=a.requestAnimFrame(d),f},b.clearRequestTimeout=function(b){a.cancelAnimationFrame?a.cancelAnimationFrame(b.value):a.webkitCancelAnimationFrame?a.webkitCancelAnimationFrame(b.value):a.webkitCancelRequestAnimationFrame?a.webkitCancelRequestAnimationFrame(b.value):a.mozCancelRequestAnimationFrame?a.mozCancelRequestAnimationFrame(b.value):a.oCancelRequestAnimationFrame?a.oCancelRequestAnimationFrame(b.value):a.msCancelRequestAnimationFrame?a.msCancelRequestAnimationFrame(b.value):clearTimeout(b)},b}(window),ChemDoodle.extensions=function(a,b,c){return{stringStartsWith:function(a,b){return a.slice(0,b.length)===b},vec3AngleFrom:function(a,d){var e=b.length(a),f=b.length(d),e=b.dot(a,d)/e/f;return c.acos(e)},contextHashTo:function(b,c,d,e,f,g,h){var i=0,j=new a.Point(c,d).distance(new a.Point(e,f)),k=!1,l=c,m=d;for(c=e-c,d=f-d;j>i;){if(k){if(i+h>j){b.moveTo(e,f);break}var n=h/j,l=l+n*c,m=m+n*d;b.moveTo(l,m),i+=h}else{if(i+g>j){b.lineTo(e,f);break}n=g/j,l+=n*c,m+=n*d,b.lineTo(l,m),i+=g}k=!k}},contextRoundRect:function(a,b,c,d,e,f){a.beginPath(),a.moveTo(b+f,c),a.lineTo(b+d-f,c),a.quadraticCurveTo(b+d,c,b+d,c+f),a.lineTo(b+d,c+e-f),a.quadraticCurveTo(b+d,c+e,b+d-f,c+e),a.lineTo(b+f,c+e),a.quadraticCurveTo(b,c+e,b,c+e-f),a.lineTo(b,c+f),a.quadraticCurveTo(b,c,b+f,c),a.closePath()},contextEllipse:function(a,b,c,d,e){var f=.5522848*(d/2),g=.5522848*(e/2),h=b+d,i=c+e;d=b+d/2,e=c+e/2,a.beginPath(),a.moveTo(b,e),a.bezierCurveTo(b,e-g,d-f,c,d,c),a.bezierCurveTo(d+f,c,h,e-g,h,e),a.bezierCurveTo(h,e+g,d+f,i,d,i),a.bezierCurveTo(d-f,i,b,e+g,b,e),a.closePath()},getFontString:function(a,b,c,d){var e=[];for(c&&e.push("bold "),d&&e.push("italic "),e.push(a+"px "),a=0,c=b.length;c>a;a++)d=b[a],-1!==d.indexOf(" ")&&(d='"'+d+'"'),e.push((0!==a?",":"")+d);return e.join("")}}}(ChemDoodle.structures,ChemDoodle.lib.vec3,Math),ChemDoodle.math=function(a,b,c,d,e){var f={},g={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c","indigo ":"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};return f.angleBetweenLargest=function(a){if(0===a.length)return{angle:0,largest:2*e.PI};if(1===a.length)return{angle:a[0]+e.PI,largest:2*e.PI};for(var b=0,c=0,d=0,f=a.length-1;f>d;d++){var g=a[d+1]-a[d];g>b&&(b=g,c=(a[d+1]+a[d])/2)}return d=a[0]+2*e.PI-a[a.length-1],d>b&&(c=a[0]-d/2,b=d,0>c&&(c+=2*e.PI)),{angle:c,largest:b}},f.isBetween=function(a,b,c){if(b>c){var d=b;b=c,c=d}return a>=b&&c>=a},d(document).ready(function(){a.iChemLabs.checkForUpdates({})}),f.getRGB=function(a,c){var d=[0,0,0];if(g[a.toLowerCase()]&&(a=g[a.toLowerCase()]),"#"===a.charAt(0))return 4===a.length&&(a="#"+a.charAt(1)+a.charAt(1)+a.charAt(2)+a.charAt(2)+a.charAt(3)+a.charAt(3)),[parseInt(a.substring(1,3),16)/255*c,parseInt(a.substring(3,5),16)/255*c,parseInt(a.substring(5,7),16)/255*c];if(b.stringStartsWith(a,"rgb")){var e=a.replace(/rgb\(|\)/g,"").split(",");return 3!==e.length?d:[parseInt(e[0])/255*c,parseInt(e[1])/255*c,parseInt(e[2])/255*c]}return d},f.idx2color=function(a){a=a.toString(16);for(var b=0,c=6-a.length;c>b;b++)a="0"+a;return"#"+a},f.distanceFromPointToLineInclusive=function(a,b,d){var g=b.distance(d);return d=b.angle(d),d=e.PI/2-d,d=b.angle(a)+d,a=b.distance(a),a=new c.Point(a*e.cos(d),-a*e.sin(d)),f.isBetween(-a.y,0,g)?e.abs(a.x):-1},f.calculateDistanceInterior=function(a,b,c){if(this.isBetween(b.x,c.x,c.x+c.w)&&this.isBetween(b.y,c.y,c.y+c.w))return a.distance(b);var d=[];d.push({x1:c.x,y1:c.y,x2:c.x+c.w,y2:c.y}),d.push({x1:c.x,y1:c.y+c.h,x2:c.x+c.w,y2:c.y+c.h}),d.push({x1:c.x,y1:c.y,x2:c.x,y2:c.y+c.h}),d.push({x1:c.x+c.w,y1:c.y,x2:c.x+c.w,y2:c.y+c.h}),c=[];for(var f=0;4>f;f++){var g=d[f];(g=this.intersectLines(b.x,b.y,a.x,a.y,g.x1,g.y1,g.x2,g.y2))&&c.push(g)}if(0===c.length)return 0;for(f=b=0,d=c.length;d>f;f++){var g=c[f],h=a.x-g.x,g=a.y-g.y;b=e.max(b,e.sqrt(h*h+g*g))}return b},f.intersectLines=function(a,b,c,d,e,f,g,h){c-=a,d-=b,g-=e,h-=f;var i=d*g-c*h;return 0===i?!1:(g=(h*(a-e)-g*(b-f))/i,e=(d*(a-e)-c*(b-f))/i,e>=0&&1>=e&&g>=0&&1>=g?{x:a+g*c,y:b+g*d}:!1)},f.hsl2rgb=function(a,b,c){var d=function(a,b,c){return 0>c?c+=1:c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+6*(b-a)*(2/3-c):a};if(0===b)c=b=a=c;else{var e=.5>c?c*(1+b):c+b-c*b,f=2*c-e;c=d(f,e,a+1/3),b=d(f,e,a),a=d(f,e,a-1/3)}return[255*c,255*b,255*a]},f.isPointInPoly=function(a,b){for(var c=!1,d=-1,e=a.length,f=e-1;++d<e;f=d)(a[d].y<=b.y&&b.y<a[f].y||a[f].y<=b.y&&b.y<a[d].y)&&b.x<(a[f].x-a[d].x)*(b.y-a[d].y)/(a[f].y-a[d].y)+a[d].x&&(c=!c);return c},f.clamp=function(a,b,c){return b>a?b:a>c?c:a},f.rainbowAt=function(a,b,c){1>c.length?c.push("#000000","#FFFFFF"):2>c.length&&c.push("#FFFFFF");var d=b/(c.length-1);return b=e.floor(a/d),a=(a-b*d)/d,d=f.getRGB(c[b],1),c=f.getRGB(c[b+1],1),"rgb("+[255*(d[0]+(c[0]-d[0])*a),255*(d[1]+(c[1]-d[1])*a),255*(d[2]+(c[2]-d[2])*a)].join()+")"},f.angleBounds=function(a,b,c){for(var d=2*e.PI;0>a;)a+=d;for(;a>d;)a-=d;return c&&a>e.PI&&(a=2*e.PI-a),b&&(a=180*a/e.PI),a},f}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.lib.jQuery,Math),function(a,b){a.Bounds=function(){};var c=a.Bounds.prototype;c.minX=c.minY=c.minZ=1/0,c.maxX=c.maxY=c.maxZ=-(1/0),c.expand=function(c,d,e,f){c instanceof a.Bounds?(this.minX=b.min(this.minX,c.minX),this.minY=b.min(this.minY,c.minY),this.maxX=b.max(this.maxX,c.maxX),this.maxY=b.max(this.maxY,c.maxY),1/0!==c.maxZ&&(this.minZ=b.min(this.minZ,c.minZ),this.maxZ=b.max(this.maxZ,c.maxZ))):(this.minX=b.min(this.minX,c),this.maxX=b.max(this.maxX,c),this.minY=b.min(this.minY,d),this.maxY=b.max(this.maxY,d),void 0!==e&&void 0!==f&&(this.minX=b.min(this.minX,e),this.maxX=b.max(this.maxX,e),this.minY=b.min(this.minY,f),this.maxY=b.max(this.maxY,f)))},c.expand3D=function(a,c,d,e,f,g){this.minX=b.min(this.minX,a),this.maxX=b.max(this.maxX,a),this.minY=b.min(this.minY,c),this.maxY=b.max(this.maxY,c),this.minZ=b.min(this.minZ,d),this.maxZ=b.max(this.maxZ,d),void 0!==e&&void 0!==f&&void 0!==g&&(this.minX=b.min(this.minX,e),this.maxX=b.max(this.maxX,e),this.minY=b.min(this.minY,f),this.maxY=b.max(this.maxY,f),this.minZ=b.min(this.minZ,g),this.maxZ=b.max(this.maxZ,g))}}(ChemDoodle.math,Math),function(){var a={subtract:function(a,b){return{x:a.x-b.x,y:a.y-b.y}},dotProduct:function(a,b){return a.x*b.x+a.y*b.y},square:function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},scale:function(a,b){return{x:a.x*b,y:a.y*b}}},b=Math.pow(2,-65),c=function(b,c){for(var f=[],g=c.length-1,h=2*g-1,i=[],j=[],k=[],l=[],m=[[1,.6,.3,.1],[.4,.6,.6,.4],[.1,.3,.6,1]],n=0;g>=n;n++)i[n]=a.subtract(c[n],b);for(n=0;g-1>=n;n++)j[n]=a.subtract(c[n+1],c[n]),j[n]=a.scale(j[n],3);for(n=0;g-1>=n;n++)for(var o=0;g>=o;o++)k[n]||(k[n]=[]),k[n][o]=a.dotProduct(j[n],i[o]);for(n=0;h>=n;n++)l[n]||(l[n]=[]),l[n].y=0,l[n].x=parseFloat(n)/h;for(h=g-1,i=0;g+h>=i;i++)for(n=Math.max(0,i-h),j=Math.min(i,g);j>=n;n++)o=i-n,l[n+o].y+=k[o][n]*m[o][n];for(g=c.length-1,l=d(l,2*g-1,f,0),h=a.subtract(b,c[0]),k=a.square(h),n=m=0;l>n;n++)h=a.subtract(b,e(c,g,f[n],null,null)),h=a.square(h),k>h&&(k=h,m=f[n]);return h=a.subtract(b,c[g]),h=a.square(h),k>h&&(k=h,m=1),{location:m,distance:k}},d=function(a,c,f,g){var h,i,j=[],k=[],l=[],m=[],n=0;i=0==a[0].y?0:0<a[0].y?1:-1;for(var o=1;c>=o;o++)h=0==a[o].y?0:0<a[o].y?1:-1,h!=i&&n++,i=h;switch(n){case 0:return 0;case 1:if(g>=64)return f[0]=(a[0].x+a[c].x)/2,1;var p,q,r,n=a[0].y-a[c].y;for(h=a[c].x-a[0].x,i=a[0].x*a[c].y-a[c].x*a[0].y,o=p=0,q=1;c>q;q++)r=n*a[q].x+h*a[q].y+i,r>p?p=r:o>r&&(o=r);if(r=h,q=0*r-1*n,p=(1*(i-p)-0*r)*(1/q),r=h,q=0*r-1*n,n=(1*(i-o)-0*r)*(1/q),h=Math.min(p,n),Math.max(p,n)-h<b)return l=a[c].x-a[0].x,m=a[c].y-a[0].y,f[0]=0+1*(l*(a[0].y-0)-m*(a[0].x-0))*(1/(0*l-1*m)),1}for(e(a,c,.5,j,k),a=d(j,c,l,g+1),c=d(k,c,m,g+1),g=0;a>g;g++)f[g]=l[g];for(g=0;c>g;g++)f[g+a]=m[g];return a+c},e=function(a,b,c,d,e){for(var f=[[]],g=0;b>=g;g++)f[0][g]=a[g];for(a=1;b>=a;a++)for(g=0;b-a>=g;g++)f[a]||(f[a]=[]),f[a][g]||(f[a][g]={}),f[a][g].x=(1-c)*f[a-1][g].x+c*f[a-1][g+1].x,f[a][g].y=(1-c)*f[a-1][g].y+c*f[a-1][g+1].y;if(null!=d)for(g=0;b>=g;g++)d[g]=f[g][0];if(null!=e)for(g=0;b>=g;g++)e[g]=f[b-g][g];return f[b][0]},f={},g=function(a,b){var c,d=a.length-1;if(c=f[d],!c){c=[];var e=function(a){return function(){return a}},g=function(){return function(a){return a}},h=function(){return function(a){return 1-a}},i=function(a){return function(b){for(var c=1,d=0;d<a.length;d++)c*=a[d](b);return c}};c.push(new function(){return function(a){return Math.pow(a,d)}});for(var j=1;d>j;j++){for(var k=[new e(d)],l=0;d-j>l;l++)k.push(new g);for(l=0;j>l;l++)k.push(new h);c.push(new i(k))}c.push(new function(){return function(a){return Math.pow(1-a,d)}}),f[d]=c}for(h=g=e=0;h<a.length;h++)e+=a[h].x*c[h](b),g+=a[h].y*c[h](b);return{x:e,y:g}},h=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},i=function(a,b,c){for(var d=g(a,b),e=0,f=c>0?1:-1,i=null;e<Math.abs(c);)b+=.005*f,i=g(a,b),e+=h(i,d),d=i;return{point:i,location:b}},j=function(a,b){var c=g(a,b),d=g(a.slice(0,a.length-1),b),e=d.y-c.y,c=d.x-c.x;return 0==e?1/0:Math.atan(e/c)};ChemDoodle.math.jsBezier={distanceFromCurve:c,gradientAtPoint:j,gradientAtPointAlongCurveFrom:function(a,b,c){return b=i(a,b,c),1<b.location&&(b.location=1),0>b.location&&(b.location=0),j(a,b.location)},nearestPointOnCurve:function(a,b){var d=c(a,b);return{point:e(b,b.length-1,d.location,null,null),location:d.location}},pointOnCurve:g,pointAlongCurveFrom:function(a,b,c){return i(a,b,c).point},perpendicularToCurveAt:function(a,b,c,d){return b=i(a,b,null==d?0:d),a=j(a,b.location),d=Math.atan(-1/a),a=c/2*Math.sin(d),c=c/2*Math.cos(d),[{x:b.point.x+c,y:b.point.y+a},{x:b.point.x-c,y:b.point.y-a}]},locationAlongCurveFrom:function(a,b,c){return i(a,b,c).location},getLength:function(a){for(var b=g(a,0),c=0,d=0,e=null;1>d;)d+=.005,e=g(a,d),c+=h(e,b),b=e;return c}}}(ChemDoodle.math),ChemDoodle.featureDetection=function(a,b,c,d){var e={supports_canvas:function(){return!!c.createElement("canvas").getContext},supports_canvas_text:function(){return e.supports_canvas()?"function"==typeof c.createElement("canvas").getContext("2d").fillText:!1},supports_webgl:function(){var a=c.createElement("canvas");try{if(a.getContext("webgl")||a.getContext("experimental-webgl"))return!0}catch(b){}return!1},supports_xhr2:function(){return b.support.cors},supports_touch:function(){return"ontouchstart"in d&&navigator.userAgent.match(/iPhone|iPad|iPod|Android|BlackBerry|BB10/i)},supports_gesture:function(){return"ongesturestart"in d}};return e}(ChemDoodle.iChemLabs,ChemDoodle.lib.jQuery,document,window),ChemDoodle.SYMBOLS="H He Li Be B C N O F Ne Na Mg Al Si P S Cl Ar K Ca Sc Ti V Cr Mn Fe Co Ni Cu Zn Ga Ge As Se Br Kr Rb Sr Y Zr Nb Mo Tc Ru Rh Pd Ag Cd In Sn Sb Te I Xe Cs Ba La Ce Pr Nd Pm Sm Eu Gd Tb Dy Ho Er Tm Yb Lu Hf Ta W Re Os Ir Pt Au Hg Tl Pb Bi Po At Rn Fr Ra Ac Th Pa U Np Pu Am Cm Bk Cf Es Fm Md No Lr Rf Db Sg Bh Hs Mt Ds Rg Cn Uut Uuq Uup Uuh Uus Uuo".split(" "),ChemDoodle.ELEMENT=function(){function a(a,b,c,d,e,f,g,h,i){this.symbol=a,this.name=b,this.atomicNumber=c,this.addH=d,this.jmolColor=this.pymolColor=e,this.covalentRadius=f,this.vdWRadius=g,this.valency=h,this.mass=i}var b=[];return b.H=new a("H","Hydrogen",1,!1,"#FFFFFF",.31,1.2,1,1),b.He=new a("He","Helium",2,!1,"#D9FFFF",.28,1.4,0,4),b.Li=new a("Li","Lithium",3,!1,"#CC80FF",1.28,1.82,1,7),b.Be=new a("Be","Beryllium",4,!1,"#C2FF00",.96,0,2,9),b.B=new a("B","Boron",5,!0,"#FFB5B5",.84,0,3,11),b.C=new a("C","Carbon",6,!0,"#909090",.76,1.7,4,12),b.N=new a("N","Nitrogen",7,!0,"#3050F8",.71,1.55,3,14),b.O=new a("O","Oxygen",8,!0,"#FF0D0D",.66,1.52,2,16),b.F=new a("F","Fluorine",9,!0,"#90E050",.57,1.47,1,19),b.Ne=new a("Ne","Neon",10,!1,"#B3E3F5",.58,1.54,0,20),b.Na=new a("Na","Sodium",11,!1,"#AB5CF2",1.66,2.27,1,23),b.Mg=new a("Mg","Magnesium",12,!1,"#8AFF00",1.41,1.73,0,24),b.Al=new a("Al","Aluminum",13,!1,"#BFA6A6",1.21,0,0,27),b.Si=new a("Si","Silicon",14,!0,"#F0C8A0",1.11,2.1,4,28),b.P=new a("P","Phosphorus",15,!0,"#FF8000",1.07,1.8,3,31),b.S=new a("S","Sulfur",16,!0,"#FFFF30",1.05,1.8,2,32),b.Cl=new a("Cl","Chlorine",17,!0,"#1FF01F",1.02,1.75,1,35),b.Ar=new a("Ar","Argon",18,!1,"#80D1E3",1.06,1.88,0,40),b.K=new a("K","Potassium",19,!1,"#8F40D4",2.03,2.75,0,39),b.Ca=new a("Ca","Calcium",20,!1,"#3DFF00",1.76,0,0,40),b.Sc=new a("Sc","Scandium",21,!1,"#E6E6E6",1.7,0,0,45),b.Ti=new a("Ti","Titanium",22,!1,"#BFC2C7",1.6,0,1,48),b.V=new a("V","Vanadium",23,!1,"#A6A6AB",1.53,0,1,51),b.Cr=new a("Cr","Chromium",24,!1,"#8A99C7",1.39,0,2,52),b.Mn=new a("Mn","Manganese",25,!1,"#9C7AC7",1.39,0,3,55),b.Fe=new a("Fe","Iron",26,!1,"#E06633",1.32,0,2,56),b.Co=new a("Co","Cobalt",27,!1,"#F090A0",1.26,0,1,59),b.Ni=new a("Ni","Nickel",28,!1,"#50D050",1.24,1.63,1,58),b.Cu=new a("Cu","Copper",29,!1,"#C88033",1.32,1.4,0,63),b.Zn=new a("Zn","Zinc",30,!1,"#7D80B0",1.22,1.39,0,64),b.Ga=new a("Ga","Gallium",31,!1,"#C28F8F",1.22,1.87,0,69),b.Ge=new a("Ge","Germanium",32,!1,"#668F8F",1.2,0,4,74),b.As=new a("As","Arsenic",33,!0,"#BD80E3",1.19,1.85,3,75),b.Se=new a("Se","Selenium",34,!0,"#FFA100",1.2,1.9,2,80),b.Br=new a("Br","Bromine",35,!0,"#A62929",1.2,1.85,1,79),b.Kr=new a("Kr","Krypton",36,!1,"#5CB8D1",1.16,2.02,0,84),b.Rb=new a("Rb","Rubidium",37,!1,"#702EB0",2.2,0,0,85),b.Sr=new a("Sr","Strontium",38,!1,"#00FF00",1.95,0,0,88),b.Y=new a("Y","Yttrium",39,!1,"#94FFFF",1.9,0,0,89),b.Zr=new a("Zr","Zirconium",40,!1,"#94E0E0",1.75,0,0,90),b.Nb=new a("Nb","Niobium",41,!1,"#73C2C9",1.64,0,1,93),b.Mo=new a("Mo","Molybdenum",42,!1,"#54B5B5",1.54,0,2,98),b.Tc=new a("Tc","Technetium",43,!1,"#3B9E9E",1.47,0,3,0),b.Ru=new a("Ru","Ruthenium",44,!1,"#248F8F",1.46,0,2,102),b.Rh=new a("Rh","Rhodium",45,!1,"#0A7D8C",1.42,0,1,103),b.Pd=new a("Pd","Palladium",46,!1,"#006985",1.39,1.63,0,106),b.Ag=new a("Ag","Silver",47,!1,"#C0C0C0",1.45,1.72,0,107),b.Cd=new a("Cd","Cadmium",48,!1,"#FFD98F",1.44,1.58,0,114),b.In=new a("In","Indium",49,!1,"#A67573",1.42,1.93,0,115),b.Sn=new a("Sn","Tin",50,!1,"#668080",1.39,2.17,4,120),b.Sb=new a("Sb","Antimony",51,!1,"#9E63B5",1.39,0,3,121),b.Te=new a("Te","Tellurium",52,!0,"#D47A00",1.38,2.06,2,130),b.I=new a("I","Iodine",53,!0,"#940094",1.39,1.98,1,127),b.Xe=new a("Xe","Xenon",54,!1,"#429EB0",1.4,2.16,0,132),b.Cs=new a("Cs","Cesium",55,!1,"#57178F",2.44,0,0,133),b.Ba=new a("Ba","Barium",56,!1,"#00C900",2.15,0,0,138),b.La=new a("La","Lanthanum",57,!1,"#70D4FF",2.07,0,0,139),b.Ce=new a("Ce","Cerium",58,!1,"#FFFFC7",2.04,0,0,140),b.Pr=new a("Pr","Praseodymium",59,!1,"#D9FFC7",2.03,0,0,141),b.Nd=new a("Nd","Neodymium",60,!1,"#C7FFC7",2.01,0,0,142),b.Pm=new a("Pm","Promethium",61,!1,"#A3FFC7",1.99,0,0,0),b.Sm=new a("Sm","Samarium",62,!1,"#8FFFC7",1.98,0,0,152),b.Eu=new a("Eu","Europium",63,!1,"#61FFC7",1.98,0,0,153),b.Gd=new a("Gd","Gadolinium",64,!1,"#45FFC7",1.96,0,0,158),b.Tb=new a("Tb","Terbium",65,!1,"#30FFC7",1.94,0,0,159),b.Dy=new a("Dy","Dysprosium",66,!1,"#1FFFC7",1.92,0,0,164),b.Ho=new a("Ho","Holmium",67,!1,"#00FF9C",1.92,0,0,165),b.Er=new a("Er","Erbium",68,!1,"#00E675",1.89,0,0,166),b.Tm=new a("Tm","Thulium",69,!1,"#00D452",1.9,0,0,169),b.Yb=new a("Yb","Ytterbium",70,!1,"#00BF38",1.87,0,0,174),b.Lu=new a("Lu","Lutetium",71,!1,"#00AB24",1.87,0,0,175),b.Hf=new a("Hf","Hafnium",72,!1,"#4DC2FF",1.75,0,0,180),b.Ta=new a("Ta","Tantalum",73,!1,"#4DA6FF",1.7,0,1,181),b.W=new a("W","Tungsten",74,!1,"#2194D6",1.62,0,2,184),b.Re=new a("Re","Rhenium",75,!1,"#267DAB",1.51,0,3,187),b.Os=new a("Os","Osmium",76,!1,"#266696",1.44,0,2,192),b.Ir=new a("Ir","Iridium",77,!1,"#175487",1.41,0,3,193),b.Pt=new a("Pt","Platinum",78,!1,"#D0D0E0",1.36,1.75,0,195),b.Au=new a("Au","Gold",79,!1,"#FFD123",1.36,1.66,1,197),b.Hg=new a("Hg","Mercury",80,!1,"#B8B8D0",1.32,1.55,0,202),b.Tl=new a("Tl","Thallium",81,!1,"#A6544D",1.45,1.96,0,205),b.Pb=new a("Pb","Lead",82,!1,"#575961",1.46,2.02,4,208),b.Bi=new a("Bi","Bismuth",83,!1,"#9E4FB5",1.48,0,3,209),b.Po=new a("Po","Polonium",84,!1,"#AB5C00",1.4,0,2,0),b.At=new a("At","Astatine",85,!0,"#754F45",1.5,0,1,0),b.Rn=new a("Rn","Radon",86,!1,"#428296",1.5,0,0,0),b.Fr=new a("Fr","Francium",87,!1,"#420066",2.6,0,0,0),b.Ra=new a("Ra","Radium",88,!1,"#007D00",2.21,0,0,0),b.Ac=new a("Ac","Actinium",89,!1,"#70ABFA",2.15,0,0,0),b.Th=new a("Th","Thorium",90,!1,"#00BAFF",2.06,0,0,232),b.Pa=new a("Pa","Protactinium",91,!1,"#00A1FF",2,0,0,231),b.U=new a("U","Uranium",92,!1,"#008FFF",1.96,1.86,0,238),b.Np=new a("Np","Neptunium",93,!1,"#0080FF",1.9,0,0,0),b.Pu=new a("Pu","Plutonium",94,!1,"#006BFF",1.87,0,0,0),b.Am=new a("Am","Americium",95,!1,"#545CF2",1.8,0,0,0),b.Cm=new a("Cm","Curium",96,!1,"#785CE3",1.69,0,0,0),b.Bk=new a("Bk","Berkelium",97,!1,"#8A4FE3",0,0,0,0),b.Cf=new a("Cf","Californium",98,!1,"#A136D4",0,0,0,0),b.Es=new a("Es","Einsteinium",99,!1,"#B31FD4",0,0,0,0),b.Fm=new a("Fm","Fermium",100,!1,"#B31FBA",0,0,0,0),b.Md=new a("Md","Mendelevium",101,!1,"#B30DA6",0,0,0,0),b.No=new a("No","Nobelium",102,!1,"#BD0D87",0,0,0,0),b.Lr=new a("Lr","Lawrencium",103,!1,"#C70066",0,0,0,0),b.Rf=new a("Rf","Rutherfordium",104,!1,"#CC0059",0,0,0,0),b.Db=new a("Db","Dubnium",105,!1,"#D1004F",0,0,0,0),b.Sg=new a("Sg","Seaborgium",106,!1,"#D90045",0,0,0,0),b.Bh=new a("Bh","Bohrium",107,!1,"#E00038",0,0,0,0),b.Hs=new a("Hs","Hassium",108,!1,"#E6002E",0,0,0,0),b.Mt=new a("Mt","Meitnerium",109,!1,"#EB0026",0,0,0,0),b.Ds=new a("Ds","Darmstadtium",110,!1,"#000000",0,0,0,0),b.Rg=new a("Rg","Roentgenium",111,!1,"#000000",0,0,0,0),b.Cn=new a("Cn","Copernicium",112,!1,"#000000",0,0,0,0),b.Uut=new a("Uut","Ununtrium",113,!1,"#000000",0,0,0,0),b.Uuq=new a("Uuq","Ununquadium",114,!1,"#000000",0,0,0,0),b.Uup=new a("Uup","Ununpentium",115,!1,"#000000",0,0,0,0),b.Uuh=new a("Uuh","Ununhexium",116,!1,"#000000",0,0,0,0),b.Uus=new a("Uus","Ununseptium",117,!1,"#000000",0,0,0,0),b.Uuo=new a("Uuo","Ununoctium",118,!1,"#000000",0,0,0,0),b.H.pymolColor="#E6E6E6",b.C.pymolColor="#33FF33",b.N.pymolColor="#3333FF",b.O.pymolColor="#FF4D4D",b.F.pymolColor="#B3FFFF",b.S.pymolColor="#E6C640",b}(ChemDoodle.SYMBOLS),ChemDoodle.RESIDUE=function(){function a(a,b,c,d,e,f){this.symbol=a,this.name=b,this.polar=c,this.aminoColor=d,this.shapelyColor=e,this.acidity=f}var b=[];return b.Ala=new a("Ala","Alanine",!1,"#C8C8C8","#8CFF8C",0),b.Arg=new a("Arg","Arginine",!0,"#145AFF","#00007C",1),b.Asn=new a("Asn","Asparagine",!0,"#00DCDC","#FF7C70",0),b.Asp=new a("Asp","Aspartic Acid",!0,"#E60A0A","#A00042",-1),b.Cys=new a("Cys","Cysteine",!0,"#E6E600","#FFFF70",0),b.Gln=new a("Gln","Glutamine",!0,"#00DCDC","#FF4C4C",0),b.Glu=new a("Glu","Glutamic Acid",!0,"#E60A0A","#660000",-1),b.Gly=new a("Gly","Glycine",!1,"#EBEBEB","#FFFFFF",0),b.His=new a("His","Histidine",!0,"#8282D2","#7070FF",1),b.Ile=new a("Ile","Isoleucine",!1,"#0F820F","#004C00",0),b.Leu=new a("Leu","Leucine",!1,"#0F820F","#455E45",0),b.Lys=new a("Lys","Lysine",!0,"#145AFF","#4747B8",1),b.Met=new a("Met","Methionine",!1,"#E6E600","#B8A042",0),b.Phe=new a("Phe","Phenylalanine",!1,"#3232AA","#534C52",0),b.Pro=new a("Pro","Proline",!1,"#DC9682","#525252",0),b.Ser=new a("Ser","Serine",!0,"#FA9600","#FF7042",0),b.Thr=new a("Thr","Threonine",!0,"#FA9600","#B84C00",0),b.Trp=new a("Trp","Tryptophan",!0,"#B45AB4","#4F4600",0),b.Tyr=new a("Tyr","Tyrosine",!0,"#3232AA","#8C704C",0),b.Val=new a("Val","Valine",!1,"#0F820F","#FF8CFF",0),b.Asx=new a("Asx","Asparagine/Aspartic Acid",!0,"#FF69B4","#FF00FF",0),b.Glx=new a("Glx","Glutamine/Glutamic Acid",!0,"#FF69B4","#FF00FF",0),b["*"]=new a("*","Other",!1,"#BEA06E","#FF00FF",0),b.A=new a("A","Adenine",!1,"#BEA06E","#A0A0FF",0),b.G=new a("G","Guanine",!1,"#BEA06E","#FF7070",0),b.I=new a("I","",!1,"#BEA06E","#80FFFF",0),b.C=new a("C","Cytosine",!1,"#BEA06E","#FF8C4B",0),b.T=new a("T","Thymine",!1,"#BEA06E","#A0FFA0",0),b.U=new a("U","Uracil",!1,"#BEA06E","#FF8080",0),b}(),function(a){a.Queue=function(){this.queue=[]},a=a.Queue.prototype,a.queueSpace=0,a.getSize=function(){return this.queue.length-this.queueSpace},a.isEmpty=function(){return 0===this.queue.length},a.enqueue=function(a){this.queue.push(a)},a.dequeue=function(){var a;return this.queue.length&&(a=this.queue[this.queueSpace],2*++this.queueSpace>=this.queue.length&&(this.queue=this.queue.slice(this.queueSpace),this.queueSpace=0)),a},a.getOldestElement=function(){var a;return this.queue.length&&(a=this.queue[this.queueSpace]),a}}(ChemDoodle.structures),function(a,b){a.Point=function(a,b){this.x=a?a:0,this.y=b?b:0};var c=a.Point.prototype;c.sub=function(a){this.x-=a.x,this.y-=a.y},c.add=function(a){this.x+=a.x,this.y+=a.y},c.distance=function(a){var c=a.x-this.x;return a=a.y-this.y,b.sqrt(c*c+a*a)},c.angleForStupidCanvasArcs=function(a){var c=a.x-this.x;a=a.y-this.y;for(var d=0,d=0===c?0===a?0:a>0?b.PI/2:3*b.PI/2:0===a?c>0?0:b.PI:0>c?b.atan(a/c)+b.PI:0>a?b.atan(a/c)+2*b.PI:b.atan(a/c);0>d;)d+=2*b.PI;return d%=2*b.PI},c.angle=function(a){var c=a.x-this.x;a=this.y-a.y;for(var d=0,d=0===c?0===a?0:a>0?b.PI/2:3*b.PI/2:0===a?c>0?0:b.PI:0>c?b.atan(a/c)+b.PI:0>a?b.atan(a/c)+2*b.PI:b.atan(a/c);0>d;)d+=2*b.PI;return d%=2*b.PI}}(ChemDoodle.structures,Math),function(a,b,c,d,e,f){d.Atom=function(b,c,d,e){this.label=b?b.replace(/\s/g,""):"C",a[this.label]||(this.label="C"),this.x=c?c:0,this.y=d?d:0,this.z=e?e:0},d=d.Atom.prototype=new d.Point(0,0),d.charge=0,d.numLonePair=0,d.numRadical=0,d.mass=-1,d.coordinationNumber=0,d.bondNumber=0,d.angleOfLeastInterference=0,d.isHidden=!1,d.altLabel=void 0,d.any=!1,d.rgroup=-1,d.isLone=!1,d.isHover=!1,d.isSelected=!1,d.add3D=function(a){this.x+=a.x,this.y+=a.y,this.z+=a.z},d.sub3D=function(a){this.x-=a.x,this.y-=a.y,this.z-=a.z},d.distance3D=function(a){var b=a.x-this.x,c=a.y-this.y;return a=a.z-this.z,e.sqrt(b*b+c*c+a*a)},d.draw=function(a,d){if(this.isLassoed){var f=a.createRadialGradient(this.x-1,this.y-1,0,this.x,this.y,7);f.addColorStop(0,"rgba(212, 99, 0, 0)"),f.addColorStop(.7,"rgba(212, 99, 0, 0.8)"),a.fillStyle=f,a.beginPath(),a.arc(this.x,this.y,5,0,2*e.PI,!1),a.fill()}this.textBounds=[],this.specs&&(d=this.specs);var g=b.getFontString(d.atoms_font_size_2D,d.atoms_font_families_2D,d.atoms_font_bold_2D,d.atoms_font_italic_2D);a.font=g,a.fillStyle=this.getElementColor(d.atoms_useJMOLColors,d.atoms_usePYMOLColors,d.atoms_color,2),"H"===this.label&&d.atoms_HBlack_2D&&(a.fillStyle="black");var h;if(this.isLone&&!d.atoms_displayAllCarbonLabels_2D||d.atoms_circles_2D)a.beginPath(),a.arc(this.x,this.y,d.atoms_circleDiameter_2D/2,0,2*e.PI,!1),a.fill(),0<d.atoms_circleBorderWidth_2D&&(a.lineWidth=d.atoms_circleBorderWidth_2D,a.strokeStyle="black",a.stroke());else if(this.isLabelVisible(d))if(a.textAlign="center",a.textBaseline="middle",void 0!==this.altLabel){a.fillText(this.altLabel,this.x,this.y);var i=a.measureText(this.altLabel).width;this.textBounds.push({x:this.x-i/2,y:this.y-d.atoms_font_size_2D/2+1,w:i,h:d.atoms_font_size_2D-2})}else if(this.any)a.font=b.getFontString(d.atoms_font_size_2D+5,d.atoms_font_families_2D,!0),a.fillText("*",this.x+1,this.y+3),i=a.measureText("*").width,this.textBounds.push({x:this.x-i/2,y:this.y-d.atoms_font_size_2D/2+1,w:i,h:d.atoms_font_size_2D-2});else if(-1!==this.rgroup)f="R"+this.rgroup,a.fillText(f,this.x,this.y),i=a.measureText(f).width,this.textBounds.push({x:this.x-i/2,y:this.y-d.atoms_font_size_2D/2+1,w:i,h:d.atoms_font_size_2D-2});else{a.fillText(this.label,this.x,this.y),i=a.measureText(this.label).width,this.textBounds.push({x:this.x-i/2,y:this.y-d.atoms_font_size_2D/2+1,w:i,h:d.atoms_font_size_2D-2});var j=0;-1!==this.mass&&(f=a.font,a.font=b.getFontString(.7*d.atoms_font_size_2D,d.atoms_font_families_2D,d.atoms_font_bold_2D,d.atoms_font_italic_2D),j=a.measureText(this.mass).width,a.fillText(this.mass,this.x-j-.5,this.y-d.atoms_font_size_2D/2+1),this.textBounds.push({x:this.x-i/2-j-.5,y:this.y-1.7*d.atoms_font_size_2D/2+1,w:j,h:d.atoms_font_size_2D/2-1}),a.font=f);var f=i/2,k=this.getImplicitHydrogenCount();if(d.atoms_implicitHydrogens_2D&&k>0){h=0;var l=a.measureText("H").width,m=!0;if(k>1){var n=i/2+l/2,o=0,p=b.getFontString(.8*d.atoms_font_size_2D,d.atoms_font_families_2D,d.atoms_font_bold_2D,d.atoms_font_italic_2D);a.font=p;var q=a.measureText(k).width;1===this.bondNumber?this.angleOfLeastInterference>e.PI/2&&this.angleOfLeastInterference<3*e.PI/2&&(n=-i/2-q-l/2-j/2,m=!1,h=e.PI):this.angleOfLeastInterference<=e.PI/4||(this.angleOfLeastInterference<3*e.PI/4?(n=0,o=.9*-d.atoms_font_size_2D,0!==this.charge&&(o-=.3*d.atoms_font_size_2D),m=!1,h=e.PI/2):this.angleOfLeastInterference<=5*e.PI/4?(n=-i/2-q-l/2-j/2,m=!1,h=e.PI):this.angleOfLeastInterference<7*e.PI/4&&(n=0,o=.9*d.atoms_font_size_2D,m=!1,h=3*e.PI/2)),a.font=g,a.fillText("H",this.x+n,this.y+o),a.font=p,a.fillText(k,this.x+n+l/2+q/2,this.y+o+.3*d.atoms_font_size_2D),this.textBounds.push({x:this.x+n-l/2,y:this.y+o-d.atoms_font_size_2D/2+1,w:l,h:d.atoms_font_size_2D-2}),this.textBounds.push({x:this.x+n+l/2,y:this.y+o+.3*d.atoms_font_size_2D-d.atoms_font_size_2D/2+1,w:q,h:.8*d.atoms_font_size_2D-2})}else n=i/2+l/2,o=0,1===this.bondNumber?this.angleOfLeastInterference>e.PI/2&&this.angleOfLeastInterference<3*e.PI/2&&(n=-i/2-l/2-j/2,m=!1,h=e.PI):this.angleOfLeastInterference<=e.PI/4||(this.angleOfLeastInterference<3*e.PI/4?(n=0,o=.9*-d.atoms_font_size_2D,m=!1,h=e.PI/2):this.angleOfLeastInterference<=5*e.PI/4?(n=-i/2-l/2-j/2,
m=!1,h=e.PI):this.angleOfLeastInterference<7*e.PI/4&&(n=0,o=.9*d.atoms_font_size_2D,m=!1,h=3*e.PI/2)),a.fillText("H",this.x+n,this.y+o),this.textBounds.push({x:this.x+n-l/2,y:this.y+o-d.atoms_font_size_2D/2+1,w:l,h:d.atoms_font_size_2D-2});m&&(f+=l)}0!==this.charge&&(g=this.charge.toFixed(0),g="1"===g?"+":"-1"===g?"":b.stringStartsWith(g,"-")?g.substring(1)+"":g+"+",i=a.measureText(g).width,f+=i/2,a.textAlign="center",a.textBaseline="middle",a.font=b.getFontString(e.floor(.8*d.atoms_font_size_2D),d.atoms_font_families_2D,d.atoms_font_bold_2D,d.atoms_font_italic_2D),a.fillText(g,this.x+f-1,this.y-d.atoms_font_size_2D/2+1),this.textBounds.push({x:this.x+f-i/2-1,y:this.y-1.8*d.atoms_font_size_2D/2+5,w:i,h:d.atoms_font_size_2D/2-1}))}if(0<this.numLonePair||0<this.numRadical){for(a.fillStyle="black",k=this.angles.slice(0),f=this.angleOfLeastInterference,g=this.largestAngle,void 0!==h&&(k.push(h),k.sort(),g=c.angleBetweenLargest(k),f=g.angle%(2*e.PI),g=g.largest),i=[],j=0;j<this.numLonePair;j++)i.push({t:2});for(j=0;j<this.numRadical;j++)i.push({t:1});if(void 0===h&&e.abs(g-2*e.PI/k.length)<e.PI/60)for(k=e.ceil(i.length/k.length),j=0,l=i.length;l>j;j+=k,f+=g)this.drawElectrons(a,d,i.slice(j,e.min(i.length,j+k)),f,g,h);else this.drawElectrons(a,d,i,f,g,h)}},d.drawElectrons=function(a,b,c,d,f,g){g=f/(c.length+(0===this.bonds.length&&void 0===g?0:1)),f=d-f/2+g;for(var h=0;h<c.length;h++){var i=c[h];d=f+h*g;var j=this.x+Math.cos(d)*b.atoms_lonePairDistance_2D,k=this.y-Math.sin(d)*b.atoms_lonePairDistance_2D;2===i.t?(i=d+Math.PI/2,d=Math.cos(i)*b.atoms_lonePairSpread_2D/2,i=-Math.sin(i)*b.atoms_lonePairSpread_2D/2,a.beginPath(),a.arc(j+d,k+i,b.atoms_lonePairDiameter_2D,0,2*e.PI,!1),a.fill(),a.beginPath(),a.arc(j-d,k-i,b.atoms_lonePairDiameter_2D,0,2*e.PI,!1),a.fill()):1===i.t&&(a.beginPath(),a.arc(j,k,b.atoms_lonePairDiameter_2D,0,2*e.PI,!1),a.fill())}},d.drawDecorations=function(a){(this.isHover||this.isSelected)&&(a.strokeStyle=this.isHover?"#885110":"#0060B2",a.lineWidth=1.2,a.beginPath(),a.arc(this.x,this.y,this.isHover?7:15,0,2*e.PI,!1),a.stroke()),this.isOverlap&&(a.strokeStyle="#C10000",a.lineWidth=1.2,a.beginPath(),a.arc(this.x,this.y,7,0,2*e.PI,!1),a.stroke())},d.render=function(b,c,d){this.specs&&(c=this.specs);var e=f.translate(b.modelViewMatrix,[this.x,this.y,this.z],[]),g=c.atoms_useVDWDiameters_3D?a[this.label].vdWRadius*c.atoms_vdwMultiplier_3D:c.atoms_sphereDiameter_3D/2;0===g&&(g=1),f.scale(e,[g,g,g]),d||(d=c.atoms_color,c.atoms_useJMOLColors?d=a[this.label].jmolColor:c.atoms_usePYMOLColors&&(d=a[this.label].pymolColor),b.material.setDiffuseColor(d)),b.setMatrixUniforms(e),b.drawElements(b.TRIANGLES,(this.renderAsStar?b.starBuffer:b.sphereBuffer).vertexIndexBuffer.numItems,b.UNSIGNED_SHORT,0)},d.renderHighlight=function(b,c){if(this.isSelected||this.isHover){this.specs&&(c=this.specs);var d=f.translate(b.modelViewMatrix,[this.x,this.y,this.z],[]),e=c.atoms_useVDWDiameters_3D?a[this.label].vdWRadius*c.atoms_vdwMultiplier_3D:c.atoms_sphereDiameter_3D/2;0===e&&(e=1),e*=1.3,f.scale(d,[e,e,e]),b.setMatrixUniforms(d),b.material.setDiffuseColor(this.isHover?"#885110":"#0060B2"),b.drawElements(b.TRIANGLES,(this.renderAsStar?b.starBuffer:b.sphereBuffer).vertexIndexBuffer.numItems,b.UNSIGNED_SHORT,0)}},d.isLabelVisible=function(a){return!!(a.atoms_displayAllCarbonLabels_2D||"C"!==this.label||this.altLabel||this.any||-1!==this.rgroup||-1!==this.mass||0!==this.charge||a.atoms_showAttributedCarbons_2D&&(0!==this.numRadical||0!==this.numLonePair)||this.isHidden&&a.atoms_showHiddenCarbons_2D||a.atoms_displayTerminalCarbonLabels_2D&&1===this.bondNumber)},d.getImplicitHydrogenCount=function(){if("H"===this.label||!a[this.label]||!a[this.label].addH)return 0;var b=a[this.label].valency,c=b-this.coordinationNumber;return 0<this.numRadical&&(c=e.max(0,c-this.numRadical)),0<this.charge?(b=4-b,c=this.charge<=b?c+this.charge:4-this.coordinationNumber-this.charge+b):c+=this.charge,0>c?0:e.floor(c)},d.getBounds=function(){var a=new c.Bounds;if(a.expand(this.x,this.y),this.textBounds)for(var b=0,d=this.textBounds.length;d>b;b++){var e=this.textBounds[b];a.expand(e.x,e.y,e.x+e.w,e.y+e.h)}return a},d.getBounds3D=function(){var a=new c.Bounds;return a.expand3D(this.x,this.y,this.z),a},d.getElementColor=function(b,c,d,e){return 2==e&&this.any||-1!==this.rgroup?d:(b?d=a[this.label].jmolColor:c&&(d=a[this.label].pymolColor),d)}}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.structures,Math,ChemDoodle.lib.mat4),function(a,b,c,d,e,f,g){c.Bond=function(a,b,c){this.a1=a,this.a2=b,this.bondOrder=void 0!==c?c:1},c.Bond.STEREO_NONE="none",c.Bond.STEREO_PROTRUDING="protruding",c.Bond.STEREO_RECESSED="recessed",c.Bond.STEREO_AMBIGUOUS="ambiguous",a=c.Bond.prototype,a.stereo=c.Bond.STEREO_NONE,a.isHover=!1,a.ring=void 0,a.getCenter=function(){return new c.Point((this.a1.x+this.a2.x)/2,(this.a1.y+this.a2.y)/2)},a.getLength=function(){return this.a1.distance(this.a2)},a.getLength3D=function(){return this.a1.distance3D(this.a2)},a.contains=function(a){return a===this.a1||a===this.a2},a.getNeighbor=function(a){return a===this.a1?this.a2:a===this.a2?this.a1:void 0},a.draw=function(a,f){if(this.a1.x!==this.a2.x||this.a1.y!==this.a2.y){this.specs&&(f=this.specs);var g=this.a1.x,h=this.a2.x,i=this.a1.y,j=this.a2.y,k=this.a1.distance(this.a2),l=h-g,m=j-i;if(this.a1.isLassoed&&this.a2.isLassoed){var n=a.createLinearGradient(g,i,h,j);n.addColorStop(0,"rgba(212, 99, 0, 0)"),n.addColorStop(.5,"rgba(212, 99, 0, 0.8)"),n.addColorStop(1,"rgba(212, 99, 0, 0)");var o=2.5,p=this.a1.angle(this.a2)+e.PI/2,q=e.cos(p),p=e.sin(p),r=g-q*o,s=i+p*o,t=g+q*o,u=i-p*o,v=h+q*o,w=j-p*o,q=h-q*o,p=j+p*o;a.fillStyle=n,a.beginPath(),a.moveTo(r,s),a.lineTo(t,u),a.lineTo(v,w),a.lineTo(q,p),a.closePath(),a.fill()}if(f.atoms_display&&!f.atoms_circles_2D&&this.a1.isLabelVisible(f)&&this.a1.textBounds){for(o=q=0,r=this.a1.textBounds.length;r>o;o++)q=Math.max(q,d.calculateDistanceInterior(this.a1,this.a2,this.a1.textBounds[o]));q+=f.bonds_atomLabelBuffer_2D,q/=k,g+=l*q,i+=m*q}if(f.atoms_display&&!f.atoms_circles_2D&&this.a2.isLabelVisible(f)&&this.a2.textBounds){for(o=q=0,r=this.a2.textBounds.length;r>o;o++)q=Math.max(q,d.calculateDistanceInterior(this.a2,this.a1,this.a2.textBounds[o]));q+=f.bonds_atomLabelBuffer_2D,q/=k,h-=l*q,j-=m*q}if(f.bonds_clearOverlaps_2D&&(q=g+.15*l,p=i+.15*m,o=h-.15*l,k=j-.15*m,a.strokeStyle=f.backgroundColor,a.lineWidth=f.bonds_width_2D+2*f.bonds_overlapClearWidth_2D,a.lineCap="round",a.beginPath(),a.moveTo(q,p),a.lineTo(o,k),a.closePath(),a.stroke()),a.strokeStyle=f.bonds_color,a.fillStyle=f.bonds_color,a.lineWidth=f.bonds_width_2D,a.lineCap=f.bonds_ends_2D,(f.bonds_useJMOLColors||f.bonds_usePYMOLColors)&&(q=a.createLinearGradient(g,i,h,j),p=this.a1.getElementColor(f.bonds_useJMOLColors,f.bonds_usePYMOLColors,f.atoms_color,2),o=this.a2.getElementColor(f.bonds_useJMOLColors,f.bonds_usePYMOLColors,f.atoms_color,2),q.addColorStop(0,p),f.bonds_colorGradient||(q.addColorStop(.5,p),q.addColorStop(.51,o)),q.addColorStop(1,o),a.strokeStyle=q,a.fillStyle=q),f.bonds_lewisStyle_2D&&0===this.bondOrder%1)this.drawLewisStyle(a,f,g,i,h,j);else switch(this.bondOrder){case 0:for(h-=g,j-=i,h=e.sqrt(h*h+j*j),j=e.floor(h/f.bonds_dotSize_2D),h=(h-(j-1)*f.bonds_dotSize_2D)/2,1===j%2?h+=f.bonds_dotSize_2D/4:(h-=f.bonds_dotSize_2D/4,j+=2),j/=2,m=this.a1.angle(this.a2),q=g+h*Math.cos(m),p=i-h*Math.sin(m),a.beginPath(),o=0;j>o;o++)a.arc(q,p,f.bonds_dotSize_2D/2,0,2*e.PI,!1),q+=2*f.bonds_dotSize_2D*Math.cos(m),p-=2*f.bonds_dotSize_2D*Math.sin(m);a.fill();break;case.5:a.beginPath(),a.moveTo(g,i),b.contextHashTo(a,g,i,h,j,f.bonds_hashSpacing_2D,f.bonds_hashSpacing_2D),a.stroke();break;case 1:if(this.stereo===c.Bond.STEREO_PROTRUDING||this.stereo===c.Bond.STEREO_RECESSED)m=f.bonds_width_2D/2,o=this.a1.distance(this.a2)*f.bonds_wedgeThickness_2D/2,p=this.a1.angle(this.a2)+e.PI/2,q=e.cos(p),p=e.sin(p),r=g-q*m,s=i+p*m,t=g+q*m,u=i-p*m,v=h+q*o,w=j-p*o,q=h-q*o,p=j+p*o,a.beginPath(),a.moveTo(r,s),a.lineTo(t,u),a.lineTo(v,w),a.lineTo(q,p),a.closePath(),this.stereo===c.Bond.STEREO_PROTRUDING?a.fill():(a.save(),a.clip(),a.lineWidth=2*o,a.lineCap="butt",a.beginPath(),a.moveTo(g,i),b.contextHashTo(a,g,i,h,j,f.bonds_hashWidth_2D,f.bonds_hashSpacing_2D),a.stroke(),a.restore());else{if(this.stereo===c.Bond.STEREO_AMBIGUOUS){for(a.beginPath(),a.moveTo(g,i),h=e.floor(e.sqrt(l*l+m*m)/f.bonds_wavyLength_2D),p=this.a1.angle(this.a2)+e.PI/2,q=e.cos(p),p=e.sin(p),j=l/h,m/=h,o=0,r=h;r>o;o++)g+=j,i+=m,h=f.bonds_wavyLength_2D*q+g-.5*j,k=f.bonds_wavyLength_2D*-p+i-.5*m,l=f.bonds_wavyLength_2D*-q+g-.5*j,s=f.bonds_wavyLength_2D*p+i-.5*m,0===o%2?a.quadraticCurveTo(h,k,g,i):a.quadraticCurveTo(l,s,g,i);a.stroke();break}a.beginPath(),a.moveTo(g,i),a.lineTo(h,j),a.stroke()}break;case 1.5:case 2:this.stereo===c.Bond.STEREO_AMBIGUOUS?(o=this.a1.distance(this.a2)*f.bonds_saturationWidth_2D/2,p=this.a1.angle(this.a2)+e.PI/2,q=e.cos(p),p=e.sin(p),r=g-q*o,s=i+p*o,t=g+q*o,u=i-p*o,v=h+q*o,w=j-p*o,q=h-q*o,p=j+p*o,a.beginPath(),a.moveTo(r,s),a.lineTo(v,w),a.moveTo(t,u),a.lineTo(q,p),a.stroke()):!f.bonds_symmetrical_2D&&(this.ring||"C"===this.a1.label&&"C"===this.a2.label)?(a.beginPath(),a.moveTo(g,i),a.lineTo(h,j),q=0,k=this.a1.distance(this.a2),m=this.a1.angle(this.a2),p=m+e.PI/2,o=k*f.bonds_saturationWidth_2D,l=f.bonds_saturationAngle_2D,l<e.PI/2&&(q=-(o/e.tan(l))),e.abs(q)<k/2&&(l=g-e.cos(m)*q,g=h+e.cos(m)*q,h=i+e.sin(m)*q,i=j-e.sin(m)*q,q=e.cos(p),p=e.sin(p),r=l-q*o,s=h+p*o,t=l+q*o,u=h-p*o,v=g-q*o,w=i+p*o,q=g+q*o,p=i-p*o,!this.ring||this.ring.center.angle(this.a1)>this.ring.center.angle(this.a2)&&!(this.ring.center.angle(this.a1)-this.ring.center.angle(this.a2)>e.PI)||this.ring.center.angle(this.a1)-this.ring.center.angle(this.a2)<-e.PI?(a.moveTo(r,s),2===this.bondOrder?a.lineTo(v,w):b.contextHashTo(a,r,s,v,w,f.bonds_hashSpacing_2D,f.bonds_hashSpacing_2D)):(a.moveTo(t,u),2===this.bondOrder?a.lineTo(q,p):b.contextHashTo(a,t,u,q,p,f.bonds_hashSpacing_2D,f.bonds_hashSpacing_2D)),a.stroke())):(o=this.a1.distance(this.a2)*f.bonds_saturationWidth_2D/2,p=this.a1.angle(this.a2)+e.PI/2,q=e.cos(p),p=e.sin(p),r=g-q*o,s=i+p*o,t=g+q*o,u=i-p*o,v=h+q*o,w=j-p*o,q=h-q*o,p=j+p*o,a.beginPath(),a.moveTo(r,s),a.lineTo(q,p),a.moveTo(t,u),2===this.bondOrder?a.lineTo(v,w):b.contextHashTo(a,t,u,v,w,f.bonds_hashSpacing_2D,f.bonds_hashSpacing_2D),a.stroke());break;case 3:o=this.a1.distance(this.a2)*f.bonds_saturationWidth_2D,p=this.a1.angle(this.a2)+e.PI/2,q=e.cos(p),p=e.sin(p),r=g-q*o,s=i+p*o,t=g+q*o,u=i-p*o,v=h+q*o,w=j-p*o,q=h-q*o,p=j+p*o,a.beginPath(),a.moveTo(r,s),a.lineTo(q,p),a.moveTo(t,u),a.lineTo(v,w),a.moveTo(g,i),a.lineTo(h,j),a.stroke()}}},a.drawDecorations=function(a){if(this.isHover||this.isSelected){var b=2*e.PI,c=(this.a1.angleForStupidCanvasArcs(this.a2)+e.PI/2)%b;a.strokeStyle=this.isHover?"#885110":"#0060B2",a.lineWidth=1.2,a.beginPath();var d=(c+e.PI)%b,d=d%(2*e.PI);a.arc(this.a1.x,this.a1.y,7,c,d,!1),a.stroke(),a.beginPath(),c+=e.PI,d=(c+e.PI)%b,a.arc(this.a2.x,this.a2.y,7,c,d,!1),a.stroke()}},a.drawLewisStyle=function(a,b,c,d,f,g){var h=this.a1.angle(this.a2),i=h+e.PI/2;for(f-=c,g-=d,f=e.sqrt(f*f+g*g)/(this.bondOrder+1),g=f*e.cos(h),h=-f*e.sin(h),c+=g,d+=h,f=0;f<this.bondOrder;f++){var j=b.atoms_lonePairSpread_2D/2,k=c-e.cos(i)*j,l=d+e.sin(i)*j,m=c+e.cos(i)*j,j=d-e.sin(i)*j;a.beginPath(),a.arc(k-b.atoms_lonePairDiameter_2D/2,l-b.atoms_lonePairDiameter_2D/2,b.atoms_lonePairDiameter_2D,0,2*e.PI,!1),a.fill(),a.beginPath(),a.arc(m-b.atoms_lonePairDiameter_2D/2,j-b.atoms_lonePairDiameter_2D/2,b.atoms_lonePairDiameter_2D,0,2*e.PI,!1),a.fill(),c+=g,d+=h}},a.render=function(a,c,d){this.specs&&(c=this.specs);var h=this.a1.distance3D(this.a2);if(0!==h){var i,j,k=c.bonds_cylinderDiameter_3D/2,l=c.bonds_color,m=f.translate(a.modelViewMatrix,[this.a1.x,this.a1.y,this.a1.z],[]),n=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],o=[0,1,0],p=0;this.a1.x===this.a2.x&&this.a1.z===this.a2.z?(o=[0,0,1],this.a2.y<this.a1.y&&(p=e.PI)):(p=b.vec3AngleFrom(o,n),o=g.cross(o,n,[]));var q=c.bonds_useJMOLColors,r=c.bonds_usePYMOLColors;(q||r)&&(l=this.a1.getElementColor(q,r,l),i=this.a2.getElementColor(q,r,c.bonds_color),l!=i&&(j=f.translate(a.modelViewMatrix,[this.a2.x,this.a2.y,this.a2.z],[])));var s,q=[0];if(d){c.bonds_showBondOrders_3D&&1<this.bondOrder&&(q=[c.bonds_cylinderDiameter_3D],s=[0,0,1],d=f.inverse(a.rotationMatrix,[]),f.multiplyVec3(d,s),s=g.cross(n,s,[]),g.normalize(s));var k=1,t=c.bonds_pillSpacing_3D,n=c.bonds_pillHeight_3D;0==this.bondOrder&&(c.bonds_renderAsLines_3D?n=t:(n=c.bonds_pillDiameter_3D,n<c.bonds_cylinderDiameter_3D&&(n/=2),k=n/2,h/=k,t/=k/2)),d=n+t;var r=e.floor(h/d),u=(t+c.bonds_pillDiameter_3D+(h-d*r))/2,v=r;for(j&&(v=e.floor(r/2)),h=0,t=q.length;t>h;h++){var w=f.set(m,[]);0!==q[h]&&f.translate(w,g.scale(s,q[h],[])),0!==p&&f.rotate(w,p,o),1!=k&&f.scale(w,[k,k,k]),l&&a.material.setDiffuseColor(l),f.translate(w,[0,u,0]);for(var x=0;v>x;x++)c.bonds_renderAsLines_3D?0==this.bondOrder?(a.setMatrixUniforms(w),a.drawArrays(a.POINTS,0,1)):(f.scale(w,[1,n,1]),a.setMatrixUniforms(w),a.drawArrays(a.LINES,0,a.lineBuffer.vertexPositionBuffer.numItems),f.scale(w,[1,1/n,1])):(a.setMatrixUniforms(w),0==this.bondOrder?a.drawElements(a.TRIANGLES,a.sphereBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0):a.drawElements(a.TRIANGLES,a.pillBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)),f.translate(w,[0,d,0]);if(j){var y,z;for(c.bonds_renderAsLines_3D?(y=n,y/=2,z=0):(y=2/3,z=(1-y)/2),0!=r%2&&(f.scale(w,[1,y,1]),a.setMatrixUniforms(w),c.bonds_renderAsLines_3D?0==this.bondOrder?a.drawArrays(a.POINTS,0,1):a.drawArrays(a.LINES,0,a.lineBuffer.vertexPositionBuffer.numItems):0==this.bondOrder?a.drawElements(a.TRIANGLES,a.sphereBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0):a.drawElements(a.TRIANGLES,a.pillBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0),f.translate(w,[0,d*(1+z),0]),f.scale(w,[1,1/y,1])),f.set(j,w),0!==q[h]&&f.translate(w,g.scale(s,q[h],[])),f.rotate(w,p+e.PI,o),1!=k&&f.scale(w,[k,k,k]),i&&a.material.setDiffuseColor(i),f.translate(w,[0,u,0]),x=0;v>x;x++)c.bonds_renderAsLines_3D?0==this.bondOrder?(a.setMatrixUniforms(w),a.drawArrays(a.POINTS,0,1)):(f.scale(w,[1,n,1]),a.setMatrixUniforms(w),a.drawArrays(a.LINES,0,a.lineBuffer.vertexPositionBuffer.numItems),f.scale(w,[1,1/n,1])):(a.setMatrixUniforms(w),0==this.bondOrder?a.drawElements(a.TRIANGLES,a.sphereBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0):a.drawElements(a.TRIANGLES,a.pillBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)),f.translate(w,[0,d,0]);0!=r%2&&(f.scale(w,[1,y,1]),a.setMatrixUniforms(w),c.bonds_renderAsLines_3D?0==this.bondOrder?a.drawArrays(a.POINTS,0,1):a.drawArrays(a.LINES,0,a.lineBuffer.vertexPositionBuffer.numItems):0==this.bondOrder?a.drawElements(a.TRIANGLES,a.sphereBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0):a.drawElements(a.TRIANGLES,a.pillBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0),f.translate(w,[0,d*(1+z),0]),f.scale(w,[1,1/y,1]))}}}else{if(c.bonds_showBondOrders_3D){switch(this.bondOrder){case 1.5:q=[-c.bonds_cylinderDiameter_3D];break;case 2:q=[-c.bonds_cylinderDiameter_3D,c.bonds_cylinderDiameter_3D];break;case 3:q=[-1.2*c.bonds_cylinderDiameter_3D,0,1.2*c.bonds_cylinderDiameter_3D]}1<this.bondOrder&&(s=[0,0,1],d=f.inverse(a.rotationMatrix,[]),f.multiplyVec3(d,s),s=g.cross(n,s,[]),g.normalize(s))}else switch(this.bondOrder){case 0:k*=.25;break;case.5:case 1.5:k*=.5}for(j&&(h/=2),k=[k,h,k],h=0,t=q.length;t>h;h++)w=f.set(m,[]),0!==q[h]&&f.translate(w,g.scale(s,q[h],[])),0!==p&&f.rotate(w,p,o),f.scale(w,k),l&&a.material.setDiffuseColor(l),a.setMatrixUniforms(w),c.bonds_renderAsLines_3D?a.drawArrays(a.LINES,0,a.lineBuffer.vertexPositionBuffer.numItems):a.drawArrays(a.TRIANGLE_STRIP,0,a.cylinderBuffer.vertexPositionBuffer.numItems),j&&(f.set(j,w),0!==q[h]&&f.translate(w,g.scale(s,q[h],[])),f.rotate(w,p+e.PI,o),f.scale(w,k),i&&a.material.setDiffuseColor(i),a.setMatrixUniforms(w),c.bonds_renderAsLines_3D?a.drawArrays(a.LINES,0,a.lineBuffer.vertexPositionBuffer.numItems):a.drawArrays(a.TRIANGLE_STRIP,0,a.cylinderBuffer.vertexPositionBuffer.numItems))}}},a.renderHighlight=function(a,c){if(this.isSelected||this.isHover){this.specs&&(c=this.specs),this.specs&&(c=this.specs);var d=this.a1.distance3D(this.a2);if(0!==d){var h=c.bonds_cylinderDiameter_3D/1.2,i=f.translate(a.modelViewMatrix,[this.a1.x,this.a1.y,this.a1.z],[]),j=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],k=[0,1,0],l=0;this.a1.x===this.a2.x&&this.a1.z===this.a2.z?(j=[0,0,1],this.a2.y<this.a1.y&&(l=e.PI)):(l=b.vec3AngleFrom(k,j),j=g.cross(k,j,[])),d=[h,d,h],0!==l&&f.rotate(i,l,j),f.scale(i,d),a.setMatrixUniforms(i),a.material.setDiffuseColor(this.isHover?"#885110":"#0060B2"),a.drawArrays(a.TRIANGLE_STRIP,0,a.cylinderBuffer.vertexPositionBuffer.numItems)}}},a.renderPicker=function(a,c){this.specs&&(c=this.specs);var d=this.a1.distance3D(this.a2);if(0!==d){var h=c.bonds_cylinderDiameter_3D/2,i=f.translate(a.modelViewMatrix,[this.a1.x,this.a1.y,this.a1.z],[]),j=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],k=[0,1,0],l=0;this.a1.x===this.a2.x&&this.a1.z===this.a2.z?(k=[0,0,1],this.a2.y<this.a1.y&&(l=e.PI)):(l=b.vec3AngleFrom(k,j),k=g.cross(k,j,[]));var m,n=[0];if(c.bonds_showBondOrders_3D)if(c.bonds_renderAsLines_3D){switch(this.bondOrder){case 1.5:case 2:n=[-c.bonds_cylinderDiameter_3D,c.bonds_cylinderDiameter_3D];break;case 3:n=[-1.2*c.bonds_cylinderDiameter_3D,0,1.2*c.bonds_cylinderDiameter_3D]}if(1<this.bondOrder){m=[0,0,1];var o=f.inverse(a.rotationMatrix,[]);f.multiplyVec3(o,m),m=g.cross(j,m,[]),g.normalize(m)}}else switch(this.bondOrder){case 1.5:case 2:h*=3;break;case 3:h*=3.4}else switch(this.bondOrder){case 0:h*=.25;break;case.5:case 1.5:h*=.5}for(d=[h,d,h],h=0,j=n.length;j>h;h++)o=f.set(i,[]),0!==n[h]&&f.translate(o,g.scale(m,n[h],[])),0!==l&&f.rotate(o,l,k),f.scale(o,d),a.setMatrixUniforms(o),c.bonds_renderAsLines_3D?a.drawArrays(a.LINES,0,a.lineBuffer.vertexPositionBuffer.numItems):a.drawArrays(a.TRIANGLE_STRIP,0,a.cylinderBuffer.vertexPositionBuffer.numItems)}}}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.math,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(a,b){a.Ring=function(){this.atoms=[],this.bonds=[]};var c=a.Ring.prototype;c.center=void 0,c.setupBonds=function(){for(var a=0,b=this.bonds.length;b>a;a++)this.bonds[a].ring=this;this.center=this.getCenter()},c.getCenter=function(){for(var c=1/0,d=1/0,e=-(1/0),f=-(1/0),g=0,h=this.atoms.length;h>g;g++)c=b.min(this.atoms[g].x,c),d=b.min(this.atoms[g].y,d),e=b.max(this.atoms[g].x,e),f=b.max(this.atoms[g].y,f);return new a.Point((e+c)/2,(f+d)/2)}}(ChemDoodle.structures,Math),function(a,b,c,d,e){c.Molecule=function(){this.atoms=[],this.bonds=[],this.rings=[]};var f=c.Molecule.prototype;f.findRings=!0,f.draw=function(a,b){if(this.specs&&(b=this.specs),b.atoms_display&&!b.atoms_circles_2D)for(var c=0,d=this.atoms.length;d>c;c++)this.atoms[c].draw(a,b);if(b.bonds_display)for(c=0,d=this.bonds.length;d>c;c++)this.bonds[c].draw(a,b);if(b.atoms_display&&b.atoms_circles_2D)for(c=0,d=this.atoms.length;d>c;c++)this.atoms[c].draw(a,b)},f.render=function(a,e){this.specs&&(e=this.specs);var f=0<this.atoms.length&&void 0!==this.atoms[0].hetatm;if(f){if(e.macro_displayBonds){0<this.bonds.length&&(e.bonds_renderAsLines_3D&&!this.residueSpecs||this.residueSpecs&&this.residueSpecs.bonds_renderAsLines_3D?(a.lineWidth(this.residueSpecs?this.residueSpecs.bonds_width_2D:e.bonds_width_2D),a.lineBuffer.bindBuffers(a)):a.cylinderBuffer.bindBuffers(a),a.material.setTempColors(e.bonds_materialAmbientColor_3D,void 0,e.bonds_materialSpecularColor_3D,e.bonds_materialShininess_3D));for(var g=0,h=this.bonds.length;h>g;g++){var i=this.bonds[g];!i.a1.hetatm&&(-1===e.macro_atomToLigandDistance||void 0!==i.a1.closestDistance&&e.macro_atomToLigandDistance>=i.a1.closestDistance&&e.macro_atomToLigandDistance>=i.a2.closestDistance)&&i.render(a,this.residueSpecs?this.residueSpecs:e)}}if(e.macro_displayAtoms)for(0<this.atoms.length&&(a.sphereBuffer.bindBuffers(a),a.material.setTempColors(e.atoms_materialAmbientColor_3D,void 0,e.atoms_materialSpecularColor_3D,e.atoms_materialShininess_3D)),g=0,h=this.atoms.length;h>g;g++)i=this.atoms[g],!i.hetatm&&(-1===e.macro_atomToLigandDistance||void 0!==i.closestDistance&&e.macro_atomToLigandDistance>=i.closestDistance)&&i.render(a,this.residueSpecs?this.residueSpecs:e)}if(e.bonds_display){var j=[],k=[];for(0<this.bonds.length&&(e.bonds_renderAsLines_3D?(a.lineWidth(e.bonds_width_2D),a.lineBuffer.bindBuffers(a)):a.cylinderBuffer.bindBuffers(a),a.material.setTempColors(e.bonds_materialAmbientColor_3D,void 0,e.bonds_materialSpecularColor_3D,e.bonds_materialShininess_3D)),g=0,h=this.bonds.length;h>g;g++)i=this.bonds[g],(!f||i.a1.hetatm)&&(e.bonds_showBondOrders_3D?0==i.bondOrder?k.push(i):.5==i.bondOrder?j.push(i):(1.5==i.bondOrder&&j.push(i),i.render(a,e)):i.render(a,e));if(0<j.length)for(e.bonds_renderAsLines_3D||a.pillBuffer.bindBuffers(a),g=0,h=j.length;h>g;g++)j[g].render(a,e,!0);if(0<k.length)for(e.bonds_renderAsLines_3D||a.sphereBuffer.bindBuffers(a),g=0,h=k.length;h>g;g++)k[g].render(a,e,!0)}if(e.atoms_display){for(g=0,h=this.atoms.length;h>g;g++)i=this.atoms[g],i.bondNumber=0,i.renderAsStar=!1;for(g=0,h=this.bonds.length;h>g;g++)i=this.bonds[g],i.a1.bondNumber++,i.a2.bondNumber++;for(0<this.atoms.length&&(a.sphereBuffer.bindBuffers(a),a.material.setTempColors(e.atoms_materialAmbientColor_3D,void 0,e.atoms_materialSpecularColor_3D,e.atoms_materialShininess_3D)),j=[],g=0,h=this.atoms.length;h>g;g++)i=this.atoms[g],(!f||i.hetatm&&(e.macro_showWater||!i.isWater))&&(e.atoms_nonBondedAsStars_3D&&0===i.bondNumber?(i.renderAsStar=!0,j.push(i)):i.render(a,e));if(0<j.length)for(a.starBuffer.bindBuffers(a),g=0,h=j.length;h>g;g++)j[g].render(a,e)}if(this.chains){if(a.setMatrixUniforms(a.modelViewMatrix),e.proteins_displayRibbon)for(a.material.setTempColors(e.proteins_materialAmbientColor_3D,void 0,e.proteins_materialSpecularColor_3D,e.proteins_materialShininess_3D),f=0,j=this.ribbons.length;j>f;f++)if(i=e.proteins_ribbonCartoonize?this.cartoons[f]:this.ribbons[f],"none"!==e.proteins_residueColor){for(i.front.bindBuffers(a),k="rainbow"===e.proteins_residueColor,g=0,h=i.front.segments.length;h>g;g++)k&&a.material.setDiffuseColor(b.rainbowAt(g,h,e.macro_rainbowColors)),i.front.segments[g].render(a,e);for(i.back.bindBuffers(a),g=0,h=i.back.segments.length;h>g;g++)k&&a.material.setDiffuseColor(b.rainbowAt(g,h,e.macro_rainbowColors)),i.back.segments[g].render(a,e)}else if(e.proteins_ribbonCartoonize){for(i.front.bindBuffers(a),g=0,h=i.front.cartoonSegments.length;h>g;g++)i.front.cartoonSegments[g].render(a,e);for(i.back.bindBuffers(a),g=0,h=i.back.cartoonSegments.length;h>g;g++)i.back.cartoonSegments[g].render(a,e)}else i.front.render(a,e),i.back.render(a,e);if(e.proteins_displayBackbone){if(!this.alphaCarbonTrace)for(this.alphaCarbonTrace={nodes:[],edges:[]},f=0,j=this.chains.length;j>f;f++)if(k=this.chains[f],!(2<k.length&&d[k[2].name]&&"#BEA06E"===d[k[2].name].aminoColor)&&0<k.length)for(g=1,h=k.length-2;h>g;g++)i=k[g].cp1,i.chainColor=k.chainColor,this.alphaCarbonTrace.nodes.push(i),i=new c.Bond(k[g].cp1,k[g+1].cp1),i.residueName=k[g].name,i.chainColor=k.chainColor,this.alphaCarbonTrace.edges.push(i),g===k.length-3&&(i=k[g+1].cp1,i.chainColor=k.chainColor,this.alphaCarbonTrace.nodes.push(i));if(0<this.alphaCarbonTrace.nodes.length){for(f=new c.VisualSpecifications,f.atoms_display=!0,f.bonds_display=!0,f.atoms_sphereDiameter_3D=e.proteins_backboneThickness,f.bonds_cylinderDiameter_3D=e.proteins_backboneThickness,f.bonds_useJMOLColors=!1,f.atoms_color=e.proteins_backboneColor,f.bonds_color=e.proteins_backboneColor,f.atoms_useVDWDiameters_3D=!1,a.material.setTempColors(e.proteins_materialAmbientColor_3D,void 0,e.proteins_materialSpecularColor_3D,e.proteins_materialShininess_3D),a.material.setDiffuseColor(e.proteins_backboneColor),g=0,h=this.alphaCarbonTrace.nodes.length;h>g;g++)i=this.alphaCarbonTrace.nodes[g],e.macro_colorByChain&&(f.atoms_color=i.chainColor),a.sphereBuffer.bindBuffers(a),i.render(a,f);for(g=0,h=this.alphaCarbonTrace.edges.length;h>g;g++){var l,i=this.alphaCarbonTrace.edges[g],j=d[i.residueName]?d[i.residueName]:d["*"];e.macro_colorByChain?l=i.chainColor:"shapely"===e.proteins_residueColor?l=j.shapelyColor:"amino"===e.proteins_residueColor?l=j.aminoColor:"polarity"===e.proteins_residueColor?l=j.polar?"#C10000":"#FFFFFF":"acidity"===e.proteins_residueColor?l=1===j.acidity?"#0000FF":-1===j.acidity?"#FF0000":j.polar?"#FFFFFF":"#773300":"rainbow"===e.proteins_residueColor&&(l=b.rainbowAt(g,h,e.macro_rainbowColors)),l&&(f.bonds_color=l),a.cylinderBuffer.bindBuffers(a),i.render(a,f)}}}if(e.nucleics_display)for(a.material.setTempColors(e.nucleics_materialAmbientColor_3D,void 0,e.nucleics_materialSpecularColor_3D,e.nucleics_materialShininess_3D),f=0,j=this.tubes.length;j>f;f++)a.setMatrixUniforms(a.modelViewMatrix),i=this.tubes[f],i.render(a,e)}if(e.crystals_displayUnitCell&&this.unitCell&&(a.setMatrixUniforms(a.modelViewMatrix),this.unitCell.bindBuffers(a),a.material.setDiffuseColor(e.crystals_unitCellColor),a.lineWidth(e.crystals_unitCellLineWidth),a.drawElements(a.LINES,this.unitCell.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)),e.atoms_display){for(l=!1,g=0,h=this.atoms.length;h>g;g++)if(i=this.atoms[g],i.isHover||i.isSelected){l=!0;break}if(!l)for(g=0,h=this.bonds.length;h>g;g++)if(i=this.bonds[g],i.isHover||i.isSelected){l=!0;break}if(l){for(a.sphereBuffer.bindBuffers(a),a.blendFunc(a.SRC_ALPHA,a.ONE),a.material.setTempColors(e.atoms_materialAmbientColor_3D,void 0,"#000000",0),a.enable(a.BLEND),a.depthMask(!1),a.material.setAlpha(.4),a.sphereBuffer.bindBuffers(a),g=0,h=this.atoms.length;h>g;g++)i=this.atoms[g],(i.isHover||i.isSelected)&&i.renderHighlight(a,e);for(a.cylinderBuffer.bindBuffers(a),g=0,h=this.bonds.length;h>g;g++)i=this.bonds[g],(i.isHover||i.isSelected)&&i.renderHighlight(a,e);a.depthMask(!0),a.disable(a.BLEND),a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA)}}this.surface&&e.surfaces_display&&(a.setMatrixUniforms(a.modelViewMatrix),this.surface.bindBuffers(a),a.material.setTempColors(e.surfaces_materialAmbientColor_3D,e.surfaces_color,e.surfaces_materialSpecularColor_3D,e.surfaces_materialShininess_3D),"Dot"===e.surfaces_style?a.drawArrays(a.POINTS,0,this.surface.vertexPositionBuffer.numItems):a.drawElements(a.TRIANGLES,this.surface.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0))},f.renderPickFrame=function(a,c,d,e,f){this.specs&&(c=this.specs);var g=0<this.atoms.length&&void 0!==this.atoms[0].hetatm;if(f&&c.bonds_display){0<this.bonds.length&&(c.bonds_renderAsLines_3D?(a.lineWidth(c.bonds_width_2D),a.lineBuffer.bindBuffers(a)):a.cylinderBuffer.bindBuffers(a)),f=0;for(var h=this.bonds.length;h>f;f++){var i=this.bonds[f];g&&!i.a1.hetatm||(a.material.setDiffuseColor(b.idx2color(d.length)),i.renderPicker(a,c),d.push(i))}}if(e&&c.atoms_display){for(f=0,h=this.atoms.length;h>f;f++)e=this.atoms[f],e.bondNumber=0,e.renderAsStar=!1;for(f=0,h=this.bonds.length;h>f;f++)i=this.bonds[f],i.a1.bondNumber++,i.a2.bondNumber++;for(0<this.atoms.length&&a.sphereBuffer.bindBuffers(a),i=[],f=0,h=this.atoms.length;h>f;f++)e=this.atoms[f],(!g||e.hetatm&&(c.macro_showWater||!e.isWater))&&(c.atoms_nonBondedAsStars_3D&&0===e.bondNumber?(e.renderAsStar=!0,i.push(e)):(a.material.setDiffuseColor(b.idx2color(d.length)),e.render(a,c,!0),d.push(e)));if(0<i.length)for(a.starBuffer.bindBuffers(a),f=0,h=i.length;h>f;f++)e=i[f],a.material.setDiffuseColor(b.idx2color(d.length)),e.render(a,c,!0),d.push(e)}},f.getCenter3D=function(){if(1===this.atoms.length)return new c.Atom("C",this.atoms[0].x,this.atoms[0].y,this.atoms[0].z);var a=1/0,b=1/0,d=1/0,f=-(1/0),g=-(1/0),h=-(1/0);if(this.chains)for(var i=0,j=this.chains.length;j>i;i++)for(var k=this.chains[i],l=0,m=k.length;m>l;l++)var n=k[l],a=e.min(n.cp1.x,n.cp2.x,a),b=e.min(n.cp1.y,n.cp2.y,b),d=e.min(n.cp1.z,n.cp2.z,d),f=e.max(n.cp1.x,n.cp2.x,f),g=e.max(n.cp1.y,n.cp2.y,g),h=e.max(n.cp1.z,n.cp2.z,h);for(i=0,j=this.atoms.length;j>i;i++)a=e.min(this.atoms[i].x,a),b=e.min(this.atoms[i].y,b),d=e.min(this.atoms[i].z,d),f=e.max(this.atoms[i].x,f),g=e.max(this.atoms[i].y,g),h=e.max(this.atoms[i].z,h);return new c.Atom("C",(f+a)/2,(g+b)/2,(h+d)/2)},f.getCenter=function(){if(1===this.atoms.length)return new c.Point(this.atoms[0].x,this.atoms[0].y);for(var a=1/0,b=1/0,d=-(1/0),f=-(1/0),g=0,h=this.atoms.length;h>g;g++)a=e.min(this.atoms[g].x,a),b=e.min(this.atoms[g].y,b),d=e.max(this.atoms[g].x,d),f=e.max(this.atoms[g].y,f);return new c.Point((d+a)/2,(f+b)/2)},f.getDimension=function(){if(1===this.atoms.length)return new c.Point(0,0);var a=1/0,b=1/0,d=-(1/0),f=-(1/0);if(this.chains){for(var g=0,h=this.chains.length;h>g;g++)for(var i=this.chains[g],j=0,k=i.length;k>j;j++)var l=i[j],a=e.min(l.cp1.x,l.cp2.x,a),b=e.min(l.cp1.y,l.cp2.y,b),d=e.max(l.cp1.x,l.cp2.x,d),f=e.max(l.cp1.y,l.cp2.y,f);a-=30,b-=30,d+=30,f+=30}for(g=0,h=this.atoms.length;h>g;g++)a=e.min(this.atoms[g].x,a),b=e.min(this.atoms[g].y,b),d=e.max(this.atoms[g].x,d),f=e.max(this.atoms[g].y,f);return new c.Point(d-a,f-b)},f.check=function(b){if(b&&this.doChecks){if(this.findRings)if(this.bonds.length-this.atoms.length!==this.fjNumCache){this.rings=new a.informatics.SSSRFinder(this).rings;for(var c=0,d=this.bonds.length;d>c;c++)this.bonds[c].ring=void 0;for(c=0,d=this.rings.length;d>c;c++)this.rings[c].setupBonds()}else for(c=0,d=this.rings.length;d>c;c++){var e=this.rings[c];e.center=e.getCenter()}for(c=0,d=this.atoms.length;d>c;c++)if(this.atoms[c].isLone=!1,"C"===this.atoms[c].label){for(var f=e=0,g=this.bonds.length;g>f;f++)(this.bonds[f].a1===this.atoms[c]||this.bonds[f].a2===this.atoms[c])&&e++;0===e&&(this.atoms[c].isLone=!0)}for(e=!1,c=0,d=this.atoms.length;d>c;c++)0!==this.atoms[c].z&&(e=!0);e&&(this.sortAtomsByZ(),this.sortBondsByZ()),this.setupMetaData(),this.atomNumCache=this.atoms.length,this.bondNumCache=this.bonds.length,this.fjNumCache=this.bonds.length-this.atoms.length}this.doChecks=!b},f.getAngles=function(a){for(var b=[],c=0,d=this.bonds.length;d>c;c++)this.bonds[c].contains(a)&&b.push(a.angle(this.bonds[c].getNeighbor(a)));return b.sort(),b},f.getCoordinationNumber=function(a){for(var b=0,c=0,d=a.length;d>c;c++)b+=a[c].bondOrder;return b},f.getBonds=function(a){for(var b=[],c=0,d=this.bonds.length;d>c;c++)this.bonds[c].contains(a)&&b.push(this.bonds[c]);return b},f.sortAtomsByZ=function(){for(var a=1,b=this.atoms.length;b>a;a++)for(var c=a;c>0&&this.atoms[c].z<this.atoms[c-1].z;){var d=this.atoms[c];this.atoms[c]=this.atoms[c-1],this.atoms[c-1]=d,c--}},f.sortBondsByZ=function(){for(var a=1,b=this.bonds.length;b>a;a++)for(var c=a;c>0&&this.bonds[c].a1.z+this.bonds[c].a2.z<this.bonds[c-1].a1.z+this.bonds[c-1].a2.z;){var d=this.bonds[c];this.bonds[c]=this.bonds[c-1],this.bonds[c-1]=d,c--}},f.setupMetaData=function(){for(var a=this.getCenter(),c=0,d=this.atoms.length;d>c;c++){var f=this.atoms[c];f.bonds=this.getBonds(f),f.angles=this.getAngles(f),f.isHidden=2===f.bonds.length&&e.abs(e.abs(f.angles[1]-f.angles[0])-e.PI)<e.PI/30&&f.bonds[0].bondOrder===f.bonds[1].bondOrder;var g=b.angleBetweenLargest(f.angles);f.angleOfLeastInterference=g.angle%(2*e.PI),f.largestAngle=g.largest,f.coordinationNumber=this.getCoordinationNumber(f.bonds),f.bondNumber=f.bonds.length,f.molCenter=a}for(c=0,d=this.bonds.length;d>c;c++)this.bonds[c].molCenter=a},f.scaleToAverageBondLength=function(a){var b=this.getAverageBondLength();if(0!==b){a/=b;for(var b=0,c=this.atoms.length;c>b;b++)this.atoms[b].x*=a,this.atoms[b].y*=a}},f.getAverageBondLength=function(){if(0===this.bonds.length)return 0;for(var a=0,b=0,c=this.bonds.length;c>b;b++)a+=this.bonds[b].getLength();return a/=this.bonds.length},f.getBounds=function(){for(var a=new b.Bounds,c=0,d=this.atoms.length;d>c;c++)a.expand(this.atoms[c].getBounds());if(this.chains){for(c=0,d=this.chains.length;d>c;c++)for(var e=this.chains[c],f=0,g=e.length;g>f;f++){var h=e[f];a.expand(h.cp1.x,h.cp1.y),a.expand(h.cp2.x,h.cp2.y)}a.minX-=30,
a.minY-=30,a.maxX+=30,a.maxY+=30}return a},f.getBounds3D=function(){for(var a=new b.Bounds,c=0,d=this.atoms.length;d>c;c++)a.expand(this.atoms[c].getBounds3D());if(this.chains)for(c=0,d=this.chains.length;d>c;c++)for(var e=this.chains[c],f=0,g=e.length;g>f;f++){var h=e[f];a.expand3D(h.cp1.x,h.cp1.y,h.cp1.z),a.expand3D(h.cp2.x,h.cp2.y,h.cp2.z)}return a}}(ChemDoodle,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.RESIDUE,Math),function(a,b,c,d){var e,f=-1;a.Residue=function(a){this.resSeq=a};var g=a.Residue.prototype;g.setup=function(b,c){this.horizontalResolution=c;var e=[b.x-this.cp1.x,b.y-this.cp1.y,b.z-this.cp1.z],f=d.cross(e,[this.cp2.x-this.cp1.x,this.cp2.y-this.cp1.y,this.cp2.z-this.cp1.z],[]);for(this.D=d.cross(f,e,[]),d.normalize(f),d.normalize(this.D),this.guidePointsSmall=[],this.guidePointsLarge=[],e=[(b.x+this.cp1.x)/2,(b.y+this.cp1.y)/2,(b.z+this.cp1.z)/2],this.helix&&(d.scale(f,1.5),d.add(e,f)),this.guidePointsSmall[0]=new a.Atom("",e[0]-this.D[0]/2,e[1]-this.D[1]/2,e[2]-this.D[2]/2),f=1;c>f;f++)this.guidePointsSmall[f]=new a.Atom("",this.guidePointsSmall[0].x+this.D[0]*f/c,this.guidePointsSmall[0].y+this.D[1]*f/c,this.guidePointsSmall[0].z+this.D[2]*f/c);for(d.scale(this.D,4),this.guidePointsLarge[0]=new a.Atom("",e[0]-this.D[0]/2,e[1]-this.D[1]/2,e[2]-this.D[2]/2),f=1;c>f;f++)this.guidePointsLarge[f]=new a.Atom("",this.guidePointsLarge[0].x+this.D[0]*f/c,this.guidePointsLarge[0].y+this.D[1]*f/c,this.guidePointsLarge[0].z+this.D[2]*f/c)},g.getGuidePointSet=function(a){return 0===a?this.helix||this.sheet?this.guidePointsLarge:this.guidePointsSmall:1===a?this.guidePointsSmall:2===a?this.guidePointsLarge:void 0},g.computeLineSegments=function(a,b,d,g,h){if(h!==f){var i=h*h,j=h*h*h;e=c.multiply([-1/6,.5,-.5,1/6,.5,-1,.5,0,-.5,0,.5,0,1/6,2/3,1/6,0],[6/j,0,0,0,6/j,2/i,0,0,1/j,1/i,1/h,0,0,0,0,1],[]),f=h}this.split=b.helix!==this.helix||b.sheet!==this.sheet,this.lineSegments=this.innerCompute(0,a,b,d,!1,h),g&&(this.lineSegmentsCartoon=this.innerCompute(b.helix||b.sheet?2:1,a,b,d,!0,h))},g.innerCompute=function(f,g,h,i,j,k){var l=[],m=this.getGuidePointSet(f);g=g.getGuidePointSet(f),h=h.getGuidePointSet(f);for(var n=i.getGuidePointSet(f),o=0,p=this.guidePointsLarge.length;p>o;o++){for(var q=c.multiply([g[o].x,g[o].y,g[o].z,1,m[o].x,m[o].y,m[o].z,1,h[o].x,h[o].y,h[o].z,1,n[o].x,n[o].y,n[o].z,1],e,[]),r=[],s=0;k>s;s++){for(f=3;f>0;f--)for(i=0;4>i;i++)q[4*f+i]+=q[4*(f-1)+i];r[s]=new a.Atom("",q[12]/q[15],q[13]/q[15],q[14]/q[15])}l[o]=r}if(j&&this.arrow)for(f=0;k>f;f++)for(j=1.5-1.3*f/k,m=b.floor(this.horizontalResolution/2),g=l[m],i=0,h=l.length;h>i;i++)i!==m&&(n=g[f],o=l[i][f],p=[o.x-n.x,o.y-n.y,o.z-n.z],d.scale(p,j),o.x=n.x+p[0],o.y=n.y+p[1],o.z=n.z+p[2]);return l}}(ChemDoodle.structures,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(a,b,c,d,e){b.Spectrum=function(){this.data=[],this.metadata=[],this.dataDisplay=[],this.memory={offsetTop:0,offsetLeft:0,offsetBottom:0,flipXAxis:!1,scale:1,width:0,height:0}},d=b.Spectrum.prototype,d.title=void 0,d.xUnit=void 0,d.yUnit=void 0,d.continuous=!0,d.integrationSensitivity=.01,d.draw=function(b,c,d,f){this.specs&&(c=this.specs);var g=5,h=0,i=0;b.fillStyle=c.text_color,b.textAlign="center",b.textBaseline="alphabetic",b.font=a.getFontString(c.text_font_size,c.text_font_families),this.xUnit&&(i+=c.text_font_size,b.fillText(this.xUnit,d/2,f-2)),this.yUnit&&c.plots_showYAxis&&(h+=c.text_font_size,b.save(),b.translate(c.text_font_size,f/2),b.rotate(-e.PI/2),b.fillText(this.yUnit,0,0),b.restore()),this.title&&(g+=c.text_font_size,b.fillText(this.title,d/2,c.text_font_size)),i+=5+c.text_font_size,c.plots_showYAxis&&(h+=5+b.measureText("1000").width),c.plots_showGrid&&(b.strokeStyle=c.plots_gridColor,b.lineWidth=c.plots_gridLineWidth,b.strokeRect(h,g,d-h,f-i-g)),b.textAlign="center",b.textBaseline="top";for(var j=this.maxX-this.minX,k=j/100,l=.001;k>l||j/l>25;)l*=10;for(var m=0,n=c.plots_flipXAxis?d:0,j=e.round(this.minX/l)*l;j<=this.maxX;j+=l/2){var o=this.getTransformedX(j,c,d,h);if(o>h)if(b.strokeStyle="black",b.lineWidth=1,0===m%2){for(b.beginPath(),b.moveTo(o,f-i),b.lineTo(o,f-i+2),b.stroke(),k=j.toFixed(5);"0"===k.charAt(k.length-1);)k=k.substring(0,k.length-1);"."===k.charAt(k.length-1)&&(k=k.substring(0,k.length-1));var p=b.measureText(k).width;c.plots_flipXAxis&&(p*=-1);var q=o-p/2;(c.plots_flipXAxis?n>q:q>n)&&(b.fillText(k,o,f-i+2),n=o+p/2),c.plots_showGrid&&(b.strokeStyle=c.plots_gridColor,b.lineWidth=c.plots_gridLineWidth,b.beginPath(),b.moveTo(o,f-i),b.lineTo(o,g),b.stroke())}else b.beginPath(),b.moveTo(o,f-i),b.lineTo(o,f-i+2),b.stroke();m++}if(c.plots_showYAxis||c.plots_showGrid)for(l=1/c.scale,b.textAlign="right",b.textBaseline="middle",j=0;10>=j;j++)if(k=l/10*j,m=g+(f-i-g)*(1-k*c.scale),c.plots_showGrid&&(b.strokeStyle=c.plots_gridColor,b.lineWidth=c.plots_gridLineWidth,b.beginPath(),b.moveTo(h,m),b.lineTo(d,m),b.stroke()),c.plots_showYAxis){if(b.strokeStyle="black",b.lineWidth=1,b.beginPath(),b.moveTo(h,m),b.lineTo(h-3,m),b.stroke(),k*=100,n=e.max(0,3-e.floor(k).toString().length),k=k.toFixed(n),n>0)for(;"0"===k.charAt(k.length-1);)k=k.substring(0,k.length-1);"."===k.charAt(k.length-1)&&(k=k.substring(0,k.length-1)),b.fillText(k,h-3,m)}if(b.strokeStyle="black",b.lineWidth=1,b.beginPath(),b.moveTo(d,f-i),b.lineTo(h,f-i),c.plots_showYAxis&&b.lineTo(h,g),b.stroke(),0<this.dataDisplay.length)for(b.textAlign="left",b.textBaseline="top",j=k=0,l=this.dataDisplay.length;l>j;j++)if(this.dataDisplay[j].value)b.fillText([this.dataDisplay[j].display,": ",this.dataDisplay[j].value].join(""),h+10,g+10+k*(c.text_font_size+5)),k++;else if(this.dataDisplay[j].tag)for(m=0,n=this.metadata.length;n>m;m++)if(a.stringStartsWith(this.metadata[m],this.dataDisplay[j].tag)){n=this.metadata[m],this.dataDisplay[j].display&&(n=this.metadata[m].indexOf("="),n=[this.dataDisplay[j].display,": ",n>-1?this.metadata[m].substring(n+2):this.metadata[m]].join("")),b.fillText(n,h+10,g+10+k*(c.text_font_size+5)),k++;break}this.drawPlot(b,c,d,f,g,h,i),this.memory.offsetTop=g,this.memory.offsetLeft=h,this.memory.offsetBottom=i,this.memory.flipXAxis=c.plots_flipXAxis,this.memory.scale=c.scale,this.memory.width=d,this.memory.height=f},d.drawPlot=function(a,c,d,f,g,h,i){this.specs&&(c=this.specs),a.strokeStyle=c.plots_color,a.lineWidth=c.plots_width;var j=[];if(a.beginPath(),this.continuous)for(var k=!1,l=0,m=!1,n=0,o=this.data.length;o>n;n++){var p,q=this.getTransformedX(this.data[n].x,c,d,h);if(o>n&&!k&&(p=this.getTransformedX(this.data[n+1].x,c,d,h)),q>=h&&d>q||void 0!==p&&p>=h&&d>p){var r=this.getTransformedY(this.data[n].y,c,f,i,g);if(c.plots_showIntegration&&e.abs(this.data[n].y)>this.integrationSensitivity&&j.push(new b.Point(this.data[n].x,this.data[n].y)),k||(a.moveTo(q,r),k=!0),a.lineTo(q,r),l++,0===l%1e3&&(a.stroke(),a.beginPath(),a.moveTo(q,r)),m)break}else k&&(m=!0)}else for(n=0,o=this.data.length;o>n;n++)q=this.getTransformedX(this.data[n].x,c,d,h),q>=h&&d>q&&(a.moveTo(q,f-i),a.lineTo(q,this.getTransformedY(this.data[n].y,c,f,i,g)));if(a.stroke(),c.plots_showIntegration&&1<j.length){if(a.strokeStyle=c.plots_integrationColor,a.lineWidth=c.plots_integrationLineWidth,a.beginPath(),n=j[1].x>j[0].x,this.flipXAxis&&!n||!this.flipXAxis&&n){for(n=j.length-2;n>=0;n--)j[n].y+=j[n+1].y;k=j[0].y}else{for(n=1,o=j.length;o>n;n++)j[n].y+=j[n-1].y;k=j[j.length-1].y}for(n=0,o=j.length;o>n;n++)q=this.getTransformedX(j[n].x,c,d,h),r=this.getTransformedY(j[n].y/c.scale/k,c,f,i,g),0===n?a.moveTo(q,r):a.lineTo(q,r);a.stroke()}},d.getTransformedY=function(a,b,c,d,e){return e+(c-d-e)*(1-a*b.scale)},d.getInverseTransformedY=function(a){return 100*((1-(a-this.memory.offsetTop)/(this.memory.height-this.memory.offsetBottom-this.memory.offsetTop))/this.memory.scale)},d.getTransformedX=function(a,b,c,d){return a=d+(a-this.minX)/(this.maxX-this.minX)*(c-d),b.plots_flipXAxis&&(a=c+d-a),a},d.getInverseTransformedX=function(a){return this.memory.flipXAxis&&(a=this.memory.width+this.memory.offsetLeft-a),(a-this.memory.offsetLeft)*(this.maxX-this.minX)/(this.memory.width-this.memory.offsetLeft)+this.minX},d.setup=function(){for(var a=Number.MAX_VALUE,b=Number.MIN_VALUE,c=Number.MIN_VALUE,d=0,f=this.data.length;f>d;d++)a=e.min(a,this.data[d].x),b=e.max(b,this.data[d].x),c=e.max(c,this.data[d].y);for(this.continuous?(this.minX=a,this.maxX=b):(this.minX=a-1,this.maxX=b+1),d=0,f=this.data.length;f>d;d++)this.data[d].y/=c},d.zoom=function(a,b,d,f){if(a=this.getInverseTransformedX(a),b=this.getInverseTransformedX(b),this.minX=e.min(a,b),this.maxX=e.max(a,b),f){for(f=Number.MIN_VALUE,b=0,a=this.data.length;a>b;b++)c.isBetween(this.data[b].x,this.minX,this.maxX)&&(f=e.max(f,this.data[b].y));return 1/f}},d.translate=function(a,b){var c=a/(b-this.memory.offsetLeft)*(this.maxX-this.minX)*(this.memory.flipXAxis?1:-1);this.minX+=c,this.maxX+=c},d.alertMetadata=function(){alert(this.metadata.join("\n"))},d.getInternalCoordinates=function(a,b){return new ChemDoodle.structures.Point(this.getInverseTransformedX(a),this.getInverseTransformedY(b))},d.getClosestPlotInternalCoordinates=function(a){var b=this.getInverseTransformedX(a-1);if(a=this.getInverseTransformedX(a+1),b>a){var d=b,b=a;a=d}for(var d=-1,e=-(1/0),f=!1,g=0,h=this.data.length;h>g;g++){var i=this.data[g];if(c.isBetween(i.x,b,a))i.y>e&&(f=!0,e=i.y,d=g);else if(f)break}return-1!==d?(i=this.data[d],new ChemDoodle.structures.Point(i.x,100*i.y)):void 0},d.getClosestPeakInternalCoordinates=function(a){var b=this.getInverseTransformedX(a);a=0;for(var c=1/0,d=0,f=this.data.length;f>d;d++){var g=e.abs(this.data[d].x-b);if(!(c>=g))break;c=g,a=d}for(b=highestRight=a,c=maxRight=this.data[a].y,d=a+1,f=this.data.length;f>d&&this.data[d].y+.05>maxRight;d++)maxRight=this.data[d].y,highestRight=d;for(d=a-1;d>=0&&this.data[d].y+.05>c;d--)c=this.data[d].y,b=d;return a=this.data[b-a>highestRight-a?highestRight:b],new ChemDoodle.structures.Point(a.x,100*a.y)}}(ChemDoodle.extensions,ChemDoodle.structures,ChemDoodle.math,ChemDoodle.lib.jQuery,Math),function(a,b,c){b._Shape=function(){},b=b._Shape.prototype,b.drawDecorations=function(a,b){if(this.isHover)for(var c=this.getPoints(),d=0,e=c.length;e>d;d++){var f=c[d];this.drawAnchor(a,b,f,f===this.hoverPoint)}},b.getBounds=function(){for(var b=new a.Bounds,c=this.getPoints(),d=0,e=c.length;e>d;d++){var f=c[d];b.expand(f.x,f.y)}return b},b.drawAnchor=function(a,b,d,e){a.save(),a.translate(d.x,d.y),a.rotate(c.PI/4),a.scale(1/b.scale,1/b.scale),a.beginPath(),a.moveTo(-4,-4),a.lineTo(4,-4),a.lineTo(4,4),a.lineTo(-4,4),a.closePath(),a.fillStyle=e?"#885110":"white",a.fill(),a.beginPath(),a.moveTo(-4,-2),a.lineTo(-4,-4),a.lineTo(-2,-4),a.moveTo(2,-4),a.lineTo(4,-4),a.lineTo(4,-2),a.moveTo(4,2),a.lineTo(4,4),a.lineTo(2,4),a.moveTo(-2,4),a.lineTo(-4,4),a.lineTo(-4,2),a.moveTo(-4,-2),a.strokeStyle="rgba(0,0,0,.2)",a.lineWidth=5,a.stroke(),a.strokeStyle="blue",a.lineWidth=1,a.stroke(),a.restore()}}(ChemDoodle.math,ChemDoodle.structures.d2,Math),function(a,b,c,d,e){d.Bracket=function(a,b){this.p1=a?a:new c.Point,this.p2=b?b:new c.Point},d=d.Bracket.prototype=new d._Shape,d.charge=0,d.mult=0,d.repeat=0,d.draw=function(b,c){var d=e.min(this.p1.x,this.p2.x),f=e.max(this.p1.x,this.p2.x),g=e.min(this.p1.y,this.p2.y),h=e.max(this.p1.y,this.p2.y),i=h-g,j=i/10;b.beginPath(),b.moveTo(d+j,g),b.lineTo(d,g),b.lineTo(d,h),b.lineTo(d+j,h),b.moveTo(f-j,h),b.lineTo(f,h),b.lineTo(f,g),b.lineTo(f-j,g),this.isLassoed&&(j=b.createLinearGradient(this.p1.x,this.p1.y,this.p2.x,this.p2.y),j.addColorStop(0,"rgba(212, 99, 0, 0)"),j.addColorStop(.5,"rgba(212, 99, 0, 0.8)"),j.addColorStop(1,"rgba(212, 99, 0, 0)"),b.lineWidth=c.shapes_lineWidth_2D+5,b.strokeStyle=j,b.lineJoin="miter",b.lineCap="square",b.stroke()),b.strokeStyle=c.shapes_color,b.lineWidth=c.shapes_lineWidth_2D,b.lineJoin="miter",b.lineCap="butt",b.stroke(),0!==this.charge&&(b.fillStyle=c.text_color,b.textAlign="left",b.textBaseline="alphabetic",b.font=a.getFontString(c.text_font_size,c.text_font_families),j=this.charge.toFixed(0),j="1"===j?"+":"-1"===j?"":a.stringStartsWith(j,"-")?j.substring(1)+"":j+"+",b.fillText(j,f+5,g+5)),0!==this.mult&&(b.fillStyle=c.text_color,b.textAlign="right",b.textBaseline="middle",b.font=a.getFontString(c.text_font_size,c.text_font_families),b.fillText(this.mult.toFixed(0),d-5,g+i/2)),0!==this.repeat&&(b.fillStyle=c.text_color,b.textAlign="left",b.textBaseline="top",b.font=a.getFontString(c.text_font_size,c.text_font_families),j=this.repeat.toFixed(0),b.fillText(j,f+5,h-5))},d.getPoints=function(){return[this.p1,this.p2]},d.isOver=function(a){return b.isBetween(a.x,this.p1.x,this.p2.x)&&b.isBetween(a.y,this.p1.y,this.p2.y)}}(ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.structures.d2,Math),function(a,b,c,d){c.Line=function(a,c){this.p1=a?a:new b.Point,this.p2=c?c:new b.Point},c.Line.ARROW_SYNTHETIC="synthetic",c.Line.ARROW_RETROSYNTHETIC="retrosynthetic",c.Line.ARROW_RESONANCE="resonance",c.Line.ARROW_EQUILIBRIUM="equilibrium";var e=c.Line.prototype=new c._Shape;e.arrowType=void 0,e.topText=void 0,e.bottomText=void 0,e.draw=function(a,b){if(this.isLassoed){var e=a.createLinearGradient(this.p1.x,this.p1.y,this.p2.x,this.p2.y);e.addColorStop(0,"rgba(212, 99, 0, 0)"),e.addColorStop(.5,"rgba(212, 99, 0, 0.8)"),e.addColorStop(1,"rgba(212, 99, 0, 0)");var f=2.5,g=this.p1.angle(this.p2)+d.PI/2,h=d.cos(g),g=d.sin(g),i=this.p1.x-h*f,j=this.p1.y+g*f,k=this.p1.x+h*f,l=this.p1.y-g*f,m=this.p2.x+h*f,n=this.p2.y-g*f,o=this.p2.x-h*f,p=this.p2.y+g*f;a.fillStyle=e,a.beginPath(),a.moveTo(i,j),a.lineTo(k,l),a.lineTo(m,n),a.lineTo(o,p),a.closePath(),a.fill()}if(a.strokeStyle=b.shapes_color,a.fillStyle=b.shapes_color,a.lineWidth=b.shapes_lineWidth_2D,a.lineJoin="miter",a.lineCap="butt",this.p1.x!==this.p2.x||this.p1.y!==this.p2.y){if(this.arrowType===c.Line.ARROW_RETROSYNTHETIC){var e=2*d.sqrt(2),f=b.shapes_arrowLength_2D/e,h=this.p1.angle(this.p2),g=h+d.PI/2,e=b.shapes_arrowLength_2D/e,q=d.cos(h),r=d.sin(h),h=d.cos(g),g=d.sin(g),i=this.p1.x-h*f,j=this.p1.y+g*f,k=this.p1.x+h*f,l=this.p1.y-g*f,m=this.p2.x+h*f-q*e,n=this.p2.y-g*f+r*e,o=this.p2.x-h*f-q*e,p=this.p2.y+g*f+r*e,s=this.p2.x+2*h*f-2*q*e,t=this.p2.y-2*g*f+2*r*e,u=this.p2.x-2*h*f-2*q*e,f=this.p2.y+2*g*f+2*r*e;a.beginPath(),a.moveTo(k,l),a.lineTo(m,n),a.moveTo(s,t),a.lineTo(this.p2.x,this.p2.y),a.lineTo(u,f),a.moveTo(o,p),a.lineTo(i,j)}else this.arrowType===c.Line.ARROW_EQUILIBRIUM?(e=2*d.sqrt(2),f=b.shapes_arrowLength_2D/e/2,h=this.p1.angle(this.p2),g=h+d.PI/2,e=2*b.shapes_arrowLength_2D/d.sqrt(3),q=d.cos(h),r=d.sin(h),h=d.cos(g),g=d.sin(g),i=this.p1.x-h*f,j=this.p1.y+g*f,k=this.p1.x+h*f,l=this.p1.y-g*f,m=this.p2.x+h*f,n=this.p2.y-g*f,o=this.p2.x-h*f,p=this.p2.y+g*f,a.beginPath(),a.moveTo(k,l),a.lineTo(m,n),a.moveTo(o,p),a.lineTo(i,j),a.stroke(),k=m-.8*q*e,l=n+.8*r*e,s=m+h*b.shapes_arrowLength_2D/3-q*e,t=n-g*b.shapes_arrowLength_2D/3+r*e,a.beginPath(),a.moveTo(m,n),a.lineTo(s,t),a.lineTo(k,l),a.closePath(),a.fill(),a.stroke(),k=i+.8*q*e,l=j-.8*r*e,s=i-h*b.shapes_arrowLength_2D/3+q*e,t=j+g*b.shapes_arrowLength_2D/3-r*e,a.beginPath(),a.moveTo(i,j),a.lineTo(s,t),a.lineTo(k,l),a.closePath(),a.fill()):this.arrowType===c.Line.ARROW_SYNTHETIC?(h=this.p1.angle(this.p2),g=h+d.PI/2,e=2*b.shapes_arrowLength_2D/d.sqrt(3),q=d.cos(h),r=d.sin(h),h=d.cos(g),g=d.sin(g),a.beginPath(),a.moveTo(this.p1.x,this.p1.y),a.lineTo(this.p2.x-q*e/2,this.p2.y+r*e/2),a.stroke(),k=this.p2.x-.8*q*e,l=this.p2.y+.8*r*e,s=this.p2.x+h*b.shapes_arrowLength_2D/3-q*e,t=this.p2.y-g*b.shapes_arrowLength_2D/3+r*e,u=this.p2.x-h*b.shapes_arrowLength_2D/3-q*e,f=this.p2.y+g*b.shapes_arrowLength_2D/3+r*e,a.beginPath(),a.moveTo(this.p2.x,this.p2.y),a.lineTo(u,f),a.lineTo(k,l),a.lineTo(s,t),a.closePath(),a.fill()):this.arrowType===c.Line.ARROW_RESONANCE?(h=this.p1.angle(this.p2),g=h+d.PI/2,e=2*b.shapes_arrowLength_2D/d.sqrt(3),q=d.cos(h),r=d.sin(h),h=d.cos(g),g=d.sin(g),a.beginPath(),a.moveTo(this.p1.x+q*e/2,this.p1.y-r*e/2),a.lineTo(this.p2.x-q*e/2,this.p2.y+r*e/2),a.stroke(),k=this.p2.x-.8*q*e,l=this.p2.y+.8*r*e,s=this.p2.x+h*b.shapes_arrowLength_2D/3-q*e,t=this.p2.y-g*b.shapes_arrowLength_2D/3+r*e,u=this.p2.x-h*b.shapes_arrowLength_2D/3-q*e,f=this.p2.y+g*b.shapes_arrowLength_2D/3+r*e,a.beginPath(),a.moveTo(this.p2.x,this.p2.y),a.lineTo(u,f),a.lineTo(k,l),a.lineTo(s,t),a.closePath(),a.fill(),a.stroke(),k=this.p1.x+.8*q*e,l=this.p1.y-.8*r*e,s=this.p1.x-h*b.shapes_arrowLength_2D/3+q*e,t=this.p1.y+g*b.shapes_arrowLength_2D/3-r*e,u=this.p1.x+h*b.shapes_arrowLength_2D/3+q*e,f=this.p1.y-g*b.shapes_arrowLength_2D/3-r*e,a.beginPath(),a.moveTo(this.p1.x,this.p1.y),a.lineTo(u,f),a.lineTo(k,l),a.lineTo(s,t),a.closePath(),a.fill()):(a.beginPath(),a.moveTo(this.p1.x,this.p1.y),a.lineTo(this.p2.x,this.p2.y));a.stroke(),this.topText&&(a.textAlign="center",a.textBaseline="bottom",a.fillText(this.topText,(this.p1.x+this.p2.x)/2,this.p1.y-5)),this.bottomText&&(a.textAlign="center",a.textBaseline="top",a.fillText(this.bottomText,(this.p1.x+this.p2.x)/2,this.p1.y+5))}},e.getPoints=function(){return[this.p1,this.p2]},e.isOver=function(b,c){var d=a.distanceFromPointToLineInclusive(b,this.p1,this.p2);return-1!==d&&c>d}}(ChemDoodle.math,ChemDoodle.structures,ChemDoodle.structures.d2,Math),function(a,b,c,d,e){var f=function(a){var b=[];if(a instanceof c.Atom){if(0===a.bondNumber)b.push(e.PI);else if(a.angles){if(1===a.angles.length)b.push(a.angles[0]+e.PI);else{for(var d=1,f=a.angles.length;f>d;d++)b.push(a.angles[d-1]+(a.angles[d]-a.angles[d-1])/2);d=a.angles[a.angles.length-1],b.push(d+(a.angles[0]+2*e.PI-d)/2)}if(a.largestAngle>e.PI&&(b=[a.angleOfLeastInterference]),a.bonds)for(d=0,f=a.bonds.length;f>d;d++){var g=a.bonds[d];if(2===g.bondOrder&&(g=g.getNeighbor(a),"O"===g.label)){b=[g.angle(a)];break}}}}else a=a.a1.angle(a.a2),b.push(a+e.PI/2),b.push(a+3*e.PI/2);for(d=0,f=b.length;f>d;d++){for(;b[d]>2*e.PI;)b[d]-=2*e.PI;for(;0>b[d];)b[d]+=2*e.PI}return b},g=function(a,b){var d=3;return a instanceof c.Atom?(a.isLabelVisible(b)&&(d=8),(0!==a.charge||0!==a.numRadical||0!==a.numLonePair)&&(d=13)):a instanceof c.Point?d=0:1<a.bondOrder&&(d=5),d},h=function(a,b,d,f,h,i,j,k,l,m){var n=i.angle(h),o=j.angle(k),p=e.cos(n),n=e.sin(n),q=g(d,b);h.x-=p*q,h.y+=n*q,q=o+e.PI/2,d=2*b.shapes_arrowLength_2D/e.sqrt(3);var p=e.cos(o),n=e.sin(o),r=e.cos(q),s=e.sin(q);k.x-=5*p,k.y+=5*n,o=new c.Point(k.x,k.y),q=g(f,b)/3,o.x-=p*q,o.y+=n*q,k.x-=p*(.8*d+q),k.y+=n*(.8*d+q),f=o.x-.8*p*d;var q=o.y+.8*n*d,t=new c.Point(o.x+r*b.shapes_arrowLength_2D/3-p*d,o.y-s*b.shapes_arrowLength_2D/3+n*d);b=new c.Point(o.x-r*b.shapes_arrowLength_2D/3-p*d,o.y+s*b.shapes_arrowLength_2D/3+n*d),n=p=!0,1===l&&(t.distance(i)>b.distance(i)?n=!1:p=!1),a.beginPath(),a.moveTo(o.x,o.y),n&&a.lineTo(b.x,b.y),a.lineTo(f,q),p&&a.lineTo(t.x,t.y),a.closePath(),a.fill(),a.stroke(),a.beginPath(),a.moveTo(h.x,h.y),a.bezierCurveTo(i.x,i.y,j.x,j.y,k.x,k.y),a.stroke(),m.push([h,i,j,k])};d.Pusher=function(a,b,c){this.o1=a,this.o2=b,this.numElectron=c?c:1},d=d.Pusher.prototype=new d._Shape,d.drawDecorations=function(a,b){if(this.isHover)for(var d=this.o1 instanceof c.Atom?new c.Point(this.o1.x,this.o1.y):this.o1.getCenter(),e=this.o2 instanceof c.Atom?new c.Point(this.o2.x,this.o2.y):this.o2.getCenter(),d=[d,e],e=0,f=d.length;f>e;e++){var g=d[e];this.drawAnchor(a,b,g,g===this.hoverPoint)}},d.draw=function(b,d){if(this.o1&&this.o2){b.strokeStyle=d.shapes_color,b.fillStyle=d.shapes_color,b.lineWidth=d.shapes_lineWidth_2D,b.lineJoin="miter",b.lineCap="butt";for(var g,i,j=this.o1 instanceof c.Atom?new c.Point(this.o1.x,this.o1.y):this.o1.getCenter(),k=this.o2 instanceof c.Atom?new c.Point(this.o2.x,this.o2.y):this.o2.getCenter(),l=f(this.o1),m=f(this.o2),n=1/0,o=0,p=l.length;p>o;o++)for(var q=0,r=m.length;r>q;q++){var s=new c.Point(j.x+35*e.cos(l[o]),j.y-35*e.sin(l[o])),t=new c.Point(k.x+35*e.cos(m[q]),k.y-35*e.sin(m[q])),u=s.distance(t);n>u&&(n=u,g=s,i=t)}this.caches=[],-1===this.numElectron?(o=j.distance(k)/2,m=j.angle(k),l=m+e.PI/2,p=e.cos(m),q=e.sin(m),m=new c.Point(j.x+(o-1)*p,j.y-(o-1)*q),n=new c.Point(m.x+35*e.cos(l+e.PI/6),m.y-35*e.sin(l+e.PI/6)),o=new c.Point(j.x+(o+1)*p,j.y-(o+1)*q),l=new c.Point(o.x+35*e.cos(l-e.PI/6),o.y-35*e.sin(l-e.PI/6)),h(b,d,this.o1,m,j,g,n,m,1,this.caches),h(b,d,this.o2,o,k,i,l,o,1,this.caches)):(a.intersectLines(j.x,j.y,g.x,g.y,k.x,k.y,i.x,i.y)&&(l=g,g=i,i=l),l=g.angle(j),m=i.angle(k),n=e.max(l,m)-e.min(l,m),.001>e.abs(n-e.PI)&&this.o1.molCenter===this.o2.molCenter&&(l+=e.PI/2,m-=e.PI/2,g.x=j.x+35*e.cos(l+e.PI),g.y=j.y-35*e.sin(l+e.PI),i.x=k.x+35*e.cos(m+e.PI),i.y=k.y-35*e.sin(m+e.PI)),h(b,d,this.o1,this.o2,j,g,i,k,this.numElectron,this.caches))}},d.getPoints=function(){return[]},d.isOver=function(a,c){for(var d=0,e=this.caches.length;e>d;d++)if(b.distanceFromCurve(a,this.caches[d]).distance<c)return!0;return!1}}(ChemDoodle.math,ChemDoodle.math.jsBezier,ChemDoodle.structures,ChemDoodle.structures.d2,Math),function(a){a._Mesh=function(){},a=a._Mesh.prototype,a.storeData=function(a,b,c){this.positionData=a,this.normalData=b,this.indexData=c},a.setupBuffers=function(a){if(this.vertexPositionBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vertexPositionBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.positionData),a.STATIC_DRAW),this.vertexPositionBuffer.itemSize=3,this.vertexPositionBuffer.numItems=this.positionData.length/3,this.vertexNormalBuffer=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,this.vertexNormalBuffer),a.bufferData(a.ARRAY_BUFFER,new Float32Array(this.normalData),a.STATIC_DRAW),this.vertexNormalBuffer.itemSize=3,this.vertexNormalBuffer.numItems=this.normalData.length/3,this.indexData&&(this.vertexIndexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indexData),a.STATIC_DRAW),this.vertexIndexBuffer.itemSize=1,this.vertexIndexBuffer.numItems=this.indexData.length),this.partitions)for(var b=0,c=this.partitions.length;c>b;b++){var d=this.partitions[b],e=this.generateBuffers(a,d.positionData,d.normalData,d.indexData);d.vertexPositionBuffer=e[0],d.vertexNormalBuffer=e[1],d.vertexIndexBuffer=e[2]}},a.generateBuffers=function(a,b,c,d){var e=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,e),a.bufferData(a.ARRAY_BUFFER,new Float32Array(b),a.STATIC_DRAW),e.itemSize=3,e.numItems=b.length/3,b=a.createBuffer(),a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW),b.itemSize=3,b.numItems=c.length/3;var f;return d&&(f=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,f),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(d),a.STATIC_DRAW),f.itemSize=1,f.numItems=d.length),[e,b,f]},a.bindBuffers=function(a){this.vertexPositionBuffer||this.setupBuffers(a),a.bindBuffer(a.ARRAY_BUFFER,this.vertexPositionBuffer),a.vertexAttribPointer(a.shader.vertexPositionAttribute,this.vertexPositionBuffer.itemSize,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.vertexNormalBuffer),a.vertexAttribPointer(a.shader.vertexNormalAttribute,this.vertexNormalBuffer.itemSize,a.FLOAT,!1,0,0),this.vertexIndexBuffer&&a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)}}(ChemDoodle.structures.d3,Math),function(a){a._Measurement=function(){},(a._Measurement.prototype=new a._Mesh).render=function(a,b){if(a.setMatrixUniforms(a.modelViewMatrix),b.measurement_update_3D&&(this.text=this.vertexPositionBuffer=void 0),this.vertexPositionBuffer||this.calculateData(b),this.bindBuffers(a),a.material.setDiffuseColor(b.shapes_color),a.lineWidth(1),a.drawElements(a.LINES,this.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0),b.measurement_displayText_3D){this.text||(this.text=this.getText(b));var c={position:[],texCoord:[],translation:[]};a.textImage.pushVertexData(this.text.value,this.text.pos,1,c),a.textMesh.storeData(a,c.position,c.texCoord,c.translation),a.enable(a.BLEND),a.depthMask(!1),a.enableVertexAttribArray(a.shader.vertexTexCoordAttribute),a.textImage.useTexture(a),a.textMesh.render(a),a.disableVertexAttribArray(a.shader.vertexTexCoordAttribute),a.disable(a.BLEND),a.depthMask(!0)}}}(ChemDoodle.structures.d3),function(a,b,c,d,e,f,g){c.Angle=function(a,b,c){this.a1=a,this.a2=b,this.a3=c},a=c.Angle.prototype=new c._Measurement,a.calculateData=function(a){var c=[],d=[],f=[],h=this.a2.distance3D(this.a1),i=this.a2.distance3D(this.a3);for(this.distUse=e.min(h,i)/2,this.vec1=g.normalize([this.a1.x-this.a2.x,this.a1.y-this.a2.y,this.a1.z-this.a2.z]),this.vec2=g.normalize([this.a3.x-this.a2.x,this.a3.y-this.a2.y,this.a3.z-this.a2.z]),this.angle=b.vec3AngleFrom(this.vec1,this.vec2),h=g.normalize(g.cross(this.vec1,this.vec2,[])),h=g.normalize(g.cross(h,this.vec1,[])),a=a.measurement_angleBands_3D,i=0;a>=i;++i){var j=this.angle*i/a,k=g.scale(this.vec1,e.cos(j),[]),j=g.scale(h,e.sin(j),[]),k=g.scale(g.normalize(g.add(k,j,[])),this.distUse);c.push(this.a2.x+k[0],this.a2.y+k[1],this.a2.z+k[2]),d.push(0,0,0),a>i&&f.push(i,i+1)}this.storeData(c,d,f)},a.getText=function(){var a=g.scale(g.normalize(g.add(this.vec1,this.vec2,[])),this.distUse+.3);return{pos:[this.a2.x+a[0],this.a2.y+a[1],this.a2.z+a[2]],value:[d.angleBounds(this.angle,!0).toFixed(2)," "].join("")}}}(ChemDoodle.ELEMENT,ChemDoodle.extensions,ChemDoodle.structures.d3,ChemDoodle.math,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(a,b){a.Arrow=function(a,c){for(var d=[],e=[],f=0;c>=f;f++){var g=2*f*b.PI/c,h=b.sin(g),g=b.cos(g);e.push(0,0,-1,0,0,-1,g,h,0,g,h,0,0,0,-1,0,0,-1,g,h,1,g,h,1),d.push(0,0,0,a*g,a*h,0,a*g,a*h,0,a*g,a*h,2,a*g,a*h,2,2*a*g,2*a*h,2,2*a*g,2*a*h,2,0,0,3)}for(f=[],h=0;c>h;h++)for(var g=8*h,i=0;7>i;i++){var j=i+g,k=j+7+2;f.push(j,k,j+1,k,j,k-1)}this.storeData(d,e,f)},a.Arrow.prototype=new a._Mesh}(ChemDoodle.structures.d3,Math),function(a,b,c){a.LineArrow=function(){this.storeData([0,0,-3,.1,0,-2.8,0,0,-3,-.1,0,-2.8,0,0,-3,0,0,3,0,0,3,.1,0,2.8,0,0,3,-.1,0,2.8],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])},a.LineArrow.prototype=new a._Mesh,a.Compass=function(d,e){this.textImage=new a.TextImage,this.textImage.init(d),this.textImage.updateFont(d,e.text_font_size,e.text_font_families,e.text_font_bold,e.text_font_italic,e.text_font_stroke_3D),this.textMesh=new a.TextMesh,this.textMesh.init(d);var f,g,h=3/(e.compass_size_3D/d.canvas.clientHeight),i=b.tan(e.projectionPerspectiveVerticalFieldOfView_3D/360*b.PI),j=h/i,k=b.max(j-h,.1),l=d.canvas.clientWidth/d.canvas.clientHeight;e.projectionPerspective_3D?(g=k,f=c.frustum):(g=j,f=c.ortho);var m=2*(g/d.canvas.clientHeight)*i,i=i*g;g=-i;var n=l*g,l=l*i;if(0===e.compass_type_3D){var o=(-(d.canvas.clientWidth-e.compass_size_3D)/2+this.textImage.charHeight)*m,m=(-(d.canvas.clientHeight-e.compass_size_3D)/2+this.textImage.charHeight)*m,n=n-o,l=l-o;g-=m,i-=m}this.projectionMatrix=f(n,l,g,i,k,j+h),this.translationMatrix=c.translate(c.identity([]),[0,0,-j]),h={position:[],texCoord:[],translation:[]},this.textImage.pushVertexData("X",[3.5,0,0],0,h),this.textImage.pushVertexData("Y",[0,3.5,0],0,h),this.textImage.pushVertexData("Z",[0,0,3.5],0,h),this.textMesh.storeData(d,h.position,h.texCoord,h.translation)};var d=a.Compass.prototype;d.renderArrow=function(a,b,c,d){a.material.setDiffuseColor(c),a.setMatrixUniforms(d),1===b?a.drawArrays(a.LINES,0,a.lineArrowBuffer.vertexPositionBuffer.numItems):a.drawElements(a.TRIANGLES,a.arrowBuffer.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)},d.render=function(a,d){1===d.compass_type_3D?a.lineArrowBuffer.bindBuffers(a):a.arrowBuffer.bindBuffers(a),a.material.setTempColors(d.bonds_materialAmbientColor_3D,void 0,d.bonds_materialSpecularColor_3D,d.bonds_materialShininess_3D);var e=c.multiply(this.translationMatrix,a.rotationMatrix,[]),f=b.PI/2;a.fogging.setMode(0),this.renderArrow(a,d.compass_type_3D,d.compass_axisXColor_3D,c.rotateY(e,f,[])),this.renderArrow(a,d.compass_type_3D,d.compass_axisYColor_3D,c.rotateX(e,-f,[])),this.renderArrow(a,d.compass_type_3D,d.compass_axisZColor_3D,e)},d.renderAxis=function(a){var b=c.multiply(this.translationMatrix,a.rotationMatrix,[]);a.setMatrixUniforms(b),this.textImage.useTexture(a),this.textMesh.render(a)}}(ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4),function(a,b){a.Cylinder=function(a,c,d){for(var e=[],f=[],g=0;d>g;g++){var h=2*g*b.PI/d,i=b.cos(h),h=b.sin(h);f.push(i,0,h),e.push(a*i,0,a*h),f.push(i,0,h),e.push(a*i,c,a*h)}f.push(1,0,0),e.push(a,0,0),f.push(1,0,0),e.push(a,c,0),this.storeData(e,f)},a.Cylinder.prototype=new a._Mesh}(ChemDoodle.structures.d3,Math),function(a,b,c,d){b.Distance=function(a,b,c,d){this.a1=a,this.a2=b,this.node=c,this.offset=d?d:0},b=b.Distance.prototype=new b._Measurement,b.calculateData=function(b){var e=[this.a1.x,this.a1.y,this.a1.z,this.a2.x,this.a2.y,this.a2.z];this.node&&(this.move=this.offset+c.max(b.atoms_useVDWDiameters_3D?a[this.a1.label].vdWRadius*b.atoms_vdwMultiplier_3D:b.atoms_sphereDiameter_3D/2,b.atoms_useVDWDiameters_3D?a[this.a2.label].vdWRadius*b.atoms_vdwMultiplier_3D:b.atoms_sphereDiameter_3D/2),this.displacement=[(this.a1.x+this.a2.x)/2-this.node.x,(this.a1.y+this.a2.y)/2-this.node.y,(this.a1.z+this.a2.z)/2-this.node.z],d.normalize(this.displacement),b=d.scale(this.displacement,this.move,[]),e[0]+=b[0],e[1]+=b[1],e[2]+=b[2],e[3]+=b[0],e[4]+=b[1],e[5]+=b[2]),this.storeData(e,[0,0,0,0,0,0],[0,1])},b.getText=function(){var a=this.a1.distance3D(this.a2),b=[(this.a1.x+this.a2.x)/2,(this.a1.y+this.a2.y)/2,(this.a1.z+this.a2.z)/2];if(this.node){var c=d.scale(this.displacement,this.move+.1,[]);b[0]+=c[0],b[1]+=c[1],b[2]+=c[2]}return{pos:b,value:[a.toFixed(2)," "].join("")}}}(ChemDoodle.ELEMENT,ChemDoodle.structures.d3,Math,ChemDoodle.lib.vec3),function(a,b){b.Fog=function(a){this.gl=a,this.mUL=a.getUniformLocation(a.program,"u_fog_mode"),this.cUL=a.getUniformLocation(a.program,"u_fog_color"),this.sUL=a.getUniformLocation(a.program,"u_fog_start"),this.eUL=a.getUniformLocation(a.program,"u_fog_end"),this.dUL=a.getUniformLocation(a.program,"u_fog_density")};var c=b.Fog.prototype;c.setTempParameter=function(b,c,d,e){this.cCache&&this.cCache===b||(this.cCache=b,b=a.getRGB(b,1),this.gl.uniform3f(this.cUL,b[0],b[1],b[2])),this.sCache&&this.sCache===c||(this.sCache=c,this.gl.uniform1f(this.sUL,c)),this.eCache&&this.eCache===d||(this.eCache=d,this.gl.uniform1f(this.eUL,d)),this.dCache&&this.dCache===e||(this.dCache=e,this.gl.uniform1f(this.dUL,e))},c.setMode=function(a){this.mCache&&this.mCache===a||(this.mCache=a,this.gl.uniform1i(this.mUL,a))}}(ChemDoodle.math,ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(a,b){b.Label=function(){this.textImage=new b.TextImage};var c=b.Label.prototype;c.init=function(a,b){this.textImage.init(a),this.textImage.updateFont(a,b.atoms_font_size_2D,b.atoms_font_families_2D,b.atoms_font_bold_2D,b.atoms_font_italic_2D,b.text_font_stroke_3D)},c.updateVerticesBuffer=function(b,c,d){for(var e=0,f=c.length;f>e;e++){for(var g=c[e],h=g.labelMesh,i=g.atoms,j=this.textImage,k={position:[],texCoord:[],translation:[]},l=0<i.length&&void 0!=i[0].hetatm,m=0,n=i.length;n>m;m++){var o=i[m],p=o.label,q=.05;if(d.atoms_useVDWDiameters_3D){var r=a[p].vdWRadius*d.atoms_vdwMultiplier_3D;0===r&&(r=1),q+=r}else d.atoms_sphereDiameter_3D&&(q+=1.5*(d.atoms_sphereDiameter_3D/2));if(l)if(o.hetatm){if(o.isWater&&!d.macro_showWaters)continue}else if(!d.macro_displayAtoms)continue;j.pushVertexData(p,[o.x,o.y,o.z],q,k)}if((g=g.chains)&&(d.proteins_displayRibbon||d.proteins_displayBackbone))for(m=0,n=g.length;n>m;m++)for(i=g[m],l=0,p=i.length;p>l;l++)q=i[l],q.name&&(o=q.cp1,j.pushVertexData(q.name,[o.x,o.y,o.z],2,k));h.storeData(b,k.position,k.texCoord,k.translation,k.zDepth)}},c.render=function(a,b,c){a.setMatrixUniforms(a.modelViewMatrix),this.textImage.useTexture(a),b=0;for(var d=c.length;d>b;b++)c[b].labelMesh&&c[b].labelMesh.render(a)}}(ChemDoodle.ELEMENT,ChemDoodle.structures.d3),function(a,b){a.Sphere=function(a,c,d){for(var e=[],f=[],g=0;c>=g;g++)for(var h=g*b.PI/c,i=b.sin(h),j=b.cos(h),h=0;d>=h;h++){var k=2*h*b.PI/d,l=b.sin(k),k=b.cos(k)*i,m=j,l=l*i;f.push(k,m,l),e.push(a*k,a*m,a*l)}for(a=[],d+=1,g=0;c>g;g++)for(h=0;d>h;h++)i=g*d+h%d,j=i+d,a.push(i,i+1,j),d-1>h&&a.push(j,i+1,j+1);this.storeData(e,f,a)},a.Sphere.prototype=new a._Mesh}(ChemDoodle.structures.d3,Math),
function(a,b,c,d){function e(a,b,c,d){this.entire=a,this.name=b,this.indexes=c,this.pi=d}var f=function(a,b){a.bindBuffer(a.ARRAY_BUFFER,b.vertexPositionBuffer),a.vertexAttribPointer(a.shader.vertexPositionAttribute,b.vertexPositionBuffer.itemSize,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,b.vertexNormalBuffer),a.vertexAttribPointer(a.shader.vertexNormalAttribute,b.vertexNormalBuffer.itemSize,a.FLOAT,!1,0,0),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,b.vertexIndexBuffer)},g=e.prototype;g.getColor=function(b){return b.macro_colorByChain?this.chainColor:this.name?this.getResidueColor(a[this.name]?this.name:"*",b):this.helix?this.entire.front?b.proteins_ribbonCartoonHelixPrimaryColor:b.proteins_ribbonCartoonHelixSecondaryColor:this.sheet?b.proteins_ribbonCartoonSheetColor:this.entire.front?b.proteins_primaryColor:b.proteins_secondaryColor},g.getResidueColor=function(b,c){var d=a[b];if("shapely"===c.proteins_residueColor)return d.shapelyColor;if("amino"===c.proteins_residueColor)return d.aminoColor;if("polarity"===c.proteins_residueColor){if(d.polar)return"#C10000"}else if("acidity"===c.proteins_residueColor){if(1===d.acidity)return"#0000FF";if(-1===d.acidity)return"#FF0000";if(!d.polar)return"#773300"}return"#FFFFFF"},g.render=function(a,b,c){this.entire.partitions&&this.pi!==this.entire.partitions.lastRender&&(f(a,this.entire.partitions[this.pi]),this.entire.partitions.lastRender=this.pi),this.vertexIndexBuffer||(this.vertexIndexBuffer=a.createBuffer(),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(this.indexes),a.STATIC_DRAW),this.vertexIndexBuffer.itemSize=1,this.vertexIndexBuffer.numItems=this.indexes.length),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer),!c&&"rainbow"!==b.proteins_residueColor&&a.material.setDiffuseColor(this.getColor(b)),a.drawElements(a.TRIANGLES,this.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)},b.Ribbon=function(a,b,f){var g=a[0].lineSegments.length,h=a[0].lineSegments[0].length;this.partitions=[],this.partitions.lastRender=0;var i;this.front=b>0;for(var j=0,k=a.length-1;k>j;j++){(!i||65e3<i.positionData.length)&&(0<this.partitions.length&&j--,i={count:0,positionData:[],normalData:[],indexData:[]},this.partitions.push(i));var l=a[j];i.count++;for(var m=0;g>m;m++)for(var n=f?l.lineSegmentsCartoon[m]:l.lineSegments[m],o=0===m,p=!1,q=0;h>q;q++){var r=n[q],s=j,t=q+1;j===a.length-2&&q===h-1?t--:q===h-1&&(s++,t=0);var t=f?a[s].lineSegmentsCartoon[m][t]:a[s].lineSegments[m][t],s=!1,u=m+1;m===g-1&&(u-=2,s=!0);var u=f?l.lineSegmentsCartoon[u][q]:l.lineSegments[u][q],t=[t.x-r.x,t.y-r.y,t.z-r.z],u=[u.x-r.x,u.y-r.y,u.z-r.z],v=d.cross(t,u,[]);0===q&&(d.normalize(t),d.scale(t,-1),i.normalData.push(t[0],t[1],t[2]),i.positionData.push(r.x,r.y,r.z)),o||p?(d.normalize(u),d.scale(u,-1),i.normalData.push(u[0],u[1],u[2]),i.positionData.push(r.x,r.y,r.z),o&&q===h-1&&(o=!1,q=-1)):(d.normalize(v),(s&&!this.front||!s&&this.front)&&d.scale(v,-1),i.normalData.push(v[0],v[1],v[2]),d.scale(v,c.abs(b)),i.positionData.push(r.x+v[0],r.y+v[1],r.z+v[2]),m===g-1&&q===h-1&&(p=!0,q=-1)),-1!==q&&q!==h-1||(d.normalize(t),i.normalData.push(t[0],t[1],t[2]),i.positionData.push(r.x,r.y,r.z))}}for(g+=2,h+=2,f&&(this.cartoonSegments=[]),this.segments=[],b=0,l=this.partitions.length;l>b;b++){i=this.partitions[b];var w;for(f&&(w=[]),j=0,k=i.count-1;k>j;j++){for(n=j,m=0;b>m;m++)n+=this.partitions[m].count-1;for(m=a[n],j>0&&f&&m.split&&(q=new e(this,void 0,w,b),m.helix&&(q.helix=!0),m.sheet&&(q.sheet=!0),this.cartoonSegments.push(q),w=[]),o=j*g*h,p=[],m=0,r=g-1;r>m;m++)for(s=o+m*h,q=0;h>q;q++)t=1,j===i.count-1?t=0:q===h-1&&(t=g*h-q),t=[s+q,s+h+q,s+h+q+t,s+q,s+q+t,s+h+q+t],q!==h-1&&(this.front?p.push(t[0],t[1],t[2],t[3],t[5],t[4]):p.push(t[0],t[2],t[1],t[3],t[4],t[5])),q===h-2&&j<i.count-1&&(u=g*h-q,t[2]+=u,t[4]+=u,t[5]+=u),this.front?i.indexData.push(t[0],t[1],t[2],t[3],t[5],t[4]):i.indexData.push(t[0],t[2],t[1],t[3],t[4],t[5]),f&&(this.front?w.push(t[0],t[1],t[2],t[3],t[5],t[4]):w.push(t[0],t[2],t[1],t[3],t[4],t[5]));this.segments.push(new e(this,a[n+1].name,p,b))}if(f){for(q=new e(this,void 0,w,b),n=i.count-1,m=0;b>m;m++)n+=this.partitions[m].count-1;m=a[n],m.helix&&(q.helix=!0),m.sheet&&(q.sheet=!0),this.cartoonSegments.push(q)}}this.storeData(this.partitions[0].positionData,this.partitions[0].normalData,this.partitions[0].indexData),1===this.partitions.length&&(this.partitions=void 0)},(b.Ribbon.prototype=new b._Mesh).render=function(a,b){this.bindBuffers(a);var c=b.macro_colorByChain?this.chainColor:void 0;if(c||(c=this.front?b.proteins_primaryColor:b.proteins_secondaryColor),a.material.setDiffuseColor(c),a.drawElements(a.TRIANGLES,this.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0),this.partitions)for(var c=1,d=this.partitions.length;d>c;c++){var e=this.partitions[c];f(a,e),a.drawElements(a.TRIANGLES,e.vertexIndexBuffer.numItems,a.UNSIGNED_SHORT,0)}}}(ChemDoodle.RESIDUE,ChemDoodle.structures.d3,Math,ChemDoodle.lib.vec3),function(a,b,c){b.Light=function(b,c,d){this.diffuseRGB=a.getRGB(b,1),this.specularRGB=a.getRGB(c,1),this.direction=d},b.Light.prototype.lightScene=function(a){a.uniform3f(a.getUniformLocation(a.program,"u_light_diffuse_color"),this.diffuseRGB[0],this.diffuseRGB[1],this.diffuseRGB[2]),a.uniform3f(a.getUniformLocation(a.program,"u_light_specular_color"),this.specularRGB[0],this.specularRGB[1],this.specularRGB[2]);var b=c.create(this.direction);c.normalize(b),c.negate(b),a.uniform3f(a.getUniformLocation(a.program,"u_light_direction"),b[0],b[1],b[2]);var d=[0,0,0],b=[d[0]+b[0],d[1]+b[1],d[2]+b[2]],d=c.length(b);0===d?b=[0,0,1]:c.scale(1/d),a.uniform3f(a.getUniformLocation(a.program,"u_light_half_vector"),b[0],b[1],b[2])}}(ChemDoodle.math,ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(a){a.Line=function(){this.storeData([0,0,0,0,1,0],[0,0,0,0,0,0])},a.Line.prototype=new a._Mesh}(ChemDoodle.structures.d3),function(a,b){b.Material=function(a){this.gl=a,this.aUL=a.getUniformLocation(a.program,"u_material_ambient_color"),this.dUL=a.getUniformLocation(a.program,"u_material_diffuse_color"),this.sUL=a.getUniformLocation(a.program,"u_material_specular_color"),this.snUL=a.getUniformLocation(a.program,"u_material_shininess"),this.alUL=a.getUniformLocation(a.program,"u_material_alpha")};var c=b.Material.prototype;c.setTempColors=function(b,c,d,e){this.aCache&&this.aCache===b||(this.aCache=b,b=a.getRGB(b,1),this.gl.uniform3f(this.aUL,b[0],b[1],b[2])),!c||this.dCache&&this.dCache===c||(this.dCache=c,b=a.getRGB(c,1),this.gl.uniform3f(this.dUL,b[0],b[1],b[2])),this.sCache&&this.sCache===d||(this.sCache=d,b=a.getRGB(d,1),this.gl.uniform3f(this.sUL,b[0],b[1],b[2])),this.snCache&&this.snCache===e||(this.snCache=e,this.gl.uniform1f(this.snUL,e)),this.alCache=1,this.gl.uniform1f(this.alUL,1)},c.setDiffuseColor=function(b){this.dCache&&this.dCache===b||(this.dCache=b,b=a.getRGB(b,1),this.gl.uniform3f(this.dUL,b[0],b[1],b[2]))},c.setAlpha=function(a){this.alCache&&this.alCache===a||(this.alCache=a,this.gl.uniform1f(this.alUL,a))}}(ChemDoodle.math,ChemDoodle.structures.d3),function(a,b,c,d){b.MolecularSurface=function(b,e,f,g,h){function i(a,b,c,d){var e=a.index;if(a.contained)for(var e=-1,f=1/0,g=0,h=b.length;h>g;g++)for(var i=b[g],j=0,k=i.length;k>j;j++){var l=i[j];if(!l.contained&&l.index!==c&&l.index!==d){var m=l.distance3D(a);f>m&&(e=l.index,f=m)}}return e}for(var j=[],k=[],l=[],m=[],n=0;e>=n;n++)for(var o=n*d.PI/e,p=d.sin(o),q=d.cos(o),o=0;f>=o;o++){var r=2*o*d.PI/f;m.push(d.cos(r)*p,q,d.sin(r)*p)}for(p=[],n=0,o=b.atoms.length;o>n;n++){for(var q=[],s=b.atoms[n],t=c[s.label][h]+g,u=[],r=0,v=b.atoms.length;v>r;r++)if(r!==n){var w=b.atoms[r];w.index=r,s.distance3D(w)<t+c[w.label][h]+g&&u.push(w)}for(r=0,v=m.length;v>r;r+=3){for(var x=new a.Atom("C",s.x+t*m[r],s.y+t*m[r+1],s.z+t*m[r+2]),y=0,z=u.length;z>y;y++)if(w=u[y],x.distance3D(w)<c[w.label][h]+g){x.contained=!0;break}q.push(x)}p.push(q)}for(b=[],f++,n=0;e>n;n++)for(o=0;f>o;o++)h=n*f+o%f,g=h+f,b.push(h),b.push(g),b.push(h+1),f-1>o&&(b.push(g),b.push(g+1),b.push(h+1));for(n=y=0,o=p.length;o>n;n++){for(q=p[n],r=0,v=q.length;v>r;r++)x=q[r],x.contained||(x.index=y,y++,j.push(x.x,x.y,x.z),k.push(m[3*r],m[3*r+1],m[3*r+2]));for(r=0,v=b.length;v>r;r+=3)h=q[b[r]],g=q[b[r+1]],x=q[b[r+2]],!h.contained&&!g.contained&&!x.contained&&l.push(h.index,g.index,x.index)}for(m=[],n=0,o=p.length;o>n;n++)for(q=p[n],r=0,v=b.length;v>r;r+=3){for(h=q[b[r]],g=q[b[r+1]],x=q[b[r+2]],u=[],y=0,z=p.length;z>y;y++)y!==n&&u.push(p[y]);if((!h.contained||!g.contained||!x.contained)&&(h.contained||g.contained||x.contained)&&(e=i(h,u,-1,-1),f=i(g,u,e,-1),u=i(x,u,e,f),-1!==e&&-1!==f&&-1!==u)){for(g=!1,y=0,z=m.length;z>y;y+=3)if(h=m[y],x=m[y+1],s=m[y+2],t=f===h||f===x||f===s,w=u===h||u===x||u===s,(e===h||e===x||e===s)&&t&&w){g=!0;break}g||m.push(e,f,u)}}l=l.concat(m),this.storeData(j,k,l)},b.MolecularSurface.prototype=new b._Mesh}(ChemDoodle.structures,ChemDoodle.structures.d3,ChemDoodle.ELEMENT,Math),function(a){a.Picker=function(){},a=a.Picker.prototype,a.init=function(a){this.framebuffer=a.createFramebuffer();var b=a.createTexture(),c=a.createRenderbuffer();a.bindTexture(a.TEXTURE_2D,b),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.bindRenderbuffer(a.RENDERBUFFER,c),a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,b,0),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.RENDERBUFFER,c),a.bindTexture(a.TEXTURE_2D,null),a.bindRenderbuffer(a.RENDERBUFFER,null),a.bindFramebuffer(a.FRAMEBUFFER,null)},a.setDimension=function(a,b,c){a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer);var d=a.getFramebufferAttachmentParameter(a.FRAMEBUFFER,a.DEPTH_ATTACHMENT,a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME);a.isRenderbuffer(d)&&(a.bindRenderbuffer(a.RENDERBUFFER,d),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_COMPONENT16,b,c),a.bindRenderbuffer(a.RENDERBUFFER,null)),d=a.getFramebufferAttachmentParameter(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME),a.isTexture(d)&&(a.bindTexture(a.TEXTURE_2D,d),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null),a.bindTexture(a.TEXTURE_2D,null)),a.bindFramebuffer(a.FRAMEBUFFER,null)},a.pick=function(a,b,c,d,e,f,g){var h=void 0,i=a.getParameter(a.COLOR_CLEAR_VALUE);a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer),a.clearColor(1,1,1,0),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),a.fogging.setMode(0),a.disableVertexAttribArray(a.shader.vertexNormalAttribute);var j=[];a.material.setAlpha(255);for(var k=0,l=b.length;l>k;k++)b[k].renderPickFrame(a,c,j,f,g);return a.flush(),b=new Uint8Array(4),a.readPixels(d-2,e+2,1,1,a.RGBA,a.UNSIGNED_BYTE,b),0<b[3]&&(h=j[b[2]|b[1]<<8|b[0]<<16]),a.enableVertexAttribArray(a.shader.vertexNormalAttribute),a.fogging.setMode(c.fog_mode_3D),a.bindFramebuffer(a.FRAMEBUFFER,null),a.clearColor(i[0],i[1],i[2],i[3]),h}}(ChemDoodle.structures.d3,ChemDoodle.math,document),function(a,b){a.Pill=function(a,c,d,e){var f=1,g=2*a;c-=g,0>c?(f=0,c+=g):g>c&&(f=c/g,c=g);for(var g=[],h=[],i=0;d>=i;i++)for(var j=i*b.PI/d,k=b.sin(j),l=b.cos(j)*f,j=0;e>=j;j++){var m=2*j*b.PI/e,n=b.sin(m),m=b.cos(m)*k,o=l,n=n*k;h.push(m,o,n),g.push(a*m,a*o+(d/2>i?c:0),a*n)}for(a=[],e+=1,i=0;d>i;i++)for(j=0;e>j;j++)c=i*e+j%e,f=c+e,a.push(c,c+1,f),e-1>j&&a.push(f,c+1,f+1);this.storeData(g,h,a)},a.Pill.prototype=new a._Mesh}(ChemDoodle.structures.d3,Math),function(a,b){a.Shader=function(){};var c=a.Shader.prototype;c.init=function(a){var b=this.getShader(a,"vertex-shader");b||(b=this.loadDefaultVertexShader(a));var c=this.getShader(a,"fragment-shader");c||(c=this.loadDefaultFragmentShader(a)),a.attachShader(a.program,b),a.attachShader(a.program,c),this.vertexPositionAttribute=0,a.bindAttribLocation(a.program,this.vertexPositionAttribute,"a_vertex_position"),a.linkProgram(a.program),a.getProgramParameter(a.program,a.LINK_STATUS)||alert("Could not initialize shaders: "+a.getProgramInfoLog(a.program)),a.useProgram(a.program),a.enableVertexAttribArray(this.vertexPositionAttribute),this.vertexTexCoordAttribute=a.getAttribLocation(a.program,"a_vertex_texcoord"),this.vertexNormalAttribute=a.getAttribLocation(a.program,"a_vertex_normal"),a.enableVertexAttribArray(this.vertexNormalAttribute),this.dimensionUniform=a.getUniformLocation(a.program,"u_dimension")},c.getShader=function(a,c){var d=b.getElementById(c);if(d){for(var e=[],f=d.firstChild;f;)3===f.nodeType&&e.push(f.textContent),f=f.nextSibling;if("x-shader/x-fragment"===d.type)f=a.createShader(a.FRAGMENT_SHADER);else{if("x-shader/x-vertex"!==d.type)return;f=a.createShader(a.VERTEX_SHADER)}if(a.shaderSource(f,e.join("")),a.compileShader(f),a.getShaderParameter(f,a.COMPILE_STATUS))return f;alert(d.type+" "+a.getShaderInfoLog(f))}},c.loadDefaultVertexShader=function(a){var b=a.createShader(a.VERTEX_SHADER);return a.shaderSource(b,"precision mediump float;attribute vec3 a_vertex_position;attribute vec3 a_vertex_normal;attribute vec2 a_vertex_texcoord;uniform vec3 u_light_diffuse_color;uniform vec3 u_material_ambient_color;uniform vec3 u_material_diffuse_color;uniform mat4 u_model_view_matrix;uniform mat4 u_projection_matrix;uniform mat3 u_normal_matrix;uniform vec2 u_dimension;varying vec2 v_texcoord;varying vec3 v_diffuse;varying vec4 v_ambient;varying vec3 v_normal;void main() {v_texcoord = a_vertex_texcoord;if(length(a_vertex_texcoord) != 0.) {gl_Position = u_model_view_matrix * vec4(a_vertex_position, 1.);vec4 depth_pos = vec4(gl_Position);depth_pos.z += a_vertex_normal.z;gl_Position = u_projection_matrix * gl_Position;depth_pos = u_projection_matrix * depth_pos;gl_Position /= gl_Position.w;gl_Position.xy += a_vertex_normal.xy / u_dimension * 2.;gl_Position.z = depth_pos.z / depth_pos.w;} else {v_normal = length(a_vertex_normal)==0. ? a_vertex_normal : normalize(u_normal_matrix * a_vertex_normal);v_ambient = vec4(u_material_ambient_color, 1.);v_diffuse = u_material_diffuse_color * u_light_diffuse_color;gl_Position = u_projection_matrix * u_model_view_matrix * vec4(a_vertex_position, 1.);gl_Position /= gl_Position.w;gl_PointSize = 2.;}}"),a.compileShader(b),a.getShaderParameter(b,a.COMPILE_STATUS)?b:void alert("Vertex shader failed to compile: "+a.getShaderInfoLog(b))},c.loadDefaultFragmentShader=function(a){var b=a.createShader(a.FRAGMENT_SHADER);return a.shaderSource(b,"precision mediump float;\nuniform vec3 u_light_specular_color;uniform vec3 u_light_direction;uniform vec3 u_light_half_vector;uniform vec3 u_material_specular_color;uniform float u_material_shininess;uniform float u_material_alpha;uniform int u_fog_mode;uniform vec3 u_fog_color;uniform float u_fog_density;uniform float u_fog_start;uniform float u_fog_end;uniform sampler2D u_image;varying vec2 v_texcoord;varying vec3 v_diffuse;varying vec4 v_ambient;varying vec3 v_normal;void main(void){if(length(v_texcoord)!=0.) {gl_FragColor = texture2D(u_image, v_texcoord);}else if(length(v_normal)==0.){gl_FragColor = vec4(v_diffuse, u_material_alpha);}else{float nDotL = max(dot(v_normal, u_light_direction), 0.);vec4 color = vec4(v_diffuse*nDotL, 1.);float nDotHV = max(dot(v_normal, u_light_half_vector), 0.);vec3 specular = u_material_specular_color * u_light_specular_color;color+=vec4(specular * pow(nDotHV, u_material_shininess), 1.);gl_FragColor = color+v_ambient;gl_FragColor.a*=u_material_alpha;float fogCoord = gl_FragCoord.z/gl_FragCoord.w;float fogFactor = 1.;if(u_fog_mode == 1){if(fogCoord < u_fog_start){fogFactor = 1.;}else if(fogCoord > u_fog_end){fogFactor = 0.;}else{fogFactor = clamp((u_fog_end - fogCoord) / (u_fog_end - u_fog_start), 0., 1.);}}else if(u_fog_mode == 2) {fogFactor = clamp(exp(-u_fog_density*fogCoord), 0., 1.);}else if(u_fog_mode == 3) {fogFactor = clamp(exp(-pow(u_fog_density*fogCoord, 2.)), 0., 1.);}gl_FragColor = mix(vec4(u_fog_color, 1.), gl_FragColor, fogFactor);}}"),a.compileShader(b),a.getShaderParameter(b,a.COMPILE_STATUS)?b:void alert("Fragment shader failed to compile: "+a.getShaderInfoLog(b))}}(ChemDoodle.structures.d3,document),function(a,b,c){b.Shape=function(b,d){for(var e=b.length,f=[],g=[],h=new a.Point,i=0,j=e;j>i;i++){var k=i+1;i===j-1&&(k=0);for(var l=b[i],k=b[k],m=c.cross([0,0,1],[k.x-l.x,k.y-l.y,0]),n=0;2>n;n++)f.push(l.x,l.y,d/2),f.push(l.x,l.y,-d/2),f.push(k.x,k.y,d/2),f.push(k.x,k.y,-d/2);for(n=0;4>n;n++)g.push(m[0],m[1],m[2]);g.push(0,0,1),g.push(0,0,-1),g.push(0,0,1),g.push(0,0,-1),h.add(l)}for(h.x/=e,h.y/=e,g.push(0,0,1),f.push(h.x,h.y,d/2),g.push(0,0,-1),f.push(h.x,h.y,-d/2),h=[],l=8*e,i=0,j=e;j>i;i++)e=8*i,h.push(e),h.push(e+3),h.push(e+1),h.push(e),h.push(e+2),h.push(e+3),h.push(e+4),h.push(l),h.push(e+6),h.push(e+5),h.push(e+7),h.push(l+1);this.storeData(f,g,h)},b.Shape.prototype=new b._Mesh}(ChemDoodle.structures,ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(a,b,c){a.Star=function(){for(var a=[.8944,.4472,0,.2764,.4472,.8506,.2764,.4472,-.8506,-.7236,.4472,.5257,-.7236,.4472,-.5257,-.3416,.4472,0,-.1056,.4472,.3249,-.1056,.4472,-.3249,.2764,.4472,.2008,.2764,.4472,-.2008,-.8944,-.4472,0,-.2764,-.4472,.8506,-.2764,-.4472,-.8506,.7236,-.4472,.5257,.7236,-.4472,-.5257,.3416,-.4472,0,.1056,-.4472,.3249,.1056,-.4472,-.3249,-.2764,-.4472,.2008,-.2764,-.4472,-.2008,-.5527,.1058,0,-.1708,.1058,.5527,-.1708,.1058,-.5527,.4471,.1058,.3249,.4471,.1058,-.3249,.5527,-.1058,0,.1708,-.1058,.5527,.1708,-.1058,-.5527,-.4471,-.1058,.3249,-.4471,-.1058,-.3249,0,1,0,0,-1,0],b=[0,9,8,2,7,9,4,5,7,3,6,5,1,8,6,0,8,23,30,6,8,3,21,6,11,26,21,13,23,26,2,9,24,30,8,9,1,23,8,13,25,23,14,24,25,4,7,22,30,9,7,0,24,9,14,27,24,12,22,27,3,5,20,30,7,5,2,22,7,12,29,22,10,20,29,1,6,21,30,5,6,4,20,5,10,28,20,11,21,28,10,19,18,12,17,19,14,15,17,13,16,15,11,18,16,31,19,17,14,17,27,2,27,22,4,22,29,10,29,19,31,18,19,12,19,29,4,29,20,3,20,28,11,28,18,31,16,18,10,18,28,3,28,21,1,21,26,13,26,16,31,15,16,11,16,26,1,26,23,0,23,25,14,25,15,31,17,15,13,15,25,0,25,24,2,24,27,12,27,17],d=[],e=[],f=[],g=0,h=b.length;h>g;g+=3){var i=3*b[g],j=3*b[g+1],k=3*b[g+2],i=[a[i],a[i+1],a[i+2]],j=[a[j],a[j+1],a[j+2]],k=[a[k],a[k+1],a[k+2]],l=c.cross([k[0]-j[0],k[1]-j[1],k[2]-j[2]],[i[0]-j[0],i[1]-j[1],i[2]-j[2]],[]);c.normalize(l),d.push(i[0],i[1],i[2],j[0],j[1],j[2],k[0],k[1],k[2]),e.push(l[0],l[1],l[2],l[0],l[1],l[2],l[0],l[1],l[2]),f.push(g,g+1,g+2)}this.storeData(d,e,f)},a.Star.prototype=new a._Mesh}(ChemDoodle.structures.d3,Math,ChemDoodle.lib.vec3),function(a,b,c){a.TextImage=function(){this.ctx=c.createElement("canvas").getContext("2d"),this.data=[],this.text="",this.charHeight=0},a=a.TextImage.prototype,a.init=function(a){this.textureImage=a.createTexture(),a.bindTexture(a.TEXTURE_2D,this.textureImage),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,!1),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.NEAREST),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.NEAREST),a.bindTexture(a.TEXTURE_2D,null),this.updateFont(a,12,["Sans-serif"],!1,!1,!1)},a.charData=function(a){return a=this.text.indexOf(a),a>=0?this.data[a]:null},a.updateFont=function(a,c,d,e,f,g){var h=this.ctx,i=this.ctx.canvas,j=[],k="";f=b.getFontString(c,d,e,f),h.font=f,h.save();var l=0;for(c*=1.5,d=32,e=127;e>d;d++){var m=String.fromCharCode(d),n=h.measureText(m).width;j.push({text:m,width:n,height:c}),l+=2*n}var o=["","",""];for(d=0,e=o.length;e>d;d++)m=o[d],n=h.measureText(m).width,j.push({text:m,width:n,height:c}),l+=2*n;for(d=Math.sqrt(l*c),d=Math.ceil(d/c),l=Math.ceil(l/(d-1)),i.width=l,i.height=d*c,h.font=f,h.textAlign="left",h.textBaseline="middle",h.strokeStyle="#000",h.lineWidth=1.4,h.fillStyle="#fff",d=m=f=0,e=j.length;e>d;d++){n=j[d],o=2*n.width,c=n.height;var p=n.text;m+o>l&&(f++,m=0);var q=f*c;g&&h.strokeText(p,m,q+c/2),h.fillText(p,m,q+c/2),n.x=m,n.y=q,k+=p,m+=o}this.text=k,this.data=j,this.charHeight=c,a.bindTexture(a.TEXTURE_2D,this.textureImage),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,i),a.bindTexture(a.TEXTURE_2D,null)},a.pushVertexData=function(a,b,c,d){var e=a.toString().split(""),f=this.getHeight(),g=this.getWidth();a=-this.textWidth(a)/2;for(var h=-this.charHeight/2,i=0,j=e.length;j>i;i++){var k=this.charData(e[i]),l=k.width,m=k.x/g,n=m+1.8*k.width/g,o=k.y/f,k=o+k.height/f,p=a+1.8*l,q=this.charHeight/2;d.position.push(b[0],b[1],b[2],b[0],b[1],b[2],b[0],b[1],b[2],b[0],b[1],b[2],b[0],b[1],b[2],b[0],b[1],b[2]),d.texCoord.push(m,o,n,k,n,o,m,o,m,k,n,k),d.translation.push(a,q,c,p,h,c,p,q,c,a,q,c,a,h,c,p,h,c),a=p+l-1.8*l}},a.getCanvas=function(){return this.ctx.canvas},a.getHeight=function(){return this.getCanvas().height},a.getWidth=function(){return this.getCanvas().width},a.textWidth=function(a){return this.ctx.measureText(a).width},a.test=function(){c.body.appendChild(this.getCanvas())},a.useTexture=function(a){a.bindTexture(a.TEXTURE_2D,this.textureImage)}}(ChemDoodle.structures.d3,ChemDoodle.extensions,document),function(a){a.TextMesh=function(){},a=a.TextMesh.prototype,a.init=function(a){this.vertexPositionBuffer=a.createBuffer(),this.vertexTexCoordBuffer=a.createBuffer(),this.vertexTranslationBuffer=a.createBuffer()},a.setVertexData=function(a,b,c,d){a.bindBuffer(a.ARRAY_BUFFER,b),a.bufferData(a.ARRAY_BUFFER,new Float32Array(c),a.STATIC_DRAW),b.itemSize=d,b.numItems=c.length/d},a.storeData=function(a,b,c,d){this.setVertexData(a,this.vertexPositionBuffer,b,3),this.setVertexData(a,this.vertexTexCoordBuffer,c,2),this.setVertexData(a,this.vertexTranslationBuffer,d,3)},a.bindBuffers=function(a){a.bindBuffer(a.ARRAY_BUFFER,this.vertexPositionBuffer),a.vertexAttribPointer(a.shader.vertexPositionAttribute,this.vertexPositionBuffer.itemSize,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.vertexTexCoordBuffer),a.vertexAttribPointer(a.shader.vertexTexCoordAttribute,this.vertexTexCoordBuffer.itemSize,a.FLOAT,!1,0,0),a.bindBuffer(a.ARRAY_BUFFER,this.vertexTranslationBuffer),a.vertexAttribPointer(a.shader.vertexNormalAttribute,this.vertexTranslationBuffer.itemSize,a.FLOAT,!1,0,0)},a.render=function(a){var b=this.vertexPositionBuffer.numItems;b&&(this.bindBuffers(a),a.drawArrays(a.TRIANGLES,0,b))}}(ChemDoodle.structures.d3,Math),function(a,b,c,d,e,f,g){d.Torsion=function(a,b,c,d){this.a1=a,this.a2=b,this.a3=c,this.a4=d},a=d.Torsion.prototype=new d._Measurement,a.calculateData=function(a){var b=[],c=[],d=[],f=this.a2.distance3D(this.a1),h=this.a2.distance3D(this.a3);this.distUse=e.min(f,h)/2;var h=[this.a2.x-this.a1.x,this.a2.y-this.a1.y,this.a2.z-this.a1.z],f=[this.a3.x-this.a2.x,this.a3.y-this.a2.y,this.a3.z-this.a2.z],i=[this.a4.x-this.a3.x,this.a4.y-this.a3.y,this.a4.z-this.a3.z],j=g.cross(h,f,[]),i=g.cross(f,i,[]);g.scale(h,g.length(f)),this.torsion=e.atan2(g.dot(h,i),g.dot(j,i)),h=g.normalize(g.cross(j,f,[])),j=g.normalize(g.cross(f,h,[])),this.pos=g.add([this.a2.x,this.a2.y,this.a2.z],g.scale(g.normalize(f,[]),this.distUse));var i=[],k=a.measurement_angleBands_3D;for(a=0;k>=a;++a){var l=this.torsion*a/k,m=g.scale(h,e.cos(l),[]),l=g.scale(j,e.sin(l),[]),m=g.scale(g.normalize(g.add(m,l,[])),this.distUse);0==a&&(i=m),b.push(this.pos[0]+m[0],this.pos[1]+m[1],this.pos[2]+m[2]),c.push(0,0,0),k>a&&d.push(a,a+1)}this.vecText=g.normalize(g.add(i,m,[])),f=g.normalize(f,[]),g.scale(f,.0625),l=this.torsion-2*e.asin(.125)*this.torsion/e.abs(this.torsion),m=g.scale(h,e.cos(l),[]),l=g.scale(j,e.sin(l),[]),m=g.scale(g.normalize(g.add(m,l,[])),this.distUse),b.push(this.pos[0]+f[0]+m[0],this.pos[1]+f[1]+m[1],this.pos[2]+f[2]+m[2]),c.push(0,0,0),b.push(this.pos[0]-f[0]+m[0],this.pos[1]-f[1]+m[1],this.pos[2]-f[2]+m[2]),c.push(0,0,0),d.push(--a,a+1,a,a+2),this.storeData(b,c,d)},a.getText=function(){return g.add(this.pos,g.scale(this.vecText,this.distUse+.3,[])),{pos:this.pos,value:[b.angleBounds(this.torsion,!0,!0).toFixed(2)," "].join("")}}}(ChemDoodle.ELEMENT,ChemDoodle.math,ChemDoodle.extensions,ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(a,b,c,d,e,f,g,h){var i=function(a,b,c){var d=e.sqrt(b[1]*b[1]+b[2]*b[2]),g=[1,0,0,0,0,b[2]/d,-b[1]/d,0,0,b[1]/d,b[2]/d,0,0,0,0,1],h=[1,0,0,0,0,b[2]/d,b[1]/d,0,0,-b[1]/d,b[2]/d,0,0,0,0,1],i=[d,0,-b[0],0,0,1,0,0,b[0],0,d,0,0,0,0,1];b=[d,0,b[0],0,0,1,0,0,-b[0],0,d,0,0,0,0,1],c=[e.cos(c),-e.sin(c),0,0,e.sin(c),e.cos(c),0,0,0,0,1,0,0,0,0,1];var j=f.multiply(g,f.multiply(i,f.multiply(c,f.multiply(b,h,[]))));this.rotate=function(){return f.multiplyVec3(j,a)}};d.Tube=function(d,j,k){var l=d[0].lineSegments[0].length;this.partitions=[];var m;this.ends=[],this.ends.push(d[0].lineSegments[0][0]),this.ends.push(d[d.length-2].lineSegments[0][0]);for(var n=[1,0,0],o=0,p=d.length-1;p>o;o++){(!m||65e3<m.positionData.length)&&(0<this.partitions.length&&o--,m={count:0,positionData:[],normalData:[],indexData:[]},this.partitions.push(m));var q=d[o];m.count++;for(var r=1/0,s=new c.Atom("",d[o+1].cp1.x,d[o+1].cp1.y,d[o+1].cp1.z),t=0;l>t;t++){var u,v=q.lineSegments[0][t];u=t===l-1?o===d.length-2?q.lineSegments[0][t-1]:d[o+1].lineSegments[0][0]:q.lineSegments[0][t+1],u=[u.x-v.x,u.y-v.y,u.z-v.z],g.normalize(u),o===d.length-2&&t===l-1&&g.scale(u,-1);var w=g.cross(u,n,[]);g.normalize(w),g.scale(w,j/2),w=new i(w,u,2*Math.PI/k),u=0;for(var x=k;x>u;u++){var y=w.rotate();u===e.floor(k/4)&&(n=[y[0],y[1],y[2]]),m.normalData.push(y[0],y[1],y[2]),m.positionData.push(v.x+y[0],v.y+y[1],v.z+y[2])}s&&(u=v.distance3D(s),r>u&&(r=u,d[o+1].pPoint=v))}}for(n=0,q=this.partitions.length;q>n;n++)for(m=this.partitions[n],o=0,p=m.count-1;p>o;o++)for(r=o*l*k,t=0,s=l;s>t;t++)for(v=r+t*k,u=0;k>u;u++)w=v+u,m.indexData.push(w),m.indexData.push(w+k),m.indexData.push(w+k+1),m.indexData.push(w),m.indexData.push(w+k+1),m.indexData.push(w+1);for(this.storeData(this.partitions[0].positionData,this.partitions[0].normalData,this.partitions[0].indexData),k=[new c.Point(2,0)],o=0;60>o;o++)l=o/60*e.PI,k.push(new c.Point(2*e.cos(l),-2*e.sin(l)));k.push(new c.Point(-2,0),new c.Point(-2,4),new c.Point(2,4));var z=new c.d3.Shape(k,1);this.render=function(i,k){if(this.bindBuffers(i),i.material.setDiffuseColor(k.macro_colorByChain?this.chainColor:k.nucleics_tubeColor),i.drawElements(i.TRIANGLES,this.vertexIndexBuffer.numItems,i.UNSIGNED_SHORT,0),this.partitions)for(var l=1,m=this.partitions.length;m>l;l++){var n=this.partitions[l],o=i,p=n;o.bindBuffer(o.ARRAY_BUFFER,p.vertexPositionBuffer),o.vertexAttribPointer(o.shader.vertexPositionAttribute,p.vertexPositionBuffer.itemSize,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,p.vertexNormalBuffer),o.vertexAttribPointer(o.shader.vertexNormalAttribute,p.vertexNormalBuffer.itemSize,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,p.vertexIndexBuffer),i.drawElements(i.TRIANGLES,n.vertexIndexBuffer.numItems,i.UNSIGNED_SHORT,0)}for(i.sphereBuffer.bindBuffers(i),l=0;2>l;l++)n=this.ends[l],n=f.translate(i.modelViewMatrix,[n.x,n.y,n.z],[]),m=j/2,f.scale(n,[m,m,m]),i.setMatrixUniforms(n),i.drawElements(i.TRIANGLES,i.sphereBuffer.vertexIndexBuffer.numItems,i.UNSIGNED_SHORT,0);for(i.cylinderBuffer.bindBuffers(i),l=1,m=d.length-1;m>l;l++){var p=d[l],q=p.pPoint,r=new c.Atom("",p.cp2.x,p.cp2.y,p.cp2.z),n=1.001*q.distance3D(r),p=[j/4,n,j/4],n=f.translate(i.modelViewMatrix,[q.x,q.y,q.z],[]),s=[0,1,0],t=0,o=[r.x-q.x,r.y-q.y,r.z-q.z];q.x===r.x&&q.z===r.z?(s=[0,0,1],q.y<q.y&&(t=e.PI)):(t=a.vec3AngleFrom(s,o),s=g.cross(s,o,[])),0!==t&&f.rotate(n,t,s),f.scale(n,p),i.setMatrixUniforms(n),i.drawArrays(i.TRIANGLE_STRIP,0,i.cylinderBuffer.vertexPositionBuffer.numItems)}for(z.bindBuffers(i),"none"===k.nucleics_residueColor&&!k.macro_colorByChain&&i.material.setDiffuseColor(k.nucleics_baseColor),l=1,m=d.length-1;m>l;l++)p=d[l],r=p.cp2,n=f.translate(i.modelViewMatrix,[r.x,r.y,r.z],[]),s=[0,1,0],t=0,q=p.cp3,o=[q.x-r.x,q.y-r.y,q.z-r.z],r.x===q.x&&r.z===q.z?(s=[0,0,1],r.y<r.y&&(t=e.PI)):(t=a.vec3AngleFrom(s,o),s=g.cross(s,o,[])),0!==t&&f.rotate(n,t,s),r=[1,0,0],t=f.rotate(f.identity([]),t,s),f.multiplyVec3(t,r),t=p.cp4,q=p.cp5,t.y===q.y&&t.z===q.z||(t=[q.x-t.x,q.y-t.y,q.z-t.z],q=a.vec3AngleFrom(r,t),0>g.dot(o,g.cross(r,t))&&(q*=-1),f.rotateY(n,q)),k.macro_colorByChain||("shapely"===k.nucleics_residueColor?b[p.name]?i.material.setDiffuseColor(b[p.name].shapelyColor):i.material.setDiffuseColor(b["*"].shapelyColor):"rainbow"===k.nucleics_residueColor&&i.material.setDiffuseColor(h.rainbowAt(l,m,k.macro_rainbowColors))),i.setMatrixUniforms(n),i.drawElements(i.TRIANGLES,z.vertexIndexBuffer.numItems,i.UNSIGNED_SHORT,0)}},d.Tube.prototype=new d._Mesh}(ChemDoodle.extensions,ChemDoodle.RESIDUE,ChemDoodle.structures,ChemDoodle.structures.d3,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3,ChemDoodle.math),function(a){a.UnitCell=function(a){var b=[],c=[],d=function(a,d,e,f){for(b.push(a[0],a[1],a[2]),b.push(d[0],d[1],d[2]),b.push(e[0],e[1],e[2]),b.push(f[0],f[1],f[2]),a=0;4>a;a++)c.push(0,0,0)};for(d(a.o,a.x,a.xy,a.y),d(a.o,a.y,a.yz,a.z),d(a.o,a.z,a.xz,a.x),d(a.yz,a.y,a.xy,a.xyz),d(a.xyz,a.xz,a.z,a.yz),d(a.xy,a.x,a.xz,a.xyz),a=[],d=0;6>d;d++){var e=4*d;a.push(e,e+1,e+1,e+2,e+2,e+3,e+3,e)}this.storeData(b,c,a)},a.UnitCell.prototype=new a._Mesh}(ChemDoodle.structures.d3,ChemDoodle.lib.vec3),function(a,b,c){a.Plate=function(a){for(this.lanes=Array(a),i=0,ii=a;i<ii;i++)this.lanes[i]=[]};var d=a.Plate.prototype;d.sort=function(){for(i=0,ii=this.lanes.length;i<ii;i++)this.lanes[i].sort(function(a,b){return a-b})},d.draw=function(a){var d=a.canvas.width,e=a.canvas.height;for(this.origin=9*e/10,this.front=e/10,this.laneLength=this.origin-this.front,a.strokeStyle="#000000",a.beginPath(),a.moveTo(0,this.front),b.contextHashTo(a,0,this.front,d,this.front,3,3),a.closePath(),a.stroke(),a.beginPath(),a.moveTo(0,this.origin),a.lineTo(d,this.origin),a.closePath(),a.stroke(),i=0,ii=this.lanes.length;i<ii;i++)for(e=(i+1)*d/(ii+1),a.beginPath(),a.moveTo(e,this.origin),a.lineTo(e,this.origin+3),a.closePath(),a.stroke(),s=0,ss=this.lanes[i].length;s<ss;s++){var f=this.origin-this.laneLength*this.lanes[i][s].rf;switch(this.lanes[i][s].type){case"compact":a.beginPath(),a.arc(e,f,3,0,2*c.PI,!1),a.closePath();break;case"expanded":a.beginPath(),a.arc(e,f,7,0,2*c.PI,!1),a.closePath();break;case"widened":b.contextOval(a,e-18,f-10,36,10);break;case"cresent":a.beginPath(),a.arc(e,f,9,0,c.PI,!0),a.closePath()}switch(this.lanes[i][s].style){case"solid":a.fillStyle="#000000",a.fill();break;case"transparent":a.stroke()}}},a.Plate.Spot=function(a,b,c){this.type=a,this.rf=b,this.style=c?c:"solid"}}(ChemDoodle.structures,ChemDoodle.extensions,Math),function(a,b,c){a.default_backgroundColor="#FFFFFF",a.default_scale=1,a.default_rotateAngle=0,a.default_bondLength_2D=20,a.default_angstromsPerBondLength=1.25,a.default_lightDirection_3D=[-.1,-.1,-1],a.default_lightDiffuseColor_3D="#FFFFFF",a.default_lightSpecularColor_3D="#FFFFFF",a.default_projectionPerspective_3D=!0,a.default_projectionPerspectiveVerticalFieldOfView_3D=45,a.default_projectionOrthoWidth_3D=40,a.default_projectionWidthHeightRatio_3D=void 0,a.default_projectionFrontCulling_3D=.1,a.default_projectionBackCulling_3D=1e4,a.default_cullBackFace_3D=!0,a.default_fog_mode_3D=0,a.default_fog_color_3D="#000000",a.default_fog_start_3D=0,a.default_fog_end_3D=1,a.default_fog_density_3D=1,a.default_atoms_display=!0,a.default_atoms_color="#000000",a.default_atoms_font_size_2D=12,a.default_atoms_font_families_2D=["Helvetica","Arial","Dialog"],a.default_atoms_font_bold_2D=!1,a.default_atoms_font_italic_2D=!1,a.default_atoms_circles_2D=!1,a.default_atoms_circleDiameter_2D=10,a.default_atoms_circleBorderWidth_2D=1,a.default_atoms_lonePairDistance_2D=8,a.default_atoms_lonePairSpread_2D=4,a.default_atoms_lonePairDiameter_2D=1,a.default_atoms_useJMOLColors=!1,a.default_atoms_usePYMOLColors=!1,a.default_atoms_resolution_3D=60,a.default_atoms_sphereDiameter_3D=.8,a.default_atoms_useVDWDiameters_3D=!1,a.default_atoms_vdwMultiplier_3D=1,a.default_atoms_materialAmbientColor_3D="#000000",a.default_atoms_materialSpecularColor_3D="#555555",a.default_atoms_materialShininess_3D=32,a.default_atoms_implicitHydrogens_2D=!0,
a.default_atoms_displayTerminalCarbonLabels_2D=!1,a.default_atoms_showHiddenCarbons_2D=!0,a.default_atoms_showAttributedCarbons_2D=!0,a.default_atoms_displayAllCarbonLabels_2D=!1,a.default_atoms_nonBondedAsStars_3D=!1,a.default_atoms_displayLabels_3D=!1,a.default_atoms_HBlack_2D=!0,a.default_bonds_display=!0,a.default_bonds_color="#000000",a.default_bonds_width_2D=1,a.default_bonds_saturationWidth_2D=.2,a.default_bonds_ends_2D="round",a.default_bonds_useJMOLColors=!1,a.default_bonds_usePYMOLColors=!1,a.default_bonds_colorGradient=!1,a.default_bonds_saturationAngle_2D=c.PI/3,a.default_bonds_symmetrical_2D=!1,a.default_bonds_clearOverlaps_2D=!1,a.default_bonds_overlapClearWidth_2D=.5,a.default_bonds_atomLabelBuffer_2D=1,a.default_bonds_wedgeThickness_2D=.22,a.default_bonds_hashWidth_2D=1,a.default_bonds_hashSpacing_2D=2.5,a.default_bonds_dotSize_2D=2,a.default_bonds_lewisStyle_2D=!1,a.default_bonds_showBondOrders_3D=!1,a.default_bonds_resolution_3D=60,a.default_bonds_renderAsLines_3D=!1,a.default_bonds_cylinderDiameter_3D=.3,a.default_bonds_pillLatitudeResolution_3D=10,a.default_bonds_pillLongitudeResolution_3D=20,a.default_bonds_pillHeight_3D=.3,a.default_bonds_pillSpacing_3D=.1,a.default_bonds_pillDiameter_3D=.3,a.default_bonds_materialAmbientColor_3D="#222222",a.default_bonds_materialSpecularColor_3D="#555555",a.default_bonds_materialShininess_3D=32,a.default_proteins_displayRibbon=!0,a.default_proteins_displayBackbone=!1,a.default_proteins_backboneThickness=1.5,a.default_proteins_backboneColor="#CCCCCC",a.default_proteins_ribbonCartoonize=!1,a.default_proteins_residueColor="none",a.default_proteins_primaryColor="#FF0D0D",a.default_proteins_secondaryColor="#FFFF30",a.default_proteins_ribbonCartoonHelixPrimaryColor="#00E740",a.default_proteins_ribbonCartoonHelixSecondaryColor="#9905FF",a.default_proteins_ribbonCartoonSheetColor="#E8BB99",a.default_proteins_ribbonThickness=.2,a.default_proteins_verticalResolution=10,a.default_proteins_horizontalResolution=9,a.default_proteins_materialAmbientColor_3D="#222222",a.default_proteins_materialSpecularColor_3D="#555555",a.default_proteins_materialShininess_3D=32,a.default_nucleics_display=!0,a.default_nucleics_tubeColor="#CCCCCC",a.default_nucleics_baseColor="#C10000",a.default_nucleics_residueColor="none",a.default_nucleics_tubeThickness=1.5,a.default_nucleics_tubeResolution_3D=60,a.default_nucleics_verticalResolution=10,a.default_nucleics_materialAmbientColor_3D="#222222",a.default_nucleics_materialSpecularColor_3D="#555555",a.default_nucleics_materialShininess_3D=32,a.default_macro_displayAtoms=!1,a.default_macro_displayBonds=!1,a.default_macro_atomToLigandDistance=-1,a.default_macro_showWater=!1,a.default_macro_colorByChain=!1,a.default_macro_rainbowColors=["#0000FF","#00FFFF","#00FF00","#FFFF00","#FF0000"],a.default_surfaces_display=!0,a.default_surfaces_style="Dot",a.default_surfaces_color="#E9B862",a.default_surfaces_materialAmbientColor_3D="#000000",a.default_surfaces_materialSpecularColor_3D="#000000",a.default_surfaces_materialShininess_3D=32,a.default_crystals_displayUnitCell=!0,a.default_crystals_unitCellColor="green",a.default_crystals_unitCellLineWidth=1,a.default_plots_color="#000000",a.default_plots_width=1,a.default_plots_showIntegration=!1,a.default_plots_integrationColor="#c10000",a.default_plots_integrationLineWidth=1,a.default_plots_showGrid=!1,a.default_plots_gridColor="grey",a.default_plots_gridLineWidth=.5,a.default_plots_showYAxis=!0,a.default_plots_flipXAxis=!1,a.default_text_font_size=12,a.default_text_font_families=["Helvetica","Arial","Dialog"],a.default_text_font_bold=!0,a.default_text_font_italic=!1,a.default_text_font_stroke_3D=!0,a.default_text_color="#000000",a.default_shapes_color="#000000",a.default_shapes_lineWidth_2D=1,a.default_shapes_arrowLength_2D=8,a.default_compass_display=!1,a.default_compass_axisXColor_3D="#FF0000",a.default_compass_axisYColor_3D="#00FF00",a.default_compass_axisZColor_3D="#0000FF",a.default_compass_size_3D=50,a.default_compass_resolution_3D=10,a.default_compass_displayText_3D=!0,a.default_compass_type_3D=0,a.default_measurement_update_3D=!1,a.default_measurement_angleBands_3D=10,a.default_measurement_displayText_3D=!0,b.VisualSpecifications=function(){this.backgroundColor=a.default_backgroundColor,this.scale=a.default_scale,this.rotateAngle=a.default_rotateAngle,this.bondLength=a.default_bondLength_2D,this.angstromsPerBondLength=a.default_angstromsPerBondLength,this.lightDirection_3D=a.default_lightDirection_3D.slice(0),this.lightDiffuseColor_3D=a.default_lightDiffuseColor_3D,this.lightSpecularColor_3D=a.default_lightSpecularColor_3D,this.projectionPerspective_3D=a.default_projectionPerspective_3D,this.projectionPerspectiveVerticalFieldOfView_3D=a.default_projectionPerspectiveVerticalFieldOfView_3D,this.projectionOrthoWidth_3D=a.default_projectionOrthoWidth_3D,this.projectionWidthHeightRatio_3D=a.default_projectionWidthHeightRatio_3D,this.projectionFrontCulling_3D=a.default_projectionFrontCulling_3D,this.projectionBackCulling_3D=a.default_projectionBackCulling_3D,this.cullBackFace_3D=a.default_cullBackFace_3D,this.fog_mode_3D=a.default_fog_mode_3D,this.fog_color_3D=a.default_fog_color_3D,this.fog_start_3D=a.default_fog_start_3D,this.fog_end_3D=a.default_fog_end_3D,this.fog_density_3D=a.default_fog_density_3D,this.atoms_display=a.default_atoms_display,this.atoms_color=a.default_atoms_color,this.atoms_font_size_2D=a.default_atoms_font_size_2D,this.atoms_font_families_2D=a.default_atoms_font_families_2D.slice(0),this.atoms_font_bold_2D=a.default_atoms_font_bold_2D,this.atoms_font_italic_2D=a.default_atoms_font_italic_2D,this.atoms_circles_2D=a.default_atoms_circles_2D,this.atoms_circleDiameter_2D=a.default_atoms_circleDiameter_2D,this.atoms_circleBorderWidth_2D=a.default_atoms_circleBorderWidth_2D,this.atoms_lonePairDistance_2D=a.default_atoms_lonePairDistance_2D,this.atoms_lonePairSpread_2D=a.default_atoms_lonePairSpread_2D,this.atoms_lonePairDiameter_2D=a.default_atoms_lonePairDiameter_2D,this.atoms_useJMOLColors=a.default_atoms_useJMOLColors,this.atoms_usePYMOLColors=a.default_atoms_usePYMOLColors,this.atoms_resolution_3D=a.default_atoms_resolution_3D,this.atoms_sphereDiameter_3D=a.default_atoms_sphereDiameter_3D,this.atoms_useVDWDiameters_3D=a.default_atoms_useVDWDiameters_3D,this.atoms_vdwMultiplier_3D=a.default_atoms_vdwMultiplier_3D,this.atoms_materialAmbientColor_3D=a.default_atoms_materialAmbientColor_3D,this.atoms_materialSpecularColor_3D=a.default_atoms_materialSpecularColor_3D,this.atoms_materialShininess_3D=a.default_atoms_materialShininess_3D,this.atoms_implicitHydrogens_2D=a.default_atoms_implicitHydrogens_2D,this.atoms_displayTerminalCarbonLabels_2D=a.default_atoms_displayTerminalCarbonLabels_2D,this.atoms_showHiddenCarbons_2D=a.default_atoms_showHiddenCarbons_2D,this.atoms_showAttributedCarbons_2D=a.default_atoms_showAttributedCarbons_2D,this.atoms_displayAllCarbonLabels_2D=a.default_atoms_displayAllCarbonLabels_2D,this.atoms_nonBondedAsStars_3D=a.default_atoms_nonBondedAsStars_3D,this.atoms_displayLabels_3D=a.default_atoms_displayLabels_3D,this.atoms_HBlack_2D=a.default_atoms_HBlack_2D,this.bonds_display=a.default_bonds_display,this.bonds_color=a.default_bonds_color,this.bonds_width_2D=a.default_bonds_width_2D,this.bonds_saturationWidth_2D=a.default_bonds_saturationWidth_2D,this.bonds_ends_2D=a.default_bonds_ends_2D,this.bonds_useJMOLColors=a.default_bonds_useJMOLColors,this.bonds_usePYMOLColors=a.default_bonds_usePYMOLColors,this.bonds_colorGradient=a.default_bonds_colorGradient,this.bonds_saturationAngle_2D=a.default_bonds_saturationAngle_2D,this.bonds_symmetrical_2D=a.default_bonds_symmetrical_2D,this.bonds_clearOverlaps_2D=a.default_bonds_clearOverlaps_2D,this.bonds_overlapClearWidth_2D=a.default_bonds_overlapClearWidth_2D,this.bonds_atomLabelBuffer_2D=a.default_bonds_atomLabelBuffer_2D,this.bonds_wedgeThickness_2D=a.default_bonds_wedgeThickness_2D,this.bonds_hashWidth_2D=a.default_bonds_hashWidth_2D,this.bonds_hashSpacing_2D=a.default_bonds_hashSpacing_2D,this.bonds_dotSize_2D=a.default_bonds_dotSize_2D,this.bonds_lewisStyle_2D=a.default_bonds_lewisStyle_2D,this.bonds_showBondOrders_3D=a.default_bonds_showBondOrders_3D,this.bonds_resolution_3D=a.default_bonds_resolution_3D,this.bonds_renderAsLines_3D=a.default_bonds_renderAsLines_3D,this.bonds_cylinderDiameter_3D=a.default_bonds_cylinderDiameter_3D,this.bonds_pillHeight_3D=a.default_bonds_pillHeight_3D,this.bonds_pillLatitudeResolution_3D=a.default_bonds_pillLatitudeResolution_3D,this.bonds_pillLongitudeResolution_3D=a.default_bonds_pillLongitudeResolution_3D,this.bonds_pillSpacing_3D=a.default_bonds_pillSpacing_3D,this.bonds_pillDiameter_3D=a.default_bonds_pillDiameter_3D,this.bonds_materialAmbientColor_3D=a.default_bonds_materialAmbientColor_3D,this.bonds_materialSpecularColor_3D=a.default_bonds_materialSpecularColor_3D,this.bonds_materialShininess_3D=a.default_bonds_materialShininess_3D,this.proteins_displayRibbon=a.default_proteins_displayRibbon,this.proteins_displayBackbone=a.default_proteins_displayBackbone,this.proteins_backboneThickness=a.default_proteins_backboneThickness,this.proteins_backboneColor=a.default_proteins_backboneColor,this.proteins_ribbonCartoonize=a.default_proteins_ribbonCartoonize,this.proteins_residueColor=a.default_proteins_residueColor,this.proteins_primaryColor=a.default_proteins_primaryColor,this.proteins_secondaryColor=a.default_proteins_secondaryColor,this.proteins_ribbonCartoonHelixPrimaryColor=a.default_proteins_ribbonCartoonHelixPrimaryColor,this.proteins_ribbonCartoonHelixSecondaryColor=a.default_proteins_ribbonCartoonHelixSecondaryColor,this.proteins_ribbonCartoonSheetColor=a.default_proteins_ribbonCartoonSheetColor,this.proteins_ribbonThickness=a.default_proteins_ribbonThickness,this.proteins_verticalResolution=a.default_proteins_verticalResolution,this.proteins_horizontalResolution=a.default_proteins_horizontalResolution,this.proteins_materialAmbientColor_3D=a.default_proteins_materialAmbientColor_3D,this.proteins_materialSpecularColor_3D=a.default_proteins_materialSpecularColor_3D,this.proteins_materialShininess_3D=a.default_proteins_materialShininess_3D,this.macro_displayAtoms=a.default_macro_displayAtoms,this.macro_displayBonds=a.default_macro_displayBonds,this.macro_atomToLigandDistance=a.default_macro_atomToLigandDistance,this.nucleics_display=a.default_nucleics_display,this.nucleics_tubeColor=a.default_nucleics_tubeColor,this.nucleics_baseColor=a.default_nucleics_baseColor,this.nucleics_residueColor=a.default_nucleics_residueColor,this.nucleics_tubeThickness=a.default_nucleics_tubeThickness,this.nucleics_tubeResolution_3D=a.default_nucleics_tubeResolution_3D,this.nucleics_verticalResolution=a.default_nucleics_verticalResolution,this.nucleics_materialAmbientColor_3D=a.default_nucleics_materialAmbientColor_3D,this.nucleics_materialSpecularColor_3D=a.default_nucleics_materialSpecularColor_3D,this.nucleics_materialShininess_3D=a.default_nucleics_materialShininess_3D,this.macro_showWater=a.default_macro_showWater,this.macro_colorByChain=a.default_macro_colorByChain,this.macro_rainbowColors=a.default_macro_rainbowColors.slice(0),this.surfaces_display=a.default_surfaces_display,this.surfaces_style=a.default_surfaces_style,this.surfaces_color=a.default_surfaces_color,this.surfaces_materialAmbientColor_3D=a.default_surfaces_materialAmbientColor_3D,this.surfaces_materialSpecularColor_3D=a.default_surfaces_materialSpecularColor_3D,this.surfaces_materialShininess_3D=a.default_surfaces_materialShininess_3D,this.crystals_displayUnitCell=a.default_crystals_displayUnitCell,this.crystals_unitCellColor=a.default_crystals_unitCellColor,this.crystals_unitCellLineWidth=a.default_crystals_unitCellLineWidth,this.plots_color=a.default_plots_color,this.plots_width=a.default_plots_width,this.plots_showIntegration=a.default_plots_showIntegration,this.plots_integrationColor=a.default_plots_integrationColor,this.plots_integrationLineWidth=a.default_plots_integrationLineWidth,this.plots_showGrid=a.default_plots_showGrid,this.plots_gridColor=a.default_plots_gridColor,this.plots_gridLineWidth=a.default_plots_gridLineWidth,this.plots_showYAxis=a.default_plots_showYAxis,this.plots_flipXAxis=a.default_plots_flipXAxis,this.text_font_size=a.default_text_font_size,this.text_font_families=a.default_text_font_families.slice(0),this.text_font_bold=a.default_text_font_bold,this.text_font_italic=a.default_text_font_italic,this.text_font_stroke_3D=a.default_text_font_stroke_3D,this.text_color=a.default_text_color,this.shapes_color=a.default_shapes_color,this.shapes_lineWidth_2D=a.default_shapes_lineWidth_2D,this.shapes_arrowLength_2D=a.default_shapes_arrowLength_2D,this.compass_display=a.default_compass_display,this.compass_axisXColor_3D=a.default_compass_axisXColor_3D,this.compass_axisYColor_3D=a.default_compass_axisYColor_3D,this.compass_axisZColor_3D=a.default_compass_axisZColor_3D,this.compass_size_3D=a.default_compass_size_3D,this.compass_resolution_3D=a.default_compass_resolution_3D,this.compass_displayText_3D=a.default_compass_displayText_3D,this.compass_type_3D=a.default_compass_type_3D,this.measurement_update_3D=a.default_measurement_update_3D,this.measurement_angleBands_3D=a.default_measurement_angleBands_3D,this.measurement_displayText_3D=a.default_measurement_displayText_3D},b.VisualSpecifications.prototype.set3DRepresentation=function(b){this.bonds_display=this.atoms_display=!0,this.bonds_color="#777777",this.bonds_showBondOrders_3D=this.bonds_useJMOLColors=this.atoms_useJMOLColors=this.atoms_useVDWDiameters_3D=!0,this.bonds_renderAsLines_3D=!1,"Ball and Stick"===b?(this.atoms_vdwMultiplier_3D=.3,this.bonds_useJMOLColors=!1,this.bonds_cylinderDiameter_3D=.3,this.bonds_materialAmbientColor_3D=a.default_atoms_materialAmbientColor_3D,this.bonds_pillDiameter_3D=.15):"van der Waals Spheres"===b?(this.bonds_display=!1,this.atoms_vdwMultiplier_3D=1):"Stick"===b?(this.bonds_showBondOrders_3D=this.atoms_useVDWDiameters_3D=!1,this.bonds_cylinderDiameter_3D=this.atoms_sphereDiameter_3D=.8,this.bonds_materialAmbientColor_3D=this.atoms_materialAmbientColor_3D):"Wireframe"===b?(this.atoms_useVDWDiameters_3D=!1,this.bonds_cylinderDiameter_3D=this.bonds_pillDiameter_3D=.05,this.atoms_sphereDiameter_3D=.15,this.bonds_materialAmbientColor_3D=a.default_atoms_materialAmbientColor_3D):"Line"===b?(this.atoms_display=!1,this.bonds_renderAsLines_3D=!0,this.bonds_width_2D=1,this.bonds_cylinderDiameter_3D=.05):alert('"'+b+'" is not recognized. Use one of the following strings:\n\n1. Ball and Stick\n2. van der Waals Spheres\n3. Stick\n4. Wireframe\n5. Line\n')}}(ChemDoodle,ChemDoodle.structures,Math),function(a,b,c,d){c.getPointsPerAngstrom=function(){return a.default_bondLength_2D/a.default_angstromsPerBondLength},c.BondDeducer=function(){};var e=c.BondDeducer.prototype;e.margin=1.1,e.deduceCovalentBonds=function(a,e){var f=c.getPointsPerAngstrom();e&&(f=e);for(var g=0,h=a.atoms.length;h>g;g++)for(var i=g+1;h>i;i++){var j=a.atoms[g],k=a.atoms[i];j.distance3D(k)<(b[j.label].covalentRadius+b[k.label].covalentRadius)*f*this.margin&&a.bonds.push(new d.Bond(j,k,1))}}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.informatics,ChemDoodle.structures),function(a){a.HydrogenDeducer=function(){},a.HydrogenDeducer.prototype.removeHydrogens=function(a){for(var b=[],c=[],d=0,e=a.bonds.length;e>d;d++)"H"!==a.bonds[d].a1.label&&"H"!==a.bonds[d].a2.label&&c.push(a.bonds[d]);for(d=0,e=a.atoms.length;e>d;d++)"H"!==a.atoms[d].label&&b.push(a.atoms[d]);a.atoms=b,a.bonds=c}}(ChemDoodle.informatics),function(a,b,c){b.MolecularSurfaceGenerator=function(){},b.MolecularSurfaceGenerator.prototype.generateSurface=function(a,b,d,e,f){return new c.MolecularSurface(a,b,d,e,f)}}(ChemDoodle,ChemDoodle.informatics,ChemDoodle.structures.d3),function(a,b){a.Splitter=function(){},a.Splitter.prototype.split=function(a){for(var c=[],d=0,e=a.atoms.length;e>d;d++)a.atoms[d].visited=!1;for(d=0,e=a.bonds.length;e>d;d++)a.bonds[d].visited=!1;for(d=0,e=a.atoms.length;e>d;d++){var f=a.atoms[d];if(!f.visited){var g=new b.Molecule;g.atoms.push(f),f.visited=!0;var h=new b.Queue;for(h.enqueue(f);!h.isEmpty();)for(var f=h.dequeue(),i=0,j=a.bonds.length;j>i;i++){var k=a.bonds[i];k.contains(f)&&!k.visited&&(k.visited=!0,g.bonds.push(k),k=k.getNeighbor(f),k.visited||(k.visited=!0,g.atoms.push(k),h.enqueue(k)))}c.push(g)}}return c}}(ChemDoodle.informatics,ChemDoodle.structures),function(a,b){a.StructureBuilder=function(){},a.StructureBuilder.prototype.copy=function(a){var c=new b.JSONInterpreter;return c.molFrom(c.molTo(a))}}(ChemDoodle.informatics,ChemDoodle.io,ChemDoodle.structures),function(a){a._Counter=function(){},a=a._Counter.prototype,a.value=0,a.molecule=void 0,a.setMolecule=function(a){this.value=0,this.molecule=a,this.innerCalculate&&this.innerCalculate()}}(ChemDoodle.informatics),function(a){a.FrerejacqueNumberCounter=function(a){this.setMolecule(a)},(a.FrerejacqueNumberCounter.prototype=new a._Counter).innerCalculate=function(){this.value=this.molecule.bonds.length-this.molecule.atoms.length+new a.NumberOfMoleculesCounter(this.molecule).value}}(ChemDoodle.informatics),function(a,b){b.NumberOfMoleculesCounter=function(a){this.setMolecule(a)},(b.NumberOfMoleculesCounter.prototype=new b._Counter).innerCalculate=function(){for(var b=0,c=this.molecule.atoms.length;c>b;b++)this.molecule.atoms[b].visited=!1;for(b=0,c=this.molecule.atoms.length;c>b;b++)if(!this.molecule.atoms[b].visited){this.value++;var d=new a.Queue;for(this.molecule.atoms[b].visited=!0,d.enqueue(this.molecule.atoms[b]);!d.isEmpty();)for(var e=d.dequeue(),f=0,g=this.molecule.bonds.length;g>f;f++){var h=this.molecule.bonds[f];h.contains(e)&&(h=h.getNeighbor(e),h.visited||(h.visited=!0,d.enqueue(h)))}}}}(ChemDoodle.structures,ChemDoodle.informatics),function(a){a._RingFinder=function(){},a=a._RingFinder.prototype,a.atoms=void 0,a.bonds=void 0,a.rings=void 0,a.reduce=function(a){for(var b=0,c=a.atoms.length;c>b;b++)a.atoms[b].visited=!1;for(b=0,c=a.bonds.length;c>b;b++)a.bonds[b].visited=!1;for(var d=!0;d;)for(d=!1,b=0,c=a.atoms.length;c>b;b++){for(var e,f=0,g=0,h=a.bonds.length;h>g;g++)if(a.bonds[g].contains(a.atoms[b])&&!a.bonds[g].visited){if(f++,2===f)break;e=a.bonds[g]}1===f&&(d=!0,e.visited=!0,a.atoms[b].visited=!0)}for(b=0,c=a.atoms.length;c>b;b++)a.atoms[b].visited||this.atoms.push(a.atoms[b]);for(b=0,c=a.bonds.length;c>b;b++)a.bonds[b].visited||this.bonds.push(a.bonds[b]);0===this.bonds.length&&0!==this.atoms.length&&(this.atoms=[])},a.setMolecule=function(a){this.atoms=[],this.bonds=[],this.rings=[],this.reduce(a),2<this.atoms.length&&this.innerGetRings&&this.innerGetRings()},a.fuse=function(){for(var a=0,b=this.rings.length;b>a;a++)for(var c=0,d=this.bonds.length;d>c;c++)-1!==this.rings[a].atoms.indexOf(this.bonds[c].a1)&&-1!==this.rings[a].atoms.indexOf(this.bonds[c].a2)&&this.rings[a].bonds.push(this.bonds[c])}}(ChemDoodle.informatics),function(a,b){function c(a,b){if(this.atoms=[],b)for(var c=0,d=b.atoms.length;d>c;c++)this.atoms[c]=b.atoms[c];this.atoms.push(a)}var d=c.prototype;d.grow=function(a,b){for(var d=this.atoms[this.atoms.length-1],e=[],f=0,g=a.length;g>f;f++)if(a[f].contains(d)){var h=a[f].getNeighbor(d);-1===b.indexOf(h)&&e.push(h)}for(d=[],f=0,g=e.length;g>f;f++)d.push(new c(e[f],this));return d},d.check=function(a,c,d){for(var e=0,f=c.atoms.length-1;f>e;e++)if(-1!==this.atoms.indexOf(c.atoms[e]))return;var g;if(c.atoms[c.atoms.length-1]===this.atoms[this.atoms.length-1]){for(g=new b.Ring,g.atoms[0]=d,e=0,f=this.atoms.length;f>e;e++)g.atoms.push(this.atoms[e]);for(e=c.atoms.length-2;e>=0;e--)g.atoms.push(c.atoms[e])}else{for(var h=[],e=0,f=a.length;f>e;e++)a[e].contains(c.atoms[c.atoms.length-1])&&h.push(a[e]);for(e=0,f=h.length;f>e;e++)if((1===c.atoms.length||!h[e].contains(c.atoms[c.atoms.length-2]))&&h[e].contains(this.atoms[this.atoms.length-1])){for(g=new b.Ring,g.atoms[0]=d,a=0,d=this.atoms.length;d>a;a++)g.atoms.push(this.atoms[a]);for(a=c.atoms.length-1;a>=0;a--)g.atoms.push(c.atoms[a]);break}}return g},a.EulerFacetRingFinder=function(a){this.setMolecule(a)},d=a.EulerFacetRingFinder.prototype=new a._RingFinder,d.fingerBreak=5,d.innerGetRings=function(){for(var a=0,b=this.atoms.length;b>a;a++){for(var d=[],e=0,f=this.bonds.length;f>e;e++)this.bonds[e].contains(this.atoms[a])&&d.push(this.bonds[e].getNeighbor(this.atoms[a]));for(e=0,f=d.length;f>e;e++)for(var g=e+1;g<d.length;g++){var h=[];h[0]=new c(d[e]),h[1]=new c(d[g]);var i=[];i[0]=this.atoms[a];for(var j=0,k=d.length;k>j;j++)j!==e&&j!==g&&i.push(d[j]);var l=[];for((j=h[0].check(this.bonds,h[1],this.atoms[a]))&&(l[0]=j);0===l.length&&0<h.length&&h[0].atoms.length<this.fingerBreak;){for(var m=[],j=0,k=h.length;k>j;j++)for(var n=h[j].grow(this.bonds,i),o=0,p=n.length;p>o;o++)m.push(n[o]);for(h=m,j=0,k=h.length;k>j;j++)for(o=j+1;k>o;o++)(p=h[j].check(this.bonds,h[o],this.atoms[a]))&&l.push(p);if(0===l.length){for(m=[],j=0,k=i.length;k>j;j++)for(o=0,p=this.bonds.length;p>o;o++)this.bonds[o].contains(i[j])&&(d=this.bonds[o].getNeighbor(i[j]),-1===i.indexOf(d)&&-1===m.indexOf(d)&&m.push(d));for(j=0,k=m.length;k>j;j++)i.push(m[j])}}if(0<l.length){for(h=void 0,j=0,k=l.length;k>j;j++)(!h||h.atoms.length>l[j].atoms.length)&&(h=l[j]);for(l=!1,j=0,k=this.rings.length;k>j;j++){for(i=!0,o=0,p=h.atoms.length;p>o;o++)if(-1===this.rings[j].atoms.indexOf(h.atoms[o])){i=!1;break}if(i){l=!0;break}}l||this.rings.push(h)}}}this.fuse()}}(ChemDoodle.informatics,ChemDoodle.structures),function(a){a.SSSRFinder=function(b){if(this.rings=[],0<b.atoms.length){var c=new a.FrerejacqueNumberCounter(b).value,d=new a.EulerFacetRingFinder(b).rings;d.sort(function(a,b){return a.atoms.length-b.atoms.length});for(var e=0,f=b.bonds.length;f>e;e++)b.bonds[e].visited=!1;for(e=0,f=d.length;f>e;e++){b=!1;for(var g=0,h=d[e].bonds.length;h>g;g++)if(!d[e].bonds[g].visited){b=!0;break}if(b){for(g=0,h=d[e].bonds.length;h>g;g++)d[e].bonds[g].visited=!0;this.rings.push(d[e])}if(this.rings.length===c)break}}}}(ChemDoodle.informatics),function(a){a._Interpreter=function(){},a._Interpreter.prototype.fit=function(a,b,c){for(var d=a.length,e=[],f=0;b-d>f;f++)e.push(" ");return c?a+e.join(""):e.join("")+a}}(ChemDoodle.io),function(a,b,c,d,e,f){var g=/\s+/g,h=/\(|\)|\s+/g,i=/\'|\s+/g,j=/,|\'|\s+/g,k=/^\s+/,l=/[0-9]/g,m=/[0-9]|\+|\-/g,n=function(a){return 0!==a.length},o={P:[],A:[[0,.5,.5]],B:[[.5,0,.5]],C:[[.5,.5,0]],I:[[.5,.5,.5]],R:[[2/3,1/3,1/3],[1/3,2/3,2/3]],S:[[1/3,1/3,2/3],[2/3,2/3,1/3]],T:[[1/3,2/3,1/3],[2/3,1/3,2/3]],F:[[0,.5,.5],[.5,0,.5],[.5,.5,0]]},p=function(a){var b=0,c=0,d=0,e=0,f=a.indexOf("x"),g=a.indexOf("y"),h=a.indexOf("z");if(-1!==f&&(c++,f>0&&"+"!==a.charAt(f-1)&&(c*=-1)),-1!==g&&(d++,g>0&&"+"!==a.charAt(g-1)&&(d*=-1)),-1!==h&&(e++,h>0&&"+"!==a.charAt(h-1)&&(e*=-1)),2<a.length)for(f="+",g=0,h=a.length;h>g;g++){var i=a.charAt(g);"-"!==i&&"/"!==i||g!==a.length-1&&!a.charAt(g+1).match(l)||(f=i),i.match(l)&&("+"===f?b+=parseInt(i):"-"===f?b-=parseInt(i):"/"===f&&(b/=parseInt(i)))}return[b,c,d,e]};c.CIFInterpreter=function(){},(c.CIFInterpreter.prototype=new c._Interpreter).read=function(c,l,q,r){l=l?l:1,q=q?q:1,r=r?r:1;var s=new d.Molecule;if(!c)return s;for(var t,u,v,w,x=c.split("\n"),y=0,z=0,A=0,B=c=0,C=0,D="P",E=!0;0<x.length;)if(E?w=x.shift():E=!0,0<w.length)if(b.stringStartsWith(w,"_cell_length_a"))y=parseFloat(w.split(h)[1]);else if(b.stringStartsWith(w,"_cell_length_b"))z=parseFloat(w.split(h)[1]);else if(b.stringStartsWith(w,"_cell_length_c"))A=parseFloat(w.split(h)[1]);else if(b.stringStartsWith(w,"_cell_angle_alpha"))c=e.PI*parseFloat(w.split(h)[1])/180;else if(b.stringStartsWith(w,"_cell_angle_beta"))B=e.PI*parseFloat(w.split(h)[1])/180;else if(b.stringStartsWith(w,"_cell_angle_gamma"))C=e.PI*parseFloat(w.split(h)[1])/180;else if(b.stringStartsWith(w,"_symmetry_space_group_name_H-M"))D=w.split(i)[1];else if(b.stringStartsWith(w,"loop_")){for(var F={fields:[],lines:[]},G=!1;void 0!==(w=x.shift())&&!b.stringStartsWith(w=w.replace(k,""),"loop_")&&0<w.length;)if(b.stringStartsWith(w,"_")){if(G)break;F.fields=F.fields.concat(w.split(g).filter(n))}else G=!0,F.lines.push(w);0!==x.length&&(b.stringStartsWith(w,"loop_")||b.stringStartsWith(w,"_"))&&(E=!1),-1!==F.fields.indexOf("_symmetry_equiv_pos_as_xyz")||-1!==F.fields.indexOf("_space_group_symop_operation_xyz")?t=F:-1!==F.fields.indexOf("_atom_site_label")?u=F:-1!==F.fields.indexOf("_geom_bond_atom_site_label_1")&&(v=F)}if(w=y,c=(e.cos(c)-e.cos(C)*e.cos(B))/e.sin(C),c=[w,0,0,0,z*e.cos(C),z*e.sin(C),0,0,A*e.cos(B),A*c,A*e.sqrt(1-e.pow(e.cos(B),2)-c*c),0,0,0,0,1],u){for(F=E=y=x=A=-1,C=0,B=u.fields.length;B>C;C++)w=u.fields[C],"_atom_site_type_symbol"===w?A=C:"_atom_site_label"===w?x=C:"_atom_site_fract_x"===w?y=C:"_atom_site_fract_y"===w?E=C:"_atom_site_fract_z"===w&&(F=C);for(C=0,B=u.lines.length;B>C;C++)w=u.lines[C],z=w.split(g).filter(n),w=new d.Atom(z[-1===A?x:A].split(m)[0],parseFloat(z[y]),parseFloat(z[E]),parseFloat(z[F])),s.atoms.push(w),-1!==x&&(w.cifId=z[x],w.cifPart=0)}if(t&&!v){for(C=z=0,B=t.fields.length;B>C;C++)w=t.fields[C],("_symmetry_equiv_pos_as_xyz"===w||"_space_group_symop_operation_xyz"===w)&&(z=C);for(E=o[D],x=[],C=0,B=t.lines.length;B>C;C++){w=t.lines[C].split(j).filter(n);for(var F=p(w[z]),G=p(w[z+1]),H=p(w[z+2]),D=0,y=s.atoms.length;y>D;D++){w=s.atoms[D];var I=w.x*F[1]+w.y*F[2]+w.z*F[3]+F[0],J=w.x*G[1]+w.y*G[2]+w.z*G[3]+G[0],K=w.x*H[1]+w.y*H[2]+w.z*H[3]+H[0];if(u=new d.Atom(w.label,I,J,K),x.push(u),void 0!==w.cifId&&(u.cifId=w.cifId,u.cifPart=C+1),E)for(u=0,A=E.length;A>u;u++){var L=E[u],L=new d.Atom(w.label,I+L[0],J+L[1],K+L[2]);x.push(L),void 0!==w.cifId&&(L.cifId=w.cifId,L.cifPart=C+1)}}}for(C=0,B=x.length;B>C;C++){for(w=x[C];1<=w.x;)w.x--;for(;0>w.x;)w.x++;for(;1<=w.y;)w.y--;for(;0>w.y;)w.y++;for(;1<=w.z;)w.z--;for(;0>w.z;)w.z++}for(u=[],C=0,B=x.length;B>C;C++){for(A=!1,w=x[C],D=0,y=s.atoms.length;y>D;D++)if(1e-4>s.atoms[D].distance3D(w)){A=!0;break}if(!A){for(D=0,y=u.length;y>D;D++)if(1e-4>u[D].distance3D(w)){A=!0;break}A||u.push(w)}}s.atoms=s.atoms.concat(u)}for(B=[],C=0;l>C;C++)for(D=0;q>D;D++)for(u=0;r>u;u++)if(0!==C||0!==D||0!==u)for(A=0,z=s.atoms.length;z>A;A++)w=s.atoms[A],x=new d.Atom(w.label,w.x+C,w.y+D,w.z+u),B.push(x),void 0!==w.cifId&&(x.cifId=w.cifId,x.cifPart=w.cifPart+(t?t.lines.length:0)+C+10*D+100*u);for(s.atoms=s.atoms.concat(B),C=0,B=s.atoms.length;B>C;C++)w=s.atoms[C],t=f.multiplyVec3(c,[w.x,w.y,w.z]),w.x=t[0],w.y=t[1],w.z=t[2];if(v){for(x=t=-1,C=0,B=v.fields.length;B>C;C++)w=v.fields[C],"_geom_bond_atom_site_label_1"===w?t=C:"_geom_bond_atom_site_label_2"===w&&(x=C);for(u=0,A=v.lines.length;A>u;u++)for(z=v.lines[u].split(g).filter(n),w=z[t],z=z[x],C=0,B=s.atoms.length;B>C;C++)for(D=C+1;B>D&&(y=s.atoms[C],E=s.atoms[D],y.cifPart===E.cifPart);D++)(y.cifId===w&&E.cifId===z||y.cifId===z&&E.cifId===w)&&s.bonds.push(new d.Bond(y,E))}else(new a.informatics.BondDeducer).deduceCovalentBonds(s,1);return l=[-l/2,-q/2,-r/2],s.unitCellVectors={o:f.multiplyVec3(c,l,[]),x:f.multiplyVec3(c,[l[0]+1,l[1],l[2]]),y:f.multiplyVec3(c,[l[0],l[1]+1,l[2]]),z:f.multiplyVec3(c,[l[0],l[1],l[2]+1]),xy:f.multiplyVec3(c,[l[0]+1,l[1]+1,l[2]]),xz:f.multiplyVec3(c,[l[0]+1,l[1],l[2]+1]),yz:f.multiplyVec3(c,[l[0],l[1]+1,l[2]+1]),xyz:f.multiplyVec3(c,[l[0]+1,l[1]+1,l[2]+1])},s};var q=new c.CIFInterpreter;a.readCIF=function(a,b,c,d){return q.read(a,b,c,d)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,Math,ChemDoodle.lib.mat4,ChemDoodle.lib.vec3),function(a,b,c,d){b.CMLInterpreter=function(){};var e=b.CMLInterpreter.prototype=new b._Interpreter;e.read=function(a){var b=[];a=d.parseXML(a),a=d(a).find("cml");for(var e=0,f=a.length;f>e;e++)for(var g=d(a[e]).find("molecule"),h=0,i=g.length;i>h;h++){for(var j=b[h]=new c.Molecule,k=[],l=d(g[h]).find("atom"),m=0,n=l.length;n>m;m++){var o,p,q,r=d(l[m]),s=r.attr("elementType");void 0==r.attr("x2")?(o=r.attr("x3"),p=r.attr("y3"),q=r.attr("z3")):(o=r.attr("x2"),p=r.attr("y2"),q=0),s=b[h].atoms[m]=new c.Atom(s,o,p,q),k[m]=r.attr("id"),void 0!=r.attr("formalCharge")&&(s.charge=r.attr("formalCharge"))}for(l=d(g[h]).find("bond"),m=0,n=l.length;n>m;m++){switch(r=d(l[m]),o=r.attr("atomRefs2").split(" "),s=j.atoms[d.inArray(o[0],k)],o=j.atoms[d.inArray(o[1],k)],r.attr("order")){case"2":case"D":p=2;break;case"3":case"T":p=3;break;case"A":p=1.5;break;default:p=1}switch(s=b[h].bonds[m]=new c.Bond(s,o,p),r.find("bondStereo").text()){case"W":s.stereo=c.Bond.STEREO_PROTRUDING;break;case"H":s.stereo=c.Bond.STEREO_RECESSED}}}return b},e.write=function(a){var b=[];b.push('<?xml version="1.0" encoding="UTF-8"?>\n'),b.push('<cml convention="conventions:molecular" xmlns="http://www.xml-cml.org/schema" xmlns:conventions="http://www.xml-cml.org/convention/" xmlns:dc="http://purl.org/dc/elements/1.1/">\n');for(var c=0,d=a.length;d>c;c++){b.push('<molecule id="m'),b.push(c),b.push('">'),b.push("<atomArray>");for(var e=0,f=a[c].atoms.length;f>e;e++){var g=a[c].atoms[e];b.push('<atom elementType="'),b.push(g.label),b.push('" id="a'),b.push(e),b.push('" '),b.push('x3="'),b.push(g.x),b.push('" y3="'),b.push(g.y),b.push('" z3="'),b.push(g.z),b.push('" '),0!=g.charge&&(b.push('formalCharge="'),b.push(g.charge),b.push('" ')),b.push("/>")}for(b.push("</atomArray>"),b.push("<bondArray>"),e=0,f=a[c].bonds.length;f>e;e++){switch(g=a[c].bonds[e],b.push('<bond atomRefs2="a'),b.push(a[c].atoms.indexOf(g.a1)),b.push(" a"),b.push(a[c].atoms.indexOf(g.a2)),b.push('" order="'),g.bondOrder){case 1.5:b.push("A");break;case 1:case 2:case 3:b.push(g.bondOrder);break;default:b.push("S")}b.push('"/>')}b.push("</bondArray>"),b.push("</molecule>")}return b.push("</cml>"),b.join("")};var f=new b.CMLInterpreter;a.readCML=function(a){return f.read(a)},a.writeCML=function(a){return f.write(a)}}(ChemDoodle,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery),function(a,b,c,d){c.MOLInterpreter=function(){};var e=c.MOLInterpreter.prototype=new c._Interpreter;e.read=function(c,e){e||(e=a.default_bondLength_2D);var f=new d.Molecule;if(!c)return f;for(var g=c.split("\n"),h=g[3],i=parseInt(h.substring(0,3)),h=parseInt(h.substring(3,6)),j=0;i>j;j++){var k=g[4+j];f.atoms[j]=new d.Atom(k.substring(31,34),parseFloat(k.substring(0,10))*e,(1===e?1:-1)*parseFloat(k.substring(10,20))*e,parseFloat(k.substring(20,30))*e);var l=parseInt(k.substring(34,36));switch(0!==l&&b[f.atoms[j].label]&&(f.atoms[j].mass=b[f.atoms[j].label].mass+l),parseInt(k.substring(36,39))){case 1:f.atoms[j].charge=3;break;case 2:f.atoms[j].charge=2;break;case 3:f.atoms[j].charge=1;break;case 5:f.atoms[j].charge=-1;break;case 6:f.atoms[j].charge=-2;break;case 7:f.atoms[j].charge=-3}}for(j=0;h>j;j++){var k=g[4+i+j],m=parseInt(k.substring(6,9)),l=parseInt(k.substring(9,12));if(m>3)switch(m){case 4:m=1.5;break;default:m=1}switch(k=new d.Bond(f.atoms[parseInt(k.substring(0,3))-1],f.atoms[parseInt(k.substring(3,6))-1],m),l){case 3:k.stereo=d.Bond.STEREO_AMBIGUOUS;break;case 1:k.stereo=d.Bond.STEREO_PROTRUDING;break;case 6:k.stereo=d.Bond.STEREO_RECESSED}f.bonds[j]=k}return f},e.write=function(c){var e=[];e.push("Molecule from ChemDoodle Web Components\n\nhttp://www.ichemlabs.com\n"),e.push(this.fit(c.atoms.length.toString(),3)),e.push(this.fit(c.bonds.length.toString(),3)),e.push("  0  0  0  0            999 V2000\n");for(var f=c.getCenter(),g=0,h=c.atoms.length;h>g;g++){var i=c.atoms[g],j=" 0";if(-1!==i.mass&&b[i.label]){var k=i.mass-b[i.label].mass;5>k&&k>-4&&(j=(k>-1?" ":"")+k)}if(k="  0",0!==i.charge)switch(i.charge){case 3:k="  1";break;case 2:k="  2";break;case 1:k="  3";break;case-1:k="  5";break;case-2:k="  6";break;case-3:k="  7"}e.push(this.fit(((i.x-f.x)/a.default_bondLength_2D).toFixed(4),10)),e.push(this.fit((-(i.y-f.y)/a.default_bondLength_2D).toFixed(4),10)),e.push(this.fit((i.z/a.default_bondLength_2D).toFixed(4),10)),e.push(" "),e.push(this.fit(i.label,3,!0)),e.push(j),e.push(k),e.push("  0  0  0  0\n")}for(g=0,h=c.bonds.length;h>g;g++)i=c.bonds[g],f=0,i.stereo===d.Bond.STEREO_AMBIGUOUS?f=3:i.stereo===d.Bond.STEREO_PROTRUDING?f=1:i.stereo===d.Bond.STEREO_RECESSED&&(f=6),e.push(this.fit((c.atoms.indexOf(i.a1)+1).toString(),3)),
e.push(this.fit((c.atoms.indexOf(i.a2)+1).toString(),3)),i=i.bondOrder,1.5==i?i=4:(i>3||0!=i%1)&&(i=1),e.push(this.fit(i,3)),e.push("  "),e.push(f),e.push("     0  0\n");return e.push("M  END"),e.join("")};var f=new c.MOLInterpreter;a.readMOL=function(a,b){return f.read(a,b)},a.writeMOL=function(a){return f.write(a)}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.io,ChemDoodle.structures),function(a,b,c,d,e,f,g){function h(a,b,c,d,e){for(var f=0,g=b.length;g>f;f++){var h=b[f];if(h.id===c&&d>=h.start&&d<=h.end){e?a.helix=!0:a.sheet=!0,d+1===h.end&&(a.arrow=!0);break}}}c.PDBInterpreter=function(){};var i=c.PDBInterpreter.prototype=new c._Interpreter;i.calculateRibbonDistances=!1,i.deduceResidueBonds=!1,i.read=function(c,i){var j=new d.Molecule;if(j.chains=[],!c)return j;var k=c.split("\n");i||(i=1);for(var l,m=[],n=[],o=[],p=[],q=[],r=0,s=k.length;s>r;r++){var t=k[r];if(b.stringStartsWith(t,"HELIX"))m.push({id:t.substring(19,20),start:parseInt(t.substring(21,25)),end:parseInt(t.substring(33,37))});else if(b.stringStartsWith(t,"SHEET"))n.push({id:t.substring(21,22),start:parseInt(t.substring(22,26)),end:parseInt(t.substring(33,37))});else if(b.stringStartsWith(t,"ATOM")){var u=t.substring(16,17);if(" "===u||"A"===u){if(u=f(t.substring(76,78)),0===u.length){var v=f(t.substring(12,14));"HD"===v?u="H":0<v.length&&(u=1<v.length?v.charAt(0)+v.substring(1).toLowerCase():v)}v=new d.Atom(u,parseFloat(t.substring(30,38))*i,parseFloat(t.substring(38,46))*i,parseFloat(t.substring(46,54))*i),v.hetatm=!1,p.push(v);var w=parseInt(t.substring(22,26));if(0===o.length)for(u=0;2>u;u++){var x=new d.Residue(-1);x.cp1=v,x.cp2=v,o.push(x)}w!==Number.NaN&&o[o.length-1].resSeq!==w&&(u=new d.Residue(w),u.name=f(t.substring(17,20)),3===u.name.length?u.name=u.name.substring(0,1)+u.name.substring(1).toLowerCase():2===u.name.length&&"D"===u.name.charAt(0)&&(u.name=u.name.substring(1)),o.push(u),x=t.substring(21,22),h(u,m,x,w,!0),h(u,n,x,w,!1)),t=f(t.substring(12,16)),u=o[o.length-1],"CA"===t||"P"===t||"O5'"===t?u.cp1||(u.cp1=v):"N3"===t&&("C"===u.name||"U"===u.name||"T"===u.name)||"N1"===t&&("A"===u.name||"G"===u.name)?u.cp3=v:"C2"===t?u.cp4=v:"C4"===t&&("C"===u.name||"U"===u.name||"T"===u.name)||"C6"===t&&("A"===u.name||"G"===u.name)?u.cp5=v:"O"===t||"C6"===t&&("C"===u.name||"U"===u.name||"T"===u.name)||"N9"===t?o[o.length-1].cp2||("C6"!==t&&"N9"!==t||(l=v),u.cp2=v):"C"===t&&(l=v)}}else if(b.stringStartsWith(t,"HETATM"))u=f(t.substring(76,78)),0===u.length&&(u=f(t.substring(12,16))),1<u.length&&(u=u.substring(0,1)+u.substring(1).toLowerCase()),u=new d.Atom(u,parseFloat(t.substring(30,38))*i,parseFloat(t.substring(38,46))*i,parseFloat(t.substring(46,54))*i),u.hetatm=!0,"HOH"===f(t.substring(17,20))&&(u.isWater=!0),j.atoms.push(u),q[parseInt(f(t.substring(6,11)))]=u;else if(b.stringStartsWith(t,"CONECT")){if(u=parseInt(f(t.substring(6,11))),q[u])for(v=q[u],w=0;4>w;w++)if(u=f(t.substring(11+5*w,16+5*w)),0!==u.length&&(u=parseInt(u),q[u])){for(var x=q[u],y=!1,u=0,z=j.bonds.length;z>u;u++){var A=j.bonds[u];if(A.a1===v&&A.a2===x||A.a1===x&&A.a2===v){y=!0;break}}y||j.bonds.push(new d.Bond(v,x))}}else if(b.stringStartsWith(t,"TER"))this.endChain(j,o,l,p),o=[];else if(b.stringStartsWith(t,"ENDMDL"))break}if(this.endChain(j,o,l,p),0===j.bonds.size&&(new a.informatics.BondDeducer).deduceCovalentBonds(j,i),this.deduceResidueBonds)for(r=0,s=p.length;s>r;r++)for(k=g.min(s,r+20),u=r+1;k>u;u++)m=p[r],n=p[u],m.distance3D(n)<1.1*(e[m.label].covalentRadius+e[n.label].covalentRadius)&&j.bonds.push(new d.Bond(m,n,1));return j.atoms=j.atoms.concat(p),this.calculateRibbonDistances&&this.calculateDistances(j,p),j},i.endChain=function(a,b,c,e){if(0<b.length){var f=b[b.length-1];for(f.cp1||(f.cp1=e[e.length-2]),f.cp2||(f.cp2=e[e.length-1]),e=0;4>e;e++)f=new d.Residue(-1),f.cp1=c,f.cp2=b[b.length-1].cp2,b.push(f);a.chains.push(b)}},i.calculateDistances=function(a,b){for(var c=[],d=0,e=a.atoms.length;e>d;d++){var f=a.atoms[d];f.hetatm&&(f.isWater||c.push(f))}for(d=0,e=b.length;e>d;d++)if(f=b[d],f.closestDistance=Number.POSITIVE_INFINITY,0===c.length)f.closestDistance=0;else for(var g=0,h=c.length;h>g;g++)f.closestDistance=Math.min(f.closestDistance,f.distance3D(c[g]))};var j=new c.PDBInterpreter;a.readPDB=function(a,b){return j.read(a,b)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.ELEMENT,ChemDoodle.lib.jQuery.trim,Math),function(a,b,c,d,e,f){var g={"@":0,A:1,B:2,C:3,D:4,E:5,F:6,G:7,H:8,I:9,a:-1,b:-2,c:-3,d:-4,e:-5,f:-6,g:-7,h:-8,i:-9},h={"%":0,J:1,K:2,L:3,M:4,N:5,O:6,P:7,Q:8,R:9,j:-1,k:-2,l:-3,m:-4,n:-5,o:-6,p:-7,q:-8,r:-9},i={S:1,T:2,U:3,V:4,W:5,X:6,Y:7,Z:8,s:9};c.JCAMPInterpreter=function(){},e=c.JCAMPInterpreter.prototype=new c._Interpreter,e.convertHZ2PPM=!1,e.read=function(a){this.isBreak=function(a){return void 0!==g[a]||void 0!==h[a]||void 0!==i[a]||" "===a||"-"===a||"+"===a},this.getValue=function(a,b){var c=a.charAt(0),d=a.substring(1);return void 0!==g[c]?parseFloat(g[c]+d):void 0!==h[c]?parseFloat(h[c]+d)+b:parseFloat(d)};var c=new d.Spectrum;if(void 0===a||0===a.length)return c;a=a.split("\n");for(var e,j,k,l,m=[],n=1,o=1,p=1,q=-1,r=-1,s=-1,t=!0,u=!1,v=0,w=a.length;w>v;v++){var x=f(a[v]),y=x.indexOf("$$");if(-1!==y&&(x=x.substring(0,y)),0!==m.length&&b.stringStartsWith(a[v],"##")){if(y=m.join(""),t&&100>y.length&&c.metadata.push(y),m=[x],b.stringStartsWith(y,"##TITLE="))c.title=f(y.substring(8));else if(b.stringStartsWith(y,"##XUNITS="))c.xUnit=f(y.substring(9)),this.convertHZ2PPM&&"HZ"===c.xUnit.toUpperCase()&&(c.xUnit="PPM",u=!0);else if(b.stringStartsWith(y,"##YUNITS="))c.yUnit=f(y.substring(9));else if(!b.stringStartsWith(y,"##XYPAIRS="))if(b.stringStartsWith(y,"##FIRSTX="))j=parseFloat(f(y.substring(9)));else if(b.stringStartsWith(y,"##LASTX="))e=parseFloat(f(y.substring(8)));else if(b.stringStartsWith(y,"##FIRSTY="))k=parseFloat(f(y.substring(9)));else if(b.stringStartsWith(y,"##NPOINTS="))l=parseFloat(f(y.substring(10)));else if(b.stringStartsWith(y,"##XFACTOR="))n=parseFloat(f(y.substring(10)));else if(b.stringStartsWith(y,"##YFACTOR="))o=parseFloat(f(y.substring(10)));else if(b.stringStartsWith(y,"##DELTAX="))q=parseFloat(f(y.substring(9)));else if(b.stringStartsWith(y,"##.OBSERVE FREQUENCY="))this.convertHZ2PPM&&(p=parseFloat(f(y.substring(21))));else if(b.stringStartsWith(y,"##.SHIFT REFERENCE="))this.convertHZ2PPM&&(s=y.substring(19).split(","),r=parseInt(f(s[2])),s=parseFloat(f(s[3])));else if(b.stringStartsWith(y,"##XYDATA=")){u||(p=1);var x=t=!1,y=y.split("\n"),z=(e-j)/(l-1);if(-1!==q)for(var A=1,B=y.length;B>A;A++)if("|"===y[A].charAt(0)){z=q;break}for(var C,D=j-z,E=k,F=0,A=1,B=y.length;B>A;A++){for(var G=[],D=f(y[A]),m=[],H=!1,I=0,J=D.length;J>I;I++)this.isBreak(D.charAt(I))?(0<m.length&&!(1===m.length&&" "===m[0])&&G.push(m.join("")),m=[D.charAt(I)]):"|"===D.charAt(I)?H=!0:m.push(D.charAt(I));for(G.push(m.join("")),D=parseFloat(G[0])*n-z,I=1,J=G.length;J>I;I++)if(E=G[I],void 0!==i[E.charAt(0)])for(var K=parseInt(i[E.charAt(0)]+E.substring(1))-1,L=0;K>L;L++)D+=z,F=this.getValue(C,F),E=F*o,M++,c.data[c.data.length-1]=new d.Point(D/p,E);else void 0!==g[E.charAt(0)]&&x?(E=this.getValue(E,F)*o,H&&(D+=z,c.data.push(new d.Point(D/p,E)))):(x=void 0!==h[E.charAt(0)],C=E,D+=z,F=this.getValue(E,F),E=F*o,M++,c.data.push(new d.Point(D/p,E)))}if(-1!==r)for(x=s-c.data[r-1].x,v=0,w=c.data.length;w>v;v++)c.data[v].x+=x}else if(b.stringStartsWith(y,"##PEAK TABLE=")){t=!1,c.continuous=!1;for(var y=y.split("\n"),M=0,A=1,B=y.length;B>A;A++)for(x=y[A].split(/[\s,]+/),M+=x.length/2,I=0,J=x.length;J>I+1;I+=2)c.data.push(new d.Point(parseFloat(f(x[I])),parseFloat(f(x[I+1]))))}}else 0!==m.length&&m.push("\n"),m.push(f(x))}return c.setup(),c};var j=new c.JCAMPInterpreter;j.convertHZ2PPM=!0,a.readJCAMP=function(a){return j.read(a)}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery,ChemDoodle.lib.jQuery.trim),function(a,b,c,d,e,f){b.JSONInterpreter=function(){};var g=b.JSONInterpreter.prototype;g.contentTo=function(a,b){for(var c=0,d=0,e=0,f=a.length;f>e;e++){for(var g=a[e],h=0,i=g.atoms.length;i>h;h++)g.atoms[h].tmpid="a"+c++;for(h=0,i=g.bonds.length;i>h;h++)g.bonds[h].tmpid="b"+d++}for(e=c=0,f=b.length;f>e;e++)b[e].tmpid="s"+c++;if(c={},a&&0<a.length)for(c.m=[],e=0,f=a.length;f>e;e++)c.m.push(this.molTo(a[e]));if(b&&0<b.length)for(c.s=[],e=0,f=b.length;f>e;e++)c.s.push(this.shapeTo(b[e]));for(e=0,f=a.length;f>e;e++){for(g=a[e],h=0,i=g.atoms.length;i>h;h++)g.atoms[h].tmpid=void 0;for(h=0,i=g.bonds.length;i>h;h++)g.bonds[h].tmpid=void 0}for(e=0,f=b.length;f>e;e++)b[e].tmpid=void 0;return c},g.contentFrom=function(a){var b={molecules:[],shapes:[]};if(a.m)for(var c=0,d=a.m.length;d>c;c++)b.molecules.push(this.molFrom(a.m[c]));if(a.s)for(c=0,d=a.s.length;d>c;c++)b.shapes.push(this.shapeFrom(a.s[c],b.molecules));for(c=0,d=b.molecules.length;d>c;c++){a=b.molecules[c];for(var e=0,f=a.atoms.length;f>e;e++)a.atoms[e].tmpid=void 0;for(e=0,f=a.bonds.length;f>e;e++)a.bonds[e].tmpid=void 0}for(c=0,d=b.shapes.length;d>c;c++)b.shapes[c].tmpid=void 0;return b},g.molTo=function(a){for(var b={a:[]},d=0,e=a.atoms.length;e>d;d++){var f=a.atoms[d],g={x:f.x,y:f.y};f.tmpid&&(g.i=f.tmpid),"C"!==f.label&&(g.l=f.label),0!==f.z&&(g.z=f.z),0!==f.charge&&(g.c=f.charge),-1!==f.mass&&(g.m=f.mass),0!==f.numRadical&&(g.r=f.numRadical),0!==f.numLonePair&&(g.p=f.numLonePair),f.any&&(g.q=!0),-1!==f.rgroup&&(g.rg=f.rgroup),b.a.push(g)}if(0<a.bonds.length)for(b.b=[],d=0,e=a.bonds.length;e>d;d++)f=a.bonds[d],g={b:a.atoms.indexOf(f.a1),e:a.atoms.indexOf(f.a2)},f.tmpid&&(g.i=f.tmpid),1!==f.bondOrder&&(g.o=f.bondOrder),f.stereo!==c.Bond.STEREO_NONE&&(g.s=f.stereo),b.b.push(g);return b},g.molFrom=function(a){for(var b=new c.Molecule,d=0,e=a.a.length;e>d;d++){var f=a.a[d],g=new c.Atom(f.l?f.l:"C",f.x,f.y);f.i&&(g.tmpid=f.i),f.z&&(g.z=f.z),f.c&&(g.charge=f.c),f.m&&(g.mass=f.m),f.r&&(g.numRadical=f.r),f.p&&(g.numLonePair=f.p),f.q&&(g.any=!0),f.rg&&(g.rgroup=f.rg),void 0!==f.p_h&&(g.hetatm=f.p_h),void 0!==f.p_w&&(g.isWater=f.p_w),void 0!==f.p_d&&(g.closestDistance=f.p_d),b.atoms.push(g)}if(a.b)for(d=0,e=a.b.length;e>d;d++)f=a.b[d],g=new c.Bond(b.atoms[f.b],b.atoms[f.e],void 0===f.o?1:f.o),f.i&&(g.tmpid=f.i),f.s&&(g.stereo=f.s),b.bonds.push(g);return b},g.shapeTo=function(a){var b={};return a.tmpid&&(b.i=a.tmpid),a instanceof d.Line?(b.t="Line",b.x1=a.p1.x,b.y1=a.p1.y,b.x2=a.p2.x,b.y2=a.p2.y,b.a=a.arrowType):a instanceof d.Pusher?(b.t="Pusher",b.o1=a.o1.tmpid,b.o2=a.o2.tmpid,1!==a.numElectron&&(b.e=a.numElectron)):a instanceof d.Bracket?(b.t="Bracket",b.x1=a.p1.x,b.y1=a.p1.y,b.x2=a.p2.x,b.y2=a.p2.y,0!==a.charge&&(b.c=a.charge),0!==a.mult&&(b.m=a.mult),0!==a.repeat&&(b.r=a.repeat)):a instanceof e.Distance?(b.t="Distance",b.a1=a.a1.tmpid,b.a2=a.a2.tmpid,a.node&&(b.n=a.node,b.o=a.offset)):a instanceof e.Angle?(b.t="Angle",b.a1=a.a1.tmpid,b.a2=a.a2.tmpid,b.a3=a.a3.tmpid):a instanceof e.Torsion&&(b.t="Torsion",b.a1=a.a1.tmpid,b.a2=a.a2.tmpid,b.a3=a.a3.tmpid,b.a4=a.a4.tmpid),b},g.shapeFrom=function(a,b){var f;if("Line"===a.t)f=new d.Line(new c.Point(a.x1,a.y1),new c.Point(a.x2,a.y2)),f.arrowType=a.a;else if("Pusher"===a.t){var g,h;f=0;for(var i=b.length;i>f;f++){for(var j=b[f],k=0,l=j.atoms.length;l>k;k++){var m=j.atoms[k];m.tmpid===a.o1?g=m:m.tmpid===a.o2&&(h=m)}for(k=0,l=j.bonds.length;l>k;k++){var n=j.bonds[k];n.tmpid===a.o1?g=n:n.tmpid===a.o2&&(h=n)}}f=new d.Pusher(g,h),a.e&&(f.numElectron=a.e)}else if("Bracket"===a.t)f=new d.Bracket(new c.Point(a.x1,a.y1),new c.Point(a.x2,a.y2)),void 0!==a.c&&(f.charge=a.c),void 0!==a.m&&(f.mult=a.m),void 0!==a.r&&(f.repeat=a.r);else if("Distance"===a.t){var o;for(f=0,i=b.length;i>f;f++)for(j=b[f],k=0,l=j.atoms.length;l>k;k++)m=j.atoms[k],m.tmpid===a.a1?n=m:m.tmpid===a.a2&&(o=m);f=new e.Distance(n,o,a.n,a.o)}else if("Angle"===a.t){var p;for(f=0,i=b.length;i>f;f++)for(j=b[f],k=0,l=j.atoms.length;l>k;k++)m=j.atoms[k],m.tmpid===a.a1?n=m:m.tmpid===a.a2?o=m:m.tmpid===a.a3&&(p=m);f=new e.Angle(n,o,p)}else if("Torsion"===a.t){var q;for(f=0,i=b.length;i>f;f++)for(j=b[f],k=0,l=j.atoms.length;l>k;k++)m=j.atoms[k],m.tmpid===a.a1?n=m:m.tmpid===a.a2?o=m:m.tmpid===a.a3?p=m:m.tmpid===a.a4&&(q=m);f=new e.Torsion(n,o,p,q)}return f},g.pdbFrom=function(a){var b=this.molFrom(a.mol);return b.findRings=!1,b.fromJSON=!0,b.chains=this.chainsFrom(a.ribbons),b},g.chainsFrom=function(a){for(var b=[],d=0,e=a.cs.length;e>d;d++){for(var f=a.cs[d],g=[],h=0,i=f.length;i>h;h++){var j=f[h],k=new c.Residue;k.name=j.n,k.cp1=new c.Atom("",j.x1,j.y1,j.z1),k.cp2=new c.Atom("",j.x2,j.y2,j.z2),j.x3&&(k.cp3=new c.Atom("",j.x3,j.y3,j.z3),k.cp4=new c.Atom("",j.x4,j.y4,j.z4),k.cp5=new c.Atom("",j.x5,j.y5,j.z5)),k.helix=j.h,k.sheet=j.s,k.arrow=j.a,g.push(k)}b.push(g)}return b};var h=new b.JSONInterpreter;a.readJSON=function(a){var b;try{b=f.parse(a)}catch(c){return}return b?b.m||b.s?h.contentFrom(b):b.a?{molecules:[h.molFrom(b)],shapes:[]}:{molecules:[],shapes:[]}:void 0},a.writeJSON=function(a,b){return f.stringify(h.contentTo(a,b))}}(ChemDoodle,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.structures.d2,ChemDoodle.structures.d3,JSON),function(a,b,c){b.RXNInterpreter=function(){};var d=b.RXNInterpreter.prototype=new b._Interpreter;d.read=function(b,d){d||(d=a.default_bondLength_2D);var e,f=[];if(b){e=b.split("$MOL\n");for(var g=e[0].split("\n")[4],h=parseInt(g.substring(0,3)),g=parseInt(g.substring(3,6)),i=1,j=0,k=0,l=h+g;l>k;k++){f[k]=a.readMOL(e[i],d);var m=f[k].getBounds(),m=m.maxX-m.minX,j=j-(m+40);i++}for(k=0,l=h;l>k;k++){var m=f[k].getBounds(),m=m.maxX-m.minX,i=f[k].getCenter(),n=0;for(e=f[k].atoms.length;e>n;n++){var o=f[k].atoms[n];o.x+=j+m/2-i.x,o.y-=i.y}j+=m+40}for(e=new c.d2.Line(new c.Point(j,0),new c.Point(j+40,0)),j+=80,k=h,l=h+g;l>k;k++){for(m=f[k].getBounds(),m=m.maxX-m.minX,i=f[k].getCenter(),n=0;n<f[k].atoms.length;n++)o=f[k].atoms[n],o.x+=j+m/2-i.x,o.y-=i.y;j+=m+40}}else f.push(new c.Molecule),e=new c.d2.Line(new c.Point(-20,0),new c.Point(20,0));return e.arrowType=c.d2.Line.ARROW_SYNTHETIC,{molecules:f,shapes:[e]}},d.write=function(b,d){var e=[[],[]],f=void 0;if(b&&d){for(g=0,h=d.length;h>g;g++)if(d[g]instanceof c.d2.Line){f=d[g].getPoints();break}if(!f)return"";for(var g=0,h=b.length;h>g;g++)b[g].getCenter().x<f[1].x?e[0].push(b[g]):e[1].push(b[g]);for(f=[],f.push("$RXN\nReaction from ChemDoodle Web Components\n\nhttp://www.ichemlabs.com\n"),f.push(this.fit(e[0].length.toString(),3)),f.push(this.fit(e[1].length.toString(),3)),f.push("\n"),g=0;2>g;g++)for(var h=0,i=e[g].length;i>h;h++)f.push("$MOL\n"),f.push(a.writeMOL(e[g][h])),f.push("\n");return f.join("")}};var e=new b.RXNInterpreter;a.readRXN=function(a,b){return e.read(a,b)},a.writeRXN=function(a,b){return e.write(a,b)}}(ChemDoodle,ChemDoodle.io,ChemDoodle.structures),function(a,b,c,d,e,f){d.XYZInterpreter=function(){},b=d.XYZInterpreter.prototype=new d._Interpreter,b.deduceCovalentBonds=!0,b.read=function(b){var d=new e.Molecule;if(!b)return d;b=b.split("\n");for(var g=parseInt(f(b[0])),h=0;g>h;h++){var i=b[h+2].split(/\s+/g);d.atoms[h]=new e.Atom(isNaN(i[0])?i[0]:c[parseInt(i[0])-1],parseFloat(i[1]),parseFloat(i[2]),parseFloat(i[3]))}return this.deduceCovalentBonds&&(new a.informatics.BondDeducer).deduceCovalentBonds(d,1),d};var g=new d.XYZInterpreter;a.readXYZ=function(a){return g.read(a)}}(ChemDoodle,ChemDoodle.ELEMENT,ChemDoodle.SYMBOLS,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery.trim),ChemDoodle.monitor=function(a,b,c){var d={CANVAS_DRAGGING:void 0,CANVAS_OVER:void 0,ALT:!1,SHIFT:!1,META:!1};return a.supports_touch()||b(c).ready(function(){b(c).mousemove(function(a){d.CANVAS_DRAGGING&&d.CANVAS_DRAGGING.drag&&(d.CANVAS_DRAGGING.prehandleEvent(a),d.CANVAS_DRAGGING.drag(a))}),b(c).mouseup(function(a){d.CANVAS_DRAGGING&&d.CANVAS_DRAGGING!==d.CANVAS_OVER&&d.CANVAS_DRAGGING.mouseup&&(d.CANVAS_DRAGGING.prehandleEvent(a),d.CANVAS_DRAGGING.mouseup(a)),d.CANVAS_DRAGGING=void 0}),b(c).keydown(function(a){d.SHIFT=a.shiftKey,d.ALT=a.altKey,d.META=a.metaKey||a.ctrlKey;var b=d.CANVAS_OVER;d.CANVAS_DRAGGING&&(b=d.CANVAS_DRAGGING),b&&b.keydown&&(b.prehandleEvent(a),b.keydown(a))}),b(c).keypress(function(a){var b=d.CANVAS_OVER;d.CANVAS_DRAGGING&&(b=d.CANVAS_DRAGGING),b&&b.keypress&&(b.prehandleEvent(a),b.keypress(a))}),b(c).keyup(function(a){d.SHIFT=a.shiftKey,d.ALT=a.altKey,d.META=a.metaKey||a.ctrlKey;var b=d.CANVAS_OVER;d.CANVAS_DRAGGING&&(b=d.CANVAS_DRAGGING),b&&b.keyup&&(b.prehandleEvent(a),b.keyup(a))})}),d}(ChemDoodle.featureDetection,ChemDoodle.lib.jQuery,document),function(a,b,c,d,e,f,g,h,i,j){a._Canvas=function(){};var k=a._Canvas.prototype;k.molecules=void 0,k.shapes=void 0,k.emptyMessage=void 0,k.image=void 0,k.repaint=function(){if(!this.test){var a=h.getElementById(this.id);if(a.getContext){var b=a.getContext("2d");if(1!==this.pixelRatio&&a.width===this.width&&(a.width=this.width*this.pixelRatio,a.height=this.height*this.pixelRatio,b.scale(this.pixelRatio,this.pixelRatio)),this.image?b.drawImage(this.image,0,0):(this.specs.backgroundColor&&this.bgCache!==a.style.backgroundColor&&(a.style.backgroundColor=this.specs.backgroundColor,this.bgCache=a.style.backgroundColor),b.fillStyle=this.specs.backgroundColor,b.fillRect(0,0,this.width,this.height)),this.innerRepaint)this.innerRepaint(b);else if(0!==this.molecules.length||0!==this.shapes.length){b.save(),b.translate(this.width/2,this.height/2),b.rotate(this.specs.rotateAngle),b.scale(this.specs.scale,this.specs.scale),b.translate(-this.width/2,-this.height/2);for(var a=0,c=this.molecules.length;c>a;a++)this.molecules[a].check(!0),this.molecules[a].draw(b,this.specs);for(a=0,c=this.shapes.length;c>a;a++)this.shapes[a].draw(b,this.specs);b.restore()}else this.emptyMessage&&(b.fillStyle="#737683",b.textAlign="center",b.textBaseline="middle",b.font="18px Helvetica, Verdana, Arial, Sans-serif",b.fillText(this.emptyMessage,this.width/2,this.height/2));this.drawChildExtras&&this.drawChildExtras(b)}}},k.resize=function(b,c){var d=f("#"+this.id);if(d.attr({width:b,height:c}),d.css("width",b),d.css("height",c),this.width=b,this.height=c,a._Canvas3D&&this instanceof a._Canvas3D)this.gl.viewport(0,0,b,c),this.setupScene();else if(0<this.molecules.length){this.center();for(var d=0,e=this.molecules.length;e>d;d++)this.molecules[d].check()}this.repaint()},k.setBackgroundImage=function(a){this.image=new Image;var b=this;this.image.onload=function(){b.repaint()},this.image.src=a},k.loadMolecule=function(b){this.clear(),this.molecules.push(b),this.center(),a._Canvas3D&&this instanceof a._Canvas3D||b.check(),this.afterLoadContent&&this.afterLoadContent(),this.repaint()},k.loadContent=function(b,c){if(this.molecules=b?b:[],this.shapes=c?c:[],this.center(),!(a._Canvas3D&&this instanceof a._Canvas3D))for(var d=0,e=this.molecules.length;e>d;d++)this.molecules[d].check();this.afterLoadContent&&this.afterLoadContent(),this.repaint()},k.addMolecule=function(b){this.molecules.push(b),a._Canvas3D&&this instanceof a._Canvas3D||b.check(),this.repaint()},k.removeMolecule=function(a){this.molecules=f.grep(this.molecules,function(b){return b!==a}),this.repaint()},k.getMolecule=function(){return 0<this.molecules.length?this.molecules[0]:void 0},k.getMolecules=function(){return this.molecules},k.addShape=function(a){this.shapes.push(a),this.repaint()},k.removeShape=function(a){this.shapes=f.grep(this.shapes,function(b){return b!==a}),this.repaint()},k.getShapes=function(){return this.shapes},k.clear=function(){this.molecules=[],this.shapes=[],this.specs.scale=1,this.repaint()},k.center=function(){for(var a=this.getContentBounds(),b=new e.Point((this.width-a.minX-a.maxX)/2,(this.height-a.minY-a.maxY)/2),c=0,d=this.molecules.length;d>c;c++)for(var f=this.molecules[c],h=0,i=f.atoms.length;i>h;h++)f.atoms[h].add(b);for(c=0,d=this.shapes.length;d>c;c++)for(f=this.shapes[c].getPoints(),h=0,i=f.length;i>h;h++)f[h].add(b);this.specs.scale=1,b=a.maxX-a.minX,a=a.maxY-a.minY,(b>this.width||a>this.height)&&(this.specs.scale=.85*g.min(this.width/b,this.height/a))},k.bondExists=function(a,b){for(var c=0,d=this.molecules.length;d>c;c++)for(var e=this.molecules[c],f=0,g=e.bonds.length;g>f;f++){var h=e.bonds[f];if(h.contains(a)&&h.contains(b))return!0}return!1},k.getBond=function(a,b){for(var c=0,d=this.molecules.length;d>c;c++)for(var e=this.molecules[c],f=0,g=e.bonds.length;g>f;f++){var h=e.bonds[f];if(h.contains(a)&&h.contains(b))return h}},k.getMoleculeByAtom=function(a){for(var b=0,c=this.molecules.length;c>b;b++){var d=this.molecules[b];if(-1!==d.atoms.indexOf(a))return d}},k.getAllAtoms=function(){for(var a=[],b=0,c=this.molecules.length;c>b;b++)a=a.concat(this.molecules[b].atoms);return a},k.getAllPoints=function(){for(var a=[],b=0,c=this.molecules.length;c>b;b++)a=a.concat(this.molecules[b].atoms);for(b=0,c=this.shapes.length;c>b;b++)a=a.concat(this.shapes[b].getPoints());return a},k.getContentBounds=function(){for(var a=new c.Bounds,b=0,d=this.molecules.length;d>b;b++)a.expand(this.molecules[b].getBounds());for(b=0,d=this.shapes.length;d>b;b++)a.expand(this.shapes[b].getBounds());return a},k.create=function(c,k,l){if(this.id=c,this.width=k,this.height=l,this.molecules=[],this.shapes=[],h.getElementById(c)){var m=f("#"+c);k?m.attr("width",k):this.width=m.attr("width"),l?m.attr("height",l):this.height=m.attr("height"),m.attr("class","ChemDoodleWebComponent")}else{if(!a.featureDetection.supports_canvas_text()&&-1!=j.indexOf("MSIE"))return void h.writeln('<div style="border: 1px solid black;" width="'+k+'" height="'+l+'">Please install <a href="http://code.google.com/chrome/chromeframe/">Google Chrome Frame</a>, then restart Internet Explorer.</div>');h.writeln('<canvas class="ChemDoodleWebComponent" id="'+c+'" width="'+k+'" height="'+l+'" alt="ChemDoodle Web Component">This browser does not support HTML5/Canvas.</canvas>')}c=f("#"+c),c.css("width",this.width),c.css("height",this.height),this.pixelRatio=i.devicePixelRatio?i.devicePixelRatio:1,this.specs=new e.VisualSpecifications;var n=this;b.supports_touch()?(c.bind("touchstart",function(a){var c=(new Date).getTime();if(!b.supports_gesture()&&2===a.originalEvent.touches.length){var d=a.originalEvent.touches,f=new e.Point(d[0].pageX,d[0].pageY),d=new e.Point(d[1].pageX,d[1].pageY);n.implementedGestureDist=f.distance(d),n.implementedGestureAngle=f.angle(d),n.gesturestart&&(n.prehandleEvent(a),n.gesturestart(a))}n.lastTouch&&1===a.originalEvent.touches.length&&500>c-n.lastTouch?n.dbltap?(n.prehandleEvent(a),n.dbltap(a)):n.dblclick?(n.prehandleEvent(a),n.dblclick(a)):n.touchstart?(n.prehandleEvent(a),n.touchstart(a)):n.mousedown&&(n.prehandleEvent(a),n.mousedown(a)):n.touchstart?(n.prehandleEvent(a),n.touchstart(a),this.hold&&clearTimeout(this.hold),this.touchhold&&(this.hold=setTimeout(function(){n.touchhold(a)},1e3))):n.mousedown&&(n.prehandleEvent(a),n.mousedown(a)),n.lastTouch=c}),c.bind("touchmove",function(a){if(this.hold&&(clearTimeout(this.hold),this.hold=void 0),!b.supports_gesture()&&2===a.originalEvent.touches.length&&n.gesturechange){var c=a.originalEvent.touches,d=new e.Point(c[0].pageX,c[0].pageY),f=new e.Point(c[1].pageX,c[1].pageY),c=d.distance(f),d=d.angle(f);a.originalEvent.scale=c/n.implementedGestureDist,a.originalEvent.rotation=180*(n.implementedGestureAngle-d)/g.PI,n.prehandleEvent(a),n.gesturechange(a)}if(1<a.originalEvent.touches.length&&n.multitouchmove){for(d=a.originalEvent.touches.length,n.prehandleEvent(a),c=new e.Point(-a.offset.left*d,-a.offset.top*d),f=0;d>f;f++)c.x+=a.originalEvent.changedTouches[f].pageX,c.y+=a.originalEvent.changedTouches[f].pageY;c.x/=d,c.y/=d,a.p=c,n.multitouchmove(a,d)}else n.touchmove?(n.prehandleEvent(a),n.touchmove(a)):n.drag&&(n.prehandleEvent(a),n.drag(a))}),c.bind("touchend",function(a){this.hold&&(clearTimeout(this.hold),this.hold=void 0),!b.supports_gesture()&&n.implementedGestureDist&&(n.implementedGestureDist=void 0,n.implementedGestureAngle=void 0,n.gestureend&&(n.prehandleEvent(a),n.gestureend(a))),n.touchend?(n.prehandleEvent(a),n.touchend(a)):n.mouseup&&(n.prehandleEvent(a),n.mouseup(a)),250>(new Date).getTime()-n.lastTouch&&(n.tap?(n.prehandleEvent(a),n.tap(a)):n.click&&(n.prehandleEvent(a),n.click(a)))}),c.bind("gesturestart",function(a){n.gesturestart&&(n.prehandleEvent(a),n.gesturestart(a))}),c.bind("gesturechange",function(a){n.gesturechange&&(n.prehandleEvent(a),n.gesturechange(a))}),c.bind("gestureend",function(a){n.gestureend&&(n.prehandleEvent(a),n.gestureend(a))})):(c.click(function(a){switch(a.which){case 1:n.click&&(n.prehandleEvent(a),n.click(a));break;case 2:n.middleclick&&(n.prehandleEvent(a),n.middleclick(a));break;case 3:n.rightclick&&(n.prehandleEvent(a),n.rightclick(a))}}),c.dblclick(function(a){n.dblclick&&(n.prehandleEvent(a),n.dblclick(a))}),c.mousedown(function(a){switch(a.which){case 1:d.CANVAS_DRAGGING=n,n.mousedown&&(n.prehandleEvent(a),n.mousedown(a));break;case 2:n.middlemousedown&&(n.prehandleEvent(a),n.middlemousedown(a));break;case 3:n.rightmousedown&&(n.prehandleEvent(a),n.rightmousedown(a))}}),c.mousemove(function(a){!d.CANVAS_DRAGGING&&n.mousemove&&(n.prehandleEvent(a),n.mousemove(a))}),c.mouseout(function(a){d.CANVAS_OVER=void 0,n.mouseout&&(n.prehandleEvent(a),n.mouseout(a))}),c.mouseover(function(a){d.CANVAS_OVER=n,n.mouseover&&(n.prehandleEvent(a),n.mouseover(a))}),c.mouseup(function(a){switch(a.which){case 1:n.mouseup&&(n.prehandleEvent(a),n.mouseup(a));break;case 2:n.middlemouseup&&(n.prehandleEvent(a),n.middlemouseup(a));break;case 3:n.rightmouseup&&(n.prehandleEvent(a),n.rightmouseup(a))}}),c.mousewheel(function(a,b){n.mousewheel&&(n.prehandleEvent(a),n.mousewheel(a,b))})),this.subCreate&&this.subCreate()},k.prehandleEvent=function(a){a.originalEvent.changedTouches&&(a.pageX=a.originalEvent.changedTouches[0].pageX,a.pageY=a.originalEvent.changedTouches[0].pageY),a.preventDefault(),a.offset=f("#"+this.id).offset(),a.p=new e.Point(a.pageX-a.offset.left,a.pageY-a.offset.top)}}(ChemDoodle,ChemDoodle.featureDetection,ChemDoodle.math,ChemDoodle.monitor,ChemDoodle.structures,ChemDoodle.lib.jQuery,Math,document,window,navigator.userAgent),function(a,b){a._AnimatorCanvas=function(a,b,c){a&&this.create(a,b,c)};var c=a._AnimatorCanvas.prototype=new a._Canvas;c.timeout=33,c.startAnimation=function(){this.stopAnimation(),this.lastTime=(new Date).getTime();var a=this;this.nextFrame&&(this.handle=b.requestInterval(function(){var b=(new Date).getTime();a.nextFrame(b-a.lastTime),a.repaint(),a.lastTime=b},this.timeout))},c.stopAnimation=function(){this.handle&&(b.clearRequestInterval(this.handle),this.handle=void 0)},c.isRunning=function(){return void 0!==this.handle}}(ChemDoodle,ChemDoodle.animations),function(a,b){a.FileCanvas=function(a,c,d,e){a&&this.create(a,c,d),b.writeln('<br><form name="FileForm" enctype="multipart/form-data" method="POST" action="'+e+'" target="HiddenFileFrame"><input type="file" name="f" /><input type="submit" name="submitbutton" value="Show File" /></form><iframe id="HFF-'+a+'" name="HiddenFileFrame" height="0" width="0" style="display:none;" onLoad="GetMolFromFrame(\'HFF-'+a+"', "+a+')"></iframe>'),this.emptyMessage="Click below to load file",this.repaint()},a.FileCanvas.prototype=new a._Canvas}(ChemDoodle,document),function(a){a.HyperlinkCanvas=function(a,b,c,d,e,f){a&&this.create(a,b,c),this.urlOrFunction=d,this.color=e?e:"blue",this.size=f?f:2},a=a.HyperlinkCanvas.prototype=new a._Canvas,a.openInNewWindow=!0,a.hoverImage=void 0,a.drawChildExtras=function(a){this.e&&(this.hoverImage?a.drawImage(this.hoverImage,0,0):(a.strokeStyle=this.color,a.lineWidth=2*this.size,a.strokeRect(0,0,this.width,this.height)))},a.setHoverImage=function(a){this.hoverImage=new Image,this.hoverImage.src=a},a.click=function(){this.e=void 0,this.repaint(),this.urlOrFunction instanceof Function?this.urlOrFunction():this.openInNewWindow?window.open(this.urlOrFunction):location.href=this.urlOrFunction},a.mouseout=function(){this.e=void 0,this.repaint()},a.mouseover=function(a){this.e=a,this.repaint()}}(ChemDoodle),function(a,b,c,d){a.MolGrabberCanvas=function(a,b,e){a&&this.create(a,b,e),b=[],b.push('<br><input type="text" id="'),b.push(a),b.push('_query" size="32" value="" />'),b.push("<br><nobr>"),b.push('<select id="'),b.push(a),b.push('_select">'),b.push('<option value="chemexper">ChemExper'),b.push('<option value="chemspider">ChemSpider'),b.push('<option value="pubchem" selected>PubChem'),b.push("</select>"),b.push('<button id="'),b.push(a),b.push('_submit">Show Molecule</button>'),b.push("</nobr>"),d.getElementById(a),c("#"+a).after(b.join(""));var f=this;c("#"+a+"_submit").click(function(){f.search()}),c("#"+a+"_query").keypress(function(a){13===a.which&&f.search()}),this.emptyMessage="Enter search term below",this.repaint()},a=a.MolGrabberCanvas.prototype=new a._Canvas,a.setSearchTerm=function(a){c("#"+this.id+"_query").val(a),this.search()},a.search=function(){this.emptyMessage="Searching...",this.clear();var a=this;b.getMoleculeFromDatabase(c("#"+this.id+"_query").val(),{database:c("#"+this.id+"_select").val()},function(b){a.loadMolecule(b)})}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.lib.jQuery,document),function(a,b,c){var d=[],e=[1,0,0],f=[0,1,0],g=[0,0,1];a.RotatorCanvas=function(a,b,c,d){a&&this.create(a,b,c),this.rotate3D=d},a=a.RotatorCanvas.prototype=new a._AnimatorCanvas,b=b.PI/15,a.xIncrement=b,a.yIncrement=b,a.zIncrement=b,a.nextFrame=function(a){if(0===this.molecules.length&&0===this.shapes.length)this.stopAnimation();else if(a/=1e3,this.rotate3D){c.identity(d),c.rotate(d,this.xIncrement*a,e),c.rotate(d,this.yIncrement*a,f),c.rotate(d,this.zIncrement*a,g),a=0;for(var b=this.molecules.length;b>a;a++){for(var h=this.molecules[a],i=0,j=h.atoms.length;j>i;i++){var k=h.atoms[i],l=[k.x-this.width/2,k.y-this.height/2,k.z];c.multiplyVec3(d,l),k.x=l[0]+this.width/2,k.y=l[1]+this.height/2,k.z=l[2]}for(i=0,j=h.rings.length;j>i;i++)h.rings[i].center=h.rings[i].getCenter();this.specs.atoms_display&&this.specs.atoms_circles_2D&&h.sortAtomsByZ(),this.specs.bonds_display&&this.specs.bonds_clearOverlaps_2D&&h.sortBondsByZ()}for(a=0,b=this.shapes.length;b>a;a++)for(h=this.shapes[a].getPoints(),i=0,j=h.length;j>i;i++)k=h[i],l=[k.x-this.width/2,k.y-this.height/2,0],c.multiplyVec3(d,l),k.x=l[0]+this.width/2,k.y=l[1]+this.height/2}else this.specs.rotateAngle+=this.zIncrement*a},a.dblclick=function(){this.isRunning()?this.stopAnimation():this.startAnimation()}}(ChemDoodle,Math,ChemDoodle.lib.mat4),function(a,b,c){a.SlideshowCanvas=function(a,b,c){a&&this.create(a,b,c)},a=a.SlideshowCanvas.prototype=new a._AnimatorCanvas,a.frames=[],a.curIndex=0,a.timeout=5e3,a.alpha=0,a.innerHandle=void 0,a.phase=0,a.drawChildExtras=function(a){var b=c.getRGB(this.specs.backgroundColor,255);a.fillStyle="rgba("+b[0]+", "+b[1]+", "+b[2]+", "+this.alpha+")",a.fillRect(0,0,this.width,this.height)},a.nextFrame=function(){if(0===this.frames.length)this.stopAnimation();else{this.phase=0;var a=this,b=1;this.innerHandle=setInterval(function(){a.alpha=b/15,a.repaint(),15===b&&a.breakInnerHandle(),b++},33)}},a.breakInnerHandle=function(){if(this.innerHandle&&(clearInterval(this.innerHandle),this.innerHandle=void 0),0===this.phase){this.curIndex++,this.curIndex>this.frames.length-1&&(this.curIndex=0),this.alpha=1;var a=this.frames[this.curIndex];this.loadContent(a.mols,a.shapes),this.phase=1;var b=this,c=1;this.innerHandle=setInterval(function(){b.alpha=(15-c)/15,b.repaint(),15===c&&b.breakInnerHandle(),c++},33)}else 1===this.phase&&(this.alpha=0,this.repaint())},a.addFrame=function(a,b){0===this.frames.length&&this.loadContent(a,b),this.frames.push({mols:a,shapes:b})}}(ChemDoodle,ChemDoodle.animations,ChemDoodle.math),function(a,b,c,d,e){a.TransformCanvas=function(a,b,c,d){a&&this.create(a,b,c),this.rotate3D=d},a=a.TransformCanvas.prototype=new a._Canvas,a.lastPoint=void 0,a.rotationMultMod=1.3,a.lastPinchScale=1,a.lastGestureRotate=0,a.mousedown=function(a){this.lastPoint=a.p},a.dblclick=function(){this.center(),this.repaint()},a.drag=function(a){if(!this.lastPoint.multi){if(b.ALT){var f=new c.Point(a.p.x,a.p.y);f.sub(this.lastPoint);for(var g=0,h=this.molecules.length;h>g;g++){for(var i=this.molecules[g],j=0,k=i.atoms.length;k>j;j++)i.atoms[j].add(f);
i.check()}for(g=0,h=this.shapes.length;h>g;g++)for(i=this.shapes[g].getPoints(),j=0,k=i.length;k>j;j++)i[j].add(f);this.lastPoint=a.p}else if(!0===this.rotate3D)for(k=d.max(this.width/4,this.height/4),j=(a.p.x-this.lastPoint.x)/k*this.rotationMultMod,k=-(a.p.y-this.lastPoint.y)/k*this.rotationMultMod,f=[],e.identity(f),e.rotate(f,k,[1,0,0]),e.rotate(f,j,[0,1,0]),g=0,h=this.molecules.length;h>g;g++){for(i=this.molecules[g],j=0,k=i.atoms.length;k>j;j++)g=i.atoms[j],h=[g.x-this.width/2,g.y-this.height/2,g.z],e.multiplyVec3(f,h),g.x=h[0]+this.width/2,g.y=h[1]+this.height/2,g.z=h[2];for(g=0,h=i.rings.length;h>g;g++)i.rings[g].center=i.rings[g].getCenter();this.lastPoint=a.p,this.specs.atoms_display&&this.specs.atoms_circles_2D&&i.sortAtomsByZ(),this.specs.bonds_display&&this.specs.bonds_clearOverlaps_2D&&i.sortBondsByZ()}else k=new c.Point(this.width/2,this.height/2),j=k.angle(this.lastPoint),k=k.angle(a.p),this.specs.rotateAngle-=k-j,this.lastPoint=a.p;this.repaint()}},a.mousewheel=function(a,b){this.specs.scale+=b/50,.01>this.specs.scale&&(this.specs.scale=.01),this.repaint()},a.multitouchmove=function(a,b){if(2===b)if(this.lastPoint.multi){var d=new c.Point(a.p.x,a.p.y);d.sub(this.lastPoint);for(var e=0,f=this.molecules.length;f>e;e++){for(var g=this.molecules[e],h=0,i=g.atoms.length;i>h;h++)g.atoms[h].add(d);g.check()}for(e=0,f=this.shapes.length;f>e;e++)for(g=this.shapes[e].getPoints(),h=0,i=g.length;i>h;h++)g[h].add(d);this.lastPoint=a.p,this.lastPoint.multi=!0,this.repaint()}else this.lastPoint=a.p,this.lastPoint.multi=!0},a.gesturechange=function(a){if(0!==a.originalEvent.scale-this.lastPinchScale&&(this.specs.scale*=a.originalEvent.scale/this.lastPinchScale,.01>this.specs.scale&&(this.specs.scale=.01),this.lastPinchScale=a.originalEvent.scale),0!==this.lastGestureRotate-a.originalEvent.rotation){for(var b=(this.lastGestureRotate-a.originalEvent.rotation)/180*g.PI,d=new c.Point(this.width/2,this.height/2),e=0,f=this.molecules.length;f>e;e++){for(var g=this.molecules[e],h=0,i=g.atoms.length;i>h;h++){var j=g.atoms[h],k=d.distance(j),l=d.angle(j)+b;j.x=d.x+k*g.cos(l),j.y=d.y-k*g.sin(l)}g.check()}this.lastGestureRotate=a.originalEvent.rotation}this.repaint()},a.gestureend=function(){this.lastPinchScale=1,this.lastGestureRotate=0}}(ChemDoodle,ChemDoodle.monitor,ChemDoodle.structures,Math,ChemDoodle.lib.mat4),function(a){a.ViewerCanvas=function(a,b,c){a&&this.create(a,b,c)},a.ViewerCanvas.prototype=new a._Canvas}(ChemDoodle),function(a){a._SpectrumCanvas=function(a,b,c){a&&this.create(a,b,c)},a=a._SpectrumCanvas.prototype=new a._Canvas,a.spectrum=void 0,a.emptyMessage="No Spectrum Loaded or Recognized",a.loadMolecule=void 0,a.getMolecule=void 0,a.innerRepaint=function(a){this.spectrum&&0<this.spectrum.data.length?this.spectrum.draw(a,this.specs,this.width,this.height):this.emptyMessage&&(a.fillStyle="#737683",a.textAlign="center",a.textBaseline="middle",a.font="18px Helvetica, Verdana, Arial, Sans-serif",a.fillText(this.emptyMessage,this.width/2,this.height/2))},a.loadSpectrum=function(a){this.spectrum=a,this.repaint()},a.getSpectrum=function(){return this.spectrum},a.getSpectrumCoordinates=function(a,b){return spectrum.getInternalCoordinates(a,b,this.width,this.height)}}(ChemDoodle,document),function(a){a.ObserverCanvas=function(a,b,c){a&&this.create(a,b,c)},a.ObserverCanvas.prototype=new a._SpectrumCanvas}(ChemDoodle),function(a){a.OverlayCanvas=function(a,b,c){a&&this.create(a,b,c)},a=a.OverlayCanvas.prototype=new a._SpectrumCanvas,a.overlaySpectra=[],a.superRepaint=a.innerRepaint,a.innerRepaint=function(a){if(this.superRepaint(a),this.spectrum&&0<this.spectrum.data.length)for(var b=0,c=this.overlaySpectra.length;c>b;b++){var d=this.overlaySpectra[b];d&&0<d.data.length&&(d.minX=this.spectrum.minX,d.maxX=this.spectrum.maxX,d.drawPlot(a,this.specs,this.width,this.height,this.spectrum.memory.offsetTop,this.spectrum.memory.offsetLeft,this.spectrum.memory.offsetBottom))}},a.addSpectrum=function(a){this.spectrum?this.overlaySpectra.push(a):this.spectrum=a}}(ChemDoodle),function(a,b,c){a.PerspectiveCanvas=function(a,b,c){a&&this.create(a,b,c)};var d=a.PerspectiveCanvas.prototype=new a._SpectrumCanvas;d.dragRange=void 0,d.rescaleYAxisOnZoom=!0,d.lastPinchScale=1,d.mousedown=function(b){this.dragRange=new a.structures.Point(b.p.x,b.p.x)},d.mouseup=function(a){this.dragRange&&this.dragRange.x!==this.dragRange.y&&(this.dragRange.multi||(a=this.spectrum.zoom(this.dragRange.x,a.p.x,this.width,this.rescaleYAxisOnZoom),this.rescaleYAxisOnZoom&&(this.specs.scale=a)),this.dragRange=void 0,this.repaint())},d.drag=function(a){this.dragRange&&(this.dragRange.multi?this.dragRange=void 0:(b.SHIFT&&(this.spectrum.translate(a.p.x-this.dragRange.x,this.width),this.dragRange.x=a.p.x),this.dragRange.y=a.p.x),this.repaint())},d.drawChildExtras=function(a){if(this.dragRange){var b=c.min(this.dragRange.x,this.dragRange.y),d=c.max(this.dragRange.x,this.dragRange.y);for(a.strokeStyle="grey",a.lineStyle=1,a.beginPath(),a.moveTo(b,this.height/2);d>=b;b++)5>b%10?a.lineTo(b,c.round(this.height/2)):a.moveTo(b,c.round(this.height/2));a.stroke()}},d.mousewheel=function(a,b){this.specs.scale+=b/10,.01>this.specs.scale&&(this.specs.scale=.01),this.repaint()},d.dblclick=function(){this.spectrum.setup(),this.specs.scale=1,this.repaint()},d.multitouchmove=function(b,c){2===c&&(this.dragRange&&this.dragRange.multi?(this.spectrum.translate(b.p.x-this.dragRange.x,this.width),this.dragRange.x=b.p.x,this.dragRange.y=b.p.x,this.repaint()):(this.dragRange=new a.structures.Point(b.p.x,b.p.x),this.dragRange.multi=!0))},d.gesturechange=function(a){this.specs.scale*=a.originalEvent.scale/this.lastPinchScale,.01>this.specs.scale&&(this.specs.scale=.01),this.lastPinchScale=a.originalEvent.scale,this.repaint()},d.gestureend=function(){this.lastPinchScale=1}}(ChemDoodle,ChemDoodle.monitor,Math),function(a,b,c){a.SeekerCanvas=function(a,b,c,d){a&&this.create(a,b,c),this.seekType=d};var d=a.SeekerCanvas.prototype=new a._SpectrumCanvas;d.superRepaint=d.innerRepaint,d.innerRepaint=function(d){if(this.superRepaint(d),this.spectrum&&0<this.spectrum.data.length&&this.p){var e,f;if(this.seekType===a.SeekerCanvas.SEEK_POINTER)e=this.p,f=this.spectrum.getInternalCoordinates(e.x,e.y);else if(this.seekType===a.SeekerCanvas.SEEK_PLOT||this.seekType===a.SeekerCanvas.SEEK_PEAK){if(f=this.seekType===a.SeekerCanvas.SEEK_PLOT?this.spectrum.getClosestPlotInternalCoordinates(this.p.x):this.spectrum.getClosestPeakInternalCoordinates(this.p.x),!f)return;e={x:this.spectrum.getTransformedX(f.x,this.specs,this.width,this.spectrum.memory.offsetLeft),y:this.spectrum.getTransformedY(f.y/100,this.specs,this.height,this.spectrum.memory.offsetBottom,this.spectrum.memory.offsetTop)}}d.fillStyle="white",d.strokeStyle=this.specs.plots_color,d.lineWidth=this.specs.plots_width,d.beginPath(),d.arc(e.x,e.y,3,0,2*c.PI,!1),d.fill(),d.stroke(),d.font=b.getFontString(this.specs.text_font_size,this.specs.text_font_families),d.textAlign="left",d.textBaseline="bottom",f="x:"+f.x.toFixed(3)+", y:"+f.y.toFixed(3);var g=e.x+3,h=d.measureText(f).width;g+h>this.width-2&&(g-=6+h),e=e.y,0>e-this.specs.text_font_size-2&&(e+=this.specs.text_font_size),d.fillRect(g,e-this.specs.text_font_size,h,this.specs.text_font_size),d.fillStyle="black",d.fillText(f,g,e)}},d.mouseout=function(){this.p=void 0,this.repaint()},d.mousemove=function(a){this.p={x:a.p.x-2,y:a.p.y-3},this.repaint()},d.touchstart=function(a){this.mousemove(a)},d.touchmove=function(a){this.mousemove(a)},d.touchend=function(a){this.mouseout(a)},a.SeekerCanvas.SEEK_POINTER="pointer",a.SeekerCanvas.SEEK_PLOT="plot",a.SeekerCanvas.SEEK_PEAK="peak"}(ChemDoodle,ChemDoodle.extensions,Math),function(a,b,c,d,e,f,g,h,i,j,k,l){a._Canvas3D=function(a,b,c){a&&this.create(a,b,c)};var m=a._Canvas3D.prototype=new a._Canvas;m.rotationMatrix=void 0,m.translationMatrix=void 0,m.lastPoint=void 0,m.emptyMessage="WebGL is Unavailable!",m.lastPinchScale=1,m.lastGestureRotate=0,m.afterLoadContent=function(){for(var a=new c.Bounds,b=0,d=this.molecules.length;d>b;b++)a.expand(this.molecules[b].getBounds3D());var e=k.dist([a.maxX,a.maxY,a.maxZ],[a.minX,a.minY,a.minZ])/2+1.5,b=45,d=Math.tan(b/360*Math.PI)/.8;this.depth=e/d;var d=g.max(this.depth-e,.1),e=this.depth+e,f=this.gl.canvas.clientWidth/this.gl.canvas.clientHeight;1>f&&(b/=f),this.specs.projectionOrthoWidth_3D=2*(Math.tan(b/360*Math.PI)*this.depth)*f,this.specs.projectionPerspectiveVerticalFieldOfView_3D=b,this.specs.projectionFrontCulling_3D=d,this.specs.projectionBackCulling_3D=e,this.specs.projectionWidthHeightRatio_3D=f,this.translationMatrix=i.translate(i.identity([]),[0,0,-this.depth]),this.maxDimension=g.max(a.maxX-a.minX,a.maxY-a.minY),this.setupScene()},m.setViewDistance=function(a){this.specs.projectionPerspectiveVerticalFieldOfView_3D=c.clamp(this.specs.projectionPerspectiveVerticalFieldOfView_3D/a,.1,179.9),this.specs.projectionOrthoWidth_3D=2*(g.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*Math.PI)*this.depth)*this.specs.projectionWidthHeightRatio_3D,this.updateScene()},m.repaint=function(){if(this.gl){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT),this.gl.modelViewMatrix=i.multiply(this.translationMatrix,this.rotationMatrix,[]),this.gl.rotationMatrix=this.rotationMatrix;var a=this.gl.getUniformLocation(this.gl.program,"u_projection_matrix");this.gl.uniformMatrix4fv(a,!1,this.gl.projectionMatrix),this.gl.fogging.setMode(this.specs.fog_mode_3D);for(var b=0,c=this.molecules.length;c>b;b++)this.molecules[b].render(this.gl,this.specs);for(b=0,c=this.shapes.length;c>b;b++)this.shapes[b].render(this.gl,this.specs);this.specs.compass_display&&(this.gl.uniformMatrix4fv(a,!1,this.compass.projectionMatrix),this.compass.render(this.gl,this.specs),this.gl.setMatrixUniforms(this.gl.modelViewMatrix),this.gl.uniformMatrix4fv(a,!1,this.gl.projectionMatrix)),this.gl.enable(this.gl.BLEND),this.gl.depthMask(!1),this.gl.enableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.specs.atoms_displayLabels_3D&&this.label3D.render(this.gl,this.specs,this.getMolecules()),this.specs.compass_display&&this.specs.compass_displayText_3D&&(this.gl.uniformMatrix4fv(a,!1,this.compass.projectionMatrix),this.compass.renderAxis(this.gl),this.gl.setMatrixUniforms(this.gl.modelViewMatrix),this.gl.uniformMatrix4fv(a,!1,this.gl.projectionMatrix)),this.gl.disableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.gl.disable(this.gl.BLEND),this.gl.depthMask(!0),this.gl.disable(this.gl.DEPTH_TEST),this.drawChildExtras&&this.drawChildExtras(this.gl),this.gl.enable(this.gl.DEPTH_TEST),this.gl.flush()}},m.pick=function(a,b,c,d){if(this.gl){i.multiply(this.translationMatrix,this.rotationMatrix,this.gl.modelViewMatrix),this.gl.rotationMatrix=this.rotationMatrix;var e=this.gl.getUniformLocation(this.gl.program,"u_projection_matrix");return this.gl.uniformMatrix4fv(e,!1,this.gl.projectionMatrix),this.picker.pick(this.gl,this.molecules,this.specs,a,this.height-b,c,d)}},m.center=function(){for(var a=new d.Atom,b=0,c=this.molecules.length;c>b;b++){var e=this.molecules[b];a.add3D(e.getCenter3D())}for(a.x/=this.molecules.length,a.y/=this.molecules.length,b=0,c=this.molecules.length;c>b;b++){for(var e=this.molecules[b],f=0,g=e.atoms.length;g>f;f++)e.atoms[f].sub3D(a);if(e.chains&&e.fromJSON)for(f=0,g=e.chains.length;g>f;f++)for(var h=e.chains[f],i=0,j=h.length;j>i;i++){var k=h[i];k.cp1.sub3D(a),k.cp2.sub3D(a),k.cp3&&(k.cp3.sub3D(a),k.cp4.sub3D(a),k.cp5.sub3D(a))}}},m.subCreate=function(){try{var a=h.getElementById(this.id);this.gl=a.getContext("webgl"),this.gl||(this.gl=a.getContext("experimental-webgl"))}catch(b){}this.gl?(this.rotationMatrix=i.identity([]),this.translationMatrix=i.identity([]),this.gl.viewport(0,0,this.width,this.height),this.gl.program=this.gl.createProgram(),this.gl.shader=new e.Shader,this.gl.shader.init(this.gl),this.gl.programLabel=this.gl.createProgram(),this.setupScene()):this.displayMessage()},a._Canvas.prototype.displayMessage=function(){var a=h.getElementById(this.id);a.getContext&&(a=a.getContext("2d"),this.specs.backgroundColor&&(a.fillStyle=this.specs.backgroundColor,a.fillRect(0,0,this.width,this.height)),this.emptyMessage&&(a.fillStyle="#737683",a.textAlign="center",a.textBaseline="middle",a.font="18px Helvetica, Verdana, Arial, Sans-serif",a.fillText(this.emptyMessage,this.width/2,this.height/2)))},m.renderText=function(a,b){if(this.gl){var c={position:[],texCoord:[],translation:[]};this.gl.textImage.pushVertexData(a,b,0,c),this.gl.textMesh.storeData(this.gl,c.position,c.texCoord,c.translation),this.gl.enable(this.gl.BLEND),this.gl.depthMask(!1),this.gl.enableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.gl.textImage.useTexture(this.gl),this.gl.textMesh.render(this.gl),this.gl.disableVertexAttribArray(this.gl.shader.vertexTexCoordAttribute),this.gl.disable(this.gl.BLEND),this.gl.depthMask(!0)}},m.setupScene=function(){if(this.gl){l("#"+this.id).css("background-color",this.specs.backgroundColor);var h=c.getRGB(this.specs.backgroundColor,1);this.gl.clearColor(h[0],h[1],h[2],1),this.gl.clearDepth(1),this.gl.enable(this.gl.DEPTH_TEST),this.gl.depthFunc(this.gl.LEQUAL),this.gl.blendFuncSeparate(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA,this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.specs.cullBackFace_3D&&this.gl.enable(this.gl.CULL_FACE),this.gl.sphereBuffer=new e.Sphere(1,this.specs.atoms_resolution_3D,this.specs.atoms_resolution_3D),this.gl.starBuffer=new e.Star,this.gl.cylinderBuffer=new e.Cylinder(1,1,this.specs.bonds_resolution_3D),this.gl.pillBuffer=new e.Pill(this.specs.bonds_pillDiameter_3D/2,this.specs.bonds_pillHeight_3D,this.specs.bonds_pillLatitudeResolution_3D,this.specs.bonds_pillLongitudeResolution_3D),this.gl.lineBuffer=new e.Line,this.gl.lineArrowBuffer=new e.LineArrow,this.gl.arrowBuffer=new e.Arrow(.3,this.specs.compass_resolution_3D),this.gl.textMesh=new e.TextMesh,this.gl.textMesh.init(this.gl),this.gl.textImage=new e.TextImage,this.gl.textImage.init(this.gl),this.gl.textImage.updateFont(this.gl,this.specs.text_font_size,this.specs.text_font_families,this.specs.text_font_bold,this.specs.text_font_italic,this.specs.text_font_stroke_3D),this.label3D=new e.Label,this.label3D.init(this.gl,this.specs);for(var m=0,n=this.molecules.length;n>m;m++)if(h=this.molecules[m],h.labelMesh instanceof e.TextMesh||(h.labelMesh=new e.TextMesh,h.labelMesh.init(this.gl)),h.unitCellVectors&&(h.unitCell=new e.UnitCell(h.unitCellVectors)),h.chains){h.ribbons=[],h.cartoons=[],h.tubes=[];for(var o=0,p=h.chains.length;p>o;o++){var q=h.chains[o],r=2<q.length&&f[q[2].name]&&"#BEA06E"===f[q[2].name].aminoColor;if(0<q.length&&!q[0].lineSegments){for(var s=0,t=q.length-1;t>s;s++)q[s].setup(q[s+1].cp1,r?1:this.specs.proteins_horizontalResolution);if(!r)for(s=1,t=q.length-1;t>s;s++)b.vec3AngleFrom(q[s-1].D,q[s].D)>g.PI/2&&(q[s].guidePointsSmall.reverse(),q[s].guidePointsLarge.reverse(),k.scale(q[s].D,-1));for(s=1,t=q.length-3;t>s;s++)q[s].computeLineSegments(q[s-1],q[s+1],q[s+2],!r,r?this.specs.nucleics_verticalResolution:this.specs.proteins_verticalResolution);q.pop(),q.pop(),q.pop(),q.shift()}var s=c.hsl2rgb(1===p?.5:o/p,1,.5),u="rgb("+s[0]+","+s[1]+","+s[2]+")";if(q.chainColor=u,r)s=new e.Tube(q,this.specs.nucleics_tubeThickness,this.specs.nucleics_tubeResolution_3D),s.chainColor=u,h.tubes.push(s);else{for(r={front:new e.Ribbon(q,this.specs.proteins_ribbonThickness,!1),back:new e.Ribbon(q,-this.specs.proteins_ribbonThickness,!1)},r.front.chainColor=u,r.back.chainColor=u,s=0,t=r.front.segments.length;t>s;s++)r.front.segments[s].chainColor=u;for(s=0,t=r.back.segments.length;t>s;s++)r.back.segments[s].chainColor=u;for(h.ribbons.push(r),q={front:new e.Ribbon(q,this.specs.proteins_ribbonThickness,!0),back:new e.Ribbon(q,-this.specs.proteins_ribbonThickness,!0)},q.front.chainColor=u,q.back.chainColor=u,s=0,t=q.front.segments.length;t>s;s++)q.front.segments[s].chainColor=u;for(s=0,t=q.back.segments.length;t>s;s++)q.back.segments[s].chainColor=u;for(s=0,t=q.front.cartoonSegments.length;t>s;s++)q.front.cartoonSegments[s].chainColor=u;for(s=0,t=q.back.cartoonSegments.length;t>s;s++)q.back.cartoonSegments[s].chainColor=u;h.cartoons.push(q)}}}if(this.label3D.updateVerticesBuffer(this.gl,this.getMolecules(),this.specs),this instanceof a.MovieCanvas3D&&this.frames)for(s=0,t=this.frames.length;t>s;s++){for(m=this.frames[s],o=0,p=m.mols.length;p>o;o++)h=m.mols[o],h.labelMesh instanceof d.d3.TextMesh||(h.labelMesh=new d.d3.TextMesh,h.labelMesh.init(this.gl));this.label3D.updateVerticesBuffer(this.gl,m.mols,this.specs)}this.gl.lighting=new e.Light(this.specs.lightDiffuseColor_3D,this.specs.lightSpecularColor_3D,this.specs.lightDirection_3D),this.gl.lighting.lightScene(this.gl),this.gl.material=new e.Material(this.gl),this.gl.fogging=new e.Fog(this.gl),this.gl.fogging.setTempParameter(this.specs.fog_color_3D||this.specs.backgroundColor,this.specs.fog_start_3D,this.specs.fog_end_3D,this.specs.fog_density_3D),this.compass=new e.Compass(this.gl,this.specs),h=this.width/this.height,this.specs.projectionWidthHeightRatio_3D&&(h=this.specs.projectionWidthHeightRatio_3D),this.gl.projectionMatrix=this.specs.projectionPerspective_3D?i.perspective(this.specs.projectionPerspectiveVerticalFieldOfView_3D,h,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D):i.ortho(-this.specs.projectionOrthoWidth_3D/2,this.specs.projectionOrthoWidth_3D/2,-this.specs.projectionOrthoWidth_3D/2/h,this.specs.projectionOrthoWidth_3D/2/h,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D),h=this.gl.getUniformLocation(this.gl.program,"u_projection_matrix"),this.gl.uniformMatrix4fv(h,!1,this.gl.projectionMatrix);var v=this.gl.getUniformLocation(this.gl.program,"u_model_view_matrix"),w=this.gl.getUniformLocation(this.gl.program,"u_normal_matrix");this.gl.setMatrixUniforms=function(a){this.uniformMatrix4fv(v,!1,a),a=j.transpose(i.toInverseMat3(a,[])),this.uniformMatrix3fv(w,!1,a)},o=this.gl.getUniformLocation(this.gl.program,"u_dimension"),this.gl.uniformMatrix4fv(h,!1,this.gl.projectionMatrix),this.gl.uniform2f(o,this.gl.canvas.clientWidth,this.gl.canvas.clientHeight),this.picker=new e.Picker,this.picker.init(this.gl),this.picker.setDimension(this.gl,this.width,this.height)}},m.updateScene=function(){this.gl.fogging.setTempParameter(this.specs.fog_color_3D||this.specs.backgroundColor,this.specs.fog_start_3D,this.specs.fog_end_3D,this.specs.fog_density_3D);var a=this.width/this.height;this.specs.projectionWidthHeightRatio_3D&&(a=this.specs.projectionWidthHeightRatio_3D),this.gl.projectionMatrix=this.specs.projectionPerspective_3D?i.perspective(this.specs.projectionPerspectiveVerticalFieldOfView_3D,a,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D):i.ortho(-this.specs.projectionOrthoWidth_3D/2,this.specs.projectionOrthoWidth_3D/2,-this.specs.projectionOrthoWidth_3D/2/a,this.specs.projectionOrthoWidth_3D/2/a,this.specs.projectionFrontCulling_3D,this.specs.projectionBackCulling_3D),this.repaint()},m.mousedown=function(a){this.lastPoint=a.p},m.mouseup=function(){this.lastPoint=void 0},m.rightmousedown=function(a){this.lastPoint=a.p},m.drag=function(b){if(this.lastPoint){if(a.monitor.ALT){var c=new d.Point(b.p.x,b.p.y);c.sub(this.lastPoint);var e=g.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*g.PI),e=this.depth/(this.height/2/e);i.translate(this.translationMatrix,[c.x*e,-c.y*e,0])}else e=b.p.x-this.lastPoint.x,c=b.p.y-this.lastPoint.y,e=i.rotate(i.identity([]),e*g.PI/180,[0,1,0]),i.rotate(e,c*g.PI/180,[1,0,0]),this.rotationMatrix=i.multiply(e,this.rotationMatrix);this.lastPoint=b.p,this.repaint()}},m.mousewheel=function(a,b){var c=this.specs.projectionPerspectiveVerticalFieldOfView_3D+b;this.specs.projectionPerspectiveVerticalFieldOfView_3D=.1>c?.1:c>179.9?179.9:c,this.specs.projectionOrthoWidth_3D=2*(Math.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*Math.PI)*this.depth)*this.specs.projectionWidthHeightRatio_3D,this.updateScene()},m.multitouchmove=function(a,b){if(2===b)if(this.lastPoint.multi){var c=new d.Point(a.p.x,a.p.y);c.sub(this.lastPoint);var e=g.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*g.PI),e=this.depth/(this.height/2/e);i.translate(this.translationMatrix,[c.x*e,-c.y*e,0]),this.lastPoint=a.p,this.repaint()}else this.lastPoint=a.p,this.lastPoint.multi=!0},m.gesturechange=function(a){if(0!==a.originalEvent.scale-this.lastPinchScale){var b=this.specs.projectionPerspectiveVerticalFieldOfView_3D+30*-(a.originalEvent.scale/this.lastPinchScale-1);this.specs.projectionPerspectiveVerticalFieldOfView_3D=.1>b?.1:b>179.9?179.9:b,this.specs.projectionOrthoWidth_3D=2*(Math.tan(this.specs.projectionPerspectiveVerticalFieldOfView_3D/360*Math.PI)*this.depth)*this.specs.projectionWidthHeightRatio_3D,this.updateScene(),this.lastPinchScale=a.originalEvent.scale}this.repaint()},m.gestureend=function(){this.lastPinchScale=1,this.lastGestureRotate=0}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.math,ChemDoodle.structures,ChemDoodle.structures.d3,ChemDoodle.RESIDUE,Math,document,ChemDoodle.lib.mat4,ChemDoodle.lib.mat3,ChemDoodle.lib.vec3,ChemDoodle.lib.jQuery,window),function(a,b,c,d){a.MolGrabberCanvas3D=function(a,b,e){a&&this.create(a,b,e),b=[],b.push('<br><input type="text" id="'),b.push(a),b.push('_query" size="32" value="" />'),b.push("<br><nobr>"),b.push('<select id="'),b.push(a),b.push('_select">'),b.push('<option value="pubchem" selected>PubChem'),b.push("</select>"),b.push('<button id="'),b.push(a),b.push('_submit">Show Molecule</button>'),b.push("</nobr>"),d.writeln(b.join(""));var f=this;c("#"+a+"_submit").click(function(){f.search()}),c("#"+a+"_query").keypress(function(a){13===a.which&&f.search()})},a=a.MolGrabberCanvas3D.prototype=new a._Canvas3D,a.setSearchTerm=function(a){c("#"+this.id+"_query").val(a),this.search()},a.search=function(){var a=this;b.getMoleculeFromDatabase(c("#"+this.id+"_query").val(),{database:c("#"+this.id+"_select").val(),dimension:3},function(b){a.loadMolecule(b)})}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.lib.jQuery,document),function(a,b){a.MovieCanvas3D=function(a,b,c){a&&this.create(a,b,c),this.frames=[]},a.MovieCanvas3D.PLAY_ONCE=0,a.MovieCanvas3D.PLAY_LOOP=1,a.MovieCanvas3D.PLAY_SPRING=2;var c=a.MovieCanvas3D.prototype=new a._Canvas3D;c.timeout=50,c.frameNumber=0,c.playMode=2,c.reverse=!1,c.startAnimation=a._AnimatorCanvas.prototype.startAnimation,c.stopAnimation=a._AnimatorCanvas.prototype.stopAnimation,c.isRunning=a._AnimatorCanvas.prototype.isRunning,c.dblclick=a.RotatorCanvas.prototype.dblclick,c.nextFrame=function(){var a=this.frames[this.frameNumber];this.molecules=a.mols,this.shapes=a.shapes,2===this.playMode&&this.reverse?(this.frameNumber--,0>this.frameNumber&&(this.frameNumber=1,this.reverse=!1)):(this.frameNumber++,this.frameNumber>=this.frames.length&&(2===this.playMode?(this.frameNumber-=2,this.reverse=!0):(this.frameNumber=0,0===this.playMode&&this.stopAnimation())))},c.center=function(){for(var a=new b.Atom,c=this.frames[0],d=0,e=c.mols.length;e>d;d++)a.add3D(c.mols[d].getCenter3D());a.x/=c.mols.length,a.y/=c.mols.length,c=new b.Atom,c.sub3D(a);for(var a=0,f=this.frames.length;f>a;a++)for(var g=this.frames[a],d=0,e=g.mols.length;e>d;d++)for(var h=g.mols[d],i=0,j=h.atoms.length;j>i;i++)h.atoms[i].add3D(c)},c.addFrame=function(a,b){this.frames.push({mols:a,shapes:b})}}(ChemDoodle,ChemDoodle.structures),function(a,b,c){var d=[],e=[1,0,0],f=[0,1,0],g=[0,0,1];a.RotatorCanvas3D=function(a,b,c){a&&this.create(a,b,c)};var h=a.RotatorCanvas3D.prototype=new a._Canvas3D;h.timeout=33,b=b.PI/15,h.xIncrement=b,h.yIncrement=b,h.zIncrement=b,h.startAnimation=a._AnimatorCanvas.prototype.startAnimation,h.stopAnimation=a._AnimatorCanvas.prototype.stopAnimation,h.isRunning=a._AnimatorCanvas.prototype.isRunning,h.dblclick=a.RotatorCanvas.prototype.dblclick,h.mousedown=void 0,h.rightmousedown=void 0,h.drag=void 0,h.mousewheel=void 0,h.nextFrame=function(a){0===this.molecules.length&&0===this.shapes.length?this.stopAnimation():(c.identity(d),a/=1e3,c.rotate(d,this.xIncrement*a,e),c.rotate(d,this.yIncrement*a,f),c.rotate(d,this.zIncrement*a,g),c.multiply(this.rotationMatrix,d))}}(ChemDoodle,Math,ChemDoodle.lib.mat4),function(a){a.TransformCanvas3D=function(a,b,c){a&&this.create(a,b,c)},a.TransformCanvas3D.prototype=new a._Canvas3D}(ChemDoodle),function(a){a.ViewerCanvas3D=function(a,b,c){a&&this.create(a,b,c)},a=a.ViewerCanvas3D.prototype=new a._Canvas3D,a.mousedown=void 0,a.rightmousedown=void 0,a.drag=void 0,a.mousewheel=void 0}(ChemDoodle),function(a,b,c){function d(a,b,c,d){this.element=a,this.x=b,this.y=c,this.dimension=d}a.PeriodicTableCanvas=function(a,b){this.padding=5,a&&this.create(a,18*b+2*this.padding,10*b+2*this.padding),this.cellDimension=b?b:20,this.setupTable(),this.repaint()};var e=a.PeriodicTableCanvas.prototype=new a._Canvas;e.loadMolecule=void 0,e.getMolecule=void 0,e.getHoveredElement=function(){return this.hovered?this.hovered.element:void 0},e.innerRepaint=function(a){for(var b=0,c=this.cells.length;c>b;b++)this.drawCell(a,this.specs,this.cells[b]);this.hovered&&this.drawCell(a,this.specs,this.hovered),this.selected&&this.drawCell(a,this.specs,this.selected)},e.setupTable=function(){this.cells=[];for(var b=this.padding,c=this.padding,e=0,f=0,g=a.SYMBOLS.length;g>f;f++){18===e&&(e=0,c+=this.cellDimension,b=this.padding);var h=a.ELEMENT[a.SYMBOLS[f]];2===h.atomicNumber?(b+=16*this.cellDimension,e+=16):5!==h.atomicNumber&&13!==h.atomicNumber||(b+=10*this.cellDimension,e+=10),(58>h.atomicNumber||71<h.atomicNumber&&90>h.atomicNumber||103<h.atomicNumber)&&113>h.atomicNumber&&(this.cells.push(new d(h,b,c,this.cellDimension)),b+=this.cellDimension,e++)}for(c+=2*this.cellDimension,b=3*this.cellDimension+this.padding,f=57;104>f;f++)h=a.ELEMENT[a.SYMBOLS[f]],90===h.atomicNumber&&(c+=this.cellDimension,b=3*this.cellDimension+this.padding),(58<=h.atomicNumber&&71>=h.atomicNumber||90<=h.atomicNumber&&103>=h.atomicNumber)&&(this.cells.push(new d(h,b,c,this.cellDimension)),b+=this.cellDimension)},e.drawCell=function(a,c,d){var e=a.createRadialGradient(d.x+d.dimension/3,d.y+d.dimension/3,1.5*d.dimension,d.x+d.dimension/3,d.y+d.dimension/3,d.dimension/10);e.addColorStop(0,"#000000"),e.addColorStop(.7,d.element.jmolColor),e.addColorStop(1,"#FFFFFF"),a.fillStyle=e,b.contextRoundRect(a,d.x,d.y,d.dimension,d.dimension,d.dimension/8),d!==this.hovered&&d!==this.selected||(a.lineWidth=2,a.strokeStyle="#c10000",a.stroke(),a.fillStyle="white"),a.fill(),a.font=b.getFontString(c.text_font_size,c.text_font_families),a.fillStyle=c.text_color,a.textAlign="center",a.textBaseline="middle",a.fillText(d.element.symbol,d.x+d.dimension/2,d.y+d.dimension/2)},e.click=function(){this.hovered&&(this.selected=this.hovered,this.repaint())},e.touchstart=function(a){this.mousemove(a)},e.mousemove=function(a){var b=a.p.x;a=a.p.y,this.hovered=void 0;for(var d=0,e=this.cells.length;e>d;d++){var f=this.cells[d];if(c.isBetween(b,f.x,f.x+f.dimension)&&c.isBetween(a,f.y,f.y+f.dimension)){this.hovered=f;break}}this.repaint()},e.mouseout=function(){this.hovered=void 0,this.repaint()}}(ChemDoodle,ChemDoodle.extensions,ChemDoodle.math,document),function(a,b,c){a.png={},a.png.create=function(a){c.open(b.getElementById(a.id).toDataURL("image/png"))}}(ChemDoodle.io,document,window),function(a,b){a.file={},a.file.content=function(a,c){b.get(a,"",c)}}(ChemDoodle.io,ChemDoodle.lib.jQuery),function(a,b,c,d,e,f){b.SERVER_URL="http://ichemlabs.cloud.chemdoodle.com/icl_cdc_v060001/WebHQ",b.inRelay=!1,b.asynchronous=!0,b.INFO={userAgent:navigator.userAgent,v_cwc:a.getVersion(),v_jQuery:e.version,v_jQuery_ui:e.ui?e.ui.version:"N/A"};var g=new c.JSONInterpreter,h=new d.Queue;b.useHTTPS=function(){b.SERVER_URL="https"+b.SERVER_URL.substr(4)},b._contactServer=function(a,c,d,f,g){this.inRelay?h.enqueue({call:a,content:c,options:d,callback:f,errorback:g}):(b.inRelay=!0,e.ajax({dataType:"text",type:"POST",data:JSON.stringify({call:a,content:c,options:d,info:b.INFO}),url:this.SERVER_URL,success:function(a){a=JSON.parse(a),a.message&&alert(a.message),b.inRelay=!1,f&&a.content&&!a.stop&&f(a.content),a.stop&&g&&g(),h.isEmpty()||(a=h.dequeue(),b.contactServer(a.call,a.content,a.options,a.callback,a.errorback))},error:function(){if("checkForUpdates"!=a&&alert("Call failed. Please try again. If you continue to see this message, please contact iChemLabs customer support."),b.inRelay=!1,g&&g(),!h.isEmpty()){var c=h.dequeue();b.contactServer(c.call,c.content,c.options,c.callback,c.errorback)}},xhrFields:{withCredentials:!0},async:b.asynchronous}))},b.authenticate=function(a,b,c,d){this._contactServer("authenticate",{credential:a},b,function(a){c(a)},d)},b.calculate=function(a,b,c,d){this._contactServer("calculate",{mol:g.molTo(a)},b,function(a){c(a)},d)},b.createLewisDotStructure=function(a,b,c,d){this._contactServer("createLewisDot",{mol:g.molTo(a)},b,function(a){c(g.molFrom(a.mol))},d)},b.generateImage=function(a,b,c,d){this._contactServer("generateImage",{mol:g.molTo(a)},b,function(a){c(a.link)},d)},b.generateIUPACName=function(a,b,c,d){this._contactServer("generateIUPACName",{mol:g.molTo(a)},b,function(a){c(a.iupac)},d)},b.getAd=function(a,b){this._contactServer("getAd",{},{},function(b){a(b.image_url,b.target_url)},b)},b.getMoleculeFromContent=function(a,b,c,d){this._contactServer("getMoleculeFromContent",{content:a},b,function(a){for(var b=!1,d=0,e=a.mol.a.length;e>d;d++)if(0!==a.mol.a[d].z){b=!0;break}if(b)for(d=0,e=a.mol.a.length;e>d;d++)a.mol.a[d].x/=20,a.mol.a[d].y/=20,a.mol.a[d].z/=20;c(g.molFrom(a.mol))},d)},b.getMoleculeFromDatabase=function(a,b,c,d){this._contactServer("getMoleculeFromDatabase",{query:a},b,function(a){if(3===b.dimension)for(var d=0,e=a.mol.a.length;e>d;d++)a.mol.a[d].x/=20,a.mol.a[d].y/=-20,a.mol.a[d].z/=20;c(g.molFrom(a.mol))},d)},b.getOptimizedPDBStructure=function(a,b,c,e){this._contactServer("getOptimizedPDBStructure",{id:a},b,function(a){var b;b=a.mol?g.molFrom(a.mol):new d.Molecule,b.chains=g.chainsFrom(a.ribbons),b.fromJSON=!0,c(b)},e)},b.getZeoliteFromIZA=function(a,b,c,d){this._contactServer("getZeoliteFromIZA",{query:a},b,function(a){c(ChemDoodle.readCIF(a.cif,b.xSuper,b.ySuper,b.zSuper))},d)},b.isGraphIsomorphism=function(a,b,c,d,e){this._contactServer("isGraphIsomorphism",{arrow:g.molTo(a),target:g.molTo(b)},c,function(a){d(a.value)},e)},b.isSubgraphIsomorphism=function(a,b,c,d,e){this._contactServer("isSubgraphIsomorphism",{arrow:g.molTo(a),target:g.molTo(b)},c,function(a){d(a.value)},e)},b.kekulize=function(a,b,c,d){this._contactServer("kekulize",{mol:g.molTo(a)},b,function(a){c(g.molFrom(a.mol))},d)},b.optimize=function(a,b,c,d){this._contactServer("optimize",{mol:g.molTo(a)},b,function(d){if(d=g.molFrom(d.mol),2===b.dimension){for(var e=0,f=d.atoms.length;f>e;e++)a.atoms[e].x=d.atoms[e].x,a.atoms[e].y=d.atoms[e].y;c()}else if(3===b.dimension){for(e=0,f=d.atoms.length;f>e;e++)d.atoms[e].x/=20,d.atoms[e].y/=-20,d.atoms[e].z/=20;c(d)}},d)},b.readIUPACName=function(a,b,c,d){this._contactServer("readIUPACName",{iupac:a},b,function(a){c(g.molFrom(a.mol))},d)},b.readSMILES=function(a,b,c,d){this._contactServer("readSMILES",{smiles:a},b,function(a){c(g.molFrom(a.mol))},d)},b.saveFile=function(a,b,c,d){this._contactServer("saveFile",{mol:g.molTo(a)},b,function(a){c(a.link)},d)},b.simulate13CNMR=function(b,c,d,e){c.nucleus="C",c.isotope=13,this._contactServer("simulateNMR",{mol:g.molTo(b)},c,function(b){d(a.readJCAMP(b.jcamp))},e)},b.simulate1HNMR=function(b,c,d,e){c.nucleus="H",c.isotope=1,this._contactServer("simulateNMR",{mol:g.molTo(b)},c,function(b){d(a.readJCAMP(b.jcamp))},e)},b.simulateMassParentPeak=function(b,c,d,e){this._contactServer("simulateMassParentPeak",{mol:g.molTo(b)},c,function(b){d(a.readJCAMP(b.jcamp))},e)},b.writeSMILES=function(a,b,c,d){this._contactServer("writeSMILES",{mol:g.molTo(a)},b,function(a){c(a.smiles)},d)},b.version=function(a,b,c){this._contactServer("version",{},a,function(a){b(a.value)},c)},b.checkForUpdates=function(a){this._contactServer("checkForUpdates",{
value:f.href},a,function(){},function(){})}}(ChemDoodle,ChemDoodle.iChemLabs,ChemDoodle.io,ChemDoodle.structures,ChemDoodle.lib.jQuery,location);